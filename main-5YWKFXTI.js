var Bw=Object.create;var pc=Object.defineProperty,Uw=Object.defineProperties,Vw=Object.getOwnPropertyDescriptor,Fw=Object.getOwnPropertyDescriptors,Ww=Object.getOwnPropertyNames,xp=Object.getOwnPropertySymbols,qw=Object.getPrototypeOf,Ep=Object.prototype.hasOwnProperty,Gw=Object.prototype.propertyIsEnumerable;var fc=(n,e,t)=>e in n?pc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Te=(n,e)=>{for(var t in e||(e={}))Ep.call(e,t)&&fc(n,t,e[t]);if(xp)for(var t of xp(e))Gw.call(e,t)&&fc(n,t,e[t]);return n},Rt=(n,e)=>Uw(n,Fw(e));var co=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var B=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var zw=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ww(e))!Ep.call(n,i)&&i!==t&&pc(n,i,{get:()=>e[i],enumerable:!(r=Vw(e,i))||r.enumerable});return n};var Zw=(n,e,t)=>(t=n!=null?Bw(qw(n)):{},zw(e||!n||!n.__esModule?pc(t,"default",{value:n,enumerable:!0}):t,n));var m=(n,e,t)=>fc(n,typeof e!="symbol"?e+"":e,t);var Tv=B((Bi,Ui)=>{"use strict";(function(n){var e=typeof Bi=="object"&&Bi&&!Bi.nodeType&&Bi,t=typeof Ui=="object"&&Ui&&!Ui.nodeType&&Ui,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(n=r);var i,o=2147483647,s=36,a=1,c=26,l=38,u=700,d=72,f=128,p="-",h=/^xn--/,w=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=s-a,y=Math.floor,I=String.fromCharCode,M;function S(N){throw new RangeError(E[N])}function x(N,L){for(var j=N.length,A=[];j--;)A[j]=L(N[j]);return A}function T(N,L){var j=N.split("@"),A="";j.length>1&&(A=j[0]+"@",N=j[1]),N=N.replace(b,".");var F=N.split("."),K=x(F,L).join(".");return A+K}function C(N){for(var L=[],j=0,A=N.length,F,K;j<A;)F=N.charCodeAt(j++),F>=55296&&F<=56319&&j<A?(K=N.charCodeAt(j++),(K&64512)==56320?L.push(((F&1023)<<10)+(K&1023)+65536):(L.push(F),j--)):L.push(F);return L}function _(N){return x(N,function(L){var j="";return L>65535&&(L-=65536,j+=I(L>>>10&1023|55296),L=56320|L&1023),j+=I(L),j}).join("")}function k(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:s}function U(N,L){return N+22+75*(N<26)-((L!=0)<<5)}function V(N,L,j){var A=0;for(N=j?y(N/u):N>>1,N+=y(N/L);N>v*c>>1;A+=s)N=y(N/v);return y(A+(v+1)*N/(N+l))}function Q(N){var L=[],j=N.length,A,F=0,K=f,z=d,we,se,Se,Ne,xe,Re,at,Ze,Nt;for(we=N.lastIndexOf(p),we<0&&(we=0),se=0;se<we;++se)N.charCodeAt(se)>=128&&S("not-basic"),L.push(N.charCodeAt(se));for(Se=we>0?we+1:0;Se<j;){for(Ne=F,xe=1,Re=s;Se>=j&&S("invalid-input"),at=k(N.charCodeAt(Se++)),(at>=s||at>y((o-F)/xe))&&S("overflow"),F+=at*xe,Ze=Re<=z?a:Re>=z+c?c:Re-z,!(at<Ze);Re+=s)Nt=s-Ze,xe>y(o/Nt)&&S("overflow"),xe*=Nt;A=L.length+1,z=V(F-Ne,A,Ne==0),y(F/A)>o-K&&S("overflow"),K+=y(F/A),F%=A,L.splice(F++,0,K)}return _(L)}function fe(N){var L,j,A,F,K,z,we,se,Se,Ne,xe,Re=[],at,Ze,Nt,Xs;for(N=C(N),at=N.length,L=f,j=0,K=d,z=0;z<at;++z)xe=N[z],xe<128&&Re.push(I(xe));for(A=F=Re.length,F&&Re.push(p);A<at;){for(we=o,z=0;z<at;++z)xe=N[z],xe>=L&&xe<we&&(we=xe);for(Ze=A+1,we-L>y((o-j)/Ze)&&S("overflow"),j+=(we-L)*Ze,L=we,z=0;z<at;++z)if(xe=N[z],xe<L&&++j>o&&S("overflow"),xe==L){for(se=j,Se=s;Ne=Se<=K?a:Se>=K+c?c:Se-K,!(se<Ne);Se+=s)Xs=se-Ne,Nt=s-Ne,Re.push(I(U(Ne+Xs%Nt,0))),se=y(Xs/Nt);Re.push(I(U(se,0))),K=V(j,Ze,A==F),j=0,++A}++j,++L}return Re.join("")}function O(N){return T(N,function(L){return h.test(L)?Q(L.slice(4).toLowerCase()):L})}function H(N){return T(N,function(L){return w.test(L)?"xn--"+fe(L):L})}if(i={version:"1.4.1",ucs2:{decode:C,encode:_},decode:Q,encode:fe,toASCII:H,toUnicode:O},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(Ui.exports==e)t.exports=i;else for(M in i)i.hasOwnProperty(M)&&(e[M]=i[M]);else n.punycode=i})(Bi)});var Hr=B((fW,_v)=>{"use strict";_v.exports=TypeError});var Dv=B(()=>{"use strict"});var Ns=B((mW,Zv)=>{"use strict";var Pf=typeof Map=="function"&&Map.prototype,Ef=Object.getOwnPropertyDescriptor&&Pf?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Dl=Pf&&Ef&&typeof Ef.get=="function"?Ef.get:null,Mv=Pf&&Map.prototype.forEach,Nf=typeof Set=="function"&&Set.prototype,Cf=Object.getOwnPropertyDescriptor&&Nf?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ml=Nf&&Cf&&typeof Cf.get=="function"?Cf.get:null,Av=Nf&&Set.prototype.forEach,DD=typeof WeakMap=="function"&&WeakMap.prototype,ks=DD?WeakMap.prototype.has:null,MD=typeof WeakSet=="function"&&WeakSet.prototype,Ps=MD?WeakSet.prototype.has:null,AD=typeof WeakRef=="function"&&WeakRef.prototype,kv=AD?WeakRef.prototype.deref:null,kD=Boolean.prototype.valueOf,PD=Object.prototype.toString,ND=Function.prototype.toString,RD=String.prototype.match,Rf=String.prototype.slice,Fn=String.prototype.replace,LD=String.prototype.toUpperCase,Pv=String.prototype.toLowerCase,Uv=RegExp.prototype.test,Nv=Array.prototype.concat,Zt=Array.prototype.join,OD=Array.prototype.slice,Rv=Math.floor,_f=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Sf=Object.getOwnPropertySymbols,Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Be=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Vi||!0)?Symbol.toStringTag:null,Vv=Object.prototype.propertyIsEnumerable,Lv=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Ov(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||Uv.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-Rv(-n):Rv(n);if(r!==n){var i=String(r),o=Rf.call(e,i.length+1);return Fn.call(i,t,"$&_")+"."+Fn.call(Fn.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Fn.call(e,t,"$&_")}var Mf=Dv(),jv=Mf.custom,Hv=qv(jv)?jv:null,Fv={__proto__:null,double:'"',single:"'"},jD={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Zv.exports=function n(e,t,r,i){var o=t||{};if(mn(o,"quoteStyle")&&!mn(Fv,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(mn(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=mn(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(mn(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(mn(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return zv(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?Ov(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return a?Ov(e,l):l}var u=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return Af(e)?"[Array]":"[Object]";var d=tM(o,r);if(typeof i>"u")i=[];else if(Gv(i,e)>=0)return"[Circular]";function f(V,Q,fe){if(Q&&(i=OD.call(i),i.push(Q)),fe){var O={depth:o.depth};return mn(o,"quoteStyle")&&(O.quoteStyle=o.quoteStyle),n(V,O,r+1,i)}return n(V,o,r+1,i)}if(typeof e=="function"&&!$v(e)){var p=GD(e),h=_l(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(h.length>0?" { "+Zt.call(h,", ")+" }":"")}if(qv(e)){var w=Vi?Fn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Df.call(e);return typeof e=="object"&&!Vi?As(w):w}if(JD(e)){for(var b="<"+Pv.call(String(e.nodeName)),E=e.attributes||[],v=0;v<E.length;v++)b+=" "+E[v].name+"="+Wv(HD(E[v].value),"double",o);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+Pv.call(String(e.nodeName))+">",b}if(Af(e)){if(e.length===0)return"[]";var y=_l(e,f);return d&&!eM(y)?"["+kf(y,d)+"]":"[ "+Zt.call(y,", ")+" ]"}if(BD(e)){var I=_l(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Vv.call(e,"cause")?"{ ["+String(e)+"] "+Zt.call(Nv.call("[cause]: "+f(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Zt.call(I,", ")+" }"}if(typeof e=="object"&&s){if(Hv&&typeof e[Hv]=="function"&&Mf)return Mf(e,{depth:u-r});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(zD(e)){var M=[];return Mv&&Mv.call(e,function(V,Q){M.push(f(Q,e,!0)+" => "+f(V,e))}),Bv("Map",Dl.call(e),M,d)}if(YD(e)){var S=[];return Av&&Av.call(e,function(V){S.push(f(V,e))}),Bv("Set",Ml.call(e),S,d)}if(ZD(e))return Tf("WeakMap");if(QD(e))return Tf("WeakSet");if(KD(e))return Tf("WeakRef");if(VD(e))return As(f(Number(e)));if(WD(e))return As(f(_f.call(e)));if(FD(e))return As(kD.call(e));if(UD(e))return As(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!$D(e)&&!$v(e)){var x=_l(e,f),T=Lv?Lv(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",_=!T&&Be&&Object(e)===e&&Be in e?Rf.call(Wn(e),8,-1):C?"Object":"",k=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",U=k+(_||C?"["+Zt.call(Nv.call([],_||[],C||[]),": ")+"] ":"");return x.length===0?U+"{}":d?U+"{"+kf(x,d)+"}":U+"{ "+Zt.call(x,", ")+" }"}return String(e)};function Wv(n,e,t){var r=t.quoteStyle||e,i=Fv[r];return i+n+i}function HD(n){return Fn.call(String(n),/"/g,"&quot;")}function Af(n){return Wn(n)==="[object Array]"&&(!Be||!(typeof n=="object"&&Be in n))}function $D(n){return Wn(n)==="[object Date]"&&(!Be||!(typeof n=="object"&&Be in n))}function $v(n){return Wn(n)==="[object RegExp]"&&(!Be||!(typeof n=="object"&&Be in n))}function BD(n){return Wn(n)==="[object Error]"&&(!Be||!(typeof n=="object"&&Be in n))}function UD(n){return Wn(n)==="[object String]"&&(!Be||!(typeof n=="object"&&Be in n))}function VD(n){return Wn(n)==="[object Number]"&&(!Be||!(typeof n=="object"&&Be in n))}function FD(n){return Wn(n)==="[object Boolean]"&&(!Be||!(typeof n=="object"&&Be in n))}function qv(n){if(Vi)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!Df)return!1;try{return Df.call(n),!0}catch{}return!1}function WD(n){if(!n||typeof n!="object"||!_f)return!1;try{return _f.call(n),!0}catch{}return!1}var qD=Object.prototype.hasOwnProperty||function(n){return n in this};function mn(n,e){return qD.call(n,e)}function Wn(n){return PD.call(n)}function GD(n){if(n.name)return n.name;var e=RD.call(ND.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function Gv(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}function zD(n){if(!Dl||!n||typeof n!="object")return!1;try{Dl.call(n);try{Ml.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function ZD(n){if(!ks||!n||typeof n!="object")return!1;try{ks.call(n,ks);try{Ps.call(n,Ps)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function KD(n){if(!kv||!n||typeof n!="object")return!1;try{return kv.call(n),!0}catch{}return!1}function YD(n){if(!Ml||!n||typeof n!="object")return!1;try{Ml.call(n);try{Dl.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function QD(n){if(!Ps||!n||typeof n!="object")return!1;try{Ps.call(n,Ps);try{ks.call(n,ks)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function JD(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function zv(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return zv(Rf.call(n,0,e.maxStringLength),e)+r}var i=jD[e.quoteStyle||"single"];i.lastIndex=0;var o=Fn.call(Fn.call(n,i,"\\$1"),/[\x00-\x1f]/g,XD);return Wv(o,"single",e)}function XD(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+LD.call(e.toString(16))}function As(n){return"Object("+n+")"}function Tf(n){return n+" { ? }"}function Bv(n,e,t,r){var i=r?kf(t,r):Zt.call(t,", ");return n+" ("+e+") {"+i+"}"}function eM(n){for(var e=0;e<n.length;e++)if(Gv(n[e],`
`)>=0)return!1;return!0}function tM(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=Zt.call(Array(n.indent+1)," ");else return null;return{base:t,prev:Zt.call(Array(e+1),t)}}function kf(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+Zt.call(n,","+t)+`
`+e.prev}function _l(n,e){var t=Af(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=mn(n,i)?e(n[i],n):""}var o=typeof Sf=="function"?Sf(n):[],s;if(Vi){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var c in n)mn(n,c)&&(t&&String(Number(c))===c&&c<n.length||Vi&&s["$"+c]instanceof Symbol||(Uv.call(/[^\w$]/,c)?r.push(e(c,n)+": "+e(n[c],n)):r.push(c+": "+e(n[c],n))));if(typeof Sf=="function")for(var l=0;l<o.length;l++)Vv.call(n,o[l])&&r.push("["+e(o[l])+"]: "+e(n[o[l]],n));return r}});var Yv=B((gW,Kv)=>{"use strict";var nM=Ns(),rM=Hr(),Al=function(n,e,t){for(var r=n,i;(i=r.next)!=null;r=i)if(i.key===e)return r.next=i.next,t||(i.next=n.next,n.next=i),i},iM=function(n,e){if(n){var t=Al(n,e);return t&&t.value}},oM=function(n,e,t){var r=Al(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},sM=function(n,e){return n?!!Al(n,e):!1},aM=function(n,e){if(n)return Al(n,e,!0)};Kv.exports=function(){var e,t={assert:function(r){if(!t.has(r))throw new rM("Side channel does not contain "+nM(r))},delete:function(r){var i=e&&e.next,o=aM(e,r);return o&&i&&i===o&&(e=void 0),!!o},get:function(r){return iM(e,r)},has:function(r){return sM(e,r)},set:function(r,i){e||(e={next:void 0}),oM(e,r,i)}};return t}});var Lf=B((yW,Qv)=>{"use strict";Qv.exports=Object});var Xv=B((vW,Jv)=>{"use strict";Jv.exports=Error});var tI=B((IW,eI)=>{"use strict";eI.exports=EvalError});var rI=B((bW,nI)=>{"use strict";nI.exports=RangeError});var oI=B((wW,iI)=>{"use strict";iI.exports=ReferenceError});var aI=B((xW,sI)=>{"use strict";sI.exports=SyntaxError});var cI=B((EW,lI)=>{"use strict";lI.exports=URIError});var dI=B((CW,uI)=>{"use strict";uI.exports=Math.abs});var pI=B((SW,fI)=>{"use strict";fI.exports=Math.floor});var mI=B((TW,hI)=>{"use strict";hI.exports=Math.max});var yI=B((_W,gI)=>{"use strict";gI.exports=Math.min});var II=B((DW,vI)=>{"use strict";vI.exports=Math.pow});var wI=B((MW,bI)=>{"use strict";bI.exports=Math.round});var EI=B((AW,xI)=>{"use strict";xI.exports=Number.isNaN||function(e){return e!==e}});var SI=B((kW,CI)=>{"use strict";var lM=EI();CI.exports=function(e){return lM(e)||e===0?e:e<0?-1:1}});var _I=B((PW,TI)=>{"use strict";TI.exports=Object.getOwnPropertyDescriptor});var Of=B((NW,DI)=>{"use strict";var kl=_I();if(kl)try{kl([],"length")}catch{kl=null}DI.exports=kl});var AI=B((RW,MI)=>{"use strict";var Pl=Object.defineProperty||!1;if(Pl)try{Pl({},"a",{value:1})}catch{Pl=!1}MI.exports=Pl});var PI=B((LW,kI)=>{"use strict";kI.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var LI=B((OW,RI)=>{"use strict";var NI=typeof Symbol<"u"&&Symbol,cM=PI();RI.exports=function(){return typeof NI!="function"||typeof Symbol!="function"||typeof NI("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:cM()}});var jf=B((jW,OI)=>{"use strict";OI.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Hf=B((HW,jI)=>{"use strict";var uM=Lf();jI.exports=uM.getPrototypeOf||null});var BI=B(($W,$I)=>{"use strict";var dM="Function.prototype.bind called on incompatible ",fM=Object.prototype.toString,pM=Math.max,hM="[object Function]",HI=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},mM=function(e,t){for(var r=[],i=t||0,o=0;i<e.length;i+=1,o+=1)r[o]=e[i];return r},gM=function(n,e){for(var t="",r=0;r<n.length;r+=1)t+=n[r],r+1<n.length&&(t+=e);return t};$I.exports=function(e){var t=this;if(typeof t!="function"||fM.apply(t)!==hM)throw new TypeError(dM+t);for(var r=mM(arguments,1),i,o=function(){if(this instanceof i){var u=t.apply(this,HI(r,arguments));return Object(u)===u?u:this}return t.apply(e,HI(r,arguments))},s=pM(0,t.length-r.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+gM(a,",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i}});var Rs=B((BW,UI)=>{"use strict";var yM=BI();UI.exports=Function.prototype.bind||yM});var Nl=B((UW,VI)=>{"use strict";VI.exports=Function.prototype.call});var $f=B((VW,FI)=>{"use strict";FI.exports=Function.prototype.apply});var qI=B((FW,WI)=>{"use strict";WI.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var zI=B((WW,GI)=>{"use strict";var vM=Rs(),IM=$f(),bM=Nl(),wM=qI();GI.exports=wM||vM.call(bM,IM)});var Bf=B((qW,ZI)=>{"use strict";var xM=Rs(),EM=Hr(),CM=Nl(),SM=zI();ZI.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new EM("a function is required");return SM(xM,CM,e)}});var eb=B((GW,XI)=>{"use strict";var TM=Bf(),KI=Of(),QI;try{QI=[].__proto__===Array.prototype}catch(n){if(!n||typeof n!="object"||!("code"in n)||n.code!=="ERR_PROTO_ACCESS")throw n}var Uf=!!QI&&KI&&KI(Object.prototype,"__proto__"),JI=Object,YI=JI.getPrototypeOf;XI.exports=Uf&&typeof Uf.get=="function"?TM([Uf.get]):typeof YI=="function"?function(e){return YI(e==null?e:JI(e))}:!1});var ob=B((zW,ib)=>{"use strict";var tb=jf(),nb=Hf(),rb=eb();ib.exports=tb?function(e){return tb(e)}:nb?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return nb(e)}:rb?function(e){return rb(e)}:null});var ab=B((ZW,sb)=>{"use strict";var _M=Function.prototype.call,DM=Object.prototype.hasOwnProperty,MM=Rs();sb.exports=MM.call(_M,DM)});var Ol=B((KW,pb)=>{"use strict";var Y,AM=Lf(),kM=Xv(),PM=tI(),NM=rI(),RM=oI(),Gi=aI(),qi=Hr(),LM=cI(),OM=dI(),jM=pI(),HM=mI(),$M=yI(),BM=II(),UM=wI(),VM=SI(),db=Function,Vf=function(n){try{return db('"use strict"; return ('+n+").constructor;")()}catch{}},Ls=Of(),FM=AI(),Ff=function(){throw new qi},WM=Ls?(function(){try{return arguments.callee,Ff}catch{try{return Ls(arguments,"callee").get}catch{return Ff}}})():Ff,Fi=LI()(),Pe=ob(),qM=Hf(),GM=jf(),fb=$f(),Os=Nl(),Wi={},zM=typeof Uint8Array>"u"||!Pe?Y:Pe(Uint8Array),$r={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Y:ArrayBuffer,"%ArrayIteratorPrototype%":Fi&&Pe?Pe([][Symbol.iterator]()):Y,"%AsyncFromSyncIteratorPrototype%":Y,"%AsyncFunction%":Wi,"%AsyncGenerator%":Wi,"%AsyncGeneratorFunction%":Wi,"%AsyncIteratorPrototype%":Wi,"%Atomics%":typeof Atomics>"u"?Y:Atomics,"%BigInt%":typeof BigInt>"u"?Y:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Y:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Y:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":kM,"%eval%":eval,"%EvalError%":PM,"%Float16Array%":typeof Float16Array>"u"?Y:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Y:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Y:FinalizationRegistry,"%Function%":db,"%GeneratorFunction%":Wi,"%Int8Array%":typeof Int8Array>"u"?Y:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Y:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Fi&&Pe?Pe(Pe([][Symbol.iterator]())):Y,"%JSON%":typeof JSON=="object"?JSON:Y,"%Map%":typeof Map>"u"?Y:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Fi||!Pe?Y:Pe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":AM,"%Object.getOwnPropertyDescriptor%":Ls,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Y:Promise,"%Proxy%":typeof Proxy>"u"?Y:Proxy,"%RangeError%":NM,"%ReferenceError%":RM,"%Reflect%":typeof Reflect>"u"?Y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Y:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Fi||!Pe?Y:Pe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Fi&&Pe?Pe(""[Symbol.iterator]()):Y,"%Symbol%":Fi?Symbol:Y,"%SyntaxError%":Gi,"%ThrowTypeError%":WM,"%TypedArray%":zM,"%TypeError%":qi,"%Uint8Array%":typeof Uint8Array>"u"?Y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Y:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Y:Uint32Array,"%URIError%":LM,"%WeakMap%":typeof WeakMap>"u"?Y:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Y:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Y:WeakSet,"%Function.prototype.call%":Os,"%Function.prototype.apply%":fb,"%Object.defineProperty%":FM,"%Object.getPrototypeOf%":qM,"%Math.abs%":OM,"%Math.floor%":jM,"%Math.max%":HM,"%Math.min%":$M,"%Math.pow%":BM,"%Math.round%":UM,"%Math.sign%":VM,"%Reflect.getPrototypeOf%":GM};if(Pe)try{null.error}catch(n){lb=Pe(Pe(n)),$r["%Error.prototype%"]=lb}var lb,ZM=function n(e){var t;if(e==="%AsyncFunction%")t=Vf("async function () {}");else if(e==="%GeneratorFunction%")t=Vf("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Vf("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&Pe&&(t=Pe(i.prototype))}return $r[e]=t,t},cb={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},js=Rs(),Rl=ab(),KM=js.call(Os,Array.prototype.concat),YM=js.call(fb,Array.prototype.splice),ub=js.call(Os,String.prototype.replace),Ll=js.call(Os,String.prototype.slice),QM=js.call(Os,RegExp.prototype.exec),JM=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,XM=/\\(\\)?/g,eA=function(e){var t=Ll(e,0,1),r=Ll(e,-1);if(t==="%"&&r!=="%")throw new Gi("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new Gi("invalid intrinsic syntax, expected opening `%`");var i=[];return ub(e,JM,function(o,s,a,c){i[i.length]=a?ub(c,XM,"$1"):s||o}),i},tA=function(e,t){var r=e,i;if(Rl(cb,r)&&(i=cb[r],r="%"+i[0]+"%"),Rl($r,r)){var o=$r[r];if(o===Wi&&(o=ZM(r)),typeof o>"u"&&!t)throw new qi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Gi("intrinsic "+e+" does not exist!")};pb.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new qi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new qi('"allowMissing" argument must be a boolean');if(QM(/^%?[^%]*%?$/,e)===null)throw new Gi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=eA(e),i=r.length>0?r[0]:"",o=tA("%"+i+"%",t),s=o.name,a=o.value,c=!1,l=o.alias;l&&(i=l[0],YM(r,KM([0,1],l)));for(var u=1,d=!0;u<r.length;u+=1){var f=r[u],p=Ll(f,0,1),h=Ll(f,-1);if((p==='"'||p==="'"||p==="`"||h==='"'||h==="'"||h==="`")&&p!==h)throw new Gi("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(c=!0),i+="."+f,s="%"+i+"%",Rl($r,s))a=$r[s];else if(a!=null){if(!(f in a)){if(!t)throw new qi("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ls&&u+1>=r.length){var w=Ls(a,f);d=!!w,d&&"get"in w&&!("originalValue"in w.get)?a=w.get:a=a[f]}else d=Rl(a,f),a=a[f];d&&!c&&($r[s]=a)}}return a}});var Wf=B((YW,gb)=>{"use strict";var hb=Ol(),mb=Bf(),nA=mb([hb("%String.prototype.indexOf%")]);gb.exports=function(e,t){var r=hb(e,!!t);return typeof r=="function"&&nA(e,".prototype.")>-1?mb([r]):r}});var qf=B((QW,vb)=>{"use strict";var rA=Ol(),Hs=Wf(),iA=Ns(),oA=Hr(),yb=rA("%Map%",!0),sA=Hs("Map.prototype.get",!0),aA=Hs("Map.prototype.set",!0),lA=Hs("Map.prototype.has",!0),cA=Hs("Map.prototype.delete",!0),uA=Hs("Map.prototype.size",!0);vb.exports=!!yb&&function(){var e,t={assert:function(r){if(!t.has(r))throw new oA("Side channel does not contain "+iA(r))},delete:function(r){if(e){var i=cA(e,r);return uA(e)===0&&(e=void 0),i}return!1},get:function(r){if(e)return sA(e,r)},has:function(r){return e?lA(e,r):!1},set:function(r,i){e||(e=new yb),aA(e,r,i)}};return t}});var bb=B((JW,Ib)=>{"use strict";var dA=Ol(),Hl=Wf(),fA=Ns(),jl=qf(),pA=Hr(),zi=dA("%WeakMap%",!0),hA=Hl("WeakMap.prototype.get",!0),mA=Hl("WeakMap.prototype.set",!0),gA=Hl("WeakMap.prototype.has",!0),yA=Hl("WeakMap.prototype.delete",!0);Ib.exports=zi?function(){var e,t,r={assert:function(i){if(!r.has(i))throw new pA("Side channel does not contain "+fA(i))},delete:function(i){if(zi&&i&&(typeof i=="object"||typeof i=="function")){if(e)return yA(e,i)}else if(jl&&t)return t.delete(i);return!1},get:function(i){return zi&&i&&(typeof i=="object"||typeof i=="function")&&e?hA(e,i):t&&t.get(i)},has:function(i){return zi&&i&&(typeof i=="object"||typeof i=="function")&&e?gA(e,i):!!t&&t.has(i)},set:function(i,o){zi&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new zi),mA(e,i,o)):jl&&(t||(t=jl()),t.set(i,o))}};return r}:jl});var Gf=B((XW,wb)=>{"use strict";var vA=Hr(),IA=Ns(),bA=Yv(),wA=qf(),xA=bb(),EA=xA||wA||bA;wb.exports=function(){var e,t={assert:function(r){if(!t.has(r))throw new vA("Side channel does not contain "+IA(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,i){e||(e=EA()),e.set(r,i)}};return t}});var $l=B((e6,xb)=>{"use strict";var CA=String.prototype.replace,SA=/%20/g,zf={RFC1738:"RFC1738",RFC3986:"RFC3986"};xb.exports={default:zf.RFC3986,formatters:{RFC1738:function(n){return CA.call(n,SA,"+")},RFC3986:function(n){return String(n)}},RFC1738:zf.RFC1738,RFC3986:zf.RFC3986}});var Jf=B((t6,Sb)=>{"use strict";var TA=$l(),_A=Gf(),Zf=Object.prototype.hasOwnProperty,Br=Array.isArray,Ul=_A(),Eb=function(e,t){return Ul.set(e,t),e},Bl=function(e){return Ul.has(e)},Yf=function(e){return Ul.get(e)},Cb=function(e,t){Ul.set(e,t)},Kt=(function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),DA=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(Br(r)){for(var i=[],o=0;o<r.length;++o)typeof r[o]<"u"&&i.push(r[o]);t.obj[t.prop]=i}}},Qf=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},MA=function n(e,t,r){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(Br(e))e.push(t);else if(e&&typeof e=="object")if(Bl(e)){var i=Yf(e)+1;e[i]=t,Cb(e,i)}else(r&&(r.plainObjects||r.allowPrototypes)||!Zf.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object"){if(Bl(t)){for(var o=Object.keys(t),s=r&&r.plainObjects?{__proto__:null,0:e}:{0:e},a=0;a<o.length;a++){var c=parseInt(o[a],10);s[c+1]=t[o[a]]}return Eb(s,Yf(t)+1)}return[e].concat(t)}var l=e;return Br(e)&&!Br(t)&&(l=Qf(e,r)),Br(e)&&Br(t)?(t.forEach(function(u,d){if(Zf.call(e,d)){var f=e[d];f&&typeof f=="object"&&u&&typeof u=="object"?e[d]=n(f,u,r):e.push(u)}else e[d]=u}),e):Object.keys(t).reduce(function(u,d){var f=t[d];return Zf.call(u,d)?u[d]=n(u[d],f,r):u[d]=f,u},l)},AA=function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},kA=function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Kf=1024,PA=function(e,t,r,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var a="",c=0;c<s.length;c+=Kf){for(var l=s.length>=Kf?s.slice(c,c+Kf):s,u=[],d=0;d<l.length;++d){var f=l.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===TA.RFC1738&&(f===40||f===41)){u[u.length]=l.charAt(d);continue}if(f<128){u[u.length]=Kt[f];continue}if(f<2048){u[u.length]=Kt[192|f>>6]+Kt[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=Kt[224|f>>12]+Kt[128|f>>6&63]+Kt[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=Kt[240|f>>18]+Kt[128|f>>12&63]+Kt[128|f>>6&63]+Kt[128|f&63]}a+=u.join("")}return a},NA=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var o=t[i],s=o.obj[o.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],u=s[l];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(t.push({obj:s,prop:l}),r.push(u))}return DA(t),e},RA=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},LA=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},OA=function(e,t,r,i){if(Bl(e)){var o=Yf(e)+1;return e[o]=t,Cb(e,o),e}var s=[].concat(e,t);return s.length>r?Eb(Qf(s,{plainObjects:i}),s.length-1):s},jA=function(e,t){if(Br(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)};Sb.exports={arrayToObject:Qf,assign:AA,combine:OA,compact:NA,decode:kA,encode:PA,isBuffer:LA,isOverflow:Bl,isRegExp:RA,maybeMap:jA,merge:MA}});var kb=B((n6,Ab)=>{"use strict";var _b=Gf(),Vl=Jf(),$s=$l(),HA=Object.prototype.hasOwnProperty,Db={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Yt=Array.isArray,$A=Array.prototype.push,Mb=function(n,e){$A.apply(n,Yt(e)?e:[e])},BA=Date.prototype.toISOString,Tb=$s.default,De={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Vl.encode,encodeValuesOnly:!1,filter:void 0,format:Tb,formatter:$s.formatters[Tb],indices:!1,serializeDate:function(e){return BA.call(e)},skipNulls:!1,strictNullHandling:!1},UA=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Xf={},VA=function n(e,t,r,i,o,s,a,c,l,u,d,f,p,h,w,b,E,v){for(var y=e,I=v,M=0,S=!1;(I=I.get(Xf))!==void 0&&!S;){var x=I.get(e);if(M+=1,typeof x<"u"){if(x===M)throw new RangeError("Cyclic object value");S=!0}typeof I.get(Xf)>"u"&&(M=0)}if(typeof u=="function"?y=u(t,y):y instanceof Date?y=p(y):r==="comma"&&Yt(y)&&(y=Vl.maybeMap(y,function(j){return j instanceof Date?p(j):j})),y===null){if(s)return l&&!b?l(t,De.encoder,E,"key",h):t;y=""}if(UA(y)||Vl.isBuffer(y)){if(l){var T=b?t:l(t,De.encoder,E,"key",h);return[w(T)+"="+w(l(y,De.encoder,E,"value",h))]}return[w(t)+"="+w(String(y))]}var C=[];if(typeof y>"u")return C;var _;if(r==="comma"&&Yt(y))b&&l&&(y=Vl.maybeMap(y,l)),_=[{value:y.length>0?y.join(",")||null:void 0}];else if(Yt(u))_=u;else{var k=Object.keys(y);_=d?k.sort(d):k}var U=c?String(t).replace(/\./g,"%2E"):String(t),V=i&&Yt(y)&&y.length===1?U+"[]":U;if(o&&Yt(y)&&y.length===0)return V+"[]";for(var Q=0;Q<_.length;++Q){var fe=_[Q],O=typeof fe=="object"&&fe&&typeof fe.value<"u"?fe.value:y[fe];if(!(a&&O===null)){var H=f&&c?String(fe).replace(/\./g,"%2E"):String(fe),N=Yt(y)?typeof r=="function"?r(V,H):V:V+(f?"."+H:"["+H+"]");v.set(e,M);var L=_b();L.set(Xf,v),Mb(C,n(O,N,r,i,o,s,a,c,r==="comma"&&b&&Yt(y)?null:l,u,d,f,p,h,w,b,E,L))}}return C},FA=function(e){if(!e)return De;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||De.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=$s.default;if(typeof e.format<"u"){if(!HA.call($s.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=$s.formatters[r],o=De.filter;(typeof e.filter=="function"||Yt(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in Db?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=De.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:De.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:De.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:De.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:De.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?De.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:De.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:De.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:De.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:De.encodeValuesOnly,filter:o,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:De.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:De.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:De.strictNullHandling}};Ab.exports=function(n,e){var t=n,r=FA(e),i,o;typeof r.filter=="function"?(o=r.filter,t=o("",t)):Yt(r.filter)&&(o=r.filter,i=o);var s=[];if(typeof t!="object"||t===null)return"";var a=Db[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var l=_b(),u=0;u<i.length;++u){var d=i[u],f=t[d];r.skipNulls&&f===null||Mb(s,VA(f,d,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}var p=s.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),p.length>0?h+p:""}});var Lb=B((r6,Rb)=>{"use strict";var qn=Jf(),Fl=Object.prototype.hasOwnProperty,Pb=Array.isArray,Ee={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:qn.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},WA=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Nb=function(n,e,t){if(n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1)return n.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return n},qA="utf8=%26%2310003%3B",GA="utf8=%E2%9C%93",zA=function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,t.throwOnLimitExceeded?o+1:o);if(t.throwOnLimitExceeded&&s.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var a=-1,c,l=t.charset;if(t.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===GA?l="utf-8":s[c]===qA&&(l="iso-8859-1"),a=c,c=s.length);for(c=0;c<s.length;++c)if(c!==a){var u=s[c],d=u.indexOf("]="),f=d===-1?u.indexOf("="):d+1,p,h;if(f===-1?(p=t.decoder(u,Ee.decoder,l,"key"),h=t.strictNullHandling?null:""):(p=t.decoder(u.slice(0,f),Ee.decoder,l,"key"),p!==null&&(h=qn.maybeMap(Nb(u.slice(f+1),t,Pb(r[p])?r[p].length:0),function(b){return t.decoder(b,Ee.decoder,l,"value")}))),h&&t.interpretNumericEntities&&l==="iso-8859-1"&&(h=WA(String(h))),u.indexOf("[]=")>-1&&(h=Pb(h)?[h]:h),p!==null){var w=Fl.call(r,p);w&&t.duplicates==="combine"?r[p]=qn.combine(r[p],h,t.arrayLimit,t.plainObjects):(!w||t.duplicates==="last")&&(r[p]=h)}}return r},ZA=function(n,e,t,r){var i=0;if(n.length>0&&n[n.length-1]==="[]"){var o=n.slice(0,-1).join("");i=Array.isArray(e)&&e[o]?e[o].length:0}for(var s=r?e:Nb(e,t,i),a=n.length-1;a>=0;--a){var c,l=n[a];if(l==="[]"&&t.parseArrays)qn.isOverflow(s)?c=s:c=t.allowEmptyArrays&&(s===""||t.strictNullHandling&&s===null)?[]:qn.combine([],s,t.arrayLimit,t.plainObjects);else{c=t.plainObjects?{__proto__:null}:{};var u=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,d=t.decodeDotInKeys?u.replace(/%2E/g,"."):u,f=parseInt(d,10);!t.parseArrays&&d===""?c={0:s}:!isNaN(f)&&l!==d&&String(f)===d&&f>=0&&t.parseArrays&&f<=t.arrayLimit?(c=[],c[f]=s):d!=="__proto__"&&(c[d]=s)}s=c}return s},KA=function(e,t){var r=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(t.depth<=0)return!t.plainObjects&&Fl.call(Object.prototype,r)&&!t.allowPrototypes?void 0:[r];var i=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,s=i.exec(r),a=s?r.slice(0,s.index):r,c=[];if(a){if(!t.plainObjects&&Fl.call(Object.prototype,a)&&!t.allowPrototypes)return;c.push(a)}for(var l=0;(s=o.exec(r))!==null&&l<t.depth;){l+=1;var u=s[1].slice(1,-1);if(!t.plainObjects&&Fl.call(Object.prototype,u)&&!t.allowPrototypes)return;c.push(s[1])}if(s){if(t.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+t.depth+" and strictDepth is true");c.push("["+r.slice(s.index)+"]")}return c},YA=function(e,t,r,i){if(e){var o=KA(e,r);if(o)return ZA(o,t,r,i)}},QA=function(e){if(!e)return Ee;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?Ee.charset:e.charset,r=typeof e.duplicates>"u"?Ee.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ee.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ee.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ee.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ee.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ee.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ee.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ee.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ee.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ee.decoder,delimiter:typeof e.delimiter=="string"||qn.isRegExp(e.delimiter)?e.delimiter:Ee.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ee.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ee.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ee.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ee.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ee.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ee.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}};Rb.exports=function(n,e){var t=QA(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?{__proto__:null}:{};for(var r=typeof n=="string"?zA(n,t):n,i=t.plainObjects?{__proto__:null}:{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],c=YA(a,r[a],t,typeof n=="string");i=qn.merge(i,c,t)}return t.allowSparse===!0?i:qn.compact(i)}});var jb=B((i6,Ob)=>{"use strict";var JA=kb(),XA=Lb(),ek=$l();Ob.exports={formats:ek,parse:XA,stringify:JA}});var rp=B(Ki=>{"use strict";var tk=Tv();function gt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var nk=/^([a-z0-9.+-]+:)/i,rk=/:[0-9]*$/,ik=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ok=["<",">",'"',"`"," ","\r",`
`,"	"],sk=["{","}","|","\\","^","`"].concat(ok),ep=["'"].concat(sk),Hb=["%","/","?",";","#"].concat(ep),$b=["/","?","#"],ak=255,Bb=/^[+a-z0-9A-Z_-]{0,63}$/,lk=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ck={javascript:!0,"javascript:":!0},tp={javascript:!0,"javascript:":!0},Zi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},np=jb();function Bs(n,e,t){if(n&&typeof n=="object"&&n instanceof gt)return n;var r=new gt;return r.parse(n,e,t),r}gt.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",o=n.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),n=o.join(i);var a=n;if(a=a.trim(),!t&&n.split("#").length===1){var c=ik.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=np.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=nk.exec(a);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(l&&tp[l])&&(a=a.substr(2),this.slashes=!0)}if(!tp[l]&&(d||l&&!Zi[l])){for(var f=-1,p=0;p<$b.length;p++){var h=a.indexOf($b[p]);h!==-1&&(f===-1||h<f)&&(f=h)}var w,b;f===-1?b=a.lastIndexOf("@"):b=a.lastIndexOf("@",f),b!==-1&&(w=a.slice(0,b),a=a.slice(b+1),this.auth=decodeURIComponent(w)),f=-1;for(var p=0;p<Hb.length;p++){var h=a.indexOf(Hb[p]);h!==-1&&(f===-1||h<f)&&(f=h)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var E=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!E)for(var v=this.hostname.split(/\./),p=0,y=v.length;p<y;p++){var I=v[p];if(I&&!I.match(Bb)){for(var M="",S=0,x=I.length;S<x;S++)I.charCodeAt(S)>127?M+="x":M+=I[S];if(!M.match(Bb)){var T=v.slice(0,p),C=v.slice(p+1),_=I.match(lk);_&&(T.push(_[1]),C.unshift(_[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>ak?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=tk.toASCII(this.hostname));var k=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+k,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!ck[u])for(var p=0,y=ep.length;p<y;p++){var V=ep[p];if(a.indexOf(V)!==-1){var Q=encodeURIComponent(V);Q===V&&(Q=escape(V)),a=a.split(V).join(Q)}}var fe=a.indexOf("#");fe!==-1&&(this.hash=a.substr(fe),a=a.slice(0,fe));var O=a.indexOf("?");if(O!==-1?(this.search=a.substr(O),this.query=a.substr(O+1),e&&(this.query=np.parse(this.query)),a=a.slice(0,O)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Zi[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var k=this.pathname||"",H=this.search||"";this.path=k+H}return this.href=this.format(),this};function uk(n){return typeof n=="string"&&(n=Bs(n)),n instanceof gt?n.format():gt.prototype.format.call(n)}gt.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=np.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Zi[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+i+t+s+r};function dk(n,e){return Bs(n,!1,!0).resolve(e)}gt.prototype.resolve=function(n){return this.resolveObject(Bs(n,!1,!0)).format()};function fk(n,e){return n?Bs(n,!1,!0).resolveObject(e):e}gt.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new gt;e.parse(n,!1,!0),n=e}for(var t=new gt,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];t[o]=this[o]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0;a<s.length;a++){var c=s[a];c!=="protocol"&&(t[c]=n[c])}return Zi[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!Zi[n.protocol]){for(var l=Object.keys(n),u=0;u<l.length;u++){var d=l[u];t[d]=n[d]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!tp[n.protocol]){for(var y=(n.pathname||"").split("/");y.length&&!(n.host=y.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),t.pathname=y.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var f=t.pathname||"",p=t.search||"";t.path=f+p}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var h=t.pathname&&t.pathname.charAt(0)==="/",w=n.host||n.pathname&&n.pathname.charAt(0)==="/",b=w||h||t.host&&n.pathname,E=b,v=t.pathname&&t.pathname.split("/")||[],y=n.pathname&&n.pathname.split("/")||[],I=t.protocol&&!Zi[t.protocol];if(I&&(t.hostname="",t.port=null,t.host&&(v[0]===""?v[0]=t.host:v.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(y[0]===""?y[0]=n.host:y.unshift(n.host)),n.host=null),b=b&&(y[0]===""||v[0]==="")),w)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,v=y;else if(y.length)v||(v=[]),v.pop(),v=v.concat(y),t.search=n.search,t.query=n.query;else if(n.search!=null){if(I){t.host=v.shift(),t.hostname=t.host;var M=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;M&&(t.auth=M.shift(),t.hostname=M.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!v.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var S=v.slice(-1)[0],x=(t.host||n.host||v.length>1)&&(S==="."||S==="..")||S==="",T=0,C=v.length;C>=0;C--)S=v[C],S==="."?v.splice(C,1):S===".."?(v.splice(C,1),T++):T&&(v.splice(C,1),T--);if(!b&&!E)for(;T--;T)v.unshift("..");b&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),x&&v.join("/").substr(-1)!=="/"&&v.push("");var _=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(I){t.hostname=_?"":v.length?v.shift():"",t.host=t.hostname;var M=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;M&&(t.auth=M.shift(),t.hostname=M.shift(),t.host=t.hostname)}return b=b||t.host&&v.length,b&&!_&&v.unshift(""),v.length>0?t.pathname=v.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};gt.prototype.parseHost=function(){var n=this.host,e=rk.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};Ki.parse=Bs;Ki.resolve=dk;Ki.resolveObject=fk;Ki.format=uk;Ki.Url=gt});var Vb=B((Ub,Wl)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof Wl=="object"&&Wl.exports?Wl.exports=e():n.xmlserializer=e()})(Ub,function(){var n=function(f){return f.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},e=function(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t=function(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},r=function(f){var p=f.value;return" "+f.name+'="'+e(p)+'"'},i=function(f){var p=f.tagName;return f.namespaceURI==="http://www.w3.org/1999/xhtml"&&(p=p.toLowerCase()),p},o=function(f,p){var h=Array.prototype.map.call(f.attributes||f.attrs,function(w){return w.name}).indexOf("xmlns")>=0;return!h&&(p||f.namespaceURI!==f.parentNode.namespaceURI)?' xmlns="'+f.namespaceURI+'"':""},s=function(f){return Array.prototype.map.call(f.childNodes,function(p){return d(p)}).join("")},a=function(f,p){var h="<"+i(f);return h+=o(f,p),Array.prototype.forEach.call(f.attributes||f.attrs,function(w){h+=r(w)}),f.childNodes.length>0?(h+=">",h+=s(f),h+="</"+i(f)+">"):h+="/>",h},c=function(f){var p=f.nodeValue||f.value||"";return t(p)},l=function(f){return"<!--"+f.data.replace(/-/g,"&#45;")+"-->"},u=function(f){return"<![CDATA["+f.nodeValue+"]]>"},d=function(f,p){var h=p&&p.rootNode;if(f.nodeName==="#document"||f.nodeName==="#document-fragment")return s(f);if(f.tagName)return a(f,h);if(f.nodeName==="#text")return c(f);if(f.nodeName==="#comment")return l(f);if(f.nodeName==="#cdata-section")return u(f)};return{serializeToString:function(f){return n(d(f,{rootNode:!0}))}}})});var qb=B(Wb=>{"use strict";var pk=function(n){var e=new XMLSerializer;return Array.prototype.map.call(n.childNodes,function(t){return e.serializeToString(t)}).join("")},hk=function(n){if(n.documentElement.tagName==="parsererror"&&n.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml")return n.documentElement;if((n.documentElement.tagName==="xml"||n.documentElement.tagName==="html")&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0];if(n.documentElement.tagName==="html"&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="body"&&n.documentElement.childNodes[0].childNodes&&n.documentElement.childNodes[0].childNodes.length&&n.documentElement.childNodes[0].childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0].childNodes[0]},Fb=[new RegExp(`^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)
?</div>`),new RegExp(`^(.+)
`)],mk=function(n){var e=pk(n),t,r;for(t=0;t<Fb.length;t++)if(r=Fb[t].exec(e),r)return r[1]},gk=function(n){var e;if(n===null)throw new Error("Parse error");var t=hk(n);if(t!==void 0)throw e=mk(t)||"Parse error",new Error(e)};Wb.failOnParseError=function(n){return gk(n),n}});var Us=B(ze=>{"use strict";var yk=rp();ze.getDocumentBaseUrl=function(n){return n.baseURI!=="about:blank"?n.baseURI:null};ze.clone=function(n){var e={},t;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e};ze.cloneArray=function(n){return Array.prototype.slice.apply(n,[0])};ze.joinUrl=function(n,e){return n?yk.resolve(n,e):e};ze.isDataUri=function(n){return/^data:/.test(n)};ze.collectAndReportErrors=function(n){var e=[];return Promise.all(n.map(function(t){return t.catch(function(r){e.push(r)})})).then(function(){return e})};var ip=null,vk=function(n,e){return e===!1||e==="none"||e==="repeated"?((ip===null||e!=="repeated")&&(ip=Date.now()),n+"?_="+ip):n};ze.ajax=function(n,e){return new Promise(function(t,r){var i=new window.XMLHttpRequest,o=ze.joinUrl(e.baseUrl,n),s,a=function(){r({msg:"Unable to load url",url:o})};s=vk(o,e.cache),i.addEventListener("load",function(){i.status===200||i.status===0?t(i.response):a()},!1),i.addEventListener("error",a,!1);try{i.open("GET",s,!0),i.overrideMimeType(e.mimeType),i.send(null)}catch{a()}})};ze.binaryAjax=function(n,e){var t=ze.clone(e);return t.mimeType="text/plain; charset=x-user-defined",ze.ajax(n,t).then(function(r){for(var i="",o=0;o<r.length;o++)i+=String.fromCharCode(r.charCodeAt(o)&255);return i})};var Ik=function(n){var e=function(t,r){return t.substring(0,r.length)===r};return e(n,"<?xml")||e(n,"<svg")?"image/svg+xml":"image/png"};ze.getDataURIForImageURL=function(n,e){return ze.binaryAjax(n,e).then(function(t){var r=btoa(t),i=Ik(t);return"data:"+i+";base64,"+r})};var op=[],bk=function(n){return op.indexOf(n)<0&&op.push(n),op.indexOf(n)};ze.memoize=function(n,e,t){if(typeof t!="object")throw new Error("cacheBucket is not an object");return function(){var r=Array.prototype.slice.call(arguments),i=e(r),o=bk(n),s;return t[o]&&t[o][i]?t[o][i]:(s=n.apply(null,r),t[o]=t[o]||{},t[o][i]=s,s)}}});var Zb=B(zb=>{"use strict";var Vs=Us(),wk=function(n,e){var t=null;n.hasAttribute("src")?t=n.getAttribute("src"):n.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=n.getAttributeNS("http://www.w3.org/1999/xlink","href"):n.hasAttribute("href")&&(t=n.getAttribute("href"));var r=Vs.getDocumentBaseUrl(n.ownerDocument),i=Vs.clone(e);return!i.baseUrl&&r&&(i.baseUrl=r),Vs.getDataURIForImageURL(t,i).then(function(o){return o},function(o){throw{resourceType:"image",url:o.url,msg:"Unable to load image "+o.url}})},xk=function(n){return n.filter(function(e){var t=null;return e.hasAttribute("src")?t=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(t=e.getAttribute("href")),t!==null&&!Vs.isDataUri(t)})},Ek=function(n){return Array.prototype.filter.call(n,function(e){return e.type==="image"})},Gb=function(n){return Array.prototype.slice.call(n)};zb.inline=function(n,e){var t=Gb(n.getElementsByTagName("img")),r=Gb(n.getElementsByTagName("image")),i=Ek(n.getElementsByTagName("input"));t=t.concat(r),t=t.concat(i);var o=xk(t);return Vs.collectAndReportErrors(o.map(function(s){return wk(s,e).then(function(a){s.attributes.src?s.attributes.src.value=a:s.attributes["xlink:href"]?s.attributes["xlink:href"].value=a:s.attributes.href&&(s.attributes.href.value=a)})}))}});var Yb=B(Kb=>{"use strict";var ql=Us(),Ck=function(n,e){var t=n.attributes.src.value,r=ql.getDocumentBaseUrl(n.ownerDocument),i=ql.clone(e);return!i.baseUrl&&r&&(i.baseUrl=r),ql.ajax(t,i).catch(function(o){throw{resourceType:"script",url:o.url,msg:"Unable to load script "+o.url}})},Sk=function(n){return n.replace(/<\//g,"<\\/")},Tk=function(n,e){n.attributes.removeNamedItem("src"),n.textContent=Sk(e)},_k=function(n){var e=n.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})};Kb.inline=function(n,e){var t=_k(n);return ql.collectAndReportErrors(t.map(function(r){return Ck(r,e).then(function(i){Tk(r,i)})}))}});var Gl=B(Gn=>{"use strict";Gn.unquoteString=function(n){var e=/^"(.*)"$/,t=/^'(.*)'$/;return e.test(n)?n.replace(e,"$1"):t.test(n)?n.replace(t,"$1"):n};Gn.rulesForCssText=function(n,e){var t=document.implementation.createHTMLDocument(""),r=document.createElement("style"),i;return r.textContent=n,e&&e.nonce&&(r.nonce=e.nonce),t.body.appendChild(r),i=r.sheet.cssRules,Array.prototype.slice.call(i)};Gn.cssRulesToText=function(n){return n.reduce(function(e,t){return e+t.cssText},"")};Gn.exchangeRule=function(n,e,t,r){var i=n.indexOf(e);n[i]=Gn.rulesForCssText(t,r)[0]};Gn.changeFontFaceRuleSrc=function(n,e,t,r){var i="@font-face { font-family: "+e.style.getPropertyValue("font-family")+"; ";e.style.getPropertyValue("font-style")&&(i+="font-style: "+e.style.getPropertyValue("font-style")+"; "),e.style.getPropertyValue("font-weight")&&(i+="font-weight: "+e.style.getPropertyValue("font-weight")+"; "),e.style.getPropertyValue("unicode-range")&&(i+="unicode-range: "+e.style.getPropertyValue("unicode-range")+"; "),i+="src: "+t+"}",Gn.exchangeRule(n,e,i,r)}});var Qb=B(Fs=>{"use strict";var Dk=Gl(),Mk=function(n){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return n.replace(e,"$1")};Fs.extractCssUrl=function(n){var e=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/,t;if(!e.test(n))throw new Error("Invalid url");return t=e.exec(n)[1],Dk.unquoteString(Mk(t))};var Ak=function(n){var e=`\\s*(?:"[^"]*"|'[^']*'|[^\\(]+)\\s*`,t="(url\\("+e+"\\)|[^,\\s]+)",r="(?:\\s*"+t+")+",i="^\\s*("+r+")(?:\\s*,\\s*("+r+"))*\\s*$",o=new RegExp(r,"g"),s,a=[],c=function(l){var u=new RegExp(t,"g"),d=[],f;for(f=u.exec(l);f;)d.push(f[1]),f=u.exec(l);return d};if(n.match(new RegExp(i))){for(s=o.exec(n);s;)a.push(c(s[0])),s=o.exec(n);return a}return[]},kk=function(n){var e,t;for(e=0;e<n.length;e++)try{return t=Fs.extractCssUrl(n[e]),{url:t,idx:e}}catch{}};Fs.parse=function(n){var e=Ak(n);return e.map(function(t){var r=kk(t);return r?{preUrl:t.slice(0,r.idx),url:r.url,postUrl:t.slice(r.idx+1)}:{preUrl:t}})};Fs.serialize=function(n){var e=n.map(function(t){var r=[].concat(t.preUrl);return t.url&&r.push('url("'+t.url+'")'),t.postUrl&&(r=r.concat(t.postUrl)),r.join(" ")});return e.join(", ")}});var Xb=B((Jb,sp)=>{"use strict";(function(n){if(typeof Jb=="object"&&typeof sp<"u")sp.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.cssFontFaceSrc=n()}})(function(){var n,e,t;return(function r(i,o,s){function a(u,d){if(!o[u]){if(!i[u]){var f=typeof co=="function"&&co;if(!d&&f)return f(u,!0);if(c)return c(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var h=o[u]={exports:{}};i[u][0].call(h.exports,function(w){var b=i[u][1][w];return a(b||w)},h,h.exports,r,i,o,s)}return o[u].exports}for(var c=typeof co=="function"&&co,l=0;l<s.length;l++)a(s[l]);return a})({1:[function(r,i,o){"use strict";function s(l,u){function d(){this.constructor=l}d.prototype=u.prototype,l.prototype=new d}function a(l,u,d,f){this.message=l,this.expected=u,this.found=d,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}s(a,Error),a.buildMessage=function(l,u){var d={literal:function(v){return'"'+p(v.text)+'"'},class:function(v){var y="",I;for(I=0;I<v.parts.length;I++)y+=v.parts[I]instanceof Array?h(v.parts[I][0])+"-"+h(v.parts[I][1]):h(v.parts[I]);return"["+(v.inverted?"^":"")+y+"]"},any:function(v){return"any character"},end:function(v){return"end of input"},other:function(v){return v.description}};function f(v){return v.charCodeAt(0).toString(16).toUpperCase()}function p(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+f(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+f(y)})}function h(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+f(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+f(y)})}function w(v){return d[v.type](v)}function b(v){var y=new Array(v.length),I,M;for(I=0;I<v.length;I++)y[I]=w(v[I]);if(y.sort(),y.length>0){for(I=1,M=1;I<y.length;I++)y[I-1]!==y[I]&&(y[M]=y[I],M++);y.length=M}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function E(v){return v?'"'+p(v)+'"':"end of input"}return"Expected "+b(l)+" but "+E(u)+" found."};function c(l,u){u=u!==void 0?u:{};var d={},f={start:vp},p=vp,h="",w=function(){return[]},b=",",E=Ze(",",!1),v=function(D,R){return[D].concat(R)},y=function(D){return[D]},I=function(D,R){return{url:D,format:R}},M=function(D){return{url:D}},S="url(",x=Ze("url(",!1),T=")",C=Ze(")",!1),_=function(D){return D},k="format(",U=Ze("format(",!1),V="local(",Q=Ze("local(",!1),fe=function(D){return{local:D}},O=/^[^)]/,H=Nt([")"],!0,!1),N=function(D){return $w.extractValue(D.join(""))},L=/^[ \t\r\n\f]/,j=Nt([" ","	","\r",`
`,"\f"],!1,!1),A=0,F=0,K=[{line:1,column:1}],z=0,we=[],se=0,Se;if("startRule"in u){if(!(u.startRule in f))throw new Error(`Can't start parsing from rule "`+u.startRule+'".');p=f[u.startRule]}function Ne(){return l.substring(F,A)}function xe(){return lo(F,A)}function Re(D,R){throw R=R!==void 0?R:lo(F,A),yp([Rw(D)],l.substring(F,A),R)}function at(D,R){throw R=R!==void 0?R:lo(F,A),Lw(D,R)}function Ze(D,R){return{type:"literal",text:D,ignoreCase:R}}function Nt(D,R,q){return{type:"class",parts:D,inverted:R,ignoreCase:q}}function Xs(){return{type:"any"}}function Nw(){return{type:"end"}}function Rw(D){return{type:"other",description:D}}function gp(D){var R=K[D],q;if(R)return R;for(q=D-1;!K[q];)q--;for(R=K[q],R={line:R.line,column:R.column};q<D;)l.charCodeAt(q)===10?(R.line++,R.column=1):R.column++,q++;return K[D]=R,R}function lo(D,R){var q=gp(D),te=gp(R);return{start:{offset:D,line:q.line,column:q.column},end:{offset:R,line:te.line,column:te.column}}}function yt(D){A<z||(A>z&&(z=A,we=[]),we.push(D))}function Lw(D,R){return new a(D,null,null,R)}function yp(D,R,q){return new a(a.buildMessage(D,R),D,R,q)}function vp(){var D,R;return D=Ip(),D===d&&(D=A,R=h,R!==d&&(F=D,R=w()),D=R),D}function Ip(){var D,R,q,te,dc,Jn;if(D=A,R=bp(),R!==d){for(q=[],te=qr();te!==d;)q.push(te),te=qr();if(q!==d)if(l.charCodeAt(A)===44?(te=b,A++):(te=d,se===0&&yt(E)),te!==d){for(dc=[],Jn=qr();Jn!==d;)dc.push(Jn),Jn=qr();dc!==d?(Jn=Ip(),Jn!==d?(F=D,R=v(R,Jn),D=R):(A=D,D=d)):(A=D,D=d)}else A=D,D=d;else A=D,D=d}else A=D,D=d;return D===d&&(D=A,R=bp(),R!==d&&(F=D,R=y(R)),D=R),D}function bp(){var D;return D=Ow(),D===d&&(D=Hw()),D}function Ow(){var D,R,q,te;if(D=A,R=wp(),R!==d){if(q=[],te=qr(),te!==d)for(;te!==d;)q.push(te),te=qr();else q=d;q!==d?(te=jw(),te!==d?(F=D,R=I(R,te),D=R):(A=D,D=d)):(A=D,D=d)}else A=D,D=d;return D===d&&(D=A,R=wp(),R!==d&&(F=D,R=M(R)),D=R),D}function wp(){var D,R,q,te;return D=A,l.substr(A,4)===S?(R=S,A+=4):(R=d,se===0&&yt(x)),R!==d?(q=uc(),q!==d?(l.charCodeAt(A)===41?(te=T,A++):(te=d,se===0&&yt(C)),te!==d?(F=D,R=_(q),D=R):(A=D,D=d)):(A=D,D=d)):(A=D,D=d),D}function jw(){var D,R,q,te;return D=A,l.substr(A,7)===k?(R=k,A+=7):(R=d,se===0&&yt(U)),R!==d?(q=uc(),q!==d?(l.charCodeAt(A)===41?(te=T,A++):(te=d,se===0&&yt(C)),te!==d?(F=D,R=_(q),D=R):(A=D,D=d)):(A=D,D=d)):(A=D,D=d),D}function Hw(){var D,R,q,te;return D=A,l.substr(A,6)===V?(R=V,A+=6):(R=d,se===0&&yt(Q)),R!==d?(q=uc(),q!==d?(l.charCodeAt(A)===41?(te=T,A++):(te=d,se===0&&yt(C)),te!==d?(F=D,R=fe(q),D=R):(A=D,D=d)):(A=D,D=d)):(A=D,D=d),D}function uc(){var D,R,q;if(D=A,R=[],O.test(l.charAt(A))?(q=l.charAt(A),A++):(q=d,se===0&&yt(H)),q!==d)for(;q!==d;)R.push(q),O.test(l.charAt(A))?(q=l.charAt(A),A++):(q=d,se===0&&yt(H));else R=d;return R!==d&&(F=D,R=N(R)),D=R,D}function qr(){var D;return L.test(l.charAt(A))?(D=l.charAt(A),A++):(D=d,se===0&&yt(j)),D}var $w=r("../util");if(Se=p(),Se!==d&&A===l.length)return Se;throw Se!==d&&A<l.length&&yt(Nw()),yp(we,z<l.length?l.charAt(z):null,z<l.length?lo(z,z+1):lo(z,z))}i.exports={SyntaxError:a,parse:c}},{"../util":3}],2:[function(r,i,o){var s=r("./grammar");o.SyntaxError=function(a,c){this.message=a,this.offset=c},o.parse=function(a){try{return s.parse(a)}catch(c){throw new o.SyntaxError(c.message,c.offset)}},o.serialize=function(a){return a.map(function(c){var l;return c.url?(l='url("'+c.url+'")',c.format&&(l+=' format("'+c.format+'")')):l='local("'+c.local+'")',l}).join(", ")}},{"./grammar":1}],3:[function(r,i,o){var s=function(c){var l=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return c.replace(l,"$1")},a=function(c){var l=/^"(.*)"$/,u=/^'(.*)'$/;return l.test(c)?c.replace(l,"$1"):u.test(c)?c.replace(u,"$1"):c};o.extractValue=function(c){return a(s(c))}},{}]},{},[2])(2)})});var lw=B(Yi=>{"use strict";var Pt=Us(),Ws=Gl(),zl=Qb(),Zl=Xb(),tw=function(n,e,t){n.style.setProperty(e,t,n.style.getPropertyPriority(e))},nw=function(n){return n.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})},rw=function(n){var e=[];return n.forEach(function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})}),e},iw=function(n){return n.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})},ow=function(n){return n.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})},sw=function(n){var e=[];return n.forEach(function(t,r){t.url&&!Pt.isDataUri(t.url)&&e.push(r)}),e},aw=function(n){var e=[];return n.forEach(function(t,r){t.url&&!Pt.isDataUri(t.url)&&e.push(r)}),e};Yi.adjustPathsOfCssResources=function(n,e,t){var r=nw(e),i=rw(r),o=!1;return i.forEach(function(s){var a=zl.parse(s.value),c=sw(a),l;c.length>0&&(c.forEach(function(u){var d=a[u].url,f=Pt.joinUrl(n,d);a[u].url=f}),l=zl.serialize(a),tw(s.rule,s.property,l),o=!0)}),iw(e).forEach(function(s){var a=s.style.getPropertyValue("src"),c,l;try{c=Zl.parse(a)}catch{return}l=aw(c),l.length>0&&(l.forEach(function(u){var d=c[u].url,f=Pt.joinUrl(n,d);c[u].url=f}),Ws.changeFontFaceRuleSrc(e,s,Zl.serialize(c,t),t),o=!0)}),ow(e).forEach(function(s){var a=s.href,c=Pt.joinUrl(n,a);Ws.exchangeRule(e,s,"@import url("+c+");",t),o=!0}),o};var ew=function(n,e,t){var r=n.indexOf(e);n.splice(r,1),t.forEach(function(i,o){n.splice(r+o,0,i)})},Pk=function(n,e,t,r){var i=e.href,o;return i=Ws.unquoteString(i),o=Pt.joinUrl(r.baseUrl,i),t.indexOf(o)>=0?(ew(n,e,[]),Promise.resolve([])):(t.push(o),Pt.ajax(i,r).then(function(s){var a=Ws.rulesForCssText(s,r);return Yi.loadCSSImportsForRules(a,t,r).then(function(c){return Yi.adjustPathsOfCssResources(i,a,r),ew(n,e,a),c.errors})},function(s){throw{resourceType:"stylesheet",url:s.url,msg:"Unable to load stylesheet "+s.url}}))};Yi.loadCSSImportsForRules=function(n,e,t){var r=ow(n),i=[],o=!1;return Promise.all(r.map(function(s){return Pk(n,s,e,t).then(function(a){i=i.concat(a),o=!0},function(a){i.push(a)})})).then(function(){return{hasChanges:o,errors:i}})};var Nk=function(n,e){var t=zl.parse(n),r=sw(t),i=!1;return Pt.collectAndReportErrors(r.map(function(o){var s=t[o].url;return Pt.getDataURIForImageURL(s,e).then(function(a){t[o].url=a,i=!0},function(a){throw{resourceType:"backgroundImage",url:a.url,msg:"Unable to load background-image "+a.url}})})).then(function(o){return{backgroundValue:zl.serialize(t),hasChanges:i,errors:o}})},Rk=function(n,e){var t=nw(n),r=rw(t),i=[],o=!1;return Promise.all(r.map(function(s){return Nk(s.value,e).then(function(a){a.hasChanges&&(tw(s.rule,s.property,a.backgroundValue),o=!0),i=i.concat(a.errors)})})).then(function(){return{hasChanges:o,errors:i}})},Lk=function(n,e){var t=!1,r,i;try{r=Zl.parse(n)}catch{r=[]}return i=aw(r),Pt.collectAndReportErrors(i.map(function(o){var s=r[o],a=s.format||"woff";return Pt.binaryAjax(s.url,e).then(function(c){var l=btoa(c);s.url="data:font/"+a+";base64,"+l,t=!0},function(c){throw{resourceType:"fontFace",url:c.url,msg:"Unable to load font-face "+c.url}})})).then(function(o){return{srcDeclarationValue:Zl.serialize(r),hasChanges:t,errors:o}})},Ok=function(n,e){var t=iw(n),r=[],i=!1;return Promise.all(t.map(function(o){var s=o.style.getPropertyValue("src");return Lk(s,e).then(function(a){a.hasChanges&&(Ws.changeFontFaceRuleSrc(n,o,a.srcDeclarationValue,e),i=!0),r=r.concat(a.errors)})})).then(function(){return{hasChanges:i,errors:r}})};Yi.loadAndInlineCSSResourcesForRules=function(n,e){var t=!1,r=[];return Promise.all([Rk,Ok].map(function(i){return i(n,e).then(function(o){t=t||o.hasChanges,r=r.concat(o.errors)})})).then(function(){return{hasChanges:t,errors:r}})}});var uw=B(Qt=>{"use strict";var gn=Us(),jk=Zb(),Hk=Yb(),qs=lw(),Kl=Gl(),$k=function(n){return gn.joinUrl(n,".")},Bk=function(n){var e=n.map(function(t,r){return r===n.length-1&&(t={baseUrl:$k(t.baseUrl)}),JSON.stringify(t)});return e},cw=function(n,e){return e.cache!==!1&&e.cache!=="none"&&e.cacheBucket?gn.memoize(n,Bk,e.cacheBucket):n},Uk=function(n,e,t){var r=Kl.rulesForCssText(n,t);return qs.loadCSSImportsForRules(r,e,t).then(function(i){return qs.loadAndInlineCSSResourcesForRules(r,t).then(function(o){var s=i.errors.concat(o.errors),a=i.hasChanges||o.hasChanges;return a&&(n=Kl.cssRulesToText(r)),{hasChanges:a,content:n,errors:s}})})},Vk=function(n,e,t){var r=n.textContent,i=cw(Uk,e);return i(r,t,e).then(function(o){return o.hasChanges&&(n.childNodes[0].nodeValue=o.content),gn.cloneArray(o.errors)})},Fk=function(n){var e=n.getElementsByTagName("style");return Array.prototype.filter.call(e,function(t){return!t.attributes.type||t.attributes.type.value==="text/css"})};Qt.loadAndInlineStyles=function(n,e){var t=Fk(n),r=[],i=[],o;return o=gn.clone(e),o.baseUrl=o.baseUrl||gn.getDocumentBaseUrl(n),Promise.all(t.map(function(s){return Vk(s,o,i).then(function(a){r=r.concat(a)})})).then(function(){return r})};var Wk=function(n,e){var t=n.parentNode,r;e=e.trim(),e&&(r=n.ownerDocument.createElement("style"),r.type="text/css",r.appendChild(n.ownerDocument.createTextNode(e)),t.insertBefore(r,n)),t.removeChild(n)},qk=function(n,e){return gn.ajax(n,e).then(function(t){var r=Kl.rulesForCssText(t,e);return{content:t,cssRules:r}}).then(function(t){var r=qs.adjustPathsOfCssResources(n,t.cssRules,e);return{content:t.content,cssRules:t.cssRules,hasChanges:r}}).then(function(t){return qs.loadCSSImportsForRules(t.cssRules,[],e).then(function(r){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||r.hasChanges,errors:r.errors}})}).then(function(t){return qs.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(r){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||r.hasChanges,errors:t.errors.concat(r.errors)}})}).then(function(t){var r=t.content;return t.hasChanges&&(r=Kl.cssRulesToText(t.cssRules)),{content:r,errors:t.errors}})},Gk=function(n,e){var t=n.attributes.href.value,r=gn.getDocumentBaseUrl(n.ownerDocument),i=gn.clone(e);!i.baseUrl&&r&&(i.baseUrl=r);var o=cw(qk,e);return o(t,i).then(function(s){return{content:s.content,errors:gn.cloneArray(s.errors)}})},zk=function(n){var e=n.getElementsByTagName("link");return Array.prototype.filter.call(e,function(t){return t.attributes.rel&&t.attributes.rel.value==="stylesheet"&&(!t.attributes.type||t.attributes.type.value==="text/css")})};Qt.loadAndInlineCssLinks=function(n,e){var t=zk(n),r=[];return Promise.all(t.map(function(i){return Gk(i,e).then(function(o){Wk(i,o.content+`
`),r=r.concat(o.errors)},function(o){r.push({resourceType:"stylesheet",url:o.url,msg:"Unable to load stylesheet "+o.url})})})).then(function(){return r})};Qt.loadAndInlineImages=jk.inline;Qt.loadAndInlineScript=Hk.inline;Qt.inlineReferences=function(n,e){var t=[],r=[Qt.loadAndInlineImages,Qt.loadAndInlineStyles,Qt.loadAndInlineCssLinks];return e.inlineScripts!==!1&&r.push(Qt.loadAndInlineScript),Promise.all(r.map(function(i){return i(n,e).then(function(o){t=t.concat(o)})})).then(function(){return t})}});var fw=B((dw,Yl)=>{"use strict";(function(n,e){n===void 0&&window!==void 0&&(n=window),typeof define=="function"&&define.amd?define(["url","xmlserializer","sane-domparser-error","inlineresources"],function(t,r,i,o){return n.rasterizeHTML=e(t,r,i,o)}):typeof Yl=="object"&&Yl.exports?Yl.exports=e(rp(),Vb(),qb(),uw()):n.rasterizeHTML=e(n.url,n.xmlserializer,n.sanedomparsererror,n.inlineresources)})(dw,function(n,e,t,r){var i=(function(p){"use strict";var h={},w=[];h.joinUrl=function(v,y){return v?p.resolve(v,y):y},h.getConstantUniqueIdFor=function(v){return w.indexOf(v)<0&&w.push(v),w.indexOf(v)},h.clone=function(v){var y={},I;for(I in v)v.hasOwnProperty(I)&&(y[I]=v[I]);return y};var b=function(v){return typeof v=="object"&&v!==null},E=function(v){return b(v)&&Object.prototype.toString.apply(v).match(/\[object (Canvas|HTMLCanvasElement|OffscreenCanvas)\]/i)};return h.parseOptionalParameters=function(v){var y={canvas:null,options:{}};return v[0]==null||E(v[0])?(y.canvas=v[0]||null,y.options=h.clone(v[1])):y.options=h.clone(v[0]),y},h})(n),o=(function(p){"use strict";var h={},w=function(b,E,v){var y=b[E];return b[E]=function(){var I=Array.prototype.slice.call(arguments);return v.apply(this,[I,y])},y};return h.baseUrlRespectingXhr=function(b,E){var v=function(){var y=new b;return w(y,"open",function(I,M){var S=I.shift(),x=I.shift(),T=p.joinUrl(E,x);return M.apply(this,[S,T].concat(I))}),y};return v},h.finishNotifyingXhr=function(b){var E=0,v=0,y=!1,I,M=new Promise(function(x){I=function(){var T=E-v;T<=0&&y&&x({totalCount:E})}}),S=function(){var x=new b;return w(x,"send",function(T,C){return E+=1,C.apply(this,arguments)}),x.addEventListener("load",function(){v+=1,I()}),x};return S.waitForRequestsToFinish=function(){return y=!0,I(),M},S},h})(i),s=(function(){"use strict";var p={},h=function(S){return Array.prototype.slice.call(S)};p.addClassName=function(S,x){S.className+=" "+x},p.addClassNameRecursively=function(S,x){p.addClassName(S,x),S.parentNode!==S.ownerDocument&&p.addClassNameRecursively(S.parentNode,x)};var w=function(S,x){var T=S.parentStyleSheet,C=h(T.cssRules).indexOf(S);T.insertRule(x,C+1),T.deleteRule(C)},b=function(S,x){var T=S.cssText.replace(/^[^\{]+/,""),C=x+" "+T;w(S,C)},E=function(S){return h(S).reduce(function(x,T){return x+T.cssText},"")},v=function(S){S.textContent=E(S.sheet.cssRules)},y=function(S){var x=document.implementation.createHTMLDocument(""),T=document.createElement("style");T.textContent=S.textContent,x.body.appendChild(T),S.sheet=T.sheet},I=function(S){return"((?:^|[^.#:\\w])|(?=\\W))("+S.join("|")+")(?=\\W|$)"},M=function(S,x,T){var C=I(x);h(S.querySelectorAll("style")).forEach(function(_){typeof _.sheet>"u"&&y(_);var k=h(_.sheet.cssRules).filter(function(U){return U.selectorText&&new RegExp(C,"i").test(U.selectorText)});k.length&&(k.forEach(function(U){var V=U.selectorText.replace(new RegExp(C,"gi"),function(Q,fe,O){return fe+T(O)});V!==U.selectorText&&b(U,V)}),v(_))})};return p.rewriteCssSelectorWith=function(S,x,T){M(S,[x],function(){return T})},p.lowercaseCssTypeSelectors=function(S,x){M(S,x,function(T){return T.toLowerCase()})},p.findHtmlOnlyNodeNames=function(S){var x=S.ownerDocument.createTreeWalker(S,NodeFilter.SHOW_ELEMENT),T={},C={},_;do _=x.currentNode.tagName.toLowerCase(),x.currentNode.namespaceURI==="http://www.w3.org/1999/xhtml"?T[_]=!0:C[_]=!0;while(x.nextNode());return Object.keys(T).filter(function(k){return!C[k]})},p})(),a=(function(p){"use strict";var h={},w=function(E){return Array.prototype.slice.call(E)},b={active:!0,hover:!0,focus:!1,target:!1};return h.fakeUserAction=function(E,v,y){var I=E.querySelector(v),M=":"+y,S="rasterizehtml"+y;I&&(b[y]?p.addClassNameRecursively(I,S):p.addClassName(I,S),p.rewriteCssSelectorWith(E,M,"."+S))},h.persistInputValues=function(E){var v=E.querySelectorAll("input"),y=E.querySelectorAll("textarea"),I=function(M){return M.type==="checkbox"||M.type==="radio"};w(v).filter(I).forEach(function(M){M.checked?M.setAttribute("checked",""):M.removeAttribute("checked")}),w(v).filter(function(M){return!I(M)}).forEach(function(M){M.setAttribute("value",M.value)}),w(y).forEach(function(M){M.textContent=M.value})},h.rewriteTagNameSelectorsToLowerCase=function(E){p.lowercaseCssTypeSelectors(E,p.findHtmlOnlyNodeNames(E))},h})(s),c=(function(p,h,w,b){"use strict";var E={},v=function(O,H,N,L){var j=O.createElement(H);return j.style.visibility="hidden",j.style.width=N+"px",j.style.height=L+"px",j.style.position="absolute",j.style.top=-1e4-L+"px",j.style.left=-1e4-N+"px",O.getElementsByTagName("body")[0].appendChild(j),j},y=function(O){return O>0?new Promise(function(H){setTimeout(H,O)}):Promise.resolve()};E.executeJavascript=function(O,H){return new Promise(function(N){var L=v(b.document,"iframe",H.width,H.height),j=O.outerHTML,A=[],F=H.executeJsTimeout||0,K=function(){b.document.getElementsByTagName("body")[0].removeChild(L)},z=function(){var Ne=L.contentDocument;N({document:Ne,errors:A,cleanUp:K})},we=L.contentWindow.XMLHttpRequest,se=h.finishNotifyingXhr(we),Se=h.baseUrlRespectingXhr(se,H.baseUrl);L.onload=function(){y(F).then(se.waitForRequestsToFinish).then(z)},L.contentDocument.open(),L.contentWindow.XMLHttpRequest=Se,L.contentWindow.onerror=function(Ne){A.push({resourceType:"scriptExecution",msg:Ne})},L.contentDocument.write("<!DOCTYPE html>"),L.contentDocument.write(j),L.contentDocument.close()})};var I=function(O,H,N){var L=O.createElement("iframe");return L.style.width=H+"px",L.style.height=N+"px",L.style.visibility="hidden",L.style.position="absolute",L.style.top=-1e4-N+"px",L.style.left=-1e4-H+"px",L.style.borderWidth=0,L.sandbox="allow-same-origin",L.scrolling="no",L},M=function(O,H,N){var L=Math.floor(O/N),j=Math.floor(H/N);return I(b.document,L,j)},S=function(O,H,N,L){return{width:Math.max(O.width*L,H),height:Math.max(O.height*L,N)}},x=function(O,H){var N=O.querySelector(H);if(N)return N;if(O.ownerDocument.querySelector(H)===O)return O;throw{message:"Clipping selector not found"}},T=function(O,H,N,L,j){var A=Math.max(O.scrollWidth,O.clientWidth),F=Math.max(O.scrollHeight,O.clientHeight),K,z,we,se,Se,Ne,xe,Re;return H?(Ne=x(O,H),xe=Ne.getBoundingClientRect(),K=xe.top,z=xe.left,we=xe.width,se=xe.height):(K=0,z=0,we=A,se=F),Re=S({width:we,height:se},N,L,j),Se=b.getComputedStyle(O.ownerDocument.documentElement).fontSize,{left:z,top:K,width:Re.width,height:Re.height,viewportWidth:A,viewportHeight:F,rootFontSize:Se}},C=function(O,H){var N=O.tagName;return H.querySelector(N)},_=function(O){var H=O.tagName.toLowerCase();return H==="html"||H==="body"?O.outerHTML:'<body style="margin: 0;">'+O.outerHTML+"</body>"};E.calculateDocumentContentSize=function(O,H){return new Promise(function(N,L){var j=H.zoom||1,A;A=M(H.width,H.height,j),b.document.getElementsByTagName("body")[0].appendChild(A),A.onload=function(){var F=A.contentDocument,K;try{K=T(C(O,F),H.clip,H.width,H.height,j),N(K)}catch(z){L(z)}finally{b.document.getElementsByTagName("body")[0].removeChild(A)}},A.contentDocument.open(),A.contentDocument.write("<!DOCTYPE html>"),A.contentDocument.write(_(O)),A.contentDocument.close()})},E.parseHtmlFragment=function(O){var H=b.document.implementation.createHTMLDocument("");H.documentElement.innerHTML=O;var N=H.querySelector("body").firstChild;if(!N)throw"Invalid source";return N};var k=function(O,H){var N=/<html((?:\s+[^>]*)?)>/im.exec(H),L=b.document.implementation.createHTMLDocument(""),j,A,F,K;if(N)for(j="<div"+N[1]+"></div>",L.documentElement.innerHTML=j,F=L.querySelector("div"),A=0;A<F.attributes.length;A++)K=F.attributes[A],O.documentElement.setAttribute(K.name,K.value)};E.parseHTML=function(O){var H=b.document.implementation.createHTMLDocument("");return H.documentElement.innerHTML=O,k(H,O),H};var U=function(O){try{return w.failOnParseError(O)}catch(H){throw{message:"Invalid source",originalError:H}}};E.validateXHTML=function(O){var H=new DOMParser,N=H.parseFromString(O,"application/xml");U(N)};var V=null,Q=function(O,H){return H==="none"||H==="repeated"?((V===null||H!=="repeated")&&(V=Date.now()),O+"?_="+V):O},fe=function(O,H){return new Promise(function(N,L){var j=new window.XMLHttpRequest,A=p.joinUrl(H.baseUrl,O),F=Q(A,H.cache),K=function(z){L({message:"Unable to load page",originalError:z})};j.addEventListener("load",function(){j.status===200||j.status===0?N(j.responseXML):K(j.statusText)},!1),j.addEventListener("error",function(z){K(z)},!1);try{j.open("GET",F,!0),j.responseType="document",j.send(null)}catch(z){K(z)}})};return E.loadDocument=function(O,H){return fe(O,H).then(function(N){return U(N)})},E})(i,o,t,window),l=(function(){"use strict";var p={},h=function(x,T){return T?URL.createObjectURL(new Blob([x],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(x)},w=function(x){x instanceof Blob&&URL.revokeObjectURL(x)},b='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',E=function(x){return new Promise(function(T,C){var _=document.createElement("canvas"),k=new Image;k.onload=function(){var U=_.getContext("2d");try{U.drawImage(k,0,0),_.toDataURL("image/png"),T(!0)}catch{T(!1)}},k.onerror=C,k.src=x})},v=function(){var x=h(b,!0);return E(x).then(function(T){return w(x),T?!1:E(h(b,!1)).then(function(C){return C})},function(){return!1})},y=function(){return new Promise(function(x,T){v().then(function(C){x(!C)},function(){T()})})},I,M=function(){return I===void 0&&(I=y()),I},S=function(x){return M().then(function(T){return h(x,T)})};return p.renderSvg=function(x){return new Promise(function(T,C){var _,k,U=function(){k.onload=null,k.onerror=null},V=function(){_&&w(_)};k=new Image,k.onload=function(){U(),V(),T(k)},k.onerror=function(){V(),C()},S(x).then(function(Q){_=Q,k.src=_},C)})},p})(window),u=(function(p,h,w,b){"use strict";var E={},v=function(C,_){var k=_||1,U={width:C.width,height:C.height,"font-size":C.rootFontSize};return k!==1&&(U.style="transform:scale("+k+"); transform-origin: 0 0;"),U},y=function(C){var _,k,U,V;_=Math.round(C.viewportWidth),k=Math.round(C.viewportHeight),U=-C.left,V=-C.top;var Q={x:U,y:V,width:_,height:k};return Q},I=function(C){var _=C.style||"";C.style=_+"float: left;"},M=function(C){C.externalResourcesRequired=!0},S=function(){return'<style scoped="">html::-webkit-scrollbar { display: none; }</style>'},x=function(C){var _=Object.keys(C);return _.length?" "+_.map(function(k){return k+'="'+C[k]+'"'}).join(" "):""},T=function(C,_,k){var U=b.serializeToString(C);h.validateXHTML(U);var V=y(_);return I(V),M(V),'<svg xmlns="http://www.w3.org/2000/svg"'+x(v(_,k))+">"+S()+"<foreignObject"+x(V)+">"+U+"</foreignObject></svg>"};return E.getSvgForDocument=function(C,_,k){return w.rewriteTagNameSelectorsToLowerCase(C),T(C,_,k)},E.drawDocumentAsSvg=function(C,_){return["hover","active","focus","target"].forEach(function(k){_[k]&&w.fakeUserAction(C,_[k],k)}),h.calculateDocumentContentSize(C,_).then(function(k){return E.getSvgForDocument(C,k,_.zoom)})},E})(i,c,a,e),d=(function(p,h,w,b,E,v){"use strict";var y={},I=function(C){return{message:"Error rendering page",originalError:C}},M=function(C){return E.renderSvg(C).then(function(_){return{image:_,svg:C}},function(_){throw I(_)})},S=function(C,_){try{_.getContext("2d").drawImage(C,0,0)}catch(k){throw I(k)}},x=function(C,_,k){return b.drawDocumentAsSvg(C,k).then(M).then(function(U){return _&&S(U.image,_),U})},T=function(C,_){return h.executeJavascript(C,_).then(function(k){var U=k.document;return w.persistInputValues(U),{document:U,errors:k.errors,cleanUp:k.cleanUp}})};return y.rasterize=function(C,_,k){var U;return U=p.clone(k),U.inlineScripts=k.executeJs===!0,v.inlineReferences(C,U).then(function(V){return k.executeJs?T(C,k).then(function(Q){return{element:Q.document.documentElement,errors:V.concat(Q.errors),cleanUp:Q.cleanUp}}):{element:C,errors:V,cleanUp:function(){}}}).then(function(V){return x(V.element,_,k).then(function(Q){return V.cleanUp(),{image:Q.image,svg:Q.svg,errors:V.errors}})})},y})(i,c,a,u,l,r),f=(function(p,h,w){"use strict";var b={},E=function(S,x){var T=300,C=200,_=S?S.width:T,k=S?S.height:C,U=x.width!==void 0?x.width:_,V=x.height!==void 0?x.height:k;return{width:U,height:V}},v=function(S){var x=E(S.canvas,S.options),T;return T=p.clone(S.options),T.width=x.width,T.height=x.height,T};b.drawDocument=function(){var S=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x),C=S.documentElement?S.documentElement:S;return w.rasterize(C,T.canvas,v(T))};var y=function(S,x,T){var C=h.parseHTML(S);return b.drawDocument(C,x,T)};b.drawHTML=function(){var S=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x);return y(S,T.canvas,T.options)};var I=function(S,x,T){var C=document.implementation.createHTMLDocument("");C.replaceChild(S.documentElement,C.documentElement);var _=T?p.clone(T):{};return T.baseUrl||(_.baseUrl=x),{document:C,options:_}},M=function(S,x,T){return h.loadDocument(S,T).then(function(C){var _=I(C,S,T);return b.drawDocument(_.document,x,_.options)})};return b.drawURL=function(){var S=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x);return M(S,T.canvas,T.options)},b})(i,c,d);return f})});var hc=null;var Cp=1;var Gr=Symbol("SIGNAL");function X(n){let e=hc;return hc=n,e}function ea(){return hc}var gc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sp(n){if(!(na(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cp)){if(!n.producerMustRecompute(n)&&!vc(n)){mc(n);return}n.producerRecomputeValue(n),mc(n)}}function mc(n){n.dirty=!1,n.lastCleanEpoch=Cp}function yc(n){return n&&Tp(n),X(n)}function Tp(n){n.producersTail=void 0,n.recomputing=!0}function _p(n,e){X(e),n&&Dp(n)}function Dp(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(na(n))do t=Ic(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function vc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Sp(t),r!==t.version))return!0}return!1}function ta(n){if(na(n)){let e=n.producers;for(;e!==void 0;)e=Ic(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Ic(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!na(e)){let o=e.producers;for(;o!==void 0;)o=Ic(o)}return t}function na(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Kw(){throw new Error}var Yw=Kw;function bc(n){Yw=n}function Ke(n){return typeof n=="function"}function ra(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ia=ra(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function uo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ke(r))try{r()}catch(o){e=o instanceof ia?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Mp(o)}catch(s){e=e??[],s instanceof ia?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ia(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Mp(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&uo(t,e)}remove(e){let{_finalizers:t}=this;t&&uo(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var wc=Ue.EMPTY;function oa(n){return n instanceof Ue||n&&"closed"in n&&Ke(n.remove)&&Ke(n.add)&&Ke(n.unsubscribe)}function Mp(n){Ke(n)?n():n.unsubscribe()}var vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zr={setTimeout(n,e,...t){let{delegate:r}=zr;return r!=null&&r.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zr;return((e==null?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Ap(n){zr.setTimeout(()=>{let{onUnhandledError:e}=vt;if(e)e(n);else throw n})}function xc(){}var kp=Ec("C",void 0,void 0);function Pp(n){return Ec("E",void 0,n)}function Np(n){return Ec("N",n,void 0)}function Ec(n,e,t){return{kind:n,value:e,error:t}}var Xn=null;function Zr(n){if(vt.useDeprecatedSynchronousErrorHandling){let e=!Xn;if(e&&(Xn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xn;if(Xn=null,t)throw r}}else n()}function Rp(n){vt.useDeprecatedSynchronousErrorHandling&&Xn&&(Xn.errorThrown=!0,Xn.error=n)}var er=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,oa(e)&&e.add(this)):this.destination=Xw}static create(e,t,r){return new Kr(e,t,r)}next(e){this.isStopped?Sc(Np(e),this):this._next(e)}error(e){this.isStopped?Sc(Pp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sc(kp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Qw=Function.prototype.bind;function Cc(n,e){return Qw.call(n,e)}var Tc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){sa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){sa(r)}else sa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){sa(t)}}},Kr=class extends er{constructor(e,t,r){super();let i;if(Ke(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cc(e.next,o),error:e.error&&Cc(e.error,o),complete:e.complete&&Cc(e.complete,o)}):i=e}this.destination=new Tc(i)}};function sa(n){vt.useDeprecatedSynchronousErrorHandling?Rp(n):Ap(n)}function Jw(n){throw n}function Sc(n,e){let{onStoppedNotification:t}=vt;t&&zr.setTimeout(()=>t(n,e))}var Xw={closed:!0,next:xc,error:Jw,complete:xc};var Lp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Op(n){return n}function jp(n){return n.length===0?Op:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Yr=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=tx(t)?t:new Kr(t,r,i);return Zr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Hp(r),new r((i,o)=>{let s=new Kr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Lp](){return this}pipe(...t){return jp(t)(this)}toPromise(t){return t=Hp(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Hp(n){var e;return(e=n??vt.Promise)!==null&&e!==void 0?e:Promise}function ex(n){return n&&Ke(n.next)&&Ke(n.error)&&Ke(n.complete)}function tx(n){return n&&n instanceof er||ex(n)&&oa(n)}function nx(n){return Ke(n==null?void 0:n.lift)}function $p(n){return e=>{if(nx(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bp(n,e,t,r,i){return new _c(n,e,t,r,i)}var _c=class extends er{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Up=ra(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tn=(()=>{class n extends Yr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new aa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Up}next(t){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wc:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,uo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Yr;return t.source=this,t}}return n.create=(e,t)=>new aa(e,t),n})(),aa=class extends tn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:wc}};var fo=class extends tn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function Dc(n,e){return $p((t,r)=>{let i=0;t.subscribe(Bp(r,o=>{r.next(n.call(e,o,i++))}))})}var Mc;function la(){return Mc}function Lt(n){let e=Mc;return Mc=n,e}var Vp=Symbol("NotFound");function Qr(n){return n===Vp||(n==null?void 0:n.name)==="\u0275NotFound"}var Kp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{constructor(t,r){super(qc(t,r));m(this,"code");this.code=t}};function lx(n){return`NG0${Math.abs(n)}`}function qc(n,e){return`${lx(n)}${e?": "+e:""}`}var go=globalThis;function ue(n){for(let e in n)if(n[e]===ue)return e;throw Error("")}function vn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Gc(n,e){return n?e?`${n} ${e}`:n:e||""}var cx=ue({__forward_ref__:ue});function zc(n){return n.__forward_ref__=zc,n.toString=function(){return vn(this())},n}function lt(n){return Yp(n)?n():n}function Yp(n){return typeof n=="function"&&n.hasOwnProperty(cx)&&n.__forward_ref__===zc}function _e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zc(n){return ux(n,Kc)}function ux(n,e){return n.hasOwnProperty(e)&&n[e]||null}function dx(n){let e=(n==null?void 0:n[Kc])??null;return e||null}function kc(n){return n&&n.hasOwnProperty(Pc)?n[Pc]:null}var Kc=ue({\u0275prov:ue}),Pc=ue({\u0275inj:ue}),oe=class{constructor(e,t){m(this,"_desc");m(this,"ngMetadataName","InjectionToken");m(this,"\u0275prov");this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=_e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Qp(n){return n&&!!n.\u0275providers}var Jp=ue({\u0275cmp:ue}),Xp=ue({\u0275dir:ue}),eh=ue({\u0275pipe:ue});var Nc=ue({\u0275fac:ue}),ri=ue({__NG_ELEMENT_ID__:ue}),Fp=ue({__NG_ENV_ID__:ue});function or(n){return Qc(n,"@Component"),n[Jp]||null}function Yc(n){return Qc(n,"@Directive"),n[Xp]||null}function th(n){return Qc(n,"@Pipe"),n[eh]||null}function Qc(n,e){if(n==null)throw new ee(-919,!1)}function nh(n){return typeof n=="string"?n:n==null?"":String(n)}function rh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():nh(n)}var ih=ue({ngErrorCode:ue}),fx=ue({ngErrorMessage:ue}),px=ue({ngTokenPath:ue});function Jc(n,e){return oh("",-200,e)}function ha(n,e){throw new ee(-201,!1)}function oh(n,e,t){let r=new ee(e,n);return r[ih]=e,r[fx]=n,t&&(r[px]=t),r}function hx(n){return n[ih]}var Rc;function sh(){return Rc}function et(n){let e=Rc;return Rc=n,e}function Xc(n,e,t){let r=Zc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ha(n,"")}var mx={},nr=mx,gx="__NG_DI_FLAG__",Lc=class{constructor(e){m(this,"injector");this.injector=e}retrieve(e,t){let r=Xr(t)||0;try{return this.injector.get(e,r&8?null:nr,r)}catch(i){if(Qr(i))return i;throw i}}};function yx(n,e=0){let t=la();if(t===void 0)throw new ee(-203,!1);if(t===null)return Xc(n,void 0,e);{let r=vx(e),i=t.retrieve(n,r);if(Qr(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(sh()||yx)(lt(n),e)}function pe(n,e){return de(n,Xr(e))}function Xr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vx(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Oc(n){let e=[];for(let t=0;t<n.length;t++){let r=lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=Ix(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function Ix(n){return n[gx]}function ei(n,e){let t=n.hasOwnProperty(Nc);return t?n[Nc]:null}function ah(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function lh(n){return n.flat(Number.POSITIVE_INFINITY)}function ma(n,e){n.forEach(t=>Array.isArray(t)?ma(t,e):e(t))}function eu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yo(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ch(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function uh(n,e,t){let r=ii(n,e);return r>=0?n[r|1]=t:(r=~r,ch(n,r,e,t)),r}function ga(n,e){let t=ii(n,e);if(t>=0)return n[t|1]}function ii(n,e){return bx(n,e,1)}function bx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var sr={},In=[],vo=new oe(""),dh=new oe("",-1),tu=new oe(""),ho=class{get(e,t=nr){if(t===nr){let i=oh("",-201);throw i.name="\u0275NotFound",i}return t}};function wx(...n){return{\u0275providers:nu(!0,n),\u0275fromNgModule:!0}}function nu(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ma(e,s=>{let a=s;ua(a,o,[],r)&&(i||(i=[]),i.push(a))}),i!==void 0&&fh(i,o),t}function fh(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ru(i,o=>{e(o,r)})}}function ua(n,e,t,r){if(n=lt(n),!n)return!1;let i=null,o=kc(n),s=!o&&or(n);if(!o&&!s){let c=n.ngModule;if(o=kc(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ua(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ma(o.imports,u=>{ua(u,e,t,r)&&(l||(l=[]),l.push(u))})}finally{}l!==void 0&&fh(l,e)}if(!a){let l=ei(i)||(()=>new i);e({provide:i,useFactory:l,deps:In},i),e({provide:tu,useValue:i,multi:!0},i),e({provide:vo,useValue:()=>de(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;ru(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ru(n,e){for(let t of n)Qp(t)&&(t=t.\u0275providers),Array.isArray(t)?ru(t,e):e(t)}var xx=ue({provide:String,useValue:ue});function ph(n){return n!==null&&typeof n=="object"&&xx in n}function Ex(n){return!!(n&&n.useExisting)}function Cx(n){return!!(n&&n.useFactory)}function da(n){return typeof n=="function"}var Io=new oe(""),ca={},Wp={},Ac;function bo(){return Ac===void 0&&(Ac=new ho),Ac}var It=class{},ti=class extends It{constructor(t,r,i,o){super();m(this,"parent");m(this,"source");m(this,"scopes");m(this,"records",new Map);m(this,"_ngOnDestroyHooks",new Set);m(this,"_onDestroyHooks",[]);m(this,"_destroyed",!1);m(this,"injectorDefTypes");this.parent=r,this.source=i,this.scopes=o,Hc(t,a=>this.processProvider(a)),this.records.set(dh,Jr(void 0,this)),o.has("environment")&&this.records.set(It,Jr(void 0,this));let s=this.records.get(Io);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tu,In,{self:!0}))}get destroyed(){return this._destroyed}retrieve(t,r){let i=Xr(r)||0;try{return this.get(t,nr,i)}catch(o){if(Qr(o))return o;throw o}}destroy(){po(this),this._destroyed=!0;let t=X(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let r=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of r)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(t)}}onDestroy(t){return po(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){po(this);let r=Lt(this),i=et(void 0),o;try{return t()}finally{Lt(r),et(i)}}get(t,r=nr,i){if(po(this),t.hasOwnProperty(Fp))return t[Fp](this);let o=Xr(i),s,a=Lt(this),c=et(void 0);try{if(!(o&4)){let u=this.records.get(t);if(u===void 0){let d=Mx(t)&&Zc(t);d&&this.injectableDefInScope(d)?u=Jr(jc(t),ca):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,o)}let l=o&2?bo():this.parent;return r=o&8&&r===nr?null:r,l.get(t,r)}catch(l){let u=hx(l);throw u===-200||u===-201?new ee(u,null):l}finally{et(c),Lt(a)}}resolveInjectorInitializers(){let t=X(null),r=Lt(this),i=et(void 0),o;try{let s=this.get(vo,In,{self:!0});for(let a of s)a()}finally{Lt(r),et(i),X(t)}}toString(){let t=[],r=this.records;for(let i of r.keys())t.push(vn(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=lt(t);let r=da(t)?t:lt(t&&t.provide),i=Tx(t);if(!da(t)&&t.multi===!0){let o=this.records.get(r);o||(o=Jr(void 0,ca,!0),o.factory=()=>Oc(o.multi),this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}hydrate(t,r,i){let o=X(null);try{if(r.value===Wp)throw Jc(vn(t));return r.value===ca&&(r.value=Wp,r.value=r.factory(void 0,i)),typeof r.value=="object"&&r.value&&Dx(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{X(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let r=lt(t.providedIn);return typeof r=="string"?r==="any"||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(t){let r=this._onDestroyHooks.indexOf(t);r!==-1&&this._onDestroyHooks.splice(r,1)}};function jc(n){let e=Zc(n),t=e!==null?e.factory:ei(n);if(t!==null)return t;if(n instanceof oe)throw new ee(204,!1);if(n instanceof Function)return Sx(n);throw new ee(204,!1)}function Sx(n){if(n.length>0)throw new ee(204,!1);let t=dx(n);return t!==null?()=>t.factory(n):()=>new n}function Tx(n){if(ph(n))return Jr(void 0,n.useValue);{let e=hh(n);return Jr(e,ca)}}function hh(n,e,t){let r;if(da(n)){let i=lt(n);return ei(i)||jc(i)}else if(ph(n))r=()=>lt(n.useValue);else if(Cx(n))r=()=>n.useFactory(...Oc(n.deps||[]));else if(Ex(n))r=(i,o)=>de(lt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=lt(n&&(n.useClass||n.provide));if(_x(n))r=()=>new i(...Oc(n.deps));else return ei(i)||jc(i)}return r}function po(n){if(n.destroyed)throw new ee(205,!1)}function Jr(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _x(n){return!!n.deps}function Dx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Mx(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Hc(n,e){for(let t of n)Array.isArray(t)?Hc(t,e):t&&Qp(t)?Hc(t.\u0275providers,e):e(t)}function ya(n,e){let t;n instanceof ti?(po(n),t=n):t=new Lc(n);let r,i=Lt(t),o=et(void 0);try{return e()}finally{Lt(i),et(o)}}function mh(){return sh()!==void 0||la()!=null}var bt=0,G=1,Z=2,Me=3,ut=4,dt=5,wo=6,rr=7,tt=8,ar=9,on=10,Ye=11,oi=12,iu=13,si=14,wt=15,wn=16,lr=17,Ot=18,xo=19,ou=20,nn=21,va=22,Eo=23,nt=24,Ia=25,Co=26,ft=27,gh=1;var xn=7,So=8,cr=9,Ve=10;function sn(n){return Array.isArray(n)&&typeof n[gh]=="object"}function xt(n){return Array.isArray(n)&&n[gh]===!0}function su(n){return(n.flags&4)!==0}function To(n){return n.componentOffset>-1}function au(n){return(n.flags&1)===1}function ur(n){return!!n.template}function ai(n){return(n[Z]&512)!==0}function dr(n){return(n[Z]&256)===256}var yh="svg",vh="math";function Et(n){for(;Array.isArray(n);)n=n[bt];return n}function Ih(n,e){return Et(e[n])}function En(n,e){return Et(e[n.index])}function lu(n,e){return n.data[e]}function Cn(n,e){let t=e[n];return sn(t)?t:t[bt]}function bh(n){return(n[Z]&4)===4}function ba(n){return(n[Z]&128)===128}function wh(n){return xt(n[Me])}function _o(n,e){return e==null?null:n[e]}function cu(n){n[lr]=0}function uu(n){n[Z]&1024||(n[Z]|=1024,ba(n)&&Mo(n))}function Do(n){var e;return!!(n[Z]&9216||(e=n[nt])!=null&&e.dirty)}function wa(n){var e;(e=n[on].changeDetectionScheduler)==null||e.notify(8),n[Z]&64&&(n[Z]|=1024),Do(n)&&Mo(n)}function Mo(n){var t;(t=n[on].changeDetectionScheduler)==null||t.notify(0);let e=bn(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!ba(e)));)e=bn(e)}function du(n,e){if(dr(n))throw new ee(911,!1);n[nn]===null&&(n[nn]=[]),n[nn].push(e)}function xh(n,e){if(n[nn]===null)return;let t=n[nn].indexOf(e);t!==-1&&n[nn].splice(t,1)}function bn(n){let e=n[Me];return xt(e)?e[Me]:e}function Eh(n){return n[rr]??(n[rr]=[])}function Ch(n){return n.cleanup??(n.cleanup=[])}function Sh(n,e,t,r){let i=Eh(e);i.push(t),n.firstCreatePass&&Ch(n).push(r,i.length-1)}var ne={lFrame:$h(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $c=!1;function Th(){return ne.lFrame.elementDepthCount}function _h(){ne.lFrame.elementDepthCount++}function fu(){ne.lFrame.elementDepthCount--}function Dh(){return ne.bindingsEnabled}function Mh(){return ne.skipHydrationRootTNode!==null}function pu(n){return ne.skipHydrationRootTNode===n}function hu(){ne.skipHydrationRootTNode=null}function Le(){return ne.lFrame.lView}function li(){return ne.lFrame.tView}function an(){let n=mu();for(;n!==null&&n.type===64;)n=n.parent;return n}function mu(){return ne.lFrame.currentTNode}function Ah(){let n=ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ao(n,e){let t=ne.lFrame;t.currentTNode=n,t.isParent=e}function gu(){return ne.lFrame.isParent}function kh(){ne.lFrame.isParent=!1}function yu(){return $c}function vu(n){let e=$c;return $c=n,e}function Ph(n){return ne.lFrame.bindingIndex=n}function Nh(n){let e=ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Rh(){return ne.lFrame.inI18n}function Lh(n,e){let t=ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,xa(e)}function Oh(){return ne.lFrame.currentDirectiveIndex}function xa(n){ne.lFrame.currentDirectiveIndex=n}function jh(n){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Iu(){return ne.lFrame.currentQueryIndex}function Ea(n){ne.lFrame.currentQueryIndex=n}function Ax(n){let e=n[G];return e.type===2?e.declTNode:e.type===1?n[dt]:null}function bu(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Ax(o),i===null||(o=o[si],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ne.lFrame=Hh();return r.currentTNode=e,r.lView=n,!0}function Ca(n){let e=Hh(),t=n[G];ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Hh(){let n=ne.lFrame,e=n===null?null:n.child;return e===null?$h(n):e}function $h(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Bh(){let n=ne.lFrame;return ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wu=Bh;function Sa(){let n=Bh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ko(){return ne.lFrame.selectedIndex}function Sn(n){ne.lFrame.selectedIndex=n}function Uh(){return ne.lFrame.currentNamespace}var Vh=!0;function xu(){return Vh}function Eu(n){Vh=n}function qp(n,e=null,t=null,r){let i=Fh(n,e,t,r);return i.resolveInjectorInitializers(),i}function Fh(n,e=null,t=null,r,i=new Set){let o=[t||In,wx(n)];return r=r||(typeof n=="object"?void 0:vn(n)),new ti(o,e||bo(),r||null,i)}var tr=class tr{static create(e,t){if(Array.isArray(e))return qp({name:""},t,e,"");{let r=e.name??"";return qp({name:r},e.parent,e.providers,r)}}};m(tr,"THROW_IF_NOT_FOUND",nr),m(tr,"NULL",new ho),m(tr,"\u0275prov",_e({token:tr,providedIn:"any",factory:()=>de(dh)})),m(tr,"__NG_ELEMENT_ID__",-1);var ir=tr,Ct=new oe(""),Ta=(()=>{class n{}return m(n,"__NG_ELEMENT_ID__",kx),m(n,"__NG_ENV_ID__",t=>t),n})(),Bc=class extends Ta{constructor(t){super();m(this,"_lView");this._lView=t}get destroyed(){return dr(this._lView)}onDestroy(t){let r=this._lView;return du(r,t),()=>xh(r,t)}};function kx(){return new Bc(Le())}var Wh=!1,ci=(()=>{let e=class e{constructor(){m(this,"taskId",0);m(this,"pendingTasks",new Set);m(this,"destroyed",!1);m(this,"pendingTask",new fo(!1))}get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Yr(r=>{r.next(!1),r.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}has(r){return this.pendingTasks.has(r)}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}};m(e,"\u0275prov",_e({token:e,providedIn:"root",factory:()=>new e}));let n=e;return n})(),Uc=class extends tn{constructor(t=!1){super();m(this,"__isAsync");m(this,"destroyRef");m(this,"pendingTasks");this.__isAsync=t,mh()&&(this.destroyRef=pe(Ta,{optional:!0})??void 0,this.pendingTasks=pe(ci,{optional:!0})??void 0)}emit(t){let r=X(null);try{super.next(t)}finally{X(r)}}subscribe(t,r,i){var l,u,d;let o=t,s=r||(()=>null),a=i;if(t&&typeof t=="object"){let f=t;o=(l=f.next)==null?void 0:l.bind(f),s=(u=f.error)==null?void 0:u.bind(f),a=(d=f.complete)==null?void 0:d.bind(f)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:o,error:s,complete:a});return t instanceof Ue&&t.add(c),c}wrapInTimeout(t){return r=>{var o;let i=(o=this.pendingTasks)==null?void 0:o.add();setTimeout(()=>{var s;try{t(r)}finally{i!==void 0&&((s=this.pendingTasks)==null||s.remove(i))}})}}},yn=Uc;function fa(...n){}function Cu(n){let e,t;function r(){n=fa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Su(n){return queueMicrotask(()=>n()),()=>{n=fa}}var Tu="isAngularZone",mo=Tu+"_ID",Px=0,ct=class n{constructor(e){m(this,"hasPendingMacrotasks",!1);m(this,"hasPendingMicrotasks",!1);m(this,"isStable",!0);m(this,"onUnstable",new yn(!1));m(this,"onMicrotaskEmpty",new yn(!1));m(this,"onStable",new yn(!1));m(this,"onError",new yn(!1));let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Wh}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Lx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Tu)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Nx,fa,fa);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Nx={};function _u(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Rx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Cu(()=>{n.callbackScheduled=!1,Vc(n),n.isCheckStableRunning=!0,_u(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Vc(n)}function Lx(n){let e=()=>{Rx(n)},t=Px++;n._inner=n._inner.fork({name:"angular",properties:{[Tu]:!0,[mo]:t,[mo+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Ox(c))return r.invokeTask(o,s,a,c);try{return Gp(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zp(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Gp(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!jx(c)&&e(),zp(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Vc(n),_u(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Vc(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Gp(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zp(n){n._nesting--,_u(n)}var pa=class{constructor(){m(this,"hasPendingMicrotasks",!1);m(this,"hasPendingMacrotasks",!1);m(this,"isStable",!0);m(this,"onUnstable",new yn);m(this,"onMicrotaskEmpty",new yn);m(this,"onStable",new yn);m(this,"onError",new yn)}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Ox(n){return qh(n,"__ignore_ng_zone__")}function jx(n){return qh(n,"__scheduler_tick__")}function qh(n,e){var t,r;return!Array.isArray(n)||n.length!==1?!1:((r=(t=n[0])==null?void 0:t.data)==null?void 0:r[e])===!0}var rn=class{constructor(){m(this,"_console",console)}handleError(e){this._console.error("ERROR",e)}},Po=new oe("",{factory:()=>{let n=pe(ct),e=pe(It),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??(t=e.get(rn)),t.handleError(r))})}}}),Gh={provide:vo,useValue:()=>{let n=pe(rn,{optional:!0})},multi:!0};var ni=class{},No=new oe("",{factory:()=>!0});var Du=new oe("");var zh=(()=>{let e=class e{};m(e,"\u0275prov",_e({token:e,providedIn:"root",factory:()=>new Fc}));let n=e;return n})(),Fc=class{constructor(){m(this,"dirtyEffectCount",0);m(this,"queues",new Map)}add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||(e=this.flushQueue(r)):e||(e=t.run(()=>this.flushQueue(r)));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Zp;Zp=Gr;var Wc=class{constructor(e){m(this,Zp);this[Gr]=e}destroy(){this[Gr].destroy()}};function wm(n){return{toString:n}.toString()}function Ux(n){return typeof n=="function"}function xm(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Na=class{constructor(e,t,r){m(this,"previousValue");m(this,"currentValue");m(this,"firstChange");this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vx(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wx),Fx}function Fx(){let n=Cm(this),e=n==null?void 0:n.current;if(e){let t=n.previous;if(t===sr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Wx(n,e,t,r,i){let o=this.declaredInputs[r],s=Cm(n)||qx(n,{previous:sr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Na(l&&l.currentValue,t,c===sr),xm(n,e,i,t)}var Em="__ngSimpleChanges__";function Cm(n){return n[Em]||null}function qx(n,e){return n[Em]=e}var Zh=[];var he=function(n,e=null,t){for(let r=0;r<Zh.length;r++){let i=Zh[r];i(n,e,t)}},ae=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ae||{});function Gx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Vx(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o))}function zx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks??(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks??(n.viewHooks=[])).push(t,l),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,l)),u!=null&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function Ma(n,e,t){Sm(n,e,3,t)}function Aa(n,e,t,r){(n[Z]&3)===t&&Sm(n,e,t,r)}function Mu(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function Sm(n,e,t,r){let i=r!==void 0?n[lr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[lr]+=65536),(a<o||o==-1)&&(Zx(n,t,e,c),n[lr]=(n[lr]&4294901760)+c+2),c++}function Kh(n,e){he(ae.LifecycleHookStart,n,e);let t=X(null);try{e.call(n)}finally{X(t),he(ae.LifecycleHookEnd,n,e)}}function Zx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[lr]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,Kh(a,o)):Kh(a,o)}var di=-1,Oo=class{constructor(e,t,r,i){m(this,"factory");m(this,"name");m(this,"injectImpl");m(this,"resolving",!1);m(this,"canSeeViewProviders");m(this,"multi");m(this,"componentProviders");m(this,"index");m(this,"providerFactory");this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Kx(n){return(n.flags&8)!==0}function Yx(n){return(n.flags&16)!==0}function Qx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Xx(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Jx(n){return n===3||n===4||n===6}function Xx(n){return n.charCodeAt(0)===64}function nd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Yh(n,t,i,null,e[++r]):Yh(n,t,i,null,null))}}return n}function Yh(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Tm(n){return n!==di}function Ra(n){return n&32767}function eE(n){return n>>16}function La(n,e){let t=eE(n),r=e;for(;t>0;)r=r[si],t--;return r}var Ou=!0;function Qh(n){let e=Ou;return Ou=n,e}var tE=256,_m=tE-1,Dm=5,nE=0,jt={};function rE(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ri)&&(r=t[ri]),r==null&&(r=t[ri]=nE++);let i=r&_m,o=1<<i;e.data[n+(i>>Dm)]|=o}function Mm(n,e){let t=Am(n,e);if(t!==-1)return t;let r=e[G];r.firstCreatePass&&(n.injectorIndex=e.length,Au(r.data,n),Au(e,null),Au(r.blueprint,null));let i=rd(n,e),o=n.injectorIndex;if(Tm(i)){let s=Ra(i),a=La(i,e),c=a[G].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Au(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Am(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function rd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Lm(i),r===null)return di;if(t++,i=i[si],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return di}function iE(n,e,t){rE(n,e,t)}function km(n,e,t){if(t&8||n!==void 0)return n;ha(e,"NodeInjector")}function Pm(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ar],o=et(void 0);try{return i?i.get(e,r,t&8):Xc(e,r,t&8)}finally{et(o)}}return km(r,e,t)}function Nm(n,e,t,r=0,i){if(n!==null){if(e[Z]&2048&&!(r&2)){let s=lE(n,e,t,r,jt);if(s!==jt)return s}let o=Rm(n,e,t,r,jt);if(o!==jt)return o}return Pm(e,t,r,i)}function Rm(n,e,t,r,i){let o=sE(t);if(typeof o=="function"){if(!bu(e,n,r))return r&1?km(i,t,r):Pm(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ha(t);else return s}finally{wu()}}else if(typeof o=="number"){let s=null,a=Am(n,e),c=di,l=r&1?e[wt][dt]:null;for((a===-1||r&4)&&(c=a===-1?rd(n,e):e[a+8],c===di||!Xh(r,!1)?a=-1:(s=e[G],a=Ra(c),e=La(c,e)));a!==-1;){let u=e[G];if(Jh(o,a,u.data)){let d=oE(a,e,t,s,r,l);if(d!==jt)return d}c=e[a+8],c!==di&&Xh(r,e[G].data[a+8]===l)&&Jh(o,a,e)?(s=u,a=Ra(c),e=La(c,e)):a=-1}}return i}function oE(n,e,t,r,i,o){let s=e[G],a=s.data[n+8],c=r==null?To(a)&&Ou:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=ka(a,s,t,c,l);return u!==null?Oa(e,s,u,a,i):jt}function ka(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let p=d;p<f;p++){let h=s[p];if(p<c&&t===h||p>=c&&h.type===t)return p}if(i){let p=s[c];if(p&&ur(p)&&p.type===t)return c}return null}function Oa(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Oo){let a=o;if(a.resolving){let p=rh(s[t]);throw Jc(p)}let c=Qh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,d=a.injectImpl?et(a.injectImpl):null,f=bu(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Gx(t,s[t],e)}finally{d!==null&&et(d),Qh(c),a.resolving=!1,wu()}}return o}function sE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ri)?n[ri]:void 0;return typeof e=="number"?e>=0?e&_m:aE:e}function Jh(n,e,t){let r=1<<n;return!!(t[e+(n>>Dm)]&r)}function Xh(n,e){return!(n&2)&&!(n&1&&e)}var fr=class{constructor(e,t){m(this,"_tNode");m(this,"_lView");this._tNode=e,this._lView=t}get(e,t,r){return Nm(this._tNode,this._lView,e,Xr(r),t)}};function aE(){return new fr(an(),Le())}function lE(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!ai(s);){let a=Rm(o,s,t,r|2,jt);if(a!==jt)return a;let c=o.parent;if(!c){let l=s[ou];if(l){let u=l.get(t,jt,r);if(u!==jt)return u}c=Lm(s),s=s[si]}o=c}return i}function Lm(n){let e=n[G],t=e.type;return t===2?e.declTNode:t===1?n[dt]:null}function cE(){return mi(an(),Le())}function mi(n,e){return new mr(En(n,e))}var mr=(()=>{class n{constructor(t){m(this,"nativeElement");this.nativeElement=t}}return m(n,"__NG_ELEMENT_ID__",cE),n})();function uE(n){return n instanceof mr?n.nativeElement:n}function dE(){return this._results[Symbol.iterator]()}var vm;vm=Symbol.iterator;var ja=class{constructor(e=!1){m(this,"_emitDistinctChangesOnly");m(this,"dirty",!0);m(this,"_onDirty");m(this,"_results",[]);m(this,"_changesDetected",!1);m(this,"_changes");m(this,"length",0);m(this,"first");m(this,"last");m(this,vm,dE);this._emitDistinctChangesOnly=e}get changes(){return this._changes??(this._changes=new tn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=lh(e);(this._changesDetected=!ah(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){var e;this.dirty=!0,(e=this._onDirty)==null||e.call(this)}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Om(n){return(n.flags&128)===128}var id=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(id||{}),jm=new Map,fE=0;function pE(){return fE++}function hE(n){jm.set(n[xo],n)}function ju(n){jm.delete(n[xo])}var em="__ngContext__";function jo(n,e){sn(e)?(n[em]=e[xo],hE(e)):n[em]=e}function Hm(n){return Bm(n[oi])}function $m(n){return Bm(n[ut])}function Bm(n){for(;n!==null&&!xt(n);)n=n[ut];return n}var mE;function od(n){mE=n}var Fa=new oe("",{factory:()=>gE}),gE="ng";var Wa=new oe(""),Fo=new oe("",{providedIn:"platform",factory:()=>"unknown"});var qa=new oe("",{factory:()=>{var n,e;return((e=(n=pe(Ct).body)==null?void 0:n.querySelector("[ngCspNonce]"))==null?void 0:e.getAttribute("ngCspNonce"))||null}});var Um=!1,Vm=new oe("",{factory:()=>Um});function sd(n){return(n.flags&32)===32}var yE=()=>null;function Fm(n,e,t=!1){return yE(n,e,t)}function Wm(n,e){let t=n.contentQueries;if(t!==null){let r=X(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Ea(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function Hu(n,e,t){Ea(0);let r=X(null);try{e(n,t)}finally{X(r)}}function qm(n,e,t){if(su(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{X(r)}}}var Tt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Tt||{});var _a;function vE(){if(_a===void 0&&(_a=null,go.trustedTypes))try{_a=go.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _a}function IE(n){var e;return((e=vE())==null?void 0:e.createScriptURL(n))||n}var $u=class{constructor(e){m(this,"changingThisBreaksApplicationSecurity");this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kp})`}};function Gm(n){return n instanceof $u?n.changingThisBreaksApplicationSecurity:n}function bE(n,e){return n.createText(e)}function zm(n,e,t){return n.createElement(e,t)}function Ha(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Zm(n,e,t){n.appendChild(e,t)}function tm(n,e,t,r,i){r!==null?Ha(n,e,t,r,i):Zm(n,e,t)}function wE(n,e,t,r){n.removeChild(null,e,t,r)}function xE(n,e,t){n.setAttribute(e,"style",t)}function EE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Km(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Qx(n,e,r),i!==null&&EE(n,e,i),o!==null&&xE(n,e,o)}function Wo(n){return IE(n[0])}function CE(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Ym="ng-template";function SE(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CE(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ad(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ad(n){return n.type===4&&n.value!==Ym}function TE(n,e,t){let r=n.type===4&&!t?Ym:n.value;return e===r}function _E(n,e,t){let r=4,i=n.attrs,o=i!==null?AE(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!St(r)&&!St(c))return!1;if(s&&St(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!TE(n,c,t)||c===""&&e.length===1){if(St(r))return!1;s=!0}}else if(r&8){if(i===null||!SE(n,i,c,t)){if(St(r))return!1;s=!0}}else{let l=e[++a],u=DE(c,i,ad(n),t);if(u===-1){if(St(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(St(r))return!1;s=!0}}}}return St(r)||s}function St(n){return(n&1)===0}function DE(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return kE(e,n)}function ME(n,e,t=!1){for(let r=0;r<e.length;r++)if(_E(n,e[r],t))return!0;return!1}function AE(n){for(let e=0;e<n.length;e++){let t=n[e];if(Jx(t))return e}return n.length}function kE(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function nm(n,e){return n?":not("+e.trim()+")":e}function PE(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!St(s)&&(e+=nm(o,i),i=""),r=s,o=o||!St(r);t++}return i!==""&&(e+=nm(o,i)),e}function NE(n){return n.map(PE).join(",")}function RE(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!St(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var gi={};function Qm(n,e,t,r,i,o,s,a,c,l,u){let d=ft+r,f=d+i,p=LE(d,f),h=typeof l=="function"?l():l;return p[G]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1,ssrId:u}}function LE(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:gi);return t}function OE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Qm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ld(n,e,t,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[bt]=i,d[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(d[Z]|=2048),cu(d),d[Me]=d[si]=n,d[tt]=t,d[on]=s||n&&n[on],d[Ye]=a||n&&n[Ye],d[ar]=c||n&&n[ar]||null,d[dt]=o,d[xo]=pE(),d[wo]=u,d[ou]=l,d[wt]=e.type==2?n[wt]:d,d}function jE(n,e,t){let r=En(e,n),i=OE(t),o=n[on].rendererFactory,s=eg(n,ld(n,i,null,Jm(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Jm(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Xm(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function eg(n,e){return n[oi]?n[iu][ut]=e:n[oi]=e,n[iu]=e,e}function HE(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ma(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Aa(e,o,0,t)}Sn(t)}var Ga=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ga||{});function Bu(n,e,t,r){let i=X(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Ga.SignalBased)!==0&&(c=e[o][Gr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):xm(e,c,o,r)}finally{X(i)}}var ln=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ln||{}),$E;function cd(n,e){return $E(n,e)}var fi=new Set,ud=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ud||{}),qo=new oe(""),rm=new Set;function tg(n){var e;rm.has(n)||(rm.add(n),(e=performance==null?void 0:performance.mark)==null||e.call(performance,"mark_feature_usage",{detail:{feature:n}}))}var ng=(()=>{let e=class e{constructor(){m(this,"impl",null)}execute(){var r;(r=this.impl)==null||r.execute()}};m(e,"\u0275prov",_e({token:e,providedIn:"root",factory:()=>new e}));let n=e;return n})();var BE=new oe("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:pe(It)})});function rg(n,e,t){var i,o;let r=n.get(BE);if(Array.isArray(e))for(let s of e)r.queue.add(s),(i=t==null?void 0:t.detachedLeaveAnimationFns)==null||i.push(s);else r.queue.add(e),(o=t==null?void 0:t.detachedLeaveAnimationFns)==null||o.push(e);r.scheduler&&r.scheduler(n)}function UE(n,e){for(let[t,r]of e)rg(n,r.animateFns)}function im(n,e,t,r){var o;let i=(o=n==null?void 0:n[Co])==null?void 0:o.enter;e!==null&&i&&i.has(t.index)&&UE(r,i)}function ui(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;xt(i)?c=i:sn(i)&&(l=!0,i=i[bt]);let u=Et(i);n===0&&r!==null?(im(a,r,o,t),s==null?Zm(e,r,u):Ha(e,r,u,s||null,!0)):n===1&&r!==null?(im(a,r,o,t),Ha(e,r,u,s||null,!0)):n===2?om(a,o,t,d=>{wE(e,u,l,d)}):n===3&&om(a,o,t,()=>{e.destroyNode(u)}),c!=null&&eC(e,n,t,c,o,r,s)}}function VE(n,e){ig(n,e),e[bt]=null,e[dt]=null}function FE(n,e,t,r,i,o){r[bt]=i,r[dt]=e,za(n,r,t,1,i,o)}function ig(n,e){var t;(t=e[on].changeDetectionScheduler)==null||t.notify(9),za(n,e,e[Ye],2,null,null)}function WE(n){let e=n[oi];if(!e)return ku(n[G],n);for(;e;){let t=null;if(sn(e))t=e[oi];else{let r=e[Ve];r&&(t=r)}if(!t){for(;e&&!e[ut]&&e!==n;)sn(e)&&ku(e[G],e),e=e[Me];e===null&&(e=n),sn(e)&&ku(e[G],e),t=e&&e[ut]}e=t}}function dd(n,e){let t=n[cr],r=t.indexOf(e);t.splice(r,1)}function og(n,e){if(dr(e))return;let t=e[Ye];t.destroyNode&&za(n,e,t,3,null,null),WE(e)}function ku(n,e){if(dr(e))return;let t=X(null);try{e[Z]&=-129,e[Z]|=256,e[nt]&&ta(e[nt]),zE(n,e),GE(n,e),e[G].type===1&&e[Ye].destroy();let r=e[wn];if(r!==null&&xt(e[Me])){r!==e[Me]&&dd(r,e);let i=e[Ot];i!==null&&i.detachView(n)}ju(e)}finally{X(t)}}function om(n,e,t,r){let i=n==null?void 0:n[Co];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&fi.add(n),rg(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),qE(n,r)}else n&&fi.delete(n),r(!1)},i)}function qE(n,e){var r;let t=(r=n[Co])==null?void 0:r.running;if(t){t.then(()=>{n[Co].running=void 0,fi.delete(n),e(!0)});return}e(!1)}function GE(n,e){let t=n.cleanup,r=e[rr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[rr]=null);let i=e[nn];if(i!==null){e[nn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Eo];if(o!==null){e[Eo]=null;for(let s of o)s.destroy()}}function zE(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];he(ae.LifecycleHookStart,a,c);try{c.call(a)}finally{he(ae.LifecycleHookEnd,a,c)}}else{he(ae.LifecycleHookStart,i,o);try{o.call(i)}finally{he(ae.LifecycleHookEnd,i,o)}}}}}function ZE(n,e,t){return KE(n,e.parent,t)}function KE(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[bt];if(To(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Tt.None||i===Tt.Emulated)return null}return En(r,t)}function YE(n,e,t){return JE(n,e,t)}function QE(n,e,t){return n.type&40?En(n,t):null}var JE=QE,sm;function sg(n,e,t,r){let i=ZE(n,r,e),o=e[Ye],s=r.parent||e[dt],a=YE(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)tm(o,i,t[c],a,!1);else tm(o,i,t,a,!1);sm!==void 0&&sm(o,r,e,t,i)}function Ro(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return Uu(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ro(n,r);{let i=n[e.index];return xt(i)?Uu(-1,i):Et(i)}}else{if(t&128)return Ro(n,e.next);if(t&32)return cd(e,n)()||Et(n[e.index]);{let r=ag(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bn(n[wt]);return Ro(i,r)}else return Ro(n,e.next)}}}return null}function ag(n,e){if(e!==null){let r=n[wt][dt],i=e.projection;return r.projection[i]}return null}function Uu(n,e){let t=Ve+n+1;if(t<e.length){let r=e[t],i=r[G].firstChild;if(i!==null)return Ro(r,i)}return e[xn]}function fd(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ar];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&jo(Et(c),r),t.flags|=2),!sd(t))if(l&8)fd(n,e,t.child,r,i,o,!1),ui(e,n,a,i,c,t,o,r);else if(l&32){let u=cd(t,r),d;for(;d=u();)ui(e,n,a,i,d,t,o,r);ui(e,n,a,i,c,t,o,r)}else l&16?XE(n,e,r,t,i,o):ui(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function za(n,e,t,r,i,o){fd(t,r,n.firstChild,e,i,o,!1)}function XE(n,e,t,r,i,o){let s=t[wt],c=s[dt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ui(e,n,t[ar],i,u,r,o,t)}else{let l=c,u=s[Me];Om(r)&&(l.flags|=128),fd(n,e,l,u,i,o,!0)}}function eC(n,e,t,r,i,o,s){let a=r[xn],c=Et(r);a!==c&&ui(e,n,t,o,a,i,s);for(let l=Ve;l<r.length;l++){let u=r[l];za(u[G],u,n,e,o,a)}}function tC(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ln.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ln.Important),n.setStyle(t,r,i,o))}}function lg(n,e,t,r,i){let o=ko(),s=r&2;try{Sn(-1),s&&e.length>ft&&HE(n,e,ft,!1);let a=s?ae.TemplateUpdateStart:ae.TemplateCreateStart;he(a,i,t),t(r,i)}finally{Sn(o);let a=s?ae.TemplateUpdateEnd:ae.TemplateCreateEnd;he(a,i,t)}}function cg(n,e,t){oC(n,e,t),(t.flags&64)===64&&sC(n,e,t)}function ug(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function nC(n,e,t,r){let o=r.get(Vm,Um)||t===Tt.ShadowDom||t===Tt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return rC(s),s}function rC(n){iC(n)}var iC=()=>null;function oC(n,e,t){let r=t.directiveStart,i=t.directiveEnd;To(t)&&jE(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mm(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Oa(e,n,s,t);if(jo(c,e),o!==null&&cC(e,s-r,c,a,t,o),ur(a)){let l=Cn(t.index,e);l[tt]=Oa(e,n,s,t)}}}function sC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Oh();try{Sn(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];xa(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&aC(c,l)}}finally{Sn(-1),xa(s)}}function aC(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];ME(e,o.selectors,!1)&&(r??(r=[]),ur(o)?r.unshift(o):r.push(o))}return r}function cC(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Bu(r,t,c,l)}}function dg(n,e,t,r,i){let o=ft+t,s=e[G],a=i(s,e,n,r,t);e[o]=a,Ao(n,!0);let c=n.type===2;return c?(Km(e[Ye],a,n),(Th()===0||au(n))&&jo(a,e),_h()):jo(a,e),xu()&&(!c||!sd(n))&&sg(s,e,a,n),n}function fg(n){let e=n;return gu()?kh():(e=e.parent,Ao(e,!1)),e}function pg(n,e,t,r,i){var c,l;let o=(c=n.inputs)==null?void 0:c[r],s=(l=n.hostDirectiveInputs)==null?void 0:l[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],f=s[u+1],p=e.data[d];Bu(p,t[d],f,i),a=!0}if(o)for(let u of o){let d=t[u],f=e.data[u];Bu(f,d,r,i),a=!0}return a}function uC(n,e){let t=Cn(e,n),r=t[G];dC(r,t);let i=t[bt];i!==null&&t[wo]===null&&(t[wo]=Fm(i,t[ar])),he(ae.ComponentStart);try{pd(r,t,t[tt])}finally{he(ae.ComponentEnd,t[tt])}}function dC(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pd(n,e,t){var r;Ca(e);try{let i=n.viewQuery;i!==null&&Hu(1,i,t);let o=n.template;o!==null&&lg(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),(r=e[Ot])==null||r.finishViewCreation(n),n.staticContentQueries&&Wm(n,e),n.staticViewQueries&&Hu(2,n.viewQuery,t);let s=n.components;s!==null&&fC(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Z]&=-5,Sa()}}function fC(n,e){for(let t=0;t<e.length;t++)uC(n,e[t])}function pC(n,e,t,r){let i=X(null);try{let o=e.tView,a=n[Z]&4096?4096:16,c=ld(n,o,t,a,null,e,null,null,(r==null?void 0:r.injector)??null,(r==null?void 0:r.embeddedViewInjector)??null,(r==null?void 0:r.dehydratedView)??null),l=n[e.index];c[wn]=l;let u=n[Ot];return u!==null&&(c[Ot]=u.createEmbeddedView(o)),pd(o,c,t),c}finally{X(i)}}function am(n,e){return!e||e.firstChild===null||Om(n)}function Ho(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Et(o)),xt(o)&&hg(o,r);let s=t.type;if(s&8)Ho(n,e,t.child,r);else if(s&32){let a=cd(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ag(e,t);if(Array.isArray(a))r.push(...a);else{let c=bn(e[wt]);Ho(c[G],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hg(n,e){for(let t=Ve;t<n.length;t++){let r=n[t],i=r[G].firstChild;i!==null&&Ho(r[G],r,i,e)}n[xn]!==n[bt]&&e.push(n[xn])}function mg(n){if(n[Ia]!==null){for(let e of n[Ia])e.impl.addSequence(e);n[Ia].length=0}}var gg=[];function hC(n){return n[nt]??mC(n)}function mC(n){let e=gg.pop()??Object.create(yC);return e.lView=n,e}function gC(n){n.lView[nt]!==n&&(n.lView=null,gg.push(n))}var yC=Rt(Te({},gc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Mo(n.lView)},consumerOnSignalRead(){this.lView[nt]=this}});function vC(n){let e=n[nt]??Object.create(IC);return e.lView=n,e}var IC=Rt(Te({},gc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=bn(n.lView);for(;e&&!yg(e[G]);)e=bn(e);e&&uu(e)},consumerOnSignalRead(){this.lView[nt]=this}});function yg(n){return n.type!==2}function vg(n){if(n[Eo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Eo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var bC=100;function Ig(n,e=0){var o,s;let r=n[on].rendererFactory,i=!1;i||(o=r.begin)==null||o.call(r);try{wC(n,e)}finally{i||(s=r.end)==null||s.call(r)}}function wC(n,e){let t=yu();try{vu(!0),Vu(n,e);let r=0;for(;Do(n);){if(r===bC)throw new ee(103,!1);r++,Vu(n,1)}}finally{vu(t)}}function xC(n,e,t,r){if(dr(e))return;let i=e[Z],o=!1,s=!1;Ca(e);let a=!0,c=null,l=null;o||(yg(n)?(l=hC(e),c=yc(l)):ea()===null?(a=!1,l=vC(e),c=yc(l)):e[nt]&&(ta(e[nt]),e[nt]=null));try{cu(e),Ph(n.bindingStartIndex),t!==null&&lg(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&Ma(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Aa(e,p,0,null),Mu(e,0)}if(s||EC(e),vg(e),bg(e,0),n.contentQueries!==null&&Wm(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&Ma(e,p)}else{let p=n.contentHooks;p!==null&&Aa(e,p,1),Mu(e,1)}SC(n,e);let d=n.components;d!==null&&xg(e,d,0);let f=n.viewQuery;if(f!==null&&Hu(2,f,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&Ma(e,p)}else{let p=n.viewHooks;p!==null&&Aa(e,p,2),Mu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[va]){for(let p of e[va])p();e[va]=null}o||(mg(e),e[Z]&=-73)}catch(u){throw o||Mo(e),u}finally{l!==null&&(_p(l,c),a&&gC(l)),Sa()}}function bg(n,e){for(let t=Hm(n);t!==null;t=$m(t))for(let r=Ve;r<t.length;r++){let i=t[r];wg(i,e)}}function EC(n){for(let e=Hm(n);e!==null;e=$m(e)){if(!(e[Z]&2))continue;let t=e[cr];for(let r=0;r<t.length;r++){let i=t[r];uu(i)}}}function CC(n,e,t){he(ae.ComponentStart);let r=Cn(e,n);try{wg(r,t)}finally{he(ae.ComponentEnd,r[tt])}}function wg(n,e){ba(n)&&Vu(n,e)}function Vu(n,e){let r=n[G],i=n[Z],o=n[nt],s=!!(e===0&&i&16);if(s||(s=!!(i&64&&e===0)),s||(s=!!(i&1024)),s||(s=!!(o!=null&&o.dirty&&vc(o))),s||(s=!1),o&&(o.dirty=!1),n[Z]&=-9217,s)xC(r,n,r.template,n[tt]);else if(i&8192){let a=X(null);try{vg(n),bg(n,1);let c=r.components;c!==null&&xg(n,c,1),mg(n)}finally{X(a)}}}function xg(n,e,t){for(let r=0;r<e.length;r++)CC(n,e[r],t)}function SC(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Sn(~i);else{let o=i,s=t[++r],a=t[++r];Lh(s,o);let c=e[o];he(ae.HostBindingsUpdateStart,c);try{a(2,c)}finally{he(ae.HostBindingsUpdateEnd,c)}}}}finally{Sn(-1)}}function Eg(n,e){var r;let t=yu()?64:1088;for((r=n[on].changeDetectionScheduler)==null||r.notify(e);n;){n[Z]|=t;let i=bn(n);if(ai(n)&&!i)return n;n=i}return null}function TC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function _C(n,e,t,r=!0){let i=e[G];if(DC(i,e,n,t),r){let s=Uu(t,n),a=e[Ye],c=a.parentNode(n[xn]);c!==null&&FE(i,n[dt],a,e,c,s)}let o=e[wo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Fu(n,e){if(n.length<=Ve)return;let t=Ve+e,r=n[t];if(r){let i=r[wn];i!==null&&i!==n&&dd(i,r),e>0&&(n[t-1][ut]=r[ut]);let o=yo(n,Ve+e);VE(r[G],r);let s=o[Ot];s!==null&&s.detachView(o[G]),r[Me]=null,r[ut]=null,r[Z]&=-129}return r}function DC(n,e,t,r){let i=Ve+r,o=t.length;r>0&&(t[i-1][ut]=e),r<o-Ve?(e[ut]=t[i],eu(t,Ve+r,e)):(t.push(e),e[ut]=null),e[Me]=t;let s=e[wn];s!==null&&t!==s&&Cg(s,e);let a=e[Ot];a!==null&&a.insertView(n),wa(e),e[Z]|=128}function Cg(n,e){let t=n[cr],r=e[Me];if(sn(r))n[Z]|=2;else{let i=r[Me][wt];e[wt]!==i&&(n[Z]|=2)}t===null?n[cr]=[e]:t.push(e)}var pi=class{constructor(e,t){m(this,"_lView");m(this,"_cdRefInjectingView");m(this,"_appRef",null);m(this,"_attachedToViewContainer",!1);m(this,"exhaustive");this._lView=e,this._cdRefInjectingView=t}get rootNodes(){let e=this._lView,t=e[G];return Ho(t,e,t.firstChild,[])}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return dr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Me];if(xt(e)){let t=e[So],r=t?t.indexOf(this):-1;r>-1&&(Fu(e,r),yo(t,r))}this._attachedToViewContainer=!1}og(this._lView[G],this._lView)}onDestroy(e){du(this._lView,e)}markForCheck(){Eg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){wa(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Ig(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ai(this._lView),t=this._lView[wn];t!==null&&!e&&dd(t,this._lView),ig(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=ai(this._lView),r=this._lView[wn];r!==null&&!t&&Cg(r,this._lView),wa(this._lView)}};var $o=(()=>{class n{constructor(t,r,i){m(this,"_declarationLView");m(this,"_declarationTContainer");m(this,"elementRef");this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){var t;return((t=this._declarationTContainer.tView)==null?void 0:t.ssrId)||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=pC(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new pi(o)}}return m(n,"__NG_ELEMENT_ID__",MC),n})();function MC(){return hd(an(),Le())}function hd(n,e){return n.type&4?new $o(e,n,mi(n,e)):null}function md(n,e,t,r,i){let o=n.data[e];if(o===null)o=AC(n,e,t,r,i),Rh()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Ah();o.injectorIndex=s===null?-1:s.injectorIndex}return Ao(o,!0),o}function AC(n,e,t,r,i){let o=mu(),s=gu(),a=s?o:o&&o.parent,c=n.data[e]=PC(n,a,t,e,r,i);return kC(n,c,o,s),c}function kC(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function PC(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Mh()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var NC=()=>null;function lm(n,e){return NC(n,e)}var Sg=class{},Za=class{},Wu=class{resolveComponentFactory(e){throw new ee(917,!1)}},Lu,Ka=(Lu=class{},m(Lu,"NULL",new Wu),Lu),pr=class{};var Tg=(()=>{let e=class e{};m(e,"\u0275prov",_e({token:e,providedIn:"root",factory:()=>null}));let n=e;return n})();var Pa={},qu=class{constructor(e,t){m(this,"injector");m(this,"parentInjector");this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Pa,r);return i!==Pa||t===Pa?i:this.parentInjector.get(e,t,r)}};function $a(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Gc(i,a);else if(o==2){let c=a,l=e[++s];r=Gc(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ya(n,e=0){let t=Le();if(t===null)return de(n,e);let r=an();return Nm(r,t,lt(n),e)}function RC(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}jC(n,e,t,a,o,c,l)}o!==null&&r!==null&&LC(t,r,o)}function LC(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}function OC(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function jC(n,e,t,r,i,o,s){let a=r.length,c=null;for(let f=0;f<a;f++){let p=r[f];c===null&&ur(p)&&(c=p,OC(n,t,f)),iE(Mm(t,e),n,p.type)}FC(t,n.data.length,a),c!=null&&c.viewProvidersResolver&&c.viewProvidersResolver(c);for(let f=0;f<a;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,d=Xm(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let p=r[f];if(t.mergedAttrs=nd(t.mergedAttrs,p.hostAttrs),$C(n,t,e,d,p),VC(d,p,i),s!==null&&s.has(p)){let[w,b]=s.get(p);t.directiveToIndex.set(p.type,[d,w+t.directiveStart,b+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let h=p.type.prototype;!l&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),l=!0),!u&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),u=!0),d++}HC(n,t,o)}function HC(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))cm(0,e,i,r),cm(1,e,i,r),dm(e,r,!1);else{let o=t.get(i);um(0,e,o,r),um(1,e,o,r),dm(e,r,!0)}}}function cm(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??(e.inputs={}):s=e.outputs??(e.outputs={}),s[o]??(s[o]=[]),s[o].push(r),_g(e,o)}}function um(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??(e.hostDirectiveInputs={}):a=e.hostDirectiveOutputs??(e.hostDirectiveOutputs={}),a[s]??(a[s]=[]),a[s].push(r,o),_g(e,s)}}function _g(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function dm(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||ad(n)){n.initialInputs??(n.initialInputs=[]),n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??(s=[]),s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??(s=[]),s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??(n.initialInputs=[]),n.initialInputs.push(s)}function $C(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ei(i.type,!0)),s=new Oo(o,ur(i),Ya,null);n.blueprint[r]=s,t[r]=s,BC(n,e,r,Xm(n,t,i.hostVars,gi),i)}function BC(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;UC(s)!=a&&s.push(a),s.push(t,r,o)}}function UC(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function VC(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ur(e)&&(t[""]=n)}}function FC(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Dg(n,e,t,r,i,o,s,a){let c=e[G],l=c.consts,u=_o(l,s),d=md(c,n,t,r,u);return o&&RC(c,e,d,_o(l,a),i),d.mergedAttrs=nd(d.mergedAttrs,d.attrs),d.attrs!==null&&$a(d,d.attrs,!1),d.mergedAttrs!==null&&$a(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Mg(n,e){zx(n,e),su(e)&&n.queries.elementEnd(e)}function WC(n,e,t,r,i,o){let s=e.consts,a=_o(s,i),c=md(e,n,t,r,a);if(c.mergedAttrs=nd(c.mergedAttrs,c.attrs),o!=null){let l=_o(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&$a(c,c.attrs,!1),c.mergedAttrs!==null&&$a(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function qC(n,e,t){if(t===gi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}var Gu=Symbol("BINDING");var zu=class extends Ka{constructor(t){super();m(this,"ngModule");this.ngModule=t}resolveComponentFactory(t){let r=or(t);return new Bo(r,this.ngModule)}};function GC(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ga.SignalBased)!==0};return i&&(o.transform=i),o})}function zC(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ZC(n,e,t){let r=e instanceof It?e:e==null?void 0:e.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new qu(t,r):t}function KC(n){let e=n.get(pr,null);if(e===null)throw new ee(407,!1);let t=n.get(Tg,null),r=n.get(ni,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function YC(n,e){let t=Ag(n);return zm(e,t,t==="svg"?yh:t==="math"?vh:null)}function Ag(n){return(n.selectors[0][0]||"div").toLowerCase()}var Bo=class extends Za{constructor(t,r){super();m(this,"componentDef");m(this,"ngModule");m(this,"selector");m(this,"componentType");m(this,"ngContentSelectors");m(this,"isBoundToModule");m(this,"cachedInputs",null);m(this,"cachedOutputs",null);this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=NE(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!r}get inputs(){return this.cachedInputs??(this.cachedInputs=GC(this.componentDef.inputs)),this.cachedInputs}get outputs(){return this.cachedOutputs??(this.cachedOutputs=zC(this.componentDef.outputs)),this.cachedOutputs}create(t,r,i,o,s,a){he(ae.DynamicComponentStart);let c=X(null);try{let l=this.componentDef,u=QC(i,l,a,s),d=ZC(l,o||this.ngModule,t),f=KC(d),p=f.rendererFactory.createRenderer(null,l),h=i?nC(p,i,l.encapsulation,d):YC(l,p),w=(a==null?void 0:a.some(fm))||(s==null?void 0:s.some(v=>typeof v!="function"&&v.bindings.some(fm))),b=ld(null,u,null,512|Jm(l),null,null,f,p,d,null,Fm(h,d,!0));b[ft]=h,Ca(b);let E=null;try{let v=Dg(ft,b,2,"#host",()=>u.directiveRegistry,!0,0);Km(p,h,v),jo(h,b),cg(u,b,v),qm(u,v,b),Mg(u,v),r!==void 0&&XC(v,this.ngContentSelectors,r),E=Cn(v.index,b),b[tt]=E[tt],pd(u,b,null)}catch(v){throw E!==null&&ju(E),ju(b),v}finally{he(ae.DynamicComponentEnd),Sa()}return new Ba(this.componentType,b,!!w)}finally{X(c)}}};function QC(n,e,t,r){let i=n?["ng-version","21.0.6"]:RE(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[Gu].requiredVars,u.create&&(u.targetIdx=0,(o??(o=[])).push(u)),u.update&&(u.targetIdx=0,(s??(s=[])).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[Gu].requiredVars;let p=u+1;f.create&&(f.targetIdx=p,(o??(o=[])).push(f)),f.update&&(f.targetIdx=p,(s??(s=[])).push(f))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Yc(d);c.push(f)}return Qm(0,null,JC(o,s),1,a,c,null,null,null,[i],null)}function JC(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function fm(n){let e=n[Gu].kind;return e==="input"||e==="twoWay"}var Ba=class extends Sg{constructor(t,r,i){super();m(this,"_rootLView");m(this,"_hasInputBindings");m(this,"instance");m(this,"hostView");m(this,"changeDetectorRef");m(this,"componentType");m(this,"location");m(this,"previousInputValues",null);m(this,"_tNode");this._rootLView=r,this._hasInputBindings=i,this._tNode=lu(r[G],ft),this.location=mi(this._tNode,r),this.instance=Cn(this._tNode.index,r)[tt],this.hostView=this.changeDetectorRef=new pi(r,void 0),this.componentType=t}setInput(t,r){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??(this.previousInputValues=new Map),this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),r))return;let o=this._rootLView,s=pg(i,o[G],o,t,r);this.previousInputValues.set(t,r);let a=Cn(i.index,o);Eg(a,1)}get injector(){return new fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function XC(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Qa=(()=>{class n{}return m(n,"__NG_ELEMENT_ID__",eS),n})();function eS(){let n=an();return Pg(n,Le())}var tS=Qa,kg=class extends tS{constructor(t,r,i){super();m(this,"_lContainer");m(this,"_hostTNode");m(this,"_hostLView");this._lContainer=t,this._hostTNode=r,this._hostLView=i}get element(){return mi(this._hostTNode,this._hostLView)}get injector(){return new fr(this._hostTNode,this._hostLView)}get parentInjector(){let t=rd(this._hostTNode,this._hostLView);if(Tm(t)){let r=La(t,this._hostLView),i=Ra(t),o=r[G].data[i+8];return new fr(o,r)}else return new fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let r=pm(this._lContainer);return r!==null&&r[t]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(t,r,i){let o,s;typeof i=="number"?o=i:i!=null&&(o=i.index,s=i.injector);let a=lm(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(r||{},s,a);return this.insertImpl(c,o,am(this._hostTNode,a)),c}createComponent(t,r,i,o,s,a,c){let l=t&&!Ux(t),u;if(l)u=r;else{let E=r||{};u=E.index,i=E.injector,o=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef,a=E.directives,c=E.bindings}let d=l?t:new Bo(or(t)),f=i||this.parentInjector;if(!s&&d.ngModule==null){let v=(l?f:this.parentInjector).get(It,null);v&&(s=v)}let p=or(d.componentType??{}),h=lm(this._lContainer,(p==null?void 0:p.id)??null),w=(h==null?void 0:h.firstChild)??null,b=d.create(f,o,w,s,a,c);return this.insertImpl(b.hostView,u,am(this._hostTNode,h)),b}insert(t,r){return this.insertImpl(t,r,!0)}insertImpl(t,r,i){let o=t._lView;if(wh(o)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let l=o[Me],u=new kg(l,l[dt],l[Me]);u.detach(u.indexOf(t))}}let s=this._adjustIndex(r),a=this._lContainer;return _C(a,o,s,i),t.attachToViewContainerRef(),eu(Pu(a),s,t),t}move(t,r){return this.insert(t,r)}indexOf(t){let r=pm(this._lContainer);return r!==null?r.indexOf(t):-1}remove(t){let r=this._adjustIndex(t,-1),i=Fu(this._lContainer,r);i&&(yo(Pu(this._lContainer),r),og(i[G],i))}detach(t){let r=this._adjustIndex(t,-1),i=Fu(this._lContainer,r);return i&&yo(Pu(this._lContainer),r)!=null?new pi(i):null}_adjustIndex(t,r=0){return t??this.length+r}};function pm(n){return n[So]}function Pu(n){return n[So]||(n[So]=[])}function Pg(n,e){let t,r=e[n.index];return xt(r)?t=r:(t=TC(r,e,null,n),e[n.index]=t,eg(e,t)),rS(t,e,n,r),new kg(t,n,e)}function nS(n,e){let t=n[Ye],r=t.createComment(""),i=En(e,n),o=t.parentNode(i);return Ha(t,o,r,t.nextSibling(i),!1),r}var rS=iS;function iS(n,e,t,r){if(n[xn])return;let i;t.type&8?i=Et(r):i=nS(e,t),n[xn]=i}var Zu=class n{constructor(e){m(this,"queryList");m(this,"matches",null);this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Ku=class n{constructor(e=[]){m(this,"queries");this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gd(e,t).matches!==null&&this.queries[t].setDirty()}},Yu=class{constructor(e,t,r=null){m(this,"flags");m(this,"read");m(this,"predicate");this.flags=t,this.read=r,typeof e=="string"?this.predicate=fS(e):this.predicate=e}},Qu=class n{constructor(e=[]){m(this,"queries");this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ju=class n{constructor(e,t=-1){m(this,"metadata");m(this,"matches",null);m(this,"indexInDeclarationView",-1);m(this,"crossesNgTemplate",!1);m(this,"_declarationNodeIndex");m(this,"_appliesToNextNode",!0);this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,oS(t,o)),this.matchTNodeWithReadOption(e,t,ka(t,e,o,!1,!1))}else r===$o?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ka(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===mr||i===Qa||i===$o&&t.type&4)this.addMatch(t.index,-2);else{let o=ka(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function oS(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function sS(n,e){return n.type&11?mi(n,e):n.type&4?hd(n,e):null}function aS(n,e,t,r){return t===-1?sS(e,n):t===-2?lS(n,e,r):Oa(n,n[G],t,e)}function lS(n,e,t){if(t===mr)return mi(e,n);if(t===$o)return hd(e,n);if(t===Qa)return Pg(e,n)}function Ng(n,e,t,r){let i=e[Ot].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(aS(e,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Xu(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Ng(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Ve;d<u.length;d++){let f=u[d];f[wn]===f[Me]&&Xu(f[G],f,l,r)}if(u[cr]!==null){let d=u[cr];for(let f=0;f<d.length;f++){let p=d[f];Xu(p[G],p,l,r)}}}}}return r}function cS(n,e){return n[Ot].queries[e].queryList}function uS(n,e,t){var o;let r=new ja((t&4)===4);return Sh(n,e,r,r.destroy),(e[o=Ot]??(e[o]=new Ku)).queries.push(new Zu(r))-1}function dS(n,e,t){let r=li();return r.firstCreatePass&&(pS(r,new Yu(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),uS(r,Le(),e)}function fS(n){return n.split(",").map(e=>e.trim())}function pS(n,e,t){n.queries===null&&(n.queries=new Qu),n.queries.track(new Ju(e,t))}function gd(n,e){return n.queries.getByIndex(e)}function hS(n,e){let t=n[G],r=gd(t,e);return r.crossesNgTemplate?Xu(t,n,e,[]):Ng(t,n,r,e)}var Ua=class{};var Uo=class extends Ua{constructor(t){super();m(this,"injector");m(this,"componentFactoryResolver",new zu(this));m(this,"instance",null);let r=new ti([...t.providers,{provide:Ua,useValue:this},{provide:Ka,useValue:this.componentFactoryResolver}],t.parent||bo(),t.debugName,new Set(["environment"]));this.injector=r,t.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Rg(n,e,t=null){return new Uo({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var mS=(()=>{let e=class e{constructor(r){m(this,"_injector");m(this,"cachedInjectors",new Map);this._injector=r}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=nu(!1,r.type),o=i.length>0?Rg([i],this._injector,""):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};m(e,"\u0275prov",_e({token:e,providedIn:"environment",factory:()=>new e(de(It))}));let n=e;return n})();function Go(n){return wm(()=>{let e=IS(n),t=Rt(Te({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===id.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(mS).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tt.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&tg("NgStandalone"),bS(t);let r=n.dependencies;return t.directiveDefs=hm(r,gS),t.pipeDefs=hm(r,th),t.id=wS(t),t})}function gS(n){return or(n)||Yc(n)}function yS(n,e){if(n==null)return sr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Ga.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function vS(n){if(n==null)return sr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function IS(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||sr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:yS(n.inputs,e),outputs:vS(n.outputs),debugInfo:null}}function bS(n){var e;(e=n.features)==null||e.forEach(t=>t(n))}function hm(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function wS(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var yd=new oe("");function vd(n){return!!n&&typeof n.then=="function"}function Lg(n){return!!n&&typeof n.subscribe=="function"}var Og=new oe("");var Id=(()=>{let e=class e{constructor(){m(this,"resolve");m(this,"reject");m(this,"initialized",!1);m(this,"done",!1);m(this,"donePromise",new Promise((r,i)=>{this.resolve=r,this.reject=i}));m(this,"appInits",pe(Og,{optional:!0})??[]);m(this,"injector",pe(ir))}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=ya(this.injector,o);if(vd(s))r.push(s);else if(Lg(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};m(e,"\u0275fac",function(i){return new(i||e)}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac,providedIn:"root"}));let n=e;return n})(),jg=new oe("");function Hg(){bc(()=>{let n="";throw new ee(600,n)})}function $g(n){return n.isBoundToModule}var xS=10;var Ja=(()=>{let e=class e{constructor(){m(this,"_runningTick",!1);m(this,"_destroyed",!1);m(this,"_destroyListeners",[]);m(this,"_views",[]);m(this,"internalErrorHandler",pe(Po));m(this,"afterRenderManager",pe(ng));m(this,"zonelessEnabled",pe(No));m(this,"rootEffectScheduler",pe(zh));m(this,"dirtyFlags",0);m(this,"tracingSnapshot",null);m(this,"allTestViews",new Set);m(this,"autoDetectTestViews",new Set);m(this,"includeAllTestViews",!1);m(this,"afterTick",new tn);m(this,"componentTypes",[]);m(this,"components",[]);m(this,"internalPendingTask",pe(ci));m(this,"_injector",pe(It));m(this,"_rendererFactory",null);m(this,"tickImpl",()=>{var i;if(this._runningTick)throw he(ae.ChangeDetectionEnd),new ee(101,!1);let r=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,(i=this.tracingSnapshot)==null||i.dispose(),this.tracingSnapshot=null,X(r),this.afterTick.next(),he(ae.ChangeDetectionEnd)}});pe(qo,{optional:!0})}get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Dc(r=>!r))}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){return this.bootstrapImpl(r,i)}bootstrapImpl(r,i,o=ir.NULL){return this._injector.get(ct).run(()=>{he(ae.BootstrapComponentStart);let a=r instanceof Za;if(!this._injector.get(Id).done){let w="";throw new ee(405,w)}let l;a?l=r:l=this._injector.get(Ka).resolveComponentFactory(r),this.componentTypes.push(l.componentType);let u=$g(l)?void 0:this._injector.get(Ua),d=i||l.selector,f=l.create(o,[],d,u),p=f.location.nativeElement,h=f.injector.get(yd,null);return h==null||h.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Lo(this.components,f),h==null||h.unregisterApplication(p)}),this._loadComponent(f),he(ae.BootstrapComponentEnd,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){he(ae.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(ud.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(pr,null,{optional:!0}));let r=0;for(;this.dirtyFlags!==0&&r++<xS;){he(ae.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{he(ae.ChangeDetectionSyncEnd)}}}synchronizeOnce(){var i,o,s,a;this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let r=!1;if(this.dirtyFlags&7){let c=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:l}of this.allViews){if(!c&&!Do(l))continue;let u=c&&!this.zonelessEnabled?0:1;Ig(l,u),r=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}r||((o=(i=this._rendererFactory)==null?void 0:i.begin)==null||o.call(i),(a=(s=this._rendererFactory)==null?void 0:s.end)==null||a.call(s)),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Do(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Lo(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(r),this._injector.get(jg,[]).forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Lo(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ee(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}};m(e,"\u0275fac",function(i){return new(i||e)}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac,providedIn:"root"}));let n=e;return n})();function Lo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Im,BR=typeof document<"u"&&typeof((Im=document==null?void 0:document.documentElement)==null?void 0:Im.getAnimations)=="function";function mm(n,e,t,r,i){pg(e,n,t,i?"class":"style",r)}function zo(n,e,t,r){let i=Le(),o=i[G],s=n+ft,a=o.firstCreatePass?Dg(s,i,2,e,lC,Dh(),t,r):o.data[s];if(dg(a,i,n,e,Bg),au(a)){let c=i[G];cg(c,i,a),qm(c,a,i)}return r!=null&&ug(i,a),zo}function Zo(){let n=li(),e=an(),t=fg(e);return n.firstCreatePass&&Mg(n,t),pu(t)&&hu(),fu(),t.classesWithoutHost!=null&&Kx(t)&&mm(n,t,Le(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Yx(t)&&mm(n,t,Le(),t.stylesWithoutHost,!1),Zo}function yi(n,e,t,r){return zo(n,e,t,r),Zo(),yi}function Tn(n,e,t,r){let i=Le(),o=i[G],s=n+ft,a=o.firstCreatePass?WC(s,o,2,e,t,r):o.data[s];return dg(a,i,n,e,Bg),r!=null&&ug(i,a),Tn}function _n(){let n=an(),e=fg(n);return pu(e)&&hu(),fu(),_n}var Bg=(n,e,t,r,i)=>(Eu(!0),zm(e[Ye],r,Uh()));var Ko="en-US";var ES=Ko;function Ug(n){typeof n=="string"&&(ES=n.toLowerCase().replace(/_/g,"-"))}function Xa(n,e,t){return dS(n,e,t),Xa}function Yo(n){let e=Le(),t=li(),r=Iu();Ea(r+1);let i=gd(t,r);if(n.dirty&&bh(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=hS(e,r);n.reset(o,uE),n.notifyOnChanges()}return!0}return!1}function Qo(){return cS(Le(),Iu())}function Da(n,e){return n<<17|e<<2}function hr(n){return n>>17&32767}function CS(n){return(n&2)==2}function SS(n,e){return n&131071|e<<17}function ed(n){return n|2}function hi(n){return(n&131068)>>2}function Nu(n,e){return n&-131069|e<<2}function TS(n){return(n&1)===1}function td(n){return n|1}function _S(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=hr(s),c=hi(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||ii(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let f=hr(n[a+1]);n[r+1]=Da(f,a),f!==0&&(n[f+1]=Nu(n[f+1],r)),n[a+1]=SS(n[a+1],r)}else n[r+1]=Da(a,0),a!==0&&(n[a+1]=Nu(n[a+1],r)),a=r;else n[r+1]=Da(c,0),a===0?a=r:n[c+1]=Nu(n[c+1],r),c=r;l&&(n[r+1]=ed(n[r+1])),gm(n,u,r,!0),gm(n,u,r,!1),DS(e,u,n,r,o),s=Da(a,c),o?e.classBindings=s:e.styleBindings=s}function DS(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ii(o,e)>=0&&(t[r+1]=td(t[r+1]))}function gm(n,e,t,r){let i=n[t+1],o=e===null,s=r?hr(i):hi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];MS(c,e)&&(a=!0,n[s+1]=r?td(l):ed(l)),s=r?hr(l):hi(l)}a&&(n[t+1]=r?ed(i):td(i))}function MS(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ii(n,e)>=0:!1}function el(n,e){return AS(n,e,null,!0),el}function AS(n,e,t,r){let i=Le(),o=li(),s=Nh(2);if(o.firstUpdatePass&&PS(o,n,s,r),e!==gi&&qC(i,s,e)){let a=o.data[ko()];jS(o,a,i,i[Ye],n,i[s+1]=HS(e,t),r,s)}}function kS(n,e){return e>=n.expandoStartIndex}function PS(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ko()],s=kS(n,t);$S(o,r)&&e===null&&!s&&(e=!1),e=NS(i,o,e,r),_S(i,o,e,t,s,r)}}function NS(n,e,t,r){let i=jh(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ru(null,n,e,t,r),t=Vo(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ru(i,n,e,t,r),o===null){let c=RS(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Ru(null,n,e,c[1],r),c=Vo(c,e.attrs,r),LS(n,e,r,c))}else o=OS(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function RS(n,e,t){let r=t?e.classBindings:e.styleBindings;if(hi(r)!==0)return n[hr(r)]}function LS(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[hr(i)]=r}function OS(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Vo(r,s,t)}return Vo(r,e.attrs,t)}function Ru(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Vo(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Vo(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),uh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function jS(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=TS(l)?ym(c,e,t,i,hi(l),s):void 0;if(!Va(u)){Va(o)||CS(l)&&(o=ym(c,null,t,i,a,s));let d=Ih(ko(),t);tC(r,s,d,i,o)}}function ym(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=t[i+1];f===gi&&(f=d?In:void 0);let p=d?ga(f,r):u===r?f:void 0;if(l&&!Va(p)&&(p=ga(c,r)),Va(p)&&(a=p,s))return a;let h=n[i+1];i=s?hr(h):hi(h)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=ga(c,r))}return a}function Va(n){return n!==void 0}function HS(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vn(Gm(n)))),n}function $S(n,e){return(n.flags&(e?8:16))!==0}function gr(n,e=""){let t=Le(),r=li(),i=n+ft,o=r.firstCreatePass?md(r,i,1,e,null):r.data[i],s=BS(r,t,o,e,n);t[i]=s,xu()&&sg(r,t,s,o),Ao(o,!1)}var BS=(n,e,t,r,i)=>(Eu(!0),bE(e[Ye],r));var Vg=(()=>{var e;let t=class t{constructor(){m(this,"applicationErrorHandler",pe(Po));m(this,"appRef",pe(Ja));m(this,"taskService",pe(ci));m(this,"ngZone",pe(ct));m(this,"zonelessEnabled",pe(No));m(this,"tracing",pe(qo,{optional:!0}));m(this,"zoneIsDefined",typeof Zone<"u"&&!!Zone.root.run);m(this,"schedulerTickApplyArgs",[{data:{__scheduler_tick__:!0}}]);m(this,"subscriptions",new Ue);m(this,"angularZoneId",this.zoneIsDefined?(e=this.ngZone._inner)==null?void 0:e.get(mo):null);m(this,"scheduleInRootZone",!this.zonelessEnabled&&this.zoneIsDefined&&(pe(Du,{optional:!0})??!1));m(this,"cancelScheduledCallback",null);m(this,"useMicrotaskScheduler",!1);m(this,"runningTick",!1);m(this,"pendingRenderTaskId",null);this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(i){var s;if(!this.zonelessEnabled&&i===5)return;switch(i){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=((s=this.tracing)==null?void 0:s.snapshot(this.appRef.tracingSnapshot))??null,!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Su:Cu;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){this.taskService.remove(i),this.applicationErrorHandler(o)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Su(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var i;if(this.runningTick=!1,(i=this.cancelScheduledCallback)==null||i.call(this),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let o=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(o)}}};m(t,"\u0275fac",function(o){return new(o||t)}),m(t,"\u0275prov",_e({token:t,factory:t.\u0275fac,providedIn:"root"}));let n=t;return n})();function Fg(){return[{provide:ni,useExisting:Vg},{provide:ct,useClass:pa},{provide:No,useValue:!0}]}function US(){return typeof $localize<"u"&&$localize.locale||Ko}var bd=new oe("",{factory:()=>pe(bd,{optional:!0,skipSelf:!0})||US()});var xd=new oe(""),zS=new oe("");function Jo(n){return!n.moduleRef}function ZS(n){let e=Jo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ct);return t.run(()=>{Jo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Po),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Jo(n)){let o=()=>e.destroy(),s=n.platformInjector.get(xd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xd);s.add(o),n.moduleRef.onDestroy(()=>{Lo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return KS(r,t,()=>{let o=e.get(ci),s=o.add(),a=e.get(Id);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(bd,Ko);if(Ug(c||Ko),!e.get(zS,!0))return Jo(n)?e.get(Ja):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Jo(n)){let u=e.get(Ja);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return wd==null||wd(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var wd;function KS(n,e,t){try{let r=t();return vd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var tl=null;function YS(n=[],e){return ir.create({name:e,providers:[{provide:Io,useValue:"platform"},{provide:xd,useValue:new Set([()=>tl=null])},...n]})}function QS(n=[]){if(tl)return tl;let e=YS(n);return tl=e,Hg(),JS(e),e}function JS(n){let e=n.get(Wa,null);ya(n,()=>{e==null||e.forEach(t=>t())})}function qg(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;he(ae.BootstrapApplicationStart);try{let o=(i==null?void 0:i.injector)??QS(r),s=[Fg(),Gh,...t||[]],a=new Uo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return ZS({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{he(ae.BootstrapApplicationEnd)}}var Gg=null;function es(){return Gg}function Ed(n){Gg??(Gg=n)}var Xo=class{};function Cd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ts=class{};var zg="browser";var ns=class{constructor(e){m(this,"_doc");m(this,"manager");this._doc=e}},rl=(()=>{let e=class e extends ns{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o,s){return r.addEventListener(i,o,s),()=>this.removeEventListener(r,i,o,s)}removeEventListener(r,i,o,s){return r.removeEventListener(i,o,s)}};m(e,"\u0275fac",function(i){return new(i||e)(de(Ct))}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})(),sl=new oe(""),Dd=(()=>{let e=class e{constructor(r,i){m(this,"_zone");m(this,"_plugins");m(this,"_eventNameToPlugin",new Map);this._zone=i,r.forEach(a=>{a.manager=this});let o=r.filter(a=>!(a instanceof rl));this._plugins=o.slice().reverse();let s=r.find(a=>a instanceof rl);s&&this._plugins.push(s)}addEventListener(r,i,o,s){return this._findPluginFor(i).addEventListener(r,i,o,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(r,i),i}};m(e,"\u0275fac",function(i){return new(i||e)(de(sl),de(ct))}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})(),Sd="ng-app-id";function Zg(n){for(let e of n)e.remove()}function Kg(n,e){let t=e.createElement("style");return t.textContent=n,t}function XS(n,e,t,r){var o;let i=(o=n.head)==null?void 0:o.querySelectorAll(`style[${Sd}="${e}"],link[${Sd}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Sd),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function _d(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Md=(()=>{let e=class e{constructor(r,i,o,s={}){m(this,"doc");m(this,"appId");m(this,"nonce");m(this,"inline",new Map);m(this,"external",new Map);m(this,"hosts",new Set);this.doc=r,this.appId=i,this.nonce=o,XS(r,i,this.inline,this.external),this.hosts.add(r.head)}addStyles(r,i){for(let o of r)this.addUsage(o,this.inline,Kg);i==null||i.forEach(o=>this.addUsage(o,this.external,_d))}removeStyles(r,i){for(let o of r)this.removeUsage(o,this.inline);i==null||i.forEach(o=>this.removeUsage(o,this.external))}addUsage(r,i,o){let s=i.get(r);s?s.usage++:i.set(r,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,o(r,this.doc)))})}removeUsage(r,i){let o=i.get(r);o&&(o.usage--,o.usage<=0&&(Zg(o.elements),i.delete(r)))}ngOnDestroy(){for(let[,{elements:r}]of[...this.inline,...this.external])Zg(r);this.hosts.clear()}addHost(r){this.hosts.add(r);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(r,Kg(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(r,_d(i,this.doc)))}removeHost(r){this.hosts.delete(r)}addElement(r,i){return this.nonce&&i.setAttribute("nonce",this.nonce),r.appendChild(i)}};m(e,"\u0275fac",function(i){return new(i||e)(de(Ct),de(Fa),de(qa,8),de(Fo))}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})(),Td={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ad=/%COMP%/g;var Qg="%COMP%",e0=`_nghost-${Qg}`,t0=`_ngcontent-${Qg}`,n0=!0,r0=new oe("",{factory:()=>n0});function i0(n){return t0.replace(Ad,n)}function o0(n){return e0.replace(Ad,n)}function Jg(n,e){return e.map(t=>t.replace(Ad,n))}var kd=(()=>{let e=class e{constructor(r,i,o,s,a,c,l=null,u=null){m(this,"eventManager");m(this,"sharedStylesHost");m(this,"appId");m(this,"removeStylesOnCompDestroy");m(this,"doc");m(this,"ngZone");m(this,"nonce");m(this,"tracingService");m(this,"rendererByCompId",new Map);m(this,"defaultRenderer");this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.defaultRenderer=new rs(r,a,c,this.tracingService)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;let o=this.getOrCreateRenderer(r,i);return o instanceof ol?o.applyToHost(r):o instanceof is&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.tracingService;switch(i.encapsulation){case Tt.Emulated:s=new ol(l,u,i,this.appId,d,a,c,f);break;case Tt.ShadowDom:return new il(l,r,i,a,c,this.nonce,f,u);case Tt.ExperimentalIsolatedShadowDom:return new il(l,r,i,a,c,this.nonce,f);default:s=new is(l,u,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(r){this.rendererByCompId.delete(r)}};m(e,"\u0275fac",function(i){return new(i||e)(de(Dd),de(Md),de(Fa),de(r0),de(Ct),de(ct),de(qa),de(qo,8))}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})(),rs=class{constructor(e,t,r,i){m(this,"eventManager");m(this,"doc");m(this,"ngZone");m(this,"tracingService");m(this,"data",Object.create(null));m(this,"throwOnSyntheticProps",!0);m(this,"destroyNode",null);this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Td[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Yg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Td[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Td[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ln.DashCase|ln.Important)?e.style.setProperty(t,r,i&ln.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ln.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){var s;if(typeof e=="string"&&(e=es().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let o=this.decoratePreventDefault(r);return(s=this.tracingService)!=null&&s.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Yg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var il=class extends rs{constructor(t,r,i,o,s,a,c,l){var f;super(t,o,s,c);m(this,"hostEl");m(this,"sharedStylesHost");m(this,"shadowRoot");this.hostEl=r,this.sharedStylesHost=l,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Jg(i.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=(f=i.getExternalStyles)==null?void 0:f.call(i);if(d)for(let p of d){let h=_d(p,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,r){return super.appendChild(this.nodeOrShadowRoot(t),r)}insertBefore(t,r,i){return super.insertBefore(this.nodeOrShadowRoot(t),r,i)}removeChild(t,r){return super.removeChild(null,r)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},is=class extends rs{constructor(t,r,i,o,s,a,c,l){var d;super(t,s,a,c);m(this,"sharedStylesHost");m(this,"removeStylesOnCompDestroy");m(this,"styles");m(this,"styleUrls");this.sharedStylesHost=r,this.removeStylesOnCompDestroy=o;let u=i.styles;this.styles=l?Jg(l,u):u,this.styleUrls=(d=i.getExternalStyles)==null?void 0:d.call(i,l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&fi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ol=class extends is{constructor(t,r,i,o,s,a,c,l){let u=o+"-"+i.id;super(t,r,i,s,a,c,l,u);m(this,"contentAttr");m(this,"hostAttr");this.contentAttr=i0(u),this.hostAttr=o0(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,r){let i=super.createElement(t,r);return super.setAttribute(i,this.contentAttr,""),i}};var al=class n extends Xo{constructor(){super(...arguments);m(this,"supportsDOMEvents",!0)}static makeCurrent(){Ed(new n)}onAndCancel(t,r,i,o){return t.addEventListener(r,i,o),()=>{t.removeEventListener(r,i,o)}}dispatchEvent(t,r){t.dispatchEvent(r)}remove(t){t.remove()}createElement(t,r){return r=r||this.getDefaultDocument(),r.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,r){return r==="window"?window:r==="document"?t:r==="body"?t.body:null}getBaseHref(t){let r=s0();return r==null?null:a0(r)}resetBaseElement(){os=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Cd(document.cookie,t)}},os=null;function s0(){return os=os||document.head.querySelector("base"),os?os.getAttribute("href"):null}function a0(n){return new URL(n,document.baseURI).pathname}var l0=(()=>{let e=class e{build(){return new XMLHttpRequest}};m(e,"\u0275fac",function(i){return new(i||e)}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})(),Xg=["alt","control","meta","shift"],c0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},u0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ey=(()=>{let e=class e extends ns{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o,s){let a=e.parseEventName(i),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>es().onAndCancel(r,a.domEventName,c,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Xg.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=c0[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Xg.forEach(a=>{if(a!==o){let c=u0[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};m(e,"\u0275fac",function(i){return new(i||e)(de(Ct))}),m(e,"\u0275prov",_e({token:e,factory:e.\u0275fac}));let n=e;return n})();function Pd(n,e,t){let r=Te({rootComponent:n,platformRef:t==null?void 0:t.platformRef},d0(e));return qg(r)}function d0(n){return{appProviders:[...g0,...(n==null?void 0:n.providers)??[]],platformProviders:m0}}function f0(){al.makeCurrent()}function p0(){return new rn}function h0(){return od(document),document}var m0=[{provide:Fo,useValue:zg},{provide:Wa,useValue:f0,multi:!0},{provide:Ct,useFactory:h0}];var g0=[{provide:Io,useValue:"root"},{provide:rn,useFactory:p0},{provide:sl,useClass:rl,multi:!0},{provide:sl,useClass:ey,multi:!0},kd,Md,Dd,{provide:pr,useExisting:kd},{provide:ts,useClass:l0},[]];var g=class n{constructor(e,t){this.x=e||0,this.y=t||0}get width(){return this.x}set width(e){this.x=e}get left(){return this.x}get height(){return this.y}set height(e){this.y=e}get top(){return this.y}add(e){return new n(this.x+e.x,this.y+e.y)}sub(e){return this.add(e.mul(-1))}mul(e){return new n(this.x*e,this.y*e)}div(e){return this.mul(1/e)}clone(){return new n(this.x,this.y)}get normal(){return new n(ty(this.x),ty(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}};function ty(n){return n>0?1:n<0?-1:0}var re=class{constructor(){this._phase=0;this._propagationStopped=!1;this._source=null}stopPropagation(){this._propagationStopped=!0,this.destroy()}get propagationStopped(){return this._propagationStopped}get target(){return this._target}set target(e){if(this._target!==void 0)throw new Error("Event target already set!");this._target=e,this._phase=0}get source(){return this._source}set source(e){if(this._source!==null)throw new Error("Event source already set!");this._source=e}get phase(){return this._phase}capture(){this._phase=1}destroy(){this._target=null,this._source=null}};var Ht=class extends re{};var cn=class extends re{};var Ae=class{constructor(){this._eventHandlers=new Map}on(e,t){let r=this._eventHandlers.get(e)||new Set;r.has(t)||(r.add(t),this._eventHandlers.set(e,r))}off(e,t){let r=this._eventHandlers.get(e)||new Set;r.delete(t),this._eventHandlers.set(e,r)}handleEvent(e){e.source===null&&(e.source=this);for(let[t,r]of this._eventHandlers)if(e instanceof t){for(let i of r)if(i(e),e.propagationStopped)return}}};var un=class extends re{};var Dn=class extends Ae{constructor(t){super();this._children=[];this._childrenCacheDirty=!0;this._visible=!0;this._depth=0;t&&t.forEach(r=>this.addChild(r))}set isVisible(t){this._visible=t}get isVisible(){if(!this._visible)return!1;let t=this.parent;return t?t.isVisible:!0}get depth(){return this._depth}set depth(t){this._depth!==t&&(this._depth=t,this._parent&&(this._parent._childrenCacheDirty=!0))}get children(){return this._children}get depthSortedChildren(){return(this._childrenCacheDirty||!this._depthSortedChildrenCache)&&(this._depthSortedChildrenCache=[...this._children].sort((t,r)=>t.depth-r.depth),this._childrenCacheDirty=!1),this._depthSortedChildrenCache}get parent(){return this._parent}set parent(t){if(this._parent!==void 0)throw new Error("Cannot set parent while one already set! First remove this child from existing parent.");this._parent=t,this.dispatchEvent(new un)}get rootElement(){return this._parent===void 0?this:this._parent.rootElement}clearParent(){this._parent=void 0}addChild(t,r=0){this._children.push(t),t._depth=r,this._childrenCacheDirty=!0,t.parent=this,t.dispatchEvent(new Ht)}removeChild(t){this._children=this._children.filter(r=>r!==t),this._childrenCacheDirty=!0,t.dispatchEvent(new cn),t.clearParent()}removeAllChildren(){this._children.forEach(t=>{t.dispatchEvent(new cn),t.removeAllChildren(),t.clearParent()}),this._children=[],this._childrenCacheDirty=!0}remove(){if(this._parent===void 0)throw new Error("Cannot remove, no parent set!");this._parent.removeChild(this)}dispatchEvent(t){if(t.target===void 0){t.target=this,this.rootElement.dispatchEvent(t);return}if(super.handleEvent(t),!t.propagationStopped&&!(t.target===this&&(t.capture(),super.handleEvent(t),t.propagationStopped))&&t.phase===0){this._children.length===0&&t.destroy();for(let r of this._children)if(r.dispatchEvent(t),t.propagationStopped)return}}};var Qe=class extends Dn{};function ny(n,e,t=!1){let r=t?n.depthSortedChildren:n.children;for(let i of r)e(i),ny(i,e,t)}var le=class{static childrenByType(e,t,r=!1,i=!1){if(!r){let a=[];return ny(t,c=>{c instanceof e&&a.push(c)},!1),a}let o=[];function s(a,c){for(let l of a.children){let u=c+l.depth;i&&!l.isVisible||(l instanceof e&&o.push({element:l,depth:u}),s(l,u))}}return s(t,0),o.sort((a,c)=>a.depth-c.depth),o.map(a=>a.element)}static parentByType(e,t){if(t.parent instanceof e)return t.parent;if(t.parent)return this.parentByType(e,t.parent)}};var Mn=class{constructor(e){this.workFn=e;this.maxFps=10,this.fpsInterval=this.computeFpsInterval(),this.previousTime=0,this.adjustedPreviousTime=0,this.stopRequested=!1,document.addEventListener("visibilitychange",()=>{document.hidden?this.stopRequested=!0:this.start(this.maxFps)})}start(e){this.maxFps=e,this.fpsInterval=this.computeFpsInterval(),this.previousTime=0,this.adjustedPreviousTime=0,this.stopRequested=!1,requestAnimationFrame(this.workLoop.bind(this))}workLoop(e){if(!this.stopRequested){if(this.previousTime===0)this.previousTime=e,this.adjustedPreviousTime=e;else{let t=e-this.adjustedPreviousTime;t>=this.fpsInterval&&(this.workFn(e,e-this.previousTime),this.adjustedPreviousTime=e-t%this.fpsInterval,this.previousTime=e)}requestAnimationFrame(this.workLoop.bind(this))}}computeFpsInterval(){return 1e3/this.maxFps}};var W=class{static get(e){return this._data.get(e)}static set(e,t){this._data.set(e,t)}};W._data=new Map;var Fe=class extends re{constructor(t){super();this.scene=t}};var vi=class extends Ae{constructor(t,r,i,o){super();this.viewport=t;this.renderer=r;this.physicsSimulation=i;this.inputDevices=o;r.setViewport(t),i.setViewport(t)}loadScene(t){this.renderer.setRootElement(t),this.physicsSimulation.setRootElement(t),this.inputDevices.forEach(i=>i.setRootElement(t));let r=new Fe(t);this.handleEvent(r),t.handleEvent(r)}start(t,r){this.renderer.start(t),this.physicsSimulation.start(r)}};var $t=class extends Ae{setRootElement(e){this.rootElement=e}dispatchEvent(e){var t;e.target=null,(t=this.rootElement)==null||t.dispatchEvent(e)}};var We=class extends re{};var ce=class extends We{constructor(t,r){super();this.key=t;this.action=r}},Ii=class extends $t{constructor(e){super(),e.addEventListener("keydown",this.eventHandler.bind(this)),e.addEventListener("keyup",this.eventHandler.bind(this))}eventHandler(e){this.dispatchEvent(new ce(e.key,e.type==="keydown"?0:1))}};var y0=[0,2,1];var An=class extends We{constructor(t,r,i){super();this.button=t;this.action=r;this.point=i}},kn=class extends We{constructor(t){super();this.point=t}},ss=class ss extends $t{constructor(t,r){super();this.getLocalPoint=r;t.addEventListener("mousedown",this.inputEventHandler.bind(this)),t.addEventListener("mouseup",this.inputEventHandler.bind(this)),t.addEventListener("mousemove",this.moveEventHandler.bind(this))}static getLastPosition(){return ss.lastPosition}inputEventHandler(t){for(let r of y0)t.button===r&&this.dispatchEvent(new An(r,t.type==="mousedown"?0:1,this.getLocalPoint(new g(t.x,t.y))))}moveEventHandler(t){let r=this.getLocalPoint(new g(t.x,t.y));ss.lastPosition=r,this.dispatchEvent(new kn(r))}};ss.lastPosition=null;var Pn=ss;var bi=class extends We{constructor(t,r){super();this.type=t;this.meta=r}},wi=class extends Ae{constructor(t){super();this.element=t}trigger(t,r){let i={when:o=>(this.element.on(o.type,s=>{o.condition(s)&&this.handleEvent(new bi(t,r))}),i)};return i}};var ll=class extends re{},xi=class extends Ae{constructor(t){super();this._state=new Map;this.inputMapper=new wi(t),this.inputMapper.on(bi,r=>{let i=r.meta==="on";i!==this._state.get(r.type)&&(this._state.set(r.type,i),this.handleEvent(new ll))})}setOn(t){return this.inputMapper.trigger(t,"on")}setOff(t){return this.inputMapper.trigger(t,"off")}onChange(t){this.on(ll,()=>{t(this._state)})}get state(){return this._state}};var Nn=class extends We{constructor(t){super();this.point=t}},yr=class extends We{constructor(t){super();this.point=t}},vr=class extends We{constructor(t,r){super();this.button=t;this.point=r}};var Ei=class extends Ae{constructor(t){super();this._target=t;this.isHovered=!1;this.hasCheckedInitialPosition=!1;this.setupListeners()}get target(){return this._target}setupListeners(){this.target.on(un,this.handleElementAdded.bind(this)),this.target.rootElement.on(kn,this.handleMouseMove.bind(this)),this.target.rootElement.on(An,this.handleMouseInput.bind(this))}handleElementAdded(){this.hasCheckedInitialPosition||(this.hasCheckedInitialPosition=!0,setTimeout(()=>{this.checkInitialPosition()},15))}checkInitialPosition(){let t=Pn.getLastPosition();t&&this.isPointInBounds(t)&&(this.isHovered=!0,this.handleEvent(new Nn(t)))}handleMouseMove(t){if(!(t instanceof kn))return;let r=this.isPointInBounds(t.point);r&&!this.isHovered?(this.isHovered=!0,this.handleEvent(new Nn(t.point))):!r&&this.isHovered&&(this.isHovered=!1,this.handleEvent(new yr(t.point)))}handleMouseInput(t){t instanceof An&&t.action===1&&this.isHovered&&this.handleEvent(new vr(t.button,t.point))}isPointInBounds(t){let r=this.target.position,i=this.target.width,o=this.target.height;return t.x>=r.x&&t.x<=r.x+i&&t.y>=r.y&&t.y<=r.y+o}destroy(){this.target.off(un,this.handleElementAdded.bind(this)),this.target.rootElement.off(kn,this.handleMouseMove.bind(this)),this.target.rootElement.off(An,this.handleMouseInput.bind(this))}};var Ci=class extends $t{pressKey(e){this.dispatchEvent(new ce(e,0))}releaseKey(e){this.dispatchEvent(new ce(e,1))}};var Bt=class extends Dn{draw(e){}};function Rn(n){return"item"in n&&"position"in n}var $=class n extends Bt{constructor(t,r){super(r);this._opacity=1;this._scale=new g(1,1);this._fillColor=void 0;this.clipRegion=void 0;this.cacheable=!1;this._position=t||new g,this._translation=new g}get cacheKey(){}get opacity(){let t=this._opacity,r=le.parentByType(n,this);return r&&(t*=r.opacity),t}set opacity(t){this._opacity=t}get scale(){return this._scale}set scale(t){this._scale=t}get ownPosition(){return this._position.add(this._translation)}get position(){let t=this.ownPosition,r=le.parentByType(n,this);return r?r.position.add(t):t}set position(t){this._position=t}set translation(t){this._translation=t}get fillColor(){if(this._fillColor!==void 0)return this._fillColor;let t=le.parentByType(n,this);if(t)return t.fillColor}set fillColor(t){this._fillColor=t}get width(){return 0}get height(){return 0}get size(){return new g(this.width,this.height)}};function I0(n,e){let t=new Image;t.onload=async()=>{let{naturalWidth:r,naturalHeight:i}=t,s=new OffscreenCanvas(r,i).getContext("2d");if(s){s.drawImage(t,0,0);let a=await createImageBitmap(s.getImageData(0,0,r,i));e(a)}},t.src=n}var Ir=class Ir{constructor(){this.data=new Image;this.width=0;this.height=0;this.id=`tex_${Ir.nextId++}`}static empty(){return new Ir}static load(e){let t=new Ir;return I0(e,r=>{t.data=r,t.width=r.width,t.height=r.height}),t}static fromImageBitmap(e){let t=new Ir;return t.data=e,t.width=e.width,t.height=e.height,t}toOffscreenCanvas(){let e=new OffscreenCanvas(this.width,this.height),t=e.getContext("2d");return t==null||t.drawImage(this.data,0,0),e}};Ir.nextId=0;var Ut=Ir;var _t=class{constructor(){this.cache=new Map}async get(e,t){let r=this.cache.get(e);return r||(r=t(),this.cache.set(e,r)),r}};var Rd=class{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){let t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){let t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach(t=>{let r=this.references.get(t);r&&(r.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,t])=>!t.resolved&&!t.requested).map(([e,t])=>e)}},Dt=new Map,br="___parser_",Mt={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},cl={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},ul={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},ve=class n{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new n}primitiveGenerateN(e,t){let r=cl[e],i=ul[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${r}(offset, ${i});`),t.pushCode(`offset += ${Mt[e]};`)}primitiveN(e,t,r){return this.setNextParser(e,t,r)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,r){return r.length=e,this.setNextParser("bit",t,r)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return Dt.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!Dt.has(t.type)&&!(t.type in Mt))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(let r in t.choices){let i=parseInt(r,10),o=t.choices[i];if(isNaN(i))throw new Error(`Choice key "${r}" is not a number.`);if(typeof o=="string"&&!Dt.has(o)&&!(o in Mt))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof n)&&!Dt.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof n)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in Mt)&&!Dt.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){let t=new Rd(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${br+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${br+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){let t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(r=>{var i;(i=Dt.get(r))===null||i===void 0||i.addAliasedCode(e)})}compile(){let e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(Mt).indexOf(this.type)>=0)e=Mt[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=Mt[this.options.type]:this.options.type instanceof n&&(t=this.options.type.sizeOf()),e=this.options.length*t}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,r){let i=new n;return i.type=e,i.varName=t,i.options=r,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}let t=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;let t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let r=e.addImport(this.options.assert);e.pushCode(`if (!${r}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){let t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let r=e.generateTmpVariable();e.pushCode(`var ${r} = 0;`);let i=(u=0)=>{let d=0;for(let f=u;f<e.bitFields.length;f++){let p=e.bitFields[f].options.length;if(d+p>32)break;d+=p}return d},o=u=>(u<=8?(e.pushCode(`${r} = dataView.getUint8(offset);`),u=8):u<=16?(e.pushCode(`${r} = dataView.getUint16(offset);`),u=16):u<=24?(e.pushCode(`${r} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),u=24):(e.pushCode(`${r} = dataView.getUint32(offset);`),u=32),e.pushCode(`offset += ${u/8};`),u),s=0,a=this.endian==="be",c=0,l=0;e.bitFields.forEach((u,d)=>{let f=u.options.length;if(f>l){if(l){let w=-1>>>32-l;e.pushCode(`${u.varName} = (${r} & 0x${w.toString(16)}) << ${f-l};`),f-=l}s=0,l=c=o(i(d)-l)}let p=a?c-s-f:s,h=-1>>>32-f;e.pushCode(`${u.varName} ${f<u.options.length?"|=":"="} ${r} >> ${p} & 0x${h.toString(16)};`),u.options.length===32&&e.pushCode(`${u.varName} >>>= 0`),u.options.assert&&u.generateAssert(e),u.options.formatter&&u.generateFormatter(e,u.varName,u.options.formatter),s+=f,l-=f}),e.bitFields=[]}}generateSeek(e){let t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){let t=e.generateVariable(this.varName),r=e.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",s='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let a=this.options.length;e.pushCode(`var ${r} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${a});`);let c=`offset - ${r} < ${a} ? offset - 1 : offset`;e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, ${c}), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, ${c}));`)}else if(this.options.length){let a=e.generateOption(this.options.length);e.pushCode(o?`${t} = Array.from(buffer.subarray(offset, offset + ${a}), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${r} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, offset - 1), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${r} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, offset), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){let t=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let r=this.options.readUntil,i=e.generateTmpVariable(),o=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${o} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${o} = dataView.getUint8(offset);`);let s=e.addImport(r);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${t} = buffer.subarray(offset);`);else{let r=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${r});`),e.pushCode(`offset += ${r};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){let t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),i=this.options.type,o=e.generateTmpVariable(),s=e.generateVariable(this.varName),a=e.generateTmpVariable(),c=this.options.key,l=typeof c=="string";if(l?e.pushCode(`${s} = {};`):e.pushCode(`${s} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):r!==void 0?e.pushCode(`for (var ${o} = offset + ${r}; offset < ${o}; ) {`):e.pushCode(`for (var ${o} = ${t}; ${o} > 0; ${o}--) {`),typeof i=="string")if(Dt.get(i)){let u=e.generateTmpVariable();if(e.pushCode(`var ${u} = ${br+i}(offset, {`),e.useContextVariables){let d=e.generateVariable();e.pushCode(`$parent: ${d},`),e.pushCode(`$root: ${d}.$root,`),!this.options.readUntil&&r===void 0&&e.pushCode(`$index: ${t} - ${o},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${u}.result; offset = ${u}.offset;`),i!==this.alias&&e.addReference(i)}else{let u=cl[i],d=ul[i];e.pushCode(`var ${a} = dataView.get${u}(offset, ${d});`),e.pushCode(`offset += ${Mt[i]};`)}else if(i instanceof n){e.pushCode(`var ${a} = {};`);let u=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${u};`),e.pushCode(`${a}.$root = ${u}.$root;`),!this.options.readUntil&&r===void 0&&e.pushCode(`${a}.$index = ${t} - ${o};`)),i.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(l?e.pushCode(`${s}[${a}.${c}] = ${a};`):e.pushCode(`${s}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){let u=this.options.readUntil,d=e.addImport(u);e.pushCode(`while (!${d}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,r){if(typeof r=="string"){let i=e.generateVariable(this.varName);if(Dt.has(r)){let o=e.generateTmpVariable();e.pushCode(`var ${o} = ${br+r}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${i}.$parent,`),e.pushCode(`$root: ${i}.$root,`)),e.pushCode("});"),e.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),r!==this.alias&&e.addReference(r)}else{let o=cl[r],s=ul[r];e.pushCode(`${i} = dataView.get${o}(offset, ${s});`),e.pushCode(`offset += ${Mt[r]}`)}}else r instanceof n&&(e.pushPath(t),r.generate(e),e.popPath(t))}generateChoice(e){let t=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${r} = {};`),e.useContextVariables)){let i=e.generateVariable();e.pushCode(`${r}.$parent = ${i};`),e.pushCode(`${r}.$root = ${i}.$root;`)}e.pushCode(`switch(${t}) {`);for(let i in this.options.choices){let o=parseInt(i,10),s=this.options.choices[o];e.pushCode(`case ${o}:`),this.generateChoiceCase(e,this.varName,s),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}generateNest(e){let t=e.generateVariable(this.varName);if(this.options.type instanceof n){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){let r=e.generateVariable();e.pushCode(`${t}.$parent = ${r};`),e.pushCode(`${t}.$root = ${r}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(Dt.has(this.options.type)){let r=e.generateTmpVariable();if(e.pushCode(`var ${r} = ${br+this.options.type}(offset, {`),e.useContextVariables){let i=e.generateVariable();e.pushCode(`$parent: ${i},`),e.pushCode(`$root: ${i}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){let t=e.generateVariable(this.varName),r=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){let c=this.options.readUntil,l=e.generateTmpVariable(),u=e.generateTmpVariable();e.pushCode(`var ${l} = offset;`),e.pushCode(`var ${u} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${u} = dataView.getUint8(offset);`);let d=e.addImport(c);e.pushCode(`if (${d}.call(${e.generateVariable()}, ${u}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${r} = buffer.subarray(${l}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${r} = buffer.subarray(offset);`);else{let c=e.generateOption(this.options.length);e.pushCode(`${r} = buffer.subarray(offset, offset + ${c});`),e.pushCode(`offset += ${c};`)}this.options.clone&&e.pushCode(`${r} = buffer.constructor.from(${r});`);let i=e.generateTmpVariable(),o=e.generateTmpVariable(),s=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${r} = ${a}.call(this, ${r}).subarray(0);`),e.pushCode(`var ${i} = buffer;`),e.pushCode(`var ${o} = offset;`),e.pushCode(`var ${s} = dataView;`),e.pushCode(`buffer = ${r};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof n)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(Dt.has(this.options.type)){let c=e.generateTmpVariable();e.pushCode(`var ${c} = ${br+this.options.type}(0);`),e.pushCode(`${t} = ${c}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${i};`),e.pushCode(`dataView = ${s};`),e.pushCode(`offset = ${o};`)}generateFormatter(e,t,r){if(typeof r=="function"){let i=e.addImport(r);e.pushCode(`${t} = ${i}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){let t=this.options.type,r=e.generateOption(this.options.offset),i=e.generateTmpVariable(),o=e.generateVariable(this.varName);if(e.pushCode(`var ${i} = offset;`),e.pushCode(`offset = ${r};`),this.options.type instanceof n){if(e.pushCode(`${o} = {};`),e.useContextVariables){let s=e.generateVariable();e.pushCode(`${o}.$parent = ${s};`),e.pushCode(`${o}.$root = ${s}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${o}.$parent;`),e.pushCode(`delete ${o}.$root;`))}else if(Dt.has(this.options.type)){let s=e.generateTmpVariable();if(e.pushCode(`var ${s} = ${br+this.options.type}(offset, {`),e.useContextVariables){let a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${o} = ${s}.result; offset = ${s}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(Mt).indexOf(this.options.type)>=0){let s=cl[t],a=ul[t];e.pushCode(`${o} = dataView.get${s}(offset, ${a});`),e.pushCode(`offset += ${Mt[t]};`)}e.pushCode(`offset = ${i};`)}generateSaveOffset(e){let t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}};var b0=new ve().endianness("little").array("data",{type:"uint8",lengthInBytes:function(){return this.$parent.size-6}}),w0=new ve().endianness("little").uint8("red").uint8("green").uint8("blue"),x0=new ve().endianness("little").uint8("red").uint8("green").uint8("blue").uint8("alpha"),dl=new ve().endianness("little").uint16("length").string("value",{length:"length"}),ry=new ve().endianness("little").uint16("numberOfPackets").array("packets",{type:new ve().endianness("little").uint8("entriesToSkip").uint8("numberOfColors").array("colors",{type:w0,length:function(){return this.numberOfColors||256}}),length:"numberOfPackets"}),E0=new ve().endianness("little").uint32("size").uint32("firstIndex").uint32("lastIndex").seek(8).array("colors",{type:new ve().endianness("little").uint16("flags").nest("color",{type:x0}).array("name",{type:dl,length:function(){return this.flags===1?1:0}}),length:function(){return this.lastIndex-this.firstIndex+1}}),C0=new ve().endianness("little").uint16("flags").uint16("type").uint16("childLevel").uint16("ignored").uint16("ignored").uint16("blendMode").uint8("opacity").seek(3).nest("name",{type:dl}).array("tilesetIndex",{type:"uint32le",length:function(){return this.type===2?1:0}}),S0=new ve().endianness("little").uint16("linkedFrame"),T0=new ve().endianness("little").uint16("w").uint16("h").array("rawCompressed",{type:"uint8",length:function(){return this.$parent.$parent.size-26}}),_0=new ve().endianness("little").uint16("w").uint16("h").uint16("bitsPerTile").uint32("tileIdBitmask").uint32("xFlipBitmask").uint32("yFlipBitmask").uint32("diagonalFlipBitmask").seek(10).array("rawCompressed",{type:"uint8",length:function(){return this.$parent.$parent.size-54}}),Ld=1,Od=2,D0=3,M0=new ve().endianness("little").uint16("layerIndex").int16("x").int16("y").uint8("opacity").uint16("cellType").int16("zIndex").seek(5).choice("data",{tag:"cellType",choices:{[Ld]:S0,[Od]:T0,[D0]:_0}}),A0=new ve().endianness("little").uint16("fromFrame").uint16("toFrame").uint8("loopAnimationDirection").uint16("repeatAnimation").seek(10).nest("tagName",{type:dl}),k0=new ve().endianness("little").uint16("numberOfTags").seek(8).array("tags",{type:A0,length:"numberOfTags"}),P0=new ve().endianness("little").uint32("tilesetId").uint32("tilesetFlags").uint32("numberOfTiles").uint16("tileWidth").uint16("tileHeight").int16("baseIndex").seek(14).nest("name",{type:dl}).array("external",{type:"uint32le",length:function(){return this.tilesetFlags&1?2:0}}).array("internalLength",{type:"uint32le",length:function(){return this.tilesetFlags&2?1:0}}).array("rawCompressed",{type:"uint8",length:function(){return this.tilesetFlags&2?this.internalLength[0]:0}}),N0=new ve().endianness("little").uint32("fileSize").uint16("magicNumber").uint16("frames").uint16("width").uint16("height").uint16("colorDepth").uint32("flags").uint16("DEPRECATED_speed").seek(8).uint8("transparentIndex").seek(3).uint16("numberOfColors").uint8("pixelWidth").uint8("pixelHeight").int16("gridX").int16("gridY").uint16("gridWidth").uint16("gridHeight").seek(84),R0=new ve().endianness("little").uint32("bytesInFrame").uint16("magicNumber").uint16("oldChunks").uint16("frameDuration").seek(2).uint32("chunks"),Si=8196,jd=8197,fl=8216,L0=4,O0=17,Hd=8217,$d=8227,j0=new ve().endianness("little").uint32("size").uint16("chunkType").choice("data",{tag:"chunkType",choices:{[L0]:ry,[O0]:ry,[Si]:C0,[jd]:M0,[fl]:k0,[Hd]:E0,[$d]:P0},defaultChoice:b0}),H0=new ve().endianness("little").nest("header",{type:R0}).array("chunks",{type:j0,length:function(){return this.header.chunks||this.header.oldChunks}}),iy=new ve().useContextVars().endianness("little").nest("header",{type:N0}).array("frames",{type:H0,length:"header.frames"});function ki(n){let e=n.length;for(;--e>=0;)n[e]=0}var $0=0,Fy=1,B0=2,U0=3,V0=258,uf=29,ws=256,ps=ws+1+uf,Di=30,df=19,Wy=2*ps+1,wr=15,Bd=16,F0=7,ff=256,qy=16,Gy=17,zy=18,ef=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vl=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),W0=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Zy=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q0=512,fn=new Array((ps+2)*2);ki(fn);var us=new Array(Di*2);ki(us);var hs=new Array(q0);ki(hs);var ms=new Array(V0-U0+1);ki(ms);var pf=new Array(uf);ki(pf);var Il=new Array(Di);ki(Il);function Ud(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var Ky,Yy,Qy;function Vd(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var Jy=n=>n<256?hs[n]:hs[256+(n>>>7)],gs=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Je=(n,e,t)=>{n.bi_valid>Bd-t?(n.bi_buf|=e<<n.bi_valid&65535,gs(n,n.bi_buf),n.bi_buf=e>>Bd-n.bi_valid,n.bi_valid+=t-Bd):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Ft=(n,e,t)=>{Je(n,t[e*2],t[e*2+1])},Xy=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},G0=n=>{n.bi_valid===16?(gs(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},z0=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,d,f,p,h,w=0;for(f=0;f<=wr;f++)n.bl_count[f]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<Wy;l++)u=n.heap[l],f=t[t[u*2+1]*2+1]+1,f>c&&(f=c,w++),t[u*2+1]=f,!(u>r)&&(n.bl_count[f]++,p=0,u>=a&&(p=s[u-a]),h=t[u*2],n.opt_len+=h*(f+p),o&&(n.static_len+=h*(i[u*2+1]+p)));if(w!==0){do{for(f=c-1;n.bl_count[f]===0;)f--;n.bl_count[f]--,n.bl_count[f+1]+=2,n.bl_count[c]--,w-=2}while(w>0);for(f=c;f!==0;f--)for(u=n.bl_count[f];u!==0;)d=n.heap[--l],!(d>r)&&(t[d*2+1]!==f&&(n.opt_len+=(f-t[d*2+1])*t[d*2],t[d*2+1]=f),u--)}},ev=(n,e,t)=>{let r=new Array(wr+1),i=0,o,s;for(o=1;o<=wr;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=Xy(r[a]++,a))}},Z0=()=>{let n,e,t,r,i,o=new Array(wr+1);for(t=0,r=0;r<uf-1;r++)for(pf[r]=t,n=0;n<1<<ef[r];n++)ms[t++]=r;for(ms[t-1]=r,i=0,r=0;r<16;r++)for(Il[r]=i,n=0;n<1<<vl[r];n++)hs[i++]=r;for(i>>=7;r<Di;r++)for(Il[r]=i<<7,n=0;n<1<<vl[r]-7;n++)hs[256+i++]=r;for(e=0;e<=wr;e++)o[e]=0;for(n=0;n<=143;)fn[n*2+1]=8,n++,o[8]++;for(;n<=255;)fn[n*2+1]=9,n++,o[9]++;for(;n<=279;)fn[n*2+1]=7,n++,o[7]++;for(;n<=287;)fn[n*2+1]=8,n++,o[8]++;for(ev(fn,ps+1,o),n=0;n<Di;n++)us[n*2+1]=5,us[n*2]=Xy(n,5);Ky=new Ud(fn,ef,ws+1,ps,wr),Yy=new Ud(us,vl,0,Di,wr),Qy=new Ud(new Array(0),W0,0,df,F0)},tv=n=>{let e;for(e=0;e<ps;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Di;e++)n.dyn_dtree[e*2]=0;for(e=0;e<df;e++)n.bl_tree[e*2]=0;n.dyn_ltree[ff*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},nv=n=>{n.bi_valid>8?gs(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},oy=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},Fd=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&oy(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!oy(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},sy=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?Ft(n,i,e):(s=ms[i],Ft(n,s+ws+1,e),a=ef[s],a!==0&&(i-=pf[s],Je(n,i,a)),r--,s=Jy(r),Ft(n,s,t),a=vl[s],a!==0&&(r-=Il[s],Je(n,r,a)));while(o<n.sym_next);Ft(n,ff,e)},tf=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=Wy,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)Fd(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Fd(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,Fd(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],z0(n,e),ev(t,c,n.bl_count)},ay=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[qy*2]++):a<=10?n.bl_tree[Gy*2]++:n.bl_tree[zy*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},ly=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do Ft(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(Ft(n,o,n.bl_tree),a--),Ft(n,qy,n.bl_tree),Je(n,a-3,2)):a<=10?(Ft(n,Gy,n.bl_tree),Je(n,a-3,3)):(Ft(n,zy,n.bl_tree),Je(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}},K0=n=>{let e;for(ay(n,n.dyn_ltree,n.l_desc.max_code),ay(n,n.dyn_dtree,n.d_desc.max_code),tf(n,n.bl_desc),e=df-1;e>=3&&n.bl_tree[Zy[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},Y0=(n,e,t,r)=>{let i;for(Je(n,e-257,5),Je(n,t-1,5),Je(n,r-4,4),i=0;i<r;i++)Je(n,n.bl_tree[Zy[i]*2+1],3);ly(n,n.dyn_ltree,e-1),ly(n,n.dyn_dtree,t-1)},Q0=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<ws;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},cy=!1,J0=n=>{cy||(Z0(),cy=!0),n.l_desc=new Vd(n.dyn_ltree,Ky),n.d_desc=new Vd(n.dyn_dtree,Yy),n.bl_desc=new Vd(n.bl_tree,Qy),n.bi_buf=0,n.bi_valid=0,tv(n)},rv=(n,e,t,r)=>{Je(n,($0<<1)+(r?1:0),3),nv(n),gs(n,t),gs(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},X0=n=>{Je(n,Fy<<1,3),Ft(n,ff,fn),G0(n)},eT=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Q0(n)),tf(n,n.l_desc),tf(n,n.d_desc),s=K0(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?rv(n,e,t,r):n.strategy===4||o===i?(Je(n,(Fy<<1)+(r?1:0),3),sy(n,fn,us)):(Je(n,(B0<<1)+(r?1:0),3),Y0(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),sy(n,n.dyn_ltree,n.dyn_dtree)),tv(n),r&&nv(n)},tT=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(ms[t]+ws+1)*2]++,n.dyn_dtree[Jy(e)*2]++),n.sym_next===n.sym_end),nT=J0,rT=rv,iT=eT,oT=tT,sT=X0,aT={_tr_init:nT,_tr_stored_block:rT,_tr_flush_block:iT,_tr_tally:oT,_tr_align:sT},lT=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},ys=lT,cT=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},uT=new Uint32Array(cT()),dT=(n,e,t,r)=>{let i=uT,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},ke=dT,Cr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:fT,_tr_stored_block:nf,_tr_flush_block:pT,_tr_tally:jn,_tr_align:hT}=aT,{Z_NO_FLUSH:Hn,Z_PARTIAL_FLUSH:mT,Z_FULL_FLUSH:gT,Z_FINISH:pt,Z_BLOCK:uy,Z_OK:Oe,Z_STREAM_END:dy,Z_STREAM_ERROR:Wt,Z_DATA_ERROR:yT,Z_BUF_ERROR:Wd,Z_DEFAULT_COMPRESSION:vT,Z_FILTERED:IT,Z_HUFFMAN_ONLY:pl,Z_RLE:bT,Z_FIXED:wT,Z_DEFAULT_STRATEGY:xT,Z_UNKNOWN:ET,Z_DEFLATED:xl}=Pi,CT=9,ST=15,TT=8,_T=29,DT=256,rf=DT+1+_T,MT=30,AT=19,kT=2*rf+1,PT=15,J=3,On=258,qt=On+J+1,NT=32,Mi=42,hf=57,of=69,sf=73,af=91,lf=103,xr=113,ls=666,qe=1,Ni=2,Sr=3,Ri=4,RT=3,Er=(n,e)=>(n.msg=Cr[e],e),fy=n=>n*2-(n>4?9:0),Ln=n=>{let e=n.length;for(;--e>=0;)n[e]=0},LT=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},OT=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,$n=OT,rt=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},it=(n,e)=>{pT(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,rt(n.strm)},ie=(n,e)=>{n.pending_buf[n.pending++]=e},as=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},cf=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=ys(n.adler,e,i,t):n.state.wrap===2&&(n.adler=ke(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},iv=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-qt?n.strstart-(n.w_size-qt):0,l=n.window,u=n.w_mask,d=n.prev,f=n.strstart+On,p=l[r+s-1],h=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==h||l[i+s-1]!==p||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(o=On-(f-r),r=f-On,o>s){if(n.match_start=e,s=o,o>=a)break;p=l[r+s-1],h=l[r+s]}}while((e=d[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead},Ai=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-qt)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),LT(n),r+=e),n.strm.avail_in===0)break;if(t=cf(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=J)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=$n(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=$n(n,n.ins_h,n.window[i+J-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<J)););}while(n.lookahead<qt&&n.strm.avail_in!==0)},ov=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==pt||e===Hn||r!==i+n.strm.avail_in)))break;s=e===pt&&r===i+n.strm.avail_in?1:0,nf(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,rt(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(cf(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?Ri:e!==Hn&&e!==pt&&n.strm.avail_in===0&&n.strstart===n.block_start?Ni:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(cf(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===pt)&&e!==Hn&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===pt&&n.strm.avail_in===0&&r===i?1:0,nf(n,n.block_start,r,s),n.block_start+=r,rt(n.strm)),s?Sr:qe)},qd=(n,e)=>{let t,r;for(;;){if(n.lookahead<qt){if(Ai(n),n.lookahead<qt&&e===Hn)return qe;if(n.lookahead===0)break}if(t=0,n.lookahead>=J&&(n.ins_h=$n(n,n.ins_h,n.window[n.strstart+J-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-qt&&(n.match_length=iv(n,t)),n.match_length>=J)if(r=jn(n,n.strstart-n.match_start,n.match_length-J),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=J){n.match_length--;do n.strstart++,n.ins_h=$n(n,n.ins_h,n.window[n.strstart+J-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=$n(n,n.ins_h,n.window[n.strstart+1]);else r=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(it(n,!1),n.strm.avail_out===0))return qe}return n.insert=n.strstart<J-1?n.strstart:J-1,e===pt?(it(n,!0),n.strm.avail_out===0?Sr:Ri):n.sym_next&&(it(n,!1),n.strm.avail_out===0)?qe:Ni},Ti=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<qt){if(Ai(n),n.lookahead<qt&&e===Hn)return qe;if(n.lookahead===0)break}if(t=0,n.lookahead>=J&&(n.ins_h=$n(n,n.ins_h,n.window[n.strstart+J-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=J-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-qt&&(n.match_length=iv(n,t),n.match_length<=5&&(n.strategy===IT||n.match_length===J&&n.strstart-n.match_start>4096)&&(n.match_length=J-1)),n.prev_length>=J&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-J,r=jn(n,n.strstart-1-n.prev_match,n.prev_length-J),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=$n(n,n.ins_h,n.window[n.strstart+J-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=J-1,n.strstart++,r&&(it(n,!1),n.strm.avail_out===0))return qe}else if(n.match_available){if(r=jn(n,0,n.window[n.strstart-1]),r&&it(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return qe}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=jn(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<J-1?n.strstart:J-1,e===pt?(it(n,!0),n.strm.avail_out===0?Sr:Ri):n.sym_next&&(it(n,!1),n.strm.avail_out===0)?qe:Ni},jT=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=On){if(Ai(n),n.lookahead<=On&&e===Hn)return qe;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=J&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+On;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=On-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=J?(t=jn(n,1,n.match_length-J),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(it(n,!1),n.strm.avail_out===0))return qe}return n.insert=0,e===pt?(it(n,!0),n.strm.avail_out===0?Sr:Ri):n.sym_next&&(it(n,!1),n.strm.avail_out===0)?qe:Ni},HT=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(Ai(n),n.lookahead===0)){if(e===Hn)return qe;break}if(n.match_length=0,t=jn(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(it(n,!1),n.strm.avail_out===0))return qe}return n.insert=0,e===pt?(it(n,!0),n.strm.avail_out===0?Sr:Ri):n.sym_next&&(it(n,!1),n.strm.avail_out===0)?qe:Ni};function Vt(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var cs=[new Vt(0,0,0,0,ov),new Vt(4,4,8,4,qd),new Vt(4,5,16,8,qd),new Vt(4,6,32,32,qd),new Vt(4,4,16,16,Ti),new Vt(8,16,32,32,Ti),new Vt(8,16,128,128,Ti),new Vt(8,32,128,256,Ti),new Vt(32,128,258,1024,Ti),new Vt(32,258,258,4096,Ti)],$T=n=>{n.window_size=2*n.w_size,Ln(n.head),n.max_lazy_match=cs[n.level].max_lazy,n.good_match=cs[n.level].good_length,n.nice_match=cs[n.level].nice_length,n.max_chain_length=cs[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=J-1,n.match_available=0,n.ins_h=0};function BT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xl,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(kT*2),this.dyn_dtree=new Uint16Array((2*MT+1)*2),this.bl_tree=new Uint16Array((2*AT+1)*2),Ln(this.dyn_ltree),Ln(this.dyn_dtree),Ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(PT+1),this.heap=new Uint16Array(2*rf+1),Ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*rf+1),Ln(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var xs=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==Mi&&e.status!==hf&&e.status!==of&&e.status!==sf&&e.status!==af&&e.status!==lf&&e.status!==xr&&e.status!==ls?1:0},sv=n=>{if(xs(n))return Er(n,Wt);n.total_in=n.total_out=0,n.data_type=ET;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?hf:e.wrap?Mi:xr,n.adler=e.wrap===2?0:1,e.last_flush=-2,fT(e),Oe},av=n=>{let e=sv(n);return e===Oe&&$T(n.state),e},UT=(n,e)=>xs(n)||n.state.wrap!==2?Wt:(n.state.gzhead=e,Oe),lv=(n,e,t,r,i,o)=>{if(!n)return Wt;let s=1;if(e===vT&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>CT||t!==xl||r<8||r>15||e<0||e>9||o<0||o>wT||r===8&&s!==1)return Er(n,Wt);r===8&&(r=9);let a=new BT;return n.state=a,a.strm=n,a.status=Mi,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+J-1)/J),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,av(n)},VT=(n,e)=>lv(n,e,xl,ST,TT,xT),FT=(n,e)=>{if(xs(n)||e>uy||e<0)return n?Er(n,Wt):Wt;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===ls&&e!==pt)return Er(n,n.avail_out===0?Wd:Wt);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(rt(n),n.avail_out===0)return t.last_flush=-1,Oe}else if(n.avail_in===0&&fy(e)<=fy(r)&&e!==pt)return Er(n,Wd);if(t.status===ls&&n.avail_in!==0)return Er(n,Wd);if(t.status===Mi&&t.wrap===0&&(t.status=xr),t.status===Mi){let i=xl+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=pl||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=NT),i+=31-i%31,as(t,i),t.strstart!==0&&(as(t,n.adler>>>16),as(t,n.adler&65535)),n.adler=1,t.status=xr,rt(n),t.pending!==0)return t.last_flush=-1,Oe}if(t.status===hf){if(n.adler=0,ie(t,31),ie(t,139),ie(t,8),t.gzhead)ie(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),ie(t,t.gzhead.time&255),ie(t,t.gzhead.time>>8&255),ie(t,t.gzhead.time>>16&255),ie(t,t.gzhead.time>>24&255),ie(t,t.level===9?2:t.strategy>=pl||t.level<2?4:0),ie(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(ie(t,t.gzhead.extra.length&255),ie(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=ke(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=of;else if(ie(t,0),ie(t,0),ie(t,0),ie(t,0),ie(t,0),ie(t,t.level===9?2:t.strategy>=pl||t.level<2?4:0),ie(t,RT),t.status=xr,rt(n),t.pending!==0)return t.last_flush=-1,Oe}if(t.status===of){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,rt(n),t.pending!==0)return t.last_flush=-1,Oe;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=sf}if(t.status===sf){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i)),rt(n),t.pending!==0)return t.last_flush=-1,Oe;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,ie(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=af}if(t.status===af){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i)),rt(n),t.pending!==0)return t.last_flush=-1,Oe;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,ie(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=ke(n.adler,t.pending_buf,t.pending-i,i))}t.status=lf}if(t.status===lf){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(rt(n),t.pending!==0))return t.last_flush=-1,Oe;ie(t,n.adler&255),ie(t,n.adler>>8&255),n.adler=0}if(t.status=xr,rt(n),t.pending!==0)return t.last_flush=-1,Oe}if(n.avail_in!==0||t.lookahead!==0||e!==Hn&&t.status!==ls){let i=t.level===0?ov(t,e):t.strategy===pl?HT(t,e):t.strategy===bT?jT(t,e):cs[t.level].func(t,e);if((i===Sr||i===Ri)&&(t.status=ls),i===qe||i===Sr)return n.avail_out===0&&(t.last_flush=-1),Oe;if(i===Ni&&(e===mT?hT(t):e!==uy&&(nf(t,0,0,!1),e===gT&&(Ln(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),rt(n),n.avail_out===0))return t.last_flush=-1,Oe}return e!==pt?Oe:t.wrap<=0?dy:(t.wrap===2?(ie(t,n.adler&255),ie(t,n.adler>>8&255),ie(t,n.adler>>16&255),ie(t,n.adler>>24&255),ie(t,n.total_in&255),ie(t,n.total_in>>8&255),ie(t,n.total_in>>16&255),ie(t,n.total_in>>24&255)):(as(t,n.adler>>>16),as(t,n.adler&65535)),rt(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Oe:dy)},WT=n=>{if(xs(n))return Wt;let e=n.state.status;return n.state=null,e===xr?Er(n,yT):Oe},qT=(n,e)=>{let t=e.length;if(xs(n))return Wt;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==Mi||r.lookahead)return Wt;if(i===1&&(n.adler=ys(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Ln(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,Ai(r);r.lookahead>=J;){let c=r.strstart,l=r.lookahead-(J-1);do r.ins_h=$n(r,r.ins_h,r.window[c+J-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=J-1,Ai(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=J-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,Oe},GT=VT,zT=lv,ZT=av,KT=sv,YT=UT,QT=FT,JT=WT,XT=qT,e_="pako deflate (from Nodeca project)",ds={deflateInit:GT,deflateInit2:zT,deflateReset:ZT,deflateResetKeep:KT,deflateSetHeader:YT,deflate:QT,deflateEnd:JT,deflateSetDictionary:XT,deflateInfo:e_},t_=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),n_=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)t_(t,r)&&(n[r]=t[r])}}return n},r_=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},El={assign:n_,flattenChunks:r_},cv=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cv=!1}var vs=new Uint8Array(256);for(let n=0;n<256;n++)vs[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;vs[254]=vs[254]=1;var i_=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},o_=(n,e)=>{if(e<65534&&n.subarray&&cv)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},s_=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=vs[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return o_(o,i)},a_=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+vs[n[t]]>e?t:e},Is={string2buf:i_,buf2string:s_,utf8border:a_};function l_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var uv=l_,dv=Object.prototype.toString,{Z_NO_FLUSH:c_,Z_SYNC_FLUSH:u_,Z_FULL_FLUSH:d_,Z_FINISH:f_,Z_OK:bl,Z_STREAM_END:p_,Z_DEFAULT_COMPRESSION:h_,Z_DEFAULT_STRATEGY:m_,Z_DEFLATED:g_}=Pi;function Es(n){this.options=El.assign({level:h_,method:g_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m_},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uv,this.strm.avail_out=0;let t=ds.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==bl)throw new Error(Cr[t]);if(e.header&&ds.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Is.string2buf(e.dictionary):dv.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=ds.deflateSetDictionary(this.strm,r),t!==bl)throw new Error(Cr[t]);this._dict_set=!0}}Es.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?f_:c_,typeof n=="string"?t.input=Is.string2buf(n):dv.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===u_||o===d_)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=ds.deflate(t,o),i===p_)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=ds.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===bl;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Es.prototype.onData=function(n){this.chunks.push(n)};Es.prototype.onEnd=function(n){n===bl&&(this.result=El.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function mf(n,e){let t=new Es(e);if(t.push(n,!0),t.err)throw t.msg||Cr[t.err];return t.result}function y_(n,e){return e=e||{},e.raw=!0,mf(n,e)}function v_(n,e){return e=e||{},e.gzip=!0,mf(n,e)}var I_=Es,b_=mf,w_=y_,x_=v_,E_=Pi,C_={Deflate:I_,deflate:b_,deflateRaw:w_,gzip:x_,constants:E_},hl=16209,S_=16191,T_=function(e,t){let r,i,o,s,a,c,l,u,d,f,p,h,w,b,E,v,y,I,M,S,x,T,C,_,k=e.state;r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,_=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=k.dmax,l=k.wsize,u=k.whave,d=k.wnext,f=k.window,p=k.hold,h=k.bits,w=k.lencode,b=k.distcode,E=(1<<k.lenbits)-1,v=(1<<k.distbits)-1;e:do{h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),y=w[p&E];t:for(;;){if(I=y>>>24,p>>>=I,h-=I,I=y>>>16&255,I===0)_[o++]=y&65535;else if(I&16){M=y&65535,I&=15,I&&(h<I&&(p+=C[r++]<<h,h+=8),M+=p&(1<<I)-1,p>>>=I,h-=I),h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),y=b[p&v];n:for(;;){if(I=y>>>24,p>>>=I,h-=I,I=y>>>16&255,I&16){if(S=y&65535,I&=15,h<I&&(p+=C[r++]<<h,h+=8,h<I&&(p+=C[r++]<<h,h+=8)),S+=p&(1<<I)-1,S>c){e.msg="invalid distance too far back",k.mode=hl;break e}if(p>>>=I,h-=I,I=o-s,S>I){if(I=S-I,I>u&&k.sane){e.msg="invalid distance too far back",k.mode=hl;break e}if(x=0,T=f,d===0){if(x+=l-I,I<M){M-=I;do _[o++]=f[x++];while(--I);x=o-S,T=_}}else if(d<I){if(x+=l+d-I,I-=d,I<M){M-=I;do _[o++]=f[x++];while(--I);if(x=0,d<M){I=d,M-=I;do _[o++]=f[x++];while(--I);x=o-S,T=_}}}else if(x+=d-I,I<M){M-=I;do _[o++]=f[x++];while(--I);x=o-S,T=_}for(;M>2;)_[o++]=T[x++],_[o++]=T[x++],_[o++]=T[x++],M-=3;M&&(_[o++]=T[x++],M>1&&(_[o++]=T[x++]))}else{x=o-S;do _[o++]=_[x++],_[o++]=_[x++],_[o++]=_[x++],M-=3;while(M>2);M&&(_[o++]=_[x++],M>1&&(_[o++]=_[x++]))}}else if((I&64)===0){y=b[(y&65535)+(p&(1<<I)-1)];continue n}else{e.msg="invalid distance code",k.mode=hl;break e}break}}else if((I&64)===0){y=w[(y&65535)+(p&(1<<I)-1)];continue t}else if(I&32){k.mode=S_;break e}else{e.msg="invalid literal/length code",k.mode=hl;break e}break}}while(r<i&&o<a);M=h>>3,r-=M,h-=M<<3,p&=(1<<h)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),k.hold=p,k.bits=h},_i=15,py=852,hy=592,my=0,Gd=1,gy=2,__=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),D_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),M_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),A_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),k_=(n,e,t,r,i,o,s,a)=>{let c=a.bits,l=0,u=0,d=0,f=0,p=0,h=0,w=0,b=0,E=0,v=0,y,I,M,S,x,T=null,C,_=new Uint16Array(_i+1),k=new Uint16Array(_i+1),U=null,V,Q,fe;for(l=0;l<=_i;l++)_[l]=0;for(u=0;u<r;u++)_[e[t+u]]++;for(p=c,f=_i;f>=1&&_[f]===0;f--);if(p>f&&(p=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&_[d]===0;d++);for(p<d&&(p=d),b=1,l=1;l<=_i;l++)if(b<<=1,b-=_[l],b<0)return-1;if(b>0&&(n===my||f!==1))return-1;for(k[1]=0,l=1;l<_i;l++)k[l+1]=k[l]+_[l];for(u=0;u<r;u++)e[t+u]!==0&&(s[k[e[t+u]]++]=u);if(n===my?(T=U=s,C=20):n===Gd?(T=__,U=D_,C=257):(T=M_,U=A_,C=0),v=0,u=0,l=d,x=o,h=p,w=0,M=-1,E=1<<p,S=E-1,n===Gd&&E>py||n===gy&&E>hy)return 1;for(;;){V=l-w,s[u]+1<C?(Q=0,fe=s[u]):s[u]>=C?(Q=U[s[u]-C],fe=T[s[u]-C]):(Q=96,fe=0),y=1<<l-w,I=1<<h,d=I;do I-=y,i[x+(v>>w)+I]=V<<24|Q<<16|fe|0;while(I!==0);for(y=1<<l-1;v&y;)y>>=1;if(y!==0?(v&=y-1,v+=y):v=0,u++,--_[l]===0){if(l===f)break;l=e[t+s[u]]}if(l>p&&(v&S)!==M){for(w===0&&(w=p),x+=d,h=l-w,b=1<<h;h+w<f&&(b-=_[h+w],!(b<=0));)h++,b<<=1;if(E+=1<<h,n===Gd&&E>py||n===gy&&E>hy)return 1;M=v&S,i[M]=p<<24|h<<16|x-o|0}}return v!==0&&(i[x+v]=l-w<<24|64<<16|0),a.bits=p,0},fs=k_,P_=0,fv=1,pv=2,{Z_FINISH:yy,Z_BLOCK:N_,Z_TREES:ml,Z_OK:Tr,Z_STREAM_END:R_,Z_NEED_DICT:L_,Z_STREAM_ERROR:ht,Z_DATA_ERROR:hv,Z_MEM_ERROR:mv,Z_BUF_ERROR:O_,Z_DEFLATED:vy}=Pi,Cl=16180,Iy=16181,by=16182,wy=16183,xy=16184,Ey=16185,Cy=16186,Sy=16187,Ty=16188,_y=16189,wl=16190,dn=16191,zd=16192,Dy=16193,Zd=16194,My=16195,Ay=16196,ky=16197,Py=16198,gl=16199,yl=16200,Ny=16201,Ry=16202,Ly=16203,Oy=16204,jy=16205,Kd=16206,Hy=16207,$y=16208,Ie=16209,gv=16210,yv=16211,j_=852,H_=592,$_=15,B_=$_,By=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function U_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var _r=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Cl||e.mode>yv?1:0},vv=n=>{if(_r(n))return ht;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Cl,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(j_),e.distcode=e.distdyn=new Int32Array(H_),e.sane=1,e.back=-1,Tr},Iv=n=>{if(_r(n))return ht;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,vv(n)},bv=(n,e)=>{let t;if(_r(n))return ht;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ht:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,Iv(n))},wv=(n,e)=>{if(!n)return ht;let t=new U_;n.state=t,t.strm=n,t.window=null,t.mode=Cl;let r=bv(n,e);return r!==Tr&&(n.state=null),r},V_=n=>wv(n,B_),Uy=!0,Yd,Qd,F_=n=>{if(Uy){Yd=new Int32Array(512),Qd=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(fs(fv,n.lens,0,288,Yd,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;fs(pv,n.lens,0,32,Qd,0,n.work,{bits:5}),Uy=!1}n.lencode=Yd,n.lenbits=9,n.distcode=Qd,n.distbits=5},xv=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},W_=(n,e)=>{let t,r,i,o,s,a,c,l,u,d,f,p,h,w,b=0,E,v,y,I,M,S,x,T,C=new Uint8Array(4),_,k,U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_r(n)||!n.output||!n.input&&n.avail_in!==0)return ht;t=n.state,t.mode===dn&&(t.mode=zd),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,d=a,f=c,T=Tr;e:for(;;)switch(t.mode){case Cl:if(t.wrap===0){t.mode=zd;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,C[0]=l&255,C[1]=l>>>8&255,t.check=ke(t.check,C,2,0),l=0,u=0,t.mode=Iy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Ie;break}if((l&15)!==vy){n.msg="unknown compression method",t.mode=Ie;break}if(l>>>=4,u-=4,x=(l&15)+8,t.wbits===0&&(t.wbits=x),x>15||x>t.wbits){n.msg="invalid window size",t.mode=Ie;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=l&512?_y:dn,l=0,u=0;break;case Iy:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==vy){n.msg="unknown compression method",t.mode=Ie;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ie;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=ke(t.check,C,2,0)),l=0,u=0,t.mode=by;case by:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,t.check=ke(t.check,C,4,0)),l=0,u=0,t.mode=wy;case wy:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=ke(t.check,C,2,0)),l=0,u=0,t.mode=xy;case xy:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(C[0]=l&255,C[1]=l>>>8&255,t.check=ke(t.check,C,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=Ey;case Ey:if(t.flags&1024&&(p=t.length,p>a&&(p=a),p&&(t.head&&(x=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+p),x)),t.flags&512&&t.wrap&4&&(t.check=ke(t.check,r,p,o)),a-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=Cy;case Cy:if(t.flags&2048){if(a===0)break e;p=0;do x=r[o+p++],t.head&&x&&t.length<65536&&(t.head.name+=String.fromCharCode(x));while(x&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=ke(t.check,r,p,o)),a-=p,o+=p,x)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Sy;case Sy:if(t.flags&4096){if(a===0)break e;p=0;do x=r[o+p++],t.head&&x&&t.length<65536&&(t.head.comment+=String.fromCharCode(x));while(x&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=ke(t.check,r,p,o)),a-=p,o+=p,x)break e}else t.head&&(t.head.comment=null);t.mode=Ty;case Ty:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ie;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=dn;break;case _y:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=By(l),l=0,u=0,t.mode=wl;case wl:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,L_;n.adler=t.check=1,t.mode=dn;case dn:if(e===N_||e===ml)break e;case zd:if(t.last){l>>>=u&7,u-=u&7,t.mode=Kd;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=Dy;break;case 1:if(F_(t),t.mode=gl,e===ml){l>>>=2,u-=2;break e}break;case 2:t.mode=Ay;break;case 3:n.msg="invalid block type",t.mode=Ie}l>>>=2,u-=2;break;case Dy:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ie;break}if(t.length=l&65535,l=0,u=0,t.mode=Zd,e===ml)break e;case Zd:t.mode=My;case My:if(p=t.length,p){if(p>a&&(p=a),p>c&&(p=c),p===0)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,c-=p,s+=p,t.length-=p;break}t.mode=dn;break;case Ay:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ie;break}t.have=0,t.mode=ky;case ky:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[U[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[U[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,_={bits:t.lenbits},T=fs(P_,t.lens,0,19,t.lencode,0,t.work,_),t.lenbits=_.bits,T){n.msg="invalid code lengths set",t.mode=Ie;break}t.have=0,t.mode=Py;case Py:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[l&(1<<t.lenbits)-1],E=b>>>24,v=b>>>16&255,y=b&65535,!(E<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(y<16)l>>>=E,u-=E,t.lens[t.have++]=y;else{if(y===16){for(k=E+2;u<k;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=E,u-=E,t.have===0){n.msg="invalid bit length repeat",t.mode=Ie;break}x=t.lens[t.have-1],p=3+(l&3),l>>>=2,u-=2}else if(y===17){for(k=E+3;u<k;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=E,u-=E,x=0,p=3+(l&7),l>>>=3,u-=3}else{for(k=E+7;u<k;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=E,u-=E,x=0,p=11+(l&127),l>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ie;break}for(;p--;)t.lens[t.have++]=x}}if(t.mode===Ie)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ie;break}if(t.lenbits=9,_={bits:t.lenbits},T=fs(fv,t.lens,0,t.nlen,t.lencode,0,t.work,_),t.lenbits=_.bits,T){n.msg="invalid literal/lengths set",t.mode=Ie;break}if(t.distbits=6,t.distcode=t.distdyn,_={bits:t.distbits},T=fs(pv,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,_),t.distbits=_.bits,T){n.msg="invalid distances set",t.mode=Ie;break}if(t.mode=gl,e===ml)break e;case gl:t.mode=yl;case yl:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,T_(n,f),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===dn&&(t.back=-1);break}for(t.back=0;b=t.lencode[l&(1<<t.lenbits)-1],E=b>>>24,v=b>>>16&255,y=b&65535,!(E<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(v&&(v&240)===0){for(I=E,M=v,S=y;b=t.lencode[S+((l&(1<<I+M)-1)>>I)],E=b>>>24,v=b>>>16&255,y=b&65535,!(I+E<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=I,u-=I,t.back+=I}if(l>>>=E,u-=E,t.back+=E,t.length=y,v===0){t.mode=jy;break}if(v&32){t.back=-1,t.mode=dn;break}if(v&64){n.msg="invalid literal/length code",t.mode=Ie;break}t.extra=v&15,t.mode=Ny;case Ny:if(t.extra){for(k=t.extra;u<k;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ry;case Ry:for(;b=t.distcode[l&(1<<t.distbits)-1],E=b>>>24,v=b>>>16&255,y=b&65535,!(E<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((v&240)===0){for(I=E,M=v,S=y;b=t.distcode[S+((l&(1<<I+M)-1)>>I)],E=b>>>24,v=b>>>16&255,y=b&65535,!(I+E<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=I,u-=I,t.back+=I}if(l>>>=E,u-=E,t.back+=E,v&64){n.msg="invalid distance code",t.mode=Ie;break}t.offset=y,t.extra=v&15,t.mode=Ly;case Ly:if(t.extra){for(k=t.extra;u<k;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ie;break}t.mode=Oy;case Oy:if(c===0)break e;if(p=f-c,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ie;break}p>t.wnext?(p-=t.wnext,h=t.wsize-p):h=t.wnext-p,p>t.length&&(p=t.length),w=t.window}else w=i,h=s-t.offset,p=t.length;p>c&&(p=c),c-=p,t.length-=p;do i[s++]=w[h++];while(--p);t.length===0&&(t.mode=yl);break;case jy:if(c===0)break e;i[s++]=t.length,c--,t.mode=yl;break;case Kd:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(f-=c,n.total_out+=f,t.total+=f,t.wrap&4&&f&&(n.adler=t.check=t.flags?ke(t.check,i,f,s-f):ys(t.check,i,f,s-f)),f=c,t.wrap&4&&(t.flags?l:By(l))!==t.check){n.msg="incorrect data check",t.mode=Ie;break}l=0,u=0}t.mode=Hy;case Hy:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ie;break}l=0,u=0}t.mode=$y;case $y:T=R_;break e;case Ie:T=hv;break e;case gv:return mv;case yv:default:return ht}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||f!==n.avail_out&&t.mode<Ie&&(t.mode<Kd||e!==yy))&&xv(n,n.output,n.next_out,f-n.avail_out),d-=n.avail_in,f-=n.avail_out,n.total_in+=d,n.total_out+=f,t.total+=f,t.wrap&4&&f&&(n.adler=t.check=t.flags?ke(t.check,i,f,n.next_out-f):ys(t.check,i,f,n.next_out-f)),n.data_type=t.bits+(t.last?64:0)+(t.mode===dn?128:0)+(t.mode===gl||t.mode===Zd?256:0),(d===0&&f===0||e===yy)&&T===Tr&&(T=O_),T},q_=n=>{if(_r(n))return ht;let e=n.state;return e.window&&(e.window=null),n.state=null,Tr},G_=(n,e)=>{if(_r(n))return ht;let t=n.state;return(t.wrap&2)===0?ht:(t.head=e,e.done=!1,Tr)},z_=(n,e)=>{let t=e.length,r,i,o;return _r(n)||(r=n.state,r.wrap!==0&&r.mode!==wl)?ht:r.mode===wl&&(i=1,i=ys(i,e,t,0),i!==r.check)?hv:(o=xv(n,e,t,t),o?(r.mode=gv,mv):(r.havedict=1,Tr))},Z_=Iv,K_=bv,Y_=vv,Q_=V_,J_=wv,X_=W_,eD=q_,tD=G_,nD=z_,rD="pako inflate (from Nodeca project)",pn={inflateReset:Z_,inflateReset2:K_,inflateResetKeep:Y_,inflateInit:Q_,inflateInit2:J_,inflate:X_,inflateEnd:eD,inflateGetHeader:tD,inflateSetDictionary:nD,inflateInfo:rD};function iD(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oD=iD,Ev=Object.prototype.toString,{Z_NO_FLUSH:sD,Z_FINISH:aD,Z_OK:bs,Z_STREAM_END:Jd,Z_NEED_DICT:Xd,Z_STREAM_ERROR:lD,Z_DATA_ERROR:Vy,Z_MEM_ERROR:cD}=Pi;function Cs(n){this.options=El.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uv,this.strm.avail_out=0;let t=pn.inflateInit2(this.strm,e.windowBits);if(t!==bs)throw new Error(Cr[t]);if(this.header=new oD,pn.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Is.string2buf(e.dictionary):Ev.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=pn.inflateSetDictionary(this.strm,e.dictionary),t!==bs)))throw new Error(Cr[t])}Cs.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?aD:sD,Ev.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=pn.inflate(t,s),o===Xd&&i&&(o=pn.inflateSetDictionary(t,i),o===bs?o=pn.inflate(t,s):o===Vy&&(o=Xd));t.avail_in>0&&o===Jd&&t.state.wrap>0&&n[t.next_in]!==0;)pn.inflateReset(t),o=pn.inflate(t,s);switch(o){case lD:case Vy:case Xd:case cD:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===Jd))if(this.options.to==="string"){let c=Is.utf8border(t.output,t.next_out),l=t.next_out-c,u=Is.buf2string(t.output,c);t.next_out=l,t.avail_out=r-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===bs&&a===0)){if(o===Jd)return o=pn.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Cs.prototype.onData=function(n){this.chunks.push(n)};Cs.prototype.onEnd=function(n){n===bs&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=El.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function gf(n,e){let t=new Cs(e);if(t.push(n),t.err)throw t.msg||Cr[t.err];return t.result}function uD(n,e){return e=e||{},e.raw=!0,gf(n,e)}var dD=Cs,fD=gf,pD=uD,hD=gf,mD=Pi,gD={Inflate:dD,inflate:fD,inflateRaw:pD,ungzip:hD,constants:mD},{Deflate:PF,deflate:NF,deflateRaw:RF,gzip:LF}=C_,{Inflate:OF,inflate:yD,inflateRaw:jF,ungzip:HF}=gD;var Sl=yD;var yf=class{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){this.data.set(e,t)}rawDataToRGBA(e,t,r){if(t===16){let i=e.byteLength/2*4,o=new Uint8Array(i);for(let s=0;s<i;s+=4){let a=Math.floor(s/4)*2;o[s+0]=e[a+0],o[s+1]=e[a+0],o[s+2]=e[a+0],o[s+3]=e[a+1]}return o}else if(t===8){let i=e.byteLength*4,o=new Uint8Array(i);for(let s=0;s<i;s+=4){let a=Math.floor(s/4),c=[255,255,255,0];e[a]!==r&&(c=this.get(e[a])??[255,255,255,0]),o[s+0]=c[0],o[s+1]=c[1],o[s+2]=c[2],o[s+3]=Math.ceil(c[3]*255)}return o}return e}},Dr=class{constructor(e){this.loader=e}getColorPallette(e){let t=new yf,r=this.loader.findFrameChunk(e,Hd);if(r){let i=r.firstIndex;for(let o of r.colors)t.set(i,[o.color.red,o.color.green,o.color.blue,o.color.alpha]),i++}return t}};var Mr=class{constructor(e){this.loader=e;this.frameCache=new _t;this.collorPalletteLoader=new Dr(e)}async getFrame(e){return this.frameCache.get(e.toString(10),async()=>{if(!this.loader.data)throw new Error("Aseprite file not loaded!");let t=this.loader.data.frames[e],r=this.getDrawContext(),i=this.collorPalletteLoader.getColorPallette(0),o=this.loader.findFrameChunks(0,Si),s=this.loader.findFrameChunks(e,jd);for(let l of s)if(l.cellType===Ld){let u=await this.getFrame(l.data.linkedFrame),d=o[l.layerIndex];(d.flags&1)===1&&!this.loader.ignoredLayerNames.includes(d.name.value)&&(r.save(),r.drawImage(u.texture.data,0,0),r.restore())}else if(l.cellType===Od){let u=o[l.layerIndex];if((u.flags&1)===1&&!this.loader.ignoredLayerNames.includes(u.name.value)){let d=l.data,f=d.rawCompressed,p=Sl(new Uint8Array(f)),h=i.rawDataToRGBA(p,this.loader.data.header.colorDepth,this.loader.data.header.transparentIndex),w=new ImageData(new Uint8ClampedArray(h),d.w,d.h),b=await createImageBitmap(w);r.save(),r.globalAlpha=l.opacity/255*((u==null?void 0:u.opacity)??255)/255,r.drawImage(b,l.x,l.y),r.restore()}}let a=r.getImageData(0,0,this.loader.data.header.width,this.loader.data.header.height),c=await createImageBitmap(a);return{texture:Ut.fromImageBitmap(c),duration:t.header.frameDuration}})}async getFrames(e,t){let r=[];for(let i=e;i<=t;i++)r.push(await this.getFrame(i));return r}getDrawContext(){var r,i;let t=new OffscreenCanvas(((r=this.loader.data)==null?void 0:r.header.width)||0,((i=this.loader.data)==null?void 0:i.header.height)||0).getContext("2d");if(!t)throw new Error("Could not obtain OffscreenCanvas 2D Context for processing Aseprite!");return t.imageSmoothingEnabled=!1,t}};var Ss=class{constructor(e){this.loader=e;this.animationCache=new _t;this.frameLoader=new Mr(e)}getAnimationNames(){if(!this.loader.data)throw new Error("Aseprite file not loaded!");let e=this.loader.findFrameChunk(0,fl);return e?e.tags.map(t=>t.tagName.value):[]}async getAnimation(e){return this.animationCache.get(e,async()=>{if(!this.loader.data)throw new Error("Aseprite file not loaded!");let t=this.loader.findFrameChunk(0,fl);if(!t)throw Error("Aseprite file has no tags!");let r=t.tags.find(o=>o.tagName.value===e);if(!r)throw Error(`Animation with name ${e} not found !`);let i=await this.frameLoader.getFrames(r.fromFrame,r.toFrame);return{duration:i.map(o=>o.duration).reduce((o,s)=>o+s,0),frames:i,direction:r.loopAnimationDirection,repeat:r.repeatAnimation<=2?r.repeatAnimation:3,repeatTimes:r.repeatAnimation<=2?0:r.repeatAnimation}})}};var Ts=class Ts{constructor(){this.ignoredLayerNames=[]}static async load(e){return Ts.asepriteCache.get(e,async()=>{let t=new Ts,i=await(await fetch(e)).arrayBuffer();if(t.data=iy.parse(new Uint8Array(i)),t.data.header.magicNumber!==42464)throw Error("Invalid Aseprite file header magic number!");return t})}findFrameChunks(e,t){if(!this.data)throw new Error("Aseprite file not loaded!");return this.data.frames[e].chunks.filter(o=>o.chunkType===t).map(o=>o.data)}findFrameChunk(e,t){let r=this.findFrameChunks(e,t);if(r.length===1)return r[0];if(r.length===0)return;throw new Error(`Multiple Chunks of type ${t} found!`)}};Ts.asepriteCache=new _t;var _s=Ts;var Ds=class{constructor(e){this.loader=e;this.tilemapCache=new _t;this.collorPalletteLoader=new Dr(e)}getTilemapNames(e=0){if(!this.loader.data)throw new Error("Aseprite file not loaded!");return this.loader.findFrameChunks(e,Si).filter(r=>!(!r.tilesetIndex||r.tilesetIndex.length!==1)).map(r=>r.name.value)}async getTilemap(e,t=0){return this.tilemapCache.get(`${e}-${t}`,async()=>{if(!this.loader.data)throw new Error("Aseprite file not loaded!");let r=this.loader.findFrameChunks(t,$d),o=this.loader.findFrameChunks(t,Si).find(f=>f.name.value===e);if(!o)throw new Error(`Tilemap Layer with name ${e} not found!`);if(!o.tilesetIndex||o.tilesetIndex.length!==1)throw new Error(`Layer with name ${e} is not a Tilemap!`);let s=r[o.tilesetIndex[0]],a=this.collorPalletteLoader.getColorPallette(t),c=Sl(new Uint8Array(s.rawCompressed)),l=a.rawDataToRGBA(c,this.loader.data.header.colorDepth,this.loader.data.header.transparentIndex),u=s.tileWidth*s.tileHeight*4,d=new Map;for(let f=0;f<s.numberOfTiles;f+=1){let p=s.baseIndex+f-1,h=l.slice(f*u,(f+1)*u),w=new ImageData(new Uint8ClampedArray(h),s.tileWidth,s.tileHeight),b=await createImageBitmap(w);d.set(p,Ut.fromImageBitmap(b))}return d})}};var Ar=class n{constructor(e){this.loader=e;this.frameLoader=new Mr(e),this.animationLoader=new Ss(e),this.tilemapLoader=new Ds(e)}static async load(e){return new n(await _s.load(e))}ignoreLayers(e){this.loader.ignoredLayerNames=e}async getFrame(e){return this.frameLoader.getFrame(e)}async getFrames(e,t){return this.frameLoader.getFrames(e,t)}getAnimationNames(){return this.animationLoader.getAnimationNames()}async getAnimation(e){return this.animationLoader.getAnimation(e)}getTilemapNames(e=0){return this.tilemapLoader.getTilemapNames(e)}async getTilemap(e,t=0){return this.tilemapLoader.getTilemap(e,t)}};var kr=class{constructor(e,t,r){this.asset=e;this.tileset=t;this.tileId=r}toObject(){return{asset:this.asset,tileset:this.tileset,tileId:this.tileId}}};var Pr=class{constructor(e,t){this.asset=e;this.animationName=t}toObject(){return{asset:this.asset,animationName:this.animationName}}};var Nr=class{constructor(){this.assets={};this.chars={}}async init(e,t,r){let i=Object.keys(e).length,o=t?Object.keys(t).length:0,s=i+o,a=0;for(let c in e){let l=e[c];a++,r==null||r({current:a,total:s,percentage:a/s*100,currentFile:c});let u=await Ar.load(l.path);u.ignoreLayers(["Grid"]),this.assets[c]={tilemaps:{},animations:{}};for(let d of u.getTilemapNames())this.assets[c].tilemaps[d]=await u.getTilemap(d);for(let d of u.getAnimationNames())this.assets[c].animations[d]=await u.getAnimation(d)}if(t)for(let c in t){let l=t[c].path;a++,r==null||r({current:a,total:s,percentage:a/s*100,currentFile:c});let u=await Ar.load(l);u.ignoreLayers(["Grid"]);let d=await u.getTilemap(c);this.chars[c]={};for(let f in t[c].map)this.chars[c][f]=d.get(t[c].map[f]);this.chars[c].__unknown__=d.get(t[c].map.__unknown__)}}};var be=class extends ${constructor(t,r,i){super(r,i);this._texture=Ut.empty();t&&(this.texture=t)}get texture(){return this._texture}set texture(t){this._texture=t}get width(){return this._texture.width*this.scale.x}get height(){return this._texture.height*this.scale.y}withMeta(t){this._meta=t}getMeta(){return this._meta}};var He=class n extends ${constructor(t,r,i=[]){super(r,i);this._animation=t;this.flipH=!1;this.flipV=!1;this._frames=[];this.stopped=!1;this.animationSpeed=1;this.frameIndex=0,this.previousTime=0,this._frames=t.frames,t.direction===1&&(this._frames=this._frames.reverse()),this.animationRepeatIndex=t.repeatTimes,this.on(Gt,this.onTick.bind(this))}get animation(){return this._animation}get currentFrame(){return this._frames[this.frameIndex]}static empty(){return new n({duration:0,frames:[],direction:0,repeat:0,repeatTimes:0})}onTick(t){if(this.stopped)return;this.previousTime===0&&(this.previousTime=t.currentTime);let r=(t.currentTime-this.previousTime)*this.animationSpeed,i=this._frames[this.frameIndex];if(!i)return;let o=0;for(;r>=i.duration;)r-=i.duration,this.advanceFrame(),i=this._frames[this.frameIndex],o+=1,o>10&&(r=0);o>0&&(this.previousTime=t.currentTime)}play(){this.stopped=!1,this._animation.repeat===0?this.frameIndex=0:this._animation.repeat===1?this.frameIndex=0:this._animation.repeat===2?(this.frameIndex=0,this.animationRepeatIndex=1):this._animation.repeat===3&&(this.frameIndex=0,this.animationRepeatIndex=this._animation.repeatTimes)}stop(){this.stopped=!0,this.previousTime=0}advanceFrame(){if(this.frameIndex+=1,this.frameIndex>=this._frames.length)if(this._animation.repeat===0)this.frameIndex=0;else if(this._animation.repeat===1){this.frameIndex=this._frames.length-1,this.stop();return}else if(this._animation.repeat===2){if(this.frameIndex=0,this.animationRepeatIndex-=1,this.animationRepeatIndex<=0){this.frameIndex=this._frames.length-1,this.stop();return}}else if(this._animation.repeat===3){if(this.frameIndex=0,this.animationRepeatIndex-=1,this.animationRepeatIndex===0){this.stop();return}}else{this.stop();return}}get width(){return this._frames[0].texture.width}get height(){return this._frames[0].texture.height}get animationDuration(){return this._animation.duration}withMeta(t){this._meta=t}getMeta(){return this._meta}};var Rr=class n extends ${constructor(t){super();this._numLayers=t;for(let r=0;r<t;r+=1)this.addChild(new $)}getLayer(t){return this.children[t]}get numLayers(){return this._numLayers}get width(){let t=0,r=this.position;for(let i=0;i<this._numLayers;i+=1){let o=this.children[i];if(o){for(let s of o.children)if(s instanceof $){let l=s.position.x-r.x+s.width;l>t&&(t=l)}}}return t}get height(){let t=0,r=this.position;for(let i=0;i<this._numLayers;i+=1){let o=this.children[i];if(o){for(let s of o.children)if(s instanceof $){let l=s.position.y-r.y+s.height;l>t&&(t=l)}}}return t}toObject(){let t={numLayers:this._numLayers,layers:[]};for(let r=0;r<this._numLayers;r+=1){let i=[];for(let o of this.children[r].children)if(o instanceof He){let s=o.getMeta();s instanceof Pr&&i.push({type:"animated",position:{x:o.position.x,y:o.position.y},animation:s.toObject(),animationSpeed:o.animationSpeed})}else if(o instanceof be){let s=o.getMeta();s instanceof kr&&i.push({type:"static",position:{x:o.position.x,y:o.position.y},texture:s.toObject()})}t.layers.push(i)}return t}clear(t){this.removeAllChildren(),this._numLayers=t;for(let r=0;r<this._numLayers;r+=1)this.addChild(new $)}static fromData(t){var o,s;let r=new n(t.numLayers),i=W.get("assets");for(let a=0;a<t.layers.length;a+=1){let c=t.layers[a];for(let l of c)if(l.type==="animated"){let u=i[l.animation.asset].animations[l.animation.animationName],d=new He(u,new g(l.position.x,l.position.y));d.animationSpeed=l.animationSpeed??1,d.withMeta(new Pr(l.animation.asset,l.animation.animationName)),(o=r.getLayer(a))==null||o.addChild(d)}else if(l.type==="static"){let u=i[l.texture.asset].tilemaps[l.texture.tileset].get(l.texture.tileId),d=new be(u,new g(l.position.x,l.position.y));d.withMeta(new kr(l.texture.asset,l.texture.tileset,l.texture.tileId)),(s=r.getLayer(a))==null||s.addChild(d)}}return r}};var Gt=class extends re{constructor(t){super();this.currentTime=t;super.target=null}};var vf=class{constructor(){this.pool=new Map;this.maxCanvasesPerSize=10}getCanvas(e,t,r="default"){let i=`${e}x${t}:${r}`,o=this.pool.get(i);o||(o=[],this.pool.set(i,o));for(let l of o)if(!l.inUse){l.inUse=!0,l.lastPurpose=r;let u=l.context;switch(r){case"fill-color":case"result":u.clearRect(0,0,e,t);break;case"mask":u.setTransform(1,0,0,1,0,0),u.globalCompositeOperation="source-over",u.clearRect(0,0,e,t);break;case"clip":u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,e,t);break;case"default":default:u.setTransform(1,0,0,1,0,0),u.globalCompositeOperation="source-over",u.clearRect(0,0,e,t);break}return{canvas:l.canvas,context:l.context}}let s=new OffscreenCanvas(e,t),a=s.getContext("2d");if(!a)throw new Error("Failed to get 2D context for temporary canvas");a.imageSmoothingEnabled=!1;let c={canvas:s,context:a,inUse:!0,lastPurpose:r};return o.length<this.maxCanvasesPerSize&&o.push(c),{canvas:s,context:a}}releaseCanvas(e){for(let t of this.pool.values())for(let r of t)if(r.canvas===e){r.inUse=!1;return}}releaseAll(){for(let e of this.pool.values())for(let t of e)t.inUse=!1}resetCanvas(e,t,r){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,r),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.imageSmoothingEnabled=!1,e.fillStyle="#000000",e.strokeStyle="#000000",e.lineWidth=1}getStats(){let e=0,t=0;for(let r of this.pool.values())e+=r.length,t+=r.filter(i=>i.inUse).length;return{totalCanvases:e,inUse:t,available:e-t}}},If=new vf;var bf=class{constructor(){this.cache=new Map;this.maxCacheSize=100;this.maxAge=5e3}get(e){let t=this.cache.get(e);return t?(t.hitCount++,t.timestamp=performance.now(),t.canvas):null}set(e,t,r,i){this.cache.size>=this.maxCacheSize&&this.evictLRU();let o=new OffscreenCanvas(r,i),s=o.getContext("2d");if(!s)throw new Error("Failed to create cache canvas context");s.imageSmoothingEnabled=!1,s.drawImage(t,0,0),this.cache.set(e,{canvas:o,context:s,timestamp:performance.now(),hitCount:0})}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}evictLRU(){let e=null,t=1/0,r=1/0;for(let[i,o]of this.cache){let s=performance.now()-o.timestamp;if(s>this.maxAge){this.cache.delete(i);return}s/(o.hitCount+1)>t/(r+1)&&(e=i,t=s,r=o.hitCount)}e&&this.cache.delete(e)}static generateKey(e,t,r,...i){return`${e}:${t}x${r}:${i.join(":")}`}renderAndCache(e,t,r,i){let o=this.get(e);if(o)return o;this.set(e,i,t,r);let s=this.cache.get(e);if(!s)throw new Error("Failed to retrieve newly cached canvas");return s.canvas}getStats(){let e=0,t=0,r=performance.now();for(let i of this.cache.values())e+=i.hitCount,t+=r-i.timestamp;return{size:this.cache.size,totalHits:e,averageAge:this.cache.size>0?t/this.cache.size:0}}},Tl=new bf;var Li=class{constructor(e,t,r){this.zoom=r;this.renderCount=0;this.cacheHitCount=0;this.prevRenderCount=0;this.prevCacheHitCount=0;this.attachedDOMElements=new Set;this.maskElements=new Set;this.workLoop=new Mn(this.render.bind(this)),this.rootDOM=t,this.rootDOM.style.isolation="isolate",this.canvas=e,this.canvas.style.display="block",this.canvas.style.imageRendering="pixelated";let i=this.canvas.getContext("2d");if(!i)throw new Error("CanvasRenderingContext2D could not be obtained!");this.context=i,this.context.imageSmoothingEnabled=!1}setViewport(e){this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.style.width=e.width*this.zoom+"px",this.canvas.style.height=e.height*this.zoom+"px"}setZoom(e){this.zoom=e}getElement(){return this.canvas}globalToLocalPoint(e){let t=e.x,r=e.y,i=this.canvas.getBoundingClientRect();return t-=i.left,r-=i.top,new g(Math.round(t/this.zoom),Math.round(r/this.zoom))}localToGlobalPoint(e){return new g(e.x*this.zoom,e.y*this.zoom)}setRootElement(e){this.rootElement=e}start(e){this.workLoop.start(e)}getRenderStats(){return{renderCount:this.prevRenderCount,cacheHitCount:this.prevCacheHitCount}}hasCanvasItemClipMask(e){return e?(Array.isArray(e)?e:[e]).some(r=>Rn(r)):!1}createTempCanvas(e,t,r){return If.getCanvas(e,t,r)}applyRectangleClips(e,t){if(!t)return;let i=(Array.isArray(t)?t:[t]).filter(o=>!Rn(o));if(i.length>0){e.beginPath();for(let o of i)e.rect(o.x,o.y,o.width,o.height);e.clip()}}applyRectangleClipsToCanvas(e,t,r,i){if(!t)return e;let s=(Array.isArray(t)?t:[t]).filter(l=>!Rn(l));if(s.length===0)return e;let a=new OffscreenCanvas(r,i),c=a.getContext("2d");if(!c)throw new Error("Failed to get 2D context for rectangle clip canvas");c.imageSmoothingEnabled=!1,c.save(),c.beginPath();for(let l of s)c.rect(l.x,l.y,l.width,l.height);return c.clip(),c.drawImage(e,0,0),c.restore(),a}applyCanvasItemClipMasks(e,t,r){if(!t||!this.hasCanvasItemClipMask(t))return e;let o=(Array.isArray(t)?t:[t]).filter(u=>Rn(u));if(o.length===0)return e;let{canvas:s,context:a}=this.createTempCanvas(r.width,r.height,"mask");a.save(),a.translate(-r.x,-r.y);for(let u of o)Rn(u)&&this.renderCanvasItem(a,u.item,!0);a.restore();let c=new OffscreenCanvas(r.width,r.height),l=c.getContext("2d");if(!l)throw new Error("Failed to get 2D context for clip mask result canvas");return l.imageSmoothingEnabled=!1,l.drawImage(e,0,0),l.globalCompositeOperation="destination-in",l.drawImage(s,0,0),c}renderCanvasItem(e,t,r=!1){if(t.isVisible&&(this.renderCount++,t instanceof He?this.drawAnimatedSprite(e,t):t instanceof be?this.drawSprite(e,t):t.draw(e),r)){let i=le.childrenByType(Bt,t,!1);for(let o of i)this.renderCanvasItem(e,o,r)}}renderCachedItem(e,t,r){let i=Tl.get(r);if(i){this.cacheHitCount++,e.save(),t.opacity<1&&(e.globalAlpha=t.opacity),e.drawImage(i,Math.floor(t.position.x),Math.floor(t.position.y)),e.restore();return}let o=t.width,s=t.height,{canvas:a,context:c}=this.createTempCanvas(o,s,"cache"),l=t.ownPosition.clone(),u=le.parentByType($,t),d=u?u.position:new g(0,0);t.position=new g(0,0).sub(d),this.renderCanvasItem(c,t,!0),t.position=l,Tl.set(r,a,o,s),e.save(),t.opacity<1&&(e.globalAlpha=t.opacity),e.drawImage(a,Math.floor(t.position.x),Math.floor(t.position.y)),e.restore(),this.renderCount++}applyFillColorToTexture(e,t,r,i){if(!i)return null;let o=new OffscreenCanvas(t,r),s=o.getContext("2d");if(!s)throw new Error("Failed to get 2D context for fill color canvas");return s.imageSmoothingEnabled=!1,s.drawImage(e,0,0),s.globalCompositeOperation="source-in",s.fillStyle=i,s.fillRect(0,0,t,r),o}drawTextureWithTransforms(e,t,r,i,o,s,a,c,l=!1,u=!1,d=new g(1,1)){if(this.hasCanvasItemClipMask(c)){let{canvas:p,context:h}=this.createTempCanvas(i,o),b=this.applyFillColorToTexture(t,i,o,a)||t;if(l||u){let I=l?-1:1,M=u?-1:1;h.scale(I,M),h.drawImage(b,I*0,0,I*i,o)}else h.drawImage(b,0,0);let E=this.applyCanvasItemClipMasks(p,c,{x:Math.floor(r.x),y:Math.floor(r.y),width:i,height:o}),v=i*d.x,y=o*d.y;e.save(),this.applyRectangleClips(e,c),s<1&&(e.globalAlpha=s),e.drawImage(E,Math.floor(r.x),Math.floor(r.y),v,y),e.restore()}else if((c?Array.isArray(c)?c:[c]:[]).filter(b=>!Rn(b)).length>0){let{canvas:b,context:E}=this.createTempCanvas(i,o),y=this.applyFillColorToTexture(t,i,o,a)||t;if(l||u){let x=l?-1:1,T=u?-1:1;E.scale(x,T),E.drawImage(y,x*0,0,x*i,o)}else E.drawImage(y,0,0);let I=this.applyRectangleClipsToCanvas(b,c,i,o),M=i*d.x,S=o*d.y;e.save(),s<1&&(e.globalAlpha=s),e.drawImage(I,Math.floor(r.x),Math.floor(r.y),M,S),e.restore()}else{e.save(),s<1&&(e.globalAlpha=s);let E=this.applyFillColorToTexture(t,i,o,a)||t,v=i*d.x,y=o*d.y;if(l||u){let I=l?-1:1,M=u?-1:1;e.translate(Math.floor(r.x),Math.floor(r.y)),e.scale(I,M),e.drawImage(E,0,0,I*v,M*y)}else e.drawImage(E,Math.floor(r.x),Math.floor(r.y),v,y);e.restore()}}drawSprite(e,t){let r=t.texture;this.drawTextureWithTransforms(e,r.data,t.position,r.width,r.height,t.opacity,t.fillColor,t.clipRegion,!1,!1,t.scale)}drawAnimatedSprite(e,t){let r=t.currentFrame;if(!r)return;let i=r.texture;this.drawTextureWithTransforms(e,i.data,t.position,i.width,i.height,t.opacity,t.fillColor,t.clipRegion,t.flipH,t.flipV,t.scale)}render(e){if(this.prevRenderCount=this.renderCount,this.prevCacheHitCount=this.cacheHitCount,this.renderCount=0,this.cacheHitCount=0,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),!this.rootElement)return;this.rootElement.dispatchEvent(new Gt(e));let t=new Set;for(let r of le.childrenByType(Bt,this.rootElement,!0,!0))if(r.isVisible){if(r instanceof $){if(this.itemHasCachedParent(r))continue;let i=r.cacheable?r.cacheKey:void 0;if(i){this.renderCachedItem(this.context,r,i),this.updateDOMElementPosition(r),r.attachedDOM&&t.add(r.attachedDOM);continue}}this.renderCanvasItem(this.context,r,!1),this.updateDOMElementPosition(r),r.attachedDOM&&t.add(r.attachedDOM)}this.cleanupDetachedDOMElements(t),this.applyMasking(),If.releaseAll()}itemHasCachedParent(e){let t=le.parentByType($,e);return t?t.cacheable&&t.cacheKey&&Tl.get(t.cacheKey)?!0:this.itemHasCachedParent(t):!1}updateDOMElementPosition(e){if(!e.attachedDOM)return;let t=e.attachedDOM,r=t.hasAttribute("data-mask"),i=t.hasAttribute("data-no-auto-position");if(this.attachedDOMElements.has(t)||(t.style.position="absolute",t.parentElement||this.rootDOM.appendChild(t),this.attachedDOMElements.add(t),r&&this.maskElements.add(t)),i){e instanceof $&&(t.style.display=e.isVisible?"block":"none");return}let o=new g(0,0),s=0,a=0;e instanceof $&&(o=e.position,s=e.width,a=e.height);let c=this.canvas.getBoundingClientRect(),l=this.rootDOM.getBoundingClientRect(),u=o.x*this.zoom+c.left-l.left,d=o.y*this.zoom+c.top-l.top;t.style.left=`${u}px`,t.style.top=`${d}px`,r&&(t.dataset.maskX=u.toString(),t.dataset.maskY=d.toString(),t.dataset.maskWidth=(s*this.zoom).toString(),t.dataset.maskHeight=(a*this.zoom).toString()),t.style.transform=`scale(${this.zoom})`,t.style.transformOrigin="top left",t.style.display=e.isVisible?"block":"none"}cleanupDetachedDOMElements(e){for(let t of this.attachedDOMElements)e.has(t)||(t.parentElement===this.rootDOM&&this.rootDOM.removeChild(t),this.attachedDOMElements.delete(t),this.maskElements.delete(t))}applyMasking(){if(this.maskElements.size===0){for(let t of this.attachedDOMElements)t.hasAttribute("data-mask")||(t.style.clipPath="",t.style.visibility="");return}let e=[];for(let t of this.maskElements){if(t.style.display==="none")continue;let r=parseFloat(t.dataset.maskX||"0"),i=parseFloat(t.dataset.maskY||"0"),o=parseFloat(t.dataset.maskWidth||"0"),s=parseFloat(t.dataset.maskHeight||"0");e.push({x:r,y:i,width:o,height:s})}for(let t of this.attachedDOMElements){if(t.hasAttribute("data-mask")||t.hasAttribute("data-interactive"))continue;if(e.length===0){t.style.clipPath="",t.style.visibility="";continue}let r=parseFloat(t.style.left||"0"),i=parseFloat(t.style.top||"0"),o=t.getBoundingClientRect(),s=o.width/this.zoom,a=o.height/this.zoom,c=r,l=i,u=c+s*this.zoom,d=l+a*this.zoom,f=!1;for(let p of e){let h=p.x,w=p.y,b=p.x+p.width,E=p.y+p.height;if(c<b&&u>h&&l<E&&d>w){f=!0;let v=Math.max(c,h),y=Math.max(l,w),I=Math.min(u,b),M=Math.min(d,E),S=(v-c)/this.zoom,x=(y-l)/this.zoom,T=(I-c)/this.zoom,C=(M-l)/this.zoom,_=`polygon(
            0% 0%,
            100% 0%,
            100% 100%,
            0% 100%,
            0% 0%,
            ${S}px ${x}px,
            ${S}px ${C}px,
            ${T}px ${C}px,
            ${T}px ${x}px,
            ${S}px ${x}px
          )`;t.style.clipPath=_;break}}f||(t.style.clipPath="",t.style.visibility="")}}};var zt=class extends re{constructor(t,r,i){super();this.currentTime=t;this.deltaTime=r;this.simulation=i;super.target=null}};var $e=class extends ${constructor(e){super(e)}get dimensions(){let e=this.width,t=this.height;for(let r of le.childrenByType($,this))e=Math.max(e,r.width),t=Math.max(t,r.height);return new g(e,t)}get collider(){let e=this._colliderOffset||new g(0,0),t=this._colliderDimensions||this.dimensions;return{position:this.position.add(e),dimensions:t}}set filterCollisionFn(e){this._filterCollision=e}setColliderOffset(e){this._colliderOffset=e}get colliderOffset(){return this._colliderOffset??new g(0,0)}setColliderDimensions(e){this._colliderDimensions=e}attachToSimulation(e){this.sim=e}filterCollision(e){return this._filterCollision?this._filterCollision(e):!0}};var hn=class extends re{constructor(t,r,i){super();this.currentTime=t;this.deltaTime=r;this.simulation=i;super.target=null}};var Cv=1e3,At=class extends $e{constructor(t){super(t);this._impulse=new g(0,0);this._sleeping=!1;this._canSleep=!0;this._sleepDelay=Cv;this.avgVelAcc=[new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0),new g(0,0)];this.on(zt,r=>{this.sim&&!this._sleeping&&(this.applyDrag(),this.applyImpulse(this.velocityDelta(this.sim.gravity,r.deltaTime),r.deltaTime,!1))}),this.on(hn,r=>{if(this._sleeping)return;Math.abs(this._impulse.x)<1&&(this._impulse=new g(0,this._impulse.y)),Math.abs(this._impulse.y)<1&&(this._impulse=new g(this._impulse.x,0));let i=new g(0,0);if(this._impulse.x!==0||this._impulse.y!==0){let o=this.velocityDelta(this._impulse,r.deltaTime),s=this.checkHit(this._impulse,r.deltaTime);this._impulse.normal.x!==0&&(s.x?(this.position=this.position.add(new g(s.x.distance,0)),this._impulse.x=0,i.x+=s.x.distance):(this.position=this.position.add(new g(o.x,0)),this._impulse.x-=o.x,i.x+=o.x)),this._impulse.normal.y!==0&&(s.y?(this.position=this.position.add(new g(0,s.y.distance)),this._impulse.y=0,i.y+=s.y.distance):(this.position=this.position.add(new g(0,o.y)),this._impulse.y-=o.y,i.y+=o.y))}if(this.avgVelAcc.pop(),this.avgVelAcc.unshift(i),this.canSleep){let o=this.avgVelocity(9);o.x===0&&o.y===0&&(this._sleepDelay<=0?this._sleeping=!0:this._sleepDelay-=r.deltaTime)}})}applyDrag(t=.85){this._impulse.x*=t}applyImpulse(t,r,i=!0){i&&this.wakeUp();let o=this._impulse.add(t),s=this.checkHit(o,r);t.normal.x!==0&&!s.x&&(this._impulse.x=o.x),t.normal.y!==0&&!s.y&&(this._impulse.y=o.y)}velocityDelta(t,r){let i=t.mul(r/1e3);return new g(Math.abs(i.x)*i.normal.x,Math.abs(i.y)*i.normal.y)}checkHit(t,r,i,o){var s,a;return{x:(s=this.sim)==null?void 0:s.checkFutureCollisionX(this,this.velocityDelta(t,r),c=>this.colliderCheck(c)&&(i?i(c):!0),o),y:(a=this.sim)==null?void 0:a.checkFutureCollisionY(this,this.velocityDelta(t,r),c=>this.colliderCheck(c)&&(i?i(c):!0),o)}}checkFutureIntersection(t,r){var o;let i=le.childrenByType($e,this.rootElement);for(let s of i){if(r&&!r(s))continue;let a=(o=this.sim)==null?void 0:o.checkFutureIntersection(this.collider.position,t,this.collider.dimensions,s);if(a)return a}}checkAllFutureIntersections(t,r){var s;let i=le.childrenByType($e,this.rootElement),o=[];for(let a of i){if(r&&!r(a))continue;let c=(s=this.sim)==null?void 0:s.checkFutureIntersection(this.collider.position,t,this.collider.dimensions,a);c&&o.push(c)}return o}checkCurrentIntersection(t){return this.checkFutureIntersection(new g(0,0),t)}checkAllCurrentIntersections(t){return this.checkAllFutureIntersections(new g(0,0),t)}isGrounded(){return!!this.checkHit(new g(0,1),1e3).y}avgVelocity(t=3){let r=new g(0,0);t=Math.min(t,9);let i=this.avgVelAcc.slice(0,t);for(let o of i)r.x+=o.x,r.y+=o.y;return r.div(t)}colliderCheck(t){return t!==this}get sleeping(){return this._sleeping}wakeUp(){this._sleeping=!1,this._sleepDelay=Cv}get canSleep(){return this._canSleep}set canSleep(t){this._canSleep=t}};var Oi=class{constructor(e=new g(0,1024)){this.gravity=e;this.lastCollisionObjects={x:[],y:[]};this.wakeUpInterval=250;this.timeSinceLastWakeUp=0;this.workLoop=new Mn(this.step.bind(this))}setViewport(e){this.viewport=e}setRootElement(e){this.rootElement=e;for(let t of le.childrenByType($e,this.rootElement))t.attachToSimulation(this);this.rootElement.on(Ht,t=>{let r=t.target;r instanceof $e&&r.attachToSimulation(this)})}start(e){this.workLoop.start(e)}getDebugInformation(){let e=[];function t(r,i,o){let s=r,a=r.add(i);s.x=Math.floor(s.x),s.y=Math.floor(s.y),a.x=Math.floor(a.x),a.y=Math.floor(a.y),e.push({from:s,to:new g(a.x,s.y),color:o}),e.push({from:new g(a.x,s.y),to:a,color:o}),e.push({from:a,to:new g(s.x,a.y),color:o}),e.push({from:new g(s.x,a.y),to:s,color:o})}if(this.rootElement){for(let r of le.childrenByType($e,this.rootElement))t(r.collider.position,r.collider.dimensions,r instanceof At&&r.sleeping?"rgba(199, 194, 198, 0.5)":"rgba(205, 93, 215, 0.5)");this.lastCollisionObjects.x.length===2&&(t(this.lastCollisionObjects.x[0].position,this.lastCollisionObjects.x[0].dimensions,"rgba(3, 32, 252, 0.5)"),t(this.lastCollisionObjects.x[1].position,this.lastCollisionObjects.x[1].dimensions,"rgba(49, 252, 3, 0.5)")),this.lastCollisionObjects.y.length===2&&(t(this.lastCollisionObjects.y[0].position,this.lastCollisionObjects.y[0].dimensions,"rgba(3, 32, 252, 0.5)"),t(this.lastCollisionObjects.y[1].position,this.lastCollisionObjects.y[1].dimensions,"rgba(252, 3, 65, 0.5)"))}return e}checkFutureIntersection(e,t,r,i){if(!this.rootElement)return!1;let o=e.add(t),s=o.x,a=o.y,c=o.x+r.x,l=o.y+r.y,u=i.collider.position.x,d=i.collider.position.y,f=i.collider.position.x+i.collider.dimensions.x,p=i.collider.position.y+i.collider.dimensions.y;if(Math.max(s,u)<Math.min(c,f)&&Math.max(a,d)<Math.min(l,p))return i}checkFutureCollisionX(e,t,r,i){if(!this.rootElement)return;let o=le.childrenByType($e,this.rootElement),s=e.collider.position.add(t),a=s.x,c=s.x+e.collider.dimensions.x;for(let l of o){if(!i&&r&&!r(l)||!l.filterCollision({velocity:t,collider:e}))continue;let u=this.checkFutureIntersection(e.collider.position,t,e.collider.dimensions,l),d=l.collider.position.x,f=l.collider.position.x+l.collider.dimensions.x;if(u){let p=t.x;if(t.normal.x===1){if(c>d&&(p-=c-d,Math.abs(p)<Math.abs(t.x)))return this.lastCollisionObjects.x=[e.collider,l.collider],{collisionObject:l,normal:t.normal.x,distance:p}}else if(t.normal.x===-1&&a<f&&(p+=f-a,Math.abs(p)<Math.abs(t.x)))return this.lastCollisionObjects.x=[e.collider,l.collider],{collisionObject:l,normal:t.normal.x,distance:p}}}this.lastCollisionObjects.x=[]}checkFutureCollisionY(e,t,r,i){if(!this.rootElement)return;let o=le.childrenByType($e,this.rootElement),s=e.collider.position.add(t),a=s.y,c=s.y+e.collider.dimensions.y;for(let l of o){if(!i&&r&&!r(l)||!l.filterCollision({velocity:t,collider:e}))continue;let u=this.checkFutureIntersection(e.collider.position,t,e.collider.dimensions,l),d=l.collider.position.y,f=l.collider.position.y+l.collider.dimensions.y;if(u){let p=t.y;if(t.normal.y===1){if(c>d&&(p-=c-d,Math.abs(p)<Math.abs(t.y)))return this.lastCollisionObjects.y=[e.collider,l.collider],{collisionObject:l,normal:t.normal.y,distance:p}}else if(t.normal.y===-1&&a<f&&(p+=f-a,Math.abs(p)<Math.abs(t.y)))return this.lastCollisionObjects.y=[e.collider,l.collider],{collisionObject:l,normal:t.normal.y,distance:p}}}this.lastCollisionObjects.y=[]}step(e,t){if(this.rootElement){if(this.timeSinceLastWakeUp+=t,this.timeSinceLastWakeUp>=this.wakeUpInterval){this.timeSinceLastWakeUp=0;let r=le.childrenByType(At,this.rootElement);for(let i of r)i.sleeping&&i.wakeUp()}this.rootElement.dispatchEvent(new zt(e,t,this)),this.rootElement.dispatchEvent(new hn(e,t,this))}}};var Bn=class extends $e{};var Un=class{static isMobilePhone(){let e=navigator.userAgent||navigator.vendor||window.opera,t=/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i,r=/iPad|Android(?!.*Mobile)/i,i=t.test(e),o=r.test(e);return i&&!o}static isTablet(){let e=navigator.userAgent||navigator.vendor||window.opera;return/iPad|Android(?!.*Mobile)|Tablet/i.test(e)}static hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}static getDeviceInfo(){let e=this.isMobilePhone(),t=this.isTablet(),r=this.hasTouch();return{isMobile:e,isTablet:t,isDesktop:!e&&!t,hasTouch:r,userAgent:navigator.userAgent,platform:navigator.platform}}static getOrientation(){return window.innerHeight>window.innerWidth?"portrait":"landscape"}static isPWA(){return window.matchMedia("(display-mode: standalone)").matches||navigator.standalone===!0}};var ot=class extends ${constructor(e=new g(0,0),t={},r={},i=0){super(e),this._margin={top:t.top??0,right:t.right??0,bottom:t.bottom??0,left:t.left??0},this._padding={top:r.top??0,right:r.right??0,bottom:r.bottom??0,left:r.left??0},this._gap=i}setContent(e){this.content&&this.removeChild(this.content),this.content=e,this.content.position=new g(this._padding.left,this._padding.top),this.addChild(this.content)}addChild(e){super.addChild(e),this.layoutChildren()}removeChild(e){super.removeChild(e),this.layoutChildren()}layoutChildren(){let e=this.children.filter(r=>r instanceof $),t=this._padding.top;for(let r of e)r.position=new g(this._padding.left,t),t+=r.height+this._gap}get margin(){return Te({},this._margin)}get padding(){return Te({},this._padding)}set padding(e){this._padding=e}get gap(){return this._gap}set gap(e){this._gap=e}computeContentSize(){let e=this.children.filter(i=>i instanceof $);if(e.length===0)return new g(0,0);let t=0,r=0;for(let i of e)t=Math.max(t,i.width),r+=i.height;return r+=this._gap*(e.length-1),new g(t,r)}get width(){let e=this.computeContentSize();return this._margin.left+this._padding.left+e.width+this._padding.right+this._margin.right}get height(){let e=this.computeContentSize();return this._margin.top+this._padding.top+e.height+this._padding.bottom+this._margin.bottom}get contentSize(){return this.computeContentSize()}get innerSize(){let e=this.computeContentSize();return new g(this._padding.left+e.width+this._padding.right,this._padding.top+e.height+this._padding.bottom)}};var Lr=class extends ot{constructor(t=new g(0,0)){super(t,{},{},0);this.flexDirection="row";this.justifyContent="flex-start";this.alignItems="flex-start";this._needsLayout=!0;this._cachedContentSize=null;this.on(Ht,()=>{this.markLayoutDirty(),this.layout()}),this.on(cn,()=>{this.markLayoutDirty(),this.layout()}),this.layout()}markLayoutDirty(){this._needsLayout=!0,this._cachedContentSize=null}get width(){return this._needsLayout&&this.layout(),super.width}get height(){return this._needsLayout&&this.layout(),super.height}addChild(t){$.prototype.addChild.call(this,t),this.markLayoutDirty(),this.layout()}removeChild(t){$.prototype.removeChild.call(this,t),this.markLayoutDirty(),this.layout()}computeContentSize(){if(this._cachedContentSize&&!this._needsLayout)return this._cachedContentSize;let t=this.children.filter(o=>o instanceof $);if(t.length===0)return this._cachedContentSize=new g(0,0),this._cachedContentSize;let r=this.flexDirection==="row",i;if(r){let o=0,s=0;for(let a of t)o+=a.width,s=Math.max(s,a.height);o+=this.gap*(t.length-1),i=new g(o,s)}else{let o=0,s=0;for(let a of t)o=Math.max(o,a.width),s+=a.height;s+=this.gap*(t.length-1),i=new g(o,s)}return this._cachedContentSize=i,i}layout(){let t=this.children.filter(h=>h instanceof $);if(t.length===0){this._needsLayout=!1;return}let r=this.flexDirection==="row",i=this.contentSize,o=r?this.padding.left:this.padding.top,s=r?this.padding.top:this.padding.left,a=r?i.width:i.height,c=r?i.height:i.width,l=0,u=[];for(let h of t){let w=r?h.width:h.height;u.push(w),l+=w}let d=this.gap*(t.length-1);l+=d;let f=this.calculateJustifyStart(a,l,t.length)+o,p=this.calculateSpacing(a,l,t.length);for(let h=0;h<t.length;h++){let w=t[h],b=u[h],E=r?w.height:w.width,v=this.calculateCrossAxisPosition(c,E)+s;r?w.position=new g(f,v):w.position=new g(v,f),f+=b+this.gap+p}this._needsLayout=!1}calculateJustifyStart(t,r,i){switch(this.justifyContent){case"flex-start":return 0;case"flex-end":return t-r;case"center":return(t-r)/2;case"space-between":return 0;case"space-around":return(t-r)/(i*2);default:return 0}}calculateSpacing(t,r,i){let o=t-r;switch(this.justifyContent){case"space-between":return i>1?o/(i-1):0;case"space-around":return i>0?o/i:0;default:return 0}}calculateCrossAxisPosition(t,r){switch(this.alignItems){case"flex-start":return 0;case"flex-end":return t-r;case"center":return(t-r)/2;case"stretch":return(t-r)/2;default:return 0}}},me=class extends Lr{constructor(e,t){super(e),this._fixedSize=t,this.layout()}computeContentSize(){if(!this._fixedSize)return new g(0,0);let e=Math.max(0,this._fixedSize.width-this.padding.left-this.padding.right),t=Math.max(0,this._fixedSize.height-this.padding.top-this.padding.bottom);return new g(e,t)}setSize(e){this._fixedSize=e,this.markLayoutDirty()}};var mt=class extends ${constructor(t,r,i,o){var f;super();this._width=0;this._height=0;this._width=t,this._height=((f=r||i||o)==null?void 0:f.height)||0,this._left=r,this._center=i,this._right=o,this.cacheable=!0;let s=new be(r),a=new be(o);this.addChild(s),this.addChild(a);let c=7;a.position=new g(t-a.width,0),a.position.x<c&&(a.clipRegion={x:c,y:0,width:a.width,height:a.height});let u=t-Math.min(t,s.width+a.width),d=s.width;for(;u>0;){let p=new be(i);p.position=new g(d,0),u<p.width&&(p.clipRegion={x:0,y:0,width:u,height:p.height}),this.addChild(p),u-=p.width,d+=p.width}}get width(){return this._width*this.scale.x}get height(){return this._height*this.scale.y}get cacheKey(){var s,a,c;if(!this.cacheable)return;let t=((s=this._left)==null?void 0:s.id)||"none",r=((a=this._center)==null?void 0:a.id)||"none",i=((c=this._right)==null?void 0:c.id)||"none",o=this.fillColor||"none";return`3slice:${this._width}:${t}:${r}:${i}:${o}`}};var Ge=class extends ${constructor(t,r,i,o,s,a,c,l,u,d){super();this._size=new g(0,0);this._size=t,this._topLeft=r,this._topCenter=i,this._topRight=o,this._middleLeft=s,this._middleCenter=a,this._middleRight=c,this._bottomLeft=l,this._bottomCenter=u,this._bottomRight=d,this.cacheable=!0;let f=new be(r),p=new be(o),h=new be(l),w=new be(d);this.addChild(f),this.addChild(p),this.addChild(h),this.addChild(w),f.position=new g(0,0),p.position=new g(t.width-p.width,0),h.position=new g(0,t.height-h.height),w.position=new g(t.width-w.width,t.height-w.height);let b=p.position.x<3||w.position.x<3;p.position.x<3&&(p.clipRegion={x:3,y:0,width:p.width,height:p.height}),w.position.x<3&&(w.clipRegion={x:3,y:0,width:w.width,height:w.height}),h.position.y<3&&(h.clipRegion={x:0,y:3,width:h.width,height:h.height}),w.position.y<3&&(w.clipRegion={x:b?3:0,y:3,width:w.width,height:w.height});let E=f.width,v=p.width,y=f.height,I=h.height,M=t.width-E-v,S=t.height-y-I,x=h.position.y<3||w.position.y<3;this.tileHorizontal(i,E,0,M,b,!1),this.tileHorizontal(u,E,t.height-I,M,b,x),this.tileVertical(s,0,y,S,b,x),this.tileVertical(c,t.width-v,y,S,!1,x),this.fillCenter(a,E,y,M,S,b,x)}tileHorizontal(t,r,i,o,s=!1,a=!1){if(!t||o<=0)return;let c=o,l=r;for(;c>0;){let u=new be(t);u.position=new g(l,i),(c<u.width||s||a)&&(u.clipRegion={x:s?3:0,y:a?3:0,width:c<u.width?c:u.width,height:u.height}),this.addChild(u),c-=u.width,l+=u.width}}tileVertical(t,r,i,o,s=!1,a=!1){if(!t||o<=0)return;let c=o,l=i;for(;c>0;){let u=new be(t);u.position=new g(r,l),(c<u.height||s||a)&&(u.clipRegion={x:s?3:0,y:a?3:0,width:u.width,height:c<u.height?c:u.height}),this.addChild(u),c-=u.height,l+=u.height}}fillCenter(t,r,i,o,s,a=!1,c=!1){if(!t||o<=0||s<=0)return;let l=s,u=i;for(;l>0;){let d=o,f=r;for(;d>0;){let p=new be(t);p.position=new g(f,u);let h=Math.min(d,p.width),w=Math.min(l,p.height);(h<p.width||w<p.height||a||c)&&(p.clipRegion={x:a?3:0,y:c?3:0,width:h,height:w}),this.addChild(p),d-=p.width,f+=p.width}l-=t.height,u+=t.height}}get width(){return this._size.width}get height(){return this._size.height}get cacheKey(){var f,p,h,w,b,E,v,y,I;if(!this.cacheable)return;let t=((f=this._topLeft)==null?void 0:f.id)||"none",r=((p=this._topCenter)==null?void 0:p.id)||"none",i=((h=this._topRight)==null?void 0:h.id)||"none",o=((w=this._middleLeft)==null?void 0:w.id)||"none",s=((b=this._middleCenter)==null?void 0:b.id)||"none",a=((E=this._middleRight)==null?void 0:E.id)||"none",c=((v=this._bottomLeft)==null?void 0:v.id)||"none",l=((y=this._bottomCenter)==null?void 0:y.id)||"none",u=((I=this._bottomRight)==null?void 0:I.id)||"none",d=this.fillColor||"none";return`9slice:${this._size.width}:${this._size.height}:${t}:${r}:${i}:${o}:${s}:${a}:${c}:${l}:${u}:${d}`}};var ji=class extends re{constructor(t){super();this.start=t}},Or=class extends re{},Ms=class extends At{constructor(t){super(t);this._enabled=!0;this._dropping=!1;this.input=new xi(this),this.input.setOn(0).when({type:ce,condition:i=>i.action===0&&i.key==="ArrowUp"}),this.input.setOn(0).when({type:ce,condition:i=>i.action===0&&i.key==="w"}),this.input.setOff(0).when({type:ce,condition:i=>i.action===1&&i.key==="ArrowUp"}),this.input.setOff(0).when({type:ce,condition:i=>i.action===1&&i.key==="w"}),this.input.setOn(3).when({type:ce,condition:i=>i.action===0&&i.key==="ArrowDown"}),this.input.setOn(3).when({type:ce,condition:i=>i.action===0&&i.key==="s"}),this.input.setOff(3).when({type:ce,condition:i=>i.action===1&&i.key==="ArrowDown"}),this.input.setOff(3).when({type:ce,condition:i=>i.action===1&&i.key==="s"}),this.input.setOn(1).when({type:ce,condition:i=>i.action===0&&i.key==="ArrowLeft"}),this.input.setOn(1).when({type:ce,condition:i=>i.action===0&&i.key==="a"}),this.input.setOff(1).when({type:ce,condition:i=>i.action===1&&i.key==="ArrowLeft"}),this.input.setOff(1).when({type:ce,condition:i=>i.action===1&&i.key==="a"}),this.input.setOn(2).when({type:ce,condition:i=>i.action===0&&i.key==="ArrowRight"}),this.input.setOn(2).when({type:ce,condition:i=>i.action===0&&i.key==="d"}),this.input.setOff(2).when({type:ce,condition:i=>i.action===1&&i.key==="ArrowRight"}),this.input.setOff(2).when({type:ce,condition:i=>i.action===1&&i.key==="d"}),this.input.setOn(4).when({type:ce,condition:i=>i.action===0&&i.key===" "}),this.input.setOff(4).when({type:ce,condition:i=>i.action===1&&i.key===" "});let r=!1;this.input.onChange(i=>{this._enabled&&(i.get(0)&&this.isGrounded()&&(r=!0),i.get(3)&&this.isGrounded()?(this._dropping=!0,this.dispatchEvent(new ji(!0))):this._dropping&&(this._dropping=!1,this.dispatchEvent(new ji(!1))),i.get(4)&&this.isGrounded()&&this.dispatchEvent(new Or))}),this.on(zt,i=>{this._enabled&&(this.input.state.get(1)&&this.input.state.get(2)||(this.input.state.get(1)&&this.applyImpulse(new g(-16,0),i.deltaTime),this.input.state.get(2)&&this.applyImpulse(new g(16,0),i.deltaTime)),r&&(r=!1,this.applyImpulse(new g(0,-288),i.deltaTime)),this._dropping&&this.applyImpulse(new g(0,3),i.deltaTime))}),this.on(hn,i=>{this.switchStance(i.currentTime)})}get enabled(){return this._enabled}set enabled(t){this._enabled=t}get isDropping(){return this._dropping}switchStance(t){}};var Xe=class extends Ms{constructor(t,r,i=0,o=new g(0,0)){super(t);this.assetName=r;this.spritePointing=i;this.spriteOffset=o;this.activeStanceStartTime=0;this._pointing=1;this.gfx=new $,this.dustGfx=new $,this.addChild(this.dustGfx),this.addChild(this.gfx),this.ghost=new $,this.ghost.isVisible=!1,this.setColliderOffset(new g(0,4)),this.switchStance(0),this._pointing=1}get pointing(){return this._pointing}get pointingDefault(){return this._pointing===this.spritePointing}get ghostGraphics(){return this.ghost}updateGhostPosition(){this.ghost.position=this.position}setSpriteOffset(t){this.spriteOffset=t}switchStance(t,r=!1){var c,l,u;let i=W.get("assets"),o="Idle",s=this.avgVelocity();s.y>.1?o="Fall":s.y<-.1&&(o="Jump"),s.x>.1?this._pointing=1:s.x<-.1&&(this._pointing=0);let a=t-this.activeStanceStartTime;if((this.activeStance==="Fall"&&o==="Idle"||this.activeStance==="Ground"&&a<=i[this.assetName].animations.Ground.duration)&&(o="Ground"),o!=="Ground"&&Math.abs(s.y)<.1&&Math.abs(s.x)>.1&&(o="Run"),o!==this.activeStance||r){this.activeStanceStartTime=t,this.activeStance=o,this.gfx.removeAllChildren();let d=new He(i[this.assetName].animations[o]),f=new g(-d.width/2+this.collider.dimensions.width/2,0);this.gfx.translation=f,this.ghost.translation=f,this.ghost.removeAllChildren();let p=new He(i[this.assetName].animations[o]);p.opacity=.5,p.fillColor="rgba(0, 0, 0, 1)",this.ghost.addChild(p),this.gfx.addChild(d),this.dustGfx.removeAllChildren();let h=i["The Crusty Crew Dust Particles"];if(h&&(o==="Run"||o==="Jump"||o==="Fall")){let w=h.animations[o];if(w){let b=new He(w);b.translation=new g(-b.width/2+this.collider.dimensions.width/2,32-b.height),o==="Run"?b.animation.repeat=0:b.animation.repeat=1,this.dustGfx.addChild(b)}}}if(this.gfx.children.length===1){let d=(c=this.gfx)==null?void 0:c.children[0];d.flipH=this._pointing!==this.spritePointing,d.flipH?d.translation=new g(0,-32).add(this.spriteOffset):d.translation=new g(0,-32).sub(this.spriteOffset)}if(this.dustGfx.children.length===1){let d=(l=this.dustGfx)==null?void 0:l.children[0];d.flipH=this._pointing===0}if(this.ghost.children.length===1){let d=(u=this.ghost)==null?void 0:u.children[0];d.clipRegion=this.ghostGraphics.clipRegion,d.flipH=this._pointing!==this.spritePointing,d.flipH?d.translation=new g(0,-32).add(this.spriteOffset):d.translation=new g(0,-32).sub(this.spriteOffset)}}showExclamation(){let r=W.get("assets")["The Crusty Crew Dialogue"];if(!r||!r.animations.Exclamation)throw new Error("Exclamation animation not found");this.dialogueAnimation&&this.dialogueAnimation.remove(),this.dialogueAnimation=new He(r.animations.Exclamation),this.dialogueAnimation.translation=new g(this.colliderOffset.x+this.collider.dimensions.width/2-this.dialogueAnimation.width/2,this.colliderOffset.y-24),this.dialogueAnimation.animation.repeat=1,this.addChild(this.dialogueAnimation)}};var jr=class extends Xe{constructor(e){super(e,"Captain Clown Nose",1,new g(0,0)),this.setColliderDimensions(new g(16,28))}};var Sv={PinkStar:"The Crusty Crew Pink Star",Crabby:"The Crusty Crew Crabby",FierceTooth:"The Crusty Crew Fierce Tooth"},kt=class extends Xe{constructor(e,t){super(e,Sv[t]),this.setCharacterType(t)}setCharacterType(e){this.assetName=Sv[e],e==="Crabby"?this.setColliderDimensions(new g(22,28)):this.setColliderDimensions(new g(18,28)),this.switchStance(0,!0)}};var bD={regular:{charsMapKey:"Chars"},hero:{charsMapKey:"CharsHero"}},ge=class extends ${constructor(t,r=1,i="regular"){super();this._width=0;this._height=0;this._text="";this.textures=[];this._padding=new g(0,0);this.letterSpacing=r,this.style=i,t&&this.setText(t),this.cacheable=!0}get cacheKey(){if(!this.cacheable)return;let t=this.fillColor||"none";return`text:${this._text}:${this.style}:${this.letterSpacing}:${this.scale.x}:${this.scale.y}:${t}`}get fillColor(){return super.fillColor}set fillColor(t){super.fillColor=t;for(let r of this.children)r instanceof be&&(r.fillColor=t)}setTextFromTextures(){let t=[...this.children];for(let r of t)this.removeChild(r);this._width=this._padding.x*this.scale.x,this._height=this._padding.y*this.scale.y;for(let r=0;r<this.textures.length;r+=1){let i=this.textures[r],o=new be(i,new g(this._width,this._height));o.scale=this.scale,this.fillColor&&(o.fillColor=this.fillColor),this.addChild(o),this._width+=o.width*this.scale.x,r<this.textures.length-1&&(this._width+=this.letterSpacing)}this._height+=this.textures[0].height*this.scale.y,this._width+=this._padding.x*this.scale.x,this._height+=this._padding.y*this.scale.y}setText(t){this._text=t;let r=W.get("chars"),i=bD[this.style],o=t.toLowerCase().split("");this.textures=o.map(s=>r[i.charsMapKey][s]||r[i.charsMapKey].__unknown__).filter(s=>s!==void 0),this.setTextFromTextures()}setTextFromCodes(t,r="Chars",i="Chars"){var c;let s=(c=W.get("assets")[i])==null?void 0:c.tilemaps[r];if(!s){console.warn(`Tilemap "${r}" not found in asset "${i}"`);return}let a=[];for(let l of t){let u=s.get(l);if(!u){console.warn(`Texture at index ${l} not found in tilemap`);continue}a.push(u)}this.textures=a,this.setTextFromTextures()}set padding(t){this._padding=t,this.setTextFromTextures()}get padding(){return this._padding}set scale(t){super.scale=t,this.setTextFromTextures()}get scale(){return super.scale}get width(){return this._width}get height(){return this._height}};var xf={fontFamily:"monospace",fontSize:12,fontWeight:"normal",color:"#000000",letterSpacing:0},Hi=class extends ${constructor(t="",r={}){super();this._width=0;this._height=0;this.CHAR_WIDTH=xf.fontSize*.6;this.CHAR_HEIGHT=xf.fontSize;this._text=t,this._style=Te(Te({},xf),r),this.textElement=document.createElement("div"),this.attachedDOM=this.textElement,this.setupDOMElement(),this.setText(t)}setupDOMElement(){let t=this.textElement;t.style.position="absolute",t.style.pointerEvents="none",t.style.whiteSpace="nowrap",t.style.userSelect="none",t.style.overflow="hidden",t.style.fontFamily=this._style.fontFamily,t.style.fontSize=`${this.CHAR_HEIGHT}px`,t.style.fontWeight=this._style.fontWeight,t.style.color=this._style.color,t.style.lineHeight=`${this.CHAR_HEIGHT}px`,t.style.margin="0",t.style.padding="0",t.style.transformOrigin="top left"}setText(t){this._text=t,this.textElement.innerHTML="";let r=t.length;this._width=r*this.CHAR_WIDTH,this._height=this.CHAR_HEIGHT;for(let i=0;i<t.length;i++){let o=document.createElement("span");o.textContent=t[i],o.style.display="inline-block",o.style.width=`${this.CHAR_WIDTH}px`,o.style.height=`${this.CHAR_HEIGHT}px`,o.style.textAlign="center",o.style.lineHeight=`${this.CHAR_HEIGHT}px`,o.style.overflow="hidden",this.textElement.appendChild(o)}this.textElement.style.width=`${this._width}px`,this.textElement.style.height=`${this._height}px`}updateStyle(t){this._style=Te(Te({},this._style),t),this.setupDOMElement()}get text(){return this._text}get width(){return this._width}get height(){return this._height}get fillColor(){return this._style.color}set fillColor(t){t&&(this._style.color=t,this.textElement.style.color=t)}};var st=class extends At{constructor(t,r,i="html"){super(t);this.text=r;this.tagType=i;let s=W.get("assets").Paper.tilemaps.Paper,a=new Hi(r,{fontFamily:'"Source Code Pro", monospace',fontWeight:"700",color:"#000000"}),c=W.get("deviceInfo");c!=null&&c.isMobile&&(a.scale=new g(1.7,1.7)),this.slice=new mt(a.width+4,s.get(1),s.get(2),s.get(3)),this.addChild(this.slice),a.position=new g(2,2),this.addChild(a)}setHighlight(t){this.slice.fillColor=t?"#ffffff":void 0,this.slice.opacity=t?.8:1,this._initialDepth===void 0&&(this._initialDepth=this.depth),this.depth=t?this._initialDepth+5:this._initialDepth}get width(){return this.slice.width}get height(){return this.slice.height}};var wD="rgba(0, 0, 0, 0.3)",xD="rgba(255, 255, 255, 0.3)",ED="rgba(100, 150, 255, 0.6)",CD="rgba(0, 0, 0, 0.1)",Vn=class extends ${constructor(t,r,i,o){super(t);this.outline=r;this.background=i;this.hoverBackground=o;this.action=void 0;this._isFocused=!1;this._isHovered=!1;this._isDisabled=!1;this.outline&&this.addChild(this.outline),this.background&&this.addChild(this.background),this.hoverBackground&&(this.addChild(this.hoverBackground),this.hoverBackground.isVisible=!1),this.buttonElement=document.createElement("button"),this.attachedDOM=this.buttonElement,this.setupButtonElement(),this.mouseInteraction=new Ei(this),this.mouseInteraction.on(Nn,this.handleMouseEnter.bind(this)),this.mouseInteraction.on(yr,this.handleMouseLeave.bind(this)),this.mouseInteraction.on(vr,this.handleMouseClick.bind(this))}setupButtonElement(){let t=this.buttonElement;t.setAttribute("data-interactive","true"),t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.width=`${this.width}px`,t.style.height=`${this.height}px`,t.style.border="none",t.style.outline="none",t.style.background="transparent",t.style.cursor="pointer",t.style.padding="0",t.style.margin="0",t.style.zIndex="1000",t.style.tabSize="0",t.style.appearance="none",t.style.webkitAppearance="none",t.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),t.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),t.addEventListener("click",this.handleMouseClick.bind(this)),t.addEventListener("focus",()=>this.setFocused(!0)),t.addEventListener("blur",()=>this.setFocused(!1))}handleMouseEnter(){this._isDisabled||(this._isHovered=!0,this.updateVisualState())}handleMouseLeave(){this._isDisabled||(this._isHovered=!1,this.updateVisualState())}updateVisualState(){if(this._isDisabled){this.outline&&(this.outline.fillColor=CD),this.background&&(this.background.isVisible=!0),this.hoverBackground&&(this.hoverBackground.isVisible=!1);return}this._isFocused||this._isHovered?(this.outline&&(this.outline.fillColor=this._isFocused?ED:xD),this.background&&(this.background.isVisible=!1),this.hoverBackground&&(this.hoverBackground.isVisible=!0)):(this.outline&&(this.outline.fillColor=wD),this.background&&(this.background.isVisible=!0),this.hoverBackground&&(this.hoverBackground.isVisible=!1))}setFocused(t){this._isFocused=t,this.updateVisualState()}get isFocused(){return this._isFocused}focus(){setTimeout(()=>{this.buttonElement.focus()},100)}blur(){this.buttonElement.blur()}setDisabled(t){this._isDisabled=t,this.buttonElement.disabled=t,t?this.buttonElement.style.cursor="not-allowed":this.buttonElement.style.cursor="pointer",this.updateVisualState()}get isDisabled(){return this._isDisabled}activate(){this._isDisabled||this.action&&this.action()}handleMouseClick(){this._isDisabled||this.activate()}getButtonElement(){return this.buttonElement}setButtonType(t){this.buttonElement.type=t}get width(){var t;return((t=this.background)==null?void 0:t.width)||0}get height(){var t;return((t=this.background)==null?void 0:t.height)||0}};var SD="rgba(0, 0, 0, 0.3)",TD="rgba(128, 128, 128, 0.5)",_D={primary:{regular:{topLeft:14,topCenter:15,topRight:16,middleLeft:23,middleCenter:24,middleRight:25,bottomLeft:32,bottomCenter:33,bottomRight:34},hover:{topLeft:52,topCenter:53,topRight:54,middleLeft:23,middleCenter:24,middleRight:25,bottomLeft:60,bottomCenter:61,bottomRight:62}},secondary:{regular:{topLeft:18,topCenter:19,topRight:20,middleLeft:27,middleCenter:28,middleRight:29,bottomLeft:36,bottomCenter:37,bottomRight:38},hover:{topLeft:56,topCenter:57,topRight:58,middleLeft:27,middleCenter:28,middleRight:29,bottomLeft:64,bottomCenter:65,bottomRight:66}}},je=class extends Vn{constructor(e,t,r="primary"){t.position=new g(0,-1),t.padding=new g(6,6);let i=W.get("deviceInfo");i!=null&&i.isMobile&&(t.scale=new g(1.7,1.7));let o=W.get("assets");if(r==="text"){let s=o.Chars.tilemaps.Chars;super(e,void 0,void 0,void 0),this.addChild(t),this.underline=new mt(t.width,s.get(90),s.get(90),s.get(90)),this.underline.position=new g(0,t.height-t.padding.y+1),this.underline.isVisible=!1,this.addChild(this.underline)}else{let s=o["Wood and Paper UI - Buttons"].tilemaps["Wood and Paper"],a=1,c=1,l=_D[r],u=t.size,d=new Ge(u.add(new g(a*2,c*2)),s.get(l.regular.topLeft),s.get(l.regular.topCenter),s.get(l.regular.topRight),s.get(l.regular.middleLeft),s.get(l.regular.middleCenter),s.get(l.regular.middleRight),s.get(l.regular.bottomLeft),s.get(l.regular.bottomCenter),s.get(l.regular.bottomRight)),f=new Ge(u,s.get(l.regular.topLeft),s.get(l.regular.topCenter),s.get(l.regular.topRight),s.get(l.regular.middleLeft),s.get(l.regular.middleCenter),s.get(l.regular.middleRight),s.get(l.regular.bottomLeft),s.get(l.regular.bottomCenter),s.get(l.regular.bottomRight)),p=new Ge(u,s.get(l.hover.topLeft),s.get(l.hover.topCenter),s.get(l.hover.topRight),s.get(l.hover.middleLeft),s.get(l.hover.middleCenter),s.get(l.hover.middleRight),s.get(l.hover.bottomLeft),s.get(l.hover.bottomCenter),s.get(l.hover.bottomRight));super(e,d,f,p),this.addChild(t),d.position=new g(-a,-c),d.fillColor=SD;let h=(f.height+c*2)/d.height;d.scale=new g(1,h)}this.textComponent=t,this.textDefaultPosition=this.textComponent.position,this.variant=r}updateVisualState(){if(super.updateVisualState(),this._isDisabled){this.underline&&(this.underline.isVisible=!1),this.textComponent.position=this.textDefaultPosition,this.textComponent.fillColor=TD;return}this.textComponent.fillColor=void 0;let e=this._isFocused||this._isHovered;this.variant==="text"?(this.underline&&(this.underline.isVisible=e),this.textComponent.position=this.textDefaultPosition):e?this.textComponent.position=new g(this.textDefaultPosition.x,this.textDefaultPosition.y+1):this.textComponent.position=this.textDefaultPosition}get width(){var e,t;return((e=this.background)==null?void 0:e.width)||((t=this.textComponent)==null?void 0:t.width)||0}get height(){var e,t;return((e=this.background)==null?void 0:e.height)||((t=this.textComponent)==null?void 0:t.height)||0}};var $i=class extends ${constructor(t,r){super(t);this._size=r}get width(){var t;return((t=this._size)==null?void 0:t.width)||0}get height(){var t;return((t=this._size)==null?void 0:t.height)||0}};var pw=Zw(fw());var Qi=class extends ${constructor(e,t,r,i=""){super(),this._size=t,this.position=e,this.htmlContent=r,this.cssContent=i,this.previewCanvas=document.createElement("canvas"),this.previewCanvas.width=this.width*4,this.previewCanvas.height=this.height*4,this.previewCanvas.style.width=this.width+"px",this.previewCanvas.style.height=this.height+"px",this.previewCanvas.style.background="transparent",this.previewCanvas.style.border="none",this.previewCanvas.style.pointerEvents="none",this.previewCanvas.style.imageRendering="crisp-edges";let o=this.previewCanvas.getContext("2d");if(!o)throw new Error("Could not obtain off-screen canvas context");this.context=o,this.attachedDOM=this.previewCanvas,this.renderHtml()}async renderHtml(){this.context.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height);let e=this.htmlContent.replaceAll("<img/>",'<img src="/sample-img.png" />'),t=4,r=this.cssContent.replaceAll(": 50px;",": 61px;").replaceAll(": 40px;",": 51px;").replaceAll(": 30px;",": 41px;").replaceAll(": 20px;",": 31px;").replaceAll(": 10px;",": 21px;"),i=`
      <!DOCTYPE html>
      <html>
        <head>
          <style>
            body {
              margin: ${16*t}px;
              font-family: Arial, sans-serif;
              font-size: ${20*t}px;
              line-height: 1.4;
              height: 700px;
            }

            img {
              width: ${50*t}px;
              height: ${50*t}px;
              border: ${2*t}px solid #000000;
            }

            a {
              color: blue;
              text-decoration: underline;
            }
            
            a img {
             border-color: blue;
            }
            
            button {
              font-size: ${20*t}px;
              line-height: 1.4;
            }

            /* User-provided CSS */
            ${r}
          </style>
        </head>
        <body>${e}</body>
      </html>
    `;try{await(0,pw.drawHTML)(i,this.previewCanvas,{width:this.previewCanvas.width,height:this.previewCanvas.height,executeJs:!1})}catch(o){console.error("Error rendering HTML with rasterizehtml:",o)}}setHtml(e,t=""){(this.htmlContent!==e||this.cssContent!==t)&&(this.htmlContent=e,this.cssContent=t,this.renderHtml())}get width(){return this._size.width}get height(){return this._size.height}};var Zk={default:{topLeft:33,topCenter:34,topRight:35,middleLeft:45,middleCenter:46,middleRight:47,bottomLeft:57,bottomCenter:58,bottomRight:59},white:{topLeft:41,topCenter:42,topRight:43,middleLeft:53,middleCenter:54,middleRight:55,bottomLeft:65,bottomCenter:66,bottomRight:67}},Jt=class extends ${constructor(e,t,r="default"){super(e),this.variant=r,this.createBoard(t)}createBoard(e){let r=W.get("assets")["Wood and Paper UI - Boards"].tilemaps["Wood and Paper"],i=Zk[this.variant];this.board=new Ge(e,r.get(i.topLeft),r.get(i.topCenter),r.get(i.topRight),r.get(i.middleLeft),r.get(i.middleCenter),r.get(i.middleRight),r.get(i.bottomLeft),r.get(i.bottomCenter),r.get(i.bottomRight)),this.addChild(this.board)}get width(){var e;return((e=this.board)==null?void 0:e.width)??0}get height(){var e;return((e=this.board)==null?void 0:e.height)??0}setSize(e){this.board&&this.removeChild(this.board),this.createBoard(e)}};var Kk={primary:{topLeft:1,topCenter:2,topRight:3,middleLeft:9,middleCenter:10,middleRight:11,bottomLeft:17,bottomCenter:18,bottomRight:19},secondary:{topLeft:5,topCenter:6,topRight:7,middleLeft:13,middleCenter:14,middleRight:15,bottomLeft:21,bottomCenter:22,bottomRight:23}},Xt=class extends ${constructor(t,r,i="primary",o=!1,s="default"){super(t);this.overlayElements=[];this.variant=i,this.outlined=o,this.paperVariant=s,this.createBoard(r),s!=="none"&&(this.paper=new Jt(new g(0,0),r,s),this.addChild(this.paper))}createBoard(t){let i=W.get("assets")["Wood and Paper UI - Boards"].tilemaps["Wood and Paper"],o=Kk[this.variant];if(this.outlined){let c=new g(t.width+2,t.height+4),l=new g(-1,-2);this.outline=new Ge(c,i.get(o.topLeft),i.get(o.topCenter),i.get(o.topRight),i.get(o.middleLeft),i.get(o.middleCenter),i.get(o.middleRight),i.get(o.bottomLeft),i.get(o.bottomCenter),i.get(o.bottomRight)),this.outline.position=l,this.outline.fillColor="rgba(0, 0, 0, 0.3)",this.addChild(this.outline)}this.board=new Ge(t,i.get(o.topLeft),i.get(o.topCenter),i.get(o.topRight),i.get(o.middleLeft),i.get(o.middleCenter),i.get(o.middleRight),i.get(o.bottomLeft),i.get(o.bottomCenter),i.get(o.bottomRight)),this.addChild(this.board)}get width(){var t;return((t=this.board)==null?void 0:t.width)??0}get height(){var t;return((t=this.board)==null?void 0:t.height)??0}addOverlay(t){this.overlayElements.push(t),this.addChild(t)}setSize(t){this.board&&this.removeChild(this.board),this.outline&&this.removeChild(this.outline),this.createBoard(t),this.paper&&this.paper instanceof Jt&&this.paper.setSize(t);for(let r of this.overlayElements)this.removeChild(r),this.addChild(r)}};var Ji=class extends Bn{constructor(t,r){super(t);this._size=r;let o=W.get("assets")["Pirate Ship"].tilemaps.Platforms;this.gfx=new mt(this.width,o.get(51),o.get(52),o.get(50)),this.gfx.position=new g(0,-2),this.addChild(this.gfx)}get width(){var t;return((t=this._size)==null?void 0:t.width)||0}get height(){var t;return((t=this._size)==null?void 0:t.height)||0}};var Ql=class extends re{constructor(t){super();this.value=t}},ap=class extends re{constructor(){super()}},lp=class extends re{constructor(){super()}},hw="rgba(0, 0, 0, 0.3)",Yk="rgba(100, 150, 255, 0.6)",Xi=class extends ${constructor(t,r={}){super(t);this._isFocused=!1;let i=W.get("deviceInfo"),o=new g(1,1);i!=null&&i.isMobile&&(o=new g(1.2,1.4));let{width:s=150,placeholder:a="",type:c="text",maxLength:l,name:u,autocomplete:d}=r;this._width=s,this._height=48*o.y;let f=1,p=1;this.background=new Jt(new g(0,0),this.size),this.outline=new Jt(new g(-f,-p),this.size.add(new g(f*2,p*2))),this.outline.position=new g(-f,-p),this.outline.fillColor=hw,this.addChild(this.outline),this.addChild(this.background),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("data-interactive","true"),this.attachedDOM=this.inputElement,this.setupInputElement(a,c,l,u,d,o)}setupInputElement(t,r,i,o,s,a=new g(1,1)){let c=this.inputElement;c.type=r,c.placeholder=t,i&&(c.maxLength=i),o&&(c.name=o),s&&(c.autocomplete=s),c.style.position="absolute",c.style.left="0",c.style.top="0",c.style.width=`${this._width}px`,c.style.height=`${this._height}px`,c.style.border="none",c.style.outline="none",c.style.background="transparent",c.style.fontFamily="monospace",c.style.fontSize=`${8*a.y}px`,c.style.lineHeight=`${this._height}px`,c.style.color="#2d2d2d",c.style.paddingLeft=`${24*a.x}px`,c.style.paddingRight=`${24*a.y}px`,c.style.paddingTop="0",c.style.paddingBottom="0",c.style.margin="0",c.style.boxSizing="border-box",c.style.zIndex="1000",c.style.pointerEvents="auto",c.style.setProperty("::placeholder","color: #888888"),c.style.appearance="none",c.style.webkitAppearance="none",this.injectAutofillStyles(),c.addEventListener("focus",this.handleFocus.bind(this)),c.addEventListener("blur",this.handleBlur.bind(this)),c.addEventListener("input",this.handleInput.bind(this))}injectAutofillStyles(){let t="input-autofill-override";if(!document.getElementById(t)){let r=document.createElement("style");r.id=t,r.textContent=`
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
          -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
          box-shadow: 0 0 0 1000px transparent inset !important;
          -webkit-text-fill-color: #2d2d2d !important;
          transition: background-color 5000s ease-in-out 0s;
        }
      `,document.head.appendChild(r)}}handleFocus(){this._isFocused=!0,this.updateVisualState(),this.handleEvent(new ap)}handleBlur(){this._isFocused=!1,this.updateVisualState(),this.handleEvent(new lp)}handleInput(){this.handleEvent(new Ql(this.inputElement.value))}updateVisualState(){this._isFocused?this.outline.fillColor=Yk:this.outline.fillColor=hw}get value(){return this.inputElement.value}set value(t){this.inputElement.value=t}focus(){setTimeout(()=>{this.inputElement.focus()},100)}blur(){this.inputElement.blur()}get isFocused(){return this._isFocused}clear(){this.inputElement.value="",this.handleEvent(new Ql(""))}getInputElement(){return this.inputElement}get width(){return this._width}get height(){return this._height}};var Jl=class extends ${constructor(t,r,i){super(t);this._width=r;this._height=i}get width(){return this._width}get height(){return this._height}},zn=class extends ${constructor(t,r){super(t);this.inputElements=new Map;this.secondaryButtons=[];this.formElement=document.createElement("form"),this.formElement.setAttribute("data-interactive","true"),this.formElement.setAttribute("data-no-auto-position","true"),this.formElement.style.position="absolute",this.formElement.style.left="0",this.formElement.style.top="0",this.attachedDOM=this.formElement,this.formElement.addEventListener("submit",a=>{a.preventDefault();let c={};for(let[l,u]of this.inputElements)c[l]=u.value;r.mainAction.onAction(c)});let i;if(r.backAction){let a=new ge;a.setTextFromCodes([53]),i=new je(new g(0,0),a,"secondary"),i.action=r.backAction}this.formLayout=new Lr(new g(0,0)),this.formLayout.flexDirection="column",this.formLayout.alignItems="center",this.formLayout.gap=0;let o=new ge(r.title,0,"hero");this.formLayout.addChild(o);for(let a of r.inputs){let c=new Xi(new g(0,0),{width:a.width||200,placeholder:a.placeholder,type:a.type||"text",name:a.name,autocomplete:a.autocomplete});a.autofocus&&(this.autofocusInput=c),this.inputElements.set(a.key,c),this.formLayout.addChild(c),this.formElement.appendChild(c.getInputElement())}this.errorPlaceholder=new ot(new g(0,0),{},{}),this.formLayout.addChild(this.errorPlaceholder);let s=new ge(r.mainAction.label);if(this.mainButton=new je(new g(0,0),s,"primary"),this.mainButton.action=()=>{let a={};for(let[c,l]of this.inputElements)a[c]=l.value;r.mainAction.onAction(a)},this.formLayout.addChild(this.mainButton),this.mainButton.setButtonType("submit"),this.formElement.appendChild(this.mainButton.getButtonElement()),r.secondaryActions&&r.secondaryActions.length>0){let a=0,c=0;for(let h of r.secondaryActions){let w=new ge(h.label),b=new je(new g(0,0),w,"text");b.action=h.onAction,this.secondaryButtons.push(b),a+=b.width,c=Math.max(c,b.height)}let l=8;a+=l*(this.secondaryButtons.length-1);let u=new me(new g(0,0),new g(a,c));u.flexDirection="row",u.alignItems="center",u.justifyContent="center",u.gap=l;for(let h of this.secondaryButtons)u.addChild(h);let d=8,f=8,p=new Jl(new g(0,0),a,c+d+f);u.position=new g(0,d),p.addChild(u),this.formLayout.addChild(p)}this.formBox=new ot(new g(0,0),{},{top:16,right:16,bottom:16,left:16},0),this.formBox.setContent(this.formLayout),this.board=new Xt(new g(0,0),new g(this.formBox.width,this.formBox.height),"primary",!1,"none"),i&&this.board.addOverlay(i),this.addChild(this.board),this.addChild(this.formBox)}getInput(t){return this.inputElements.get(t)}getInputValue(t){let r=this.getInput(t);return(r==null?void 0:r.value)||""}setInputValue(t,r){let i=this.getInput(t);if(!i)throw new Error(`Unknown input "${t}"`);i.value=r}clearInputs(){for(let t of this.inputElements.values())t.clear()}showError(t){let r=this.getErrorElement(t);this.errorPlaceholder.setContent(r),this.board.setSize(new g(this.formBox.width,this.formBox.height))}hideError(){this.errorPlaceholder.content&&(this.errorPlaceholder.removeChild(this.errorPlaceholder.content),this.errorPlaceholder.content=void 0),this.board.setSize(new g(this.formBox.width,this.formBox.height))}triggerAutofocus(){this.autofocusInput&&this.autofocusInput.focus()}setButtonsEnabled(t){this.mainButton.setDisabled(!t);for(let r of this.secondaryButtons)r.setDisabled(!t)}get width(){return this.formBox.width}get height(){return this.formBox.height}getErrorElement(t){var u,d;let i=W.get("assets")["Wood and Paper UI"].tilemaps["Wood and Paper"],o=new ge(t);o.fillColor="#000000";let s=((u=i.get(211))==null?void 0:u.width)??0,a=((d=i.get(213))==null?void 0:d.width)??0,c=new mt(o.width+s+a,i.get(211),i.get(212),i.get(213));o.position=new g(s,15);let l=new Jl(new g(0,0),c.width,c.height);return l.addChild(c),l.addChild(o),l}};var eo=class extends Qe{constructor(t,r){super();this.loadingAssetPath=t;this.charsAssetInfo=r}async run(){let t=new Nr;await t.init({Loading:{path:this.loadingAssetPath}},{Chars:this.charsAssetInfo}),W.set("chars",t.chars);let r=new He(t.assets.Loading.animations["Big Map"]);r.animationSpeed=.5,this.progressText=new ge("",2),this.progressText.fillColor="#ffffff",this.progressText.setText("0%"),this.contentLayout=new me(new g(0,0),new g(r.width,r.height+50)),this.contentLayout.flexDirection="column",this.contentLayout.justifyContent="center",this.contentLayout.alignItems="center",this.contentLayout.gap=0,this.contentLayout.addChild(r),this.contentLayout.addChild(this.progressText);let i=new me(new g(0,0),W.get("viewport"));i.justifyContent="center",i.alignItems="center",i.addChild(this.contentLayout),this.addChild(i)}async loadAssets(t,r){let i=new Nr;await i.init(t,r,o=>{this.updateProgress(o.percentage)}),W.set("assets",i.assets),W.set("chars",i.chars)}updateProgress(t){if(this.progressText){let r=Math.floor(t).toString()+"%";this.progressText.setText(r),this.contentLayout&&this.contentLayout.layout()}}};var Zn=class extends ${constructor(e,t,r){super(e),this.overlayDiv=document.createElement("div"),this.overlayDiv.setAttribute("data-mask","true"),this.overlayDiv.style.position="absolute",this.overlayDiv.style.pointerEvents="none",this.overlayDiv.style.visibility="hidden",this.attachedDOM=this.overlayDiv;let i;if(r){let w=new ge;w.setTextFromCodes([53]),i=new je(new g(0,0),w,"secondary"),i.action=r}let o=[],s=0,a=0,c=8;for(let w of t){let b;if(w.type==="button"){let E=new ge(w.label,2),v=new je(new g(0,0),E,w.variant);v.action=w.action,b=v,w.autofocus&&(this.autofocusButton=v)}else w.type==="text"?b=new ge(w.text,0):b=w.element;o.push(b),s=Math.max(s,b.width),a+=b.height}a+=c*(o.length-1);let l=new ge("Markup Mischief",1,"hero"),u=new ot(new g(0,0),{top:20},{});u.setContent(l),this.menuLayout=new me(new g(0,0),new g(s,a)),this.menuLayout.flexDirection="column",this.menuLayout.justifyContent="center",this.menuLayout.alignItems="center",this.menuLayout.gap=c;for(let w of o)this.menuLayout.addChild(w);let d=new ot(new g(0,0),{},{top:0,bottom:20});d.setContent(this.menuLayout);let f=new me(new g(0,0),new g(Math.max(u.width,d.width),u.height+d.height));f.flexDirection="column",f.alignItems="center",f.addChild(u),f.addChild(d);let p=new ot(new g(0,0),{},{top:20,right:20,bottom:20,left:20});p.setContent(f);let h=new g(p.width,p.height);this.board=new Xt(new g(0,0),h,"primary",!0),i&&this.board.addChild(i),this.board.addChild(p),this.addChild(this.board),this.overlayDiv.style.width=`${this.board.width}px`,this.overlayDiv.style.height=`${this.board.height}px`}triggerAutofocus(){this.autofocusButton&&this.autofocusButton.focus()}get width(){return this.board.width}get height(){return this.board.height}};var Ur=class extends Qe{constructor(e,t){super();let r=W.get("viewport");this.menu=new Zn(new g(0,0),e,t);let i=new me(new g(0,0),r);i.justifyContent="center",i.alignItems="center",i.addChild(this.menu),this.addChild(i),this.on(Fe,()=>{this.menu.triggerAutofocus()})}};function cp(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Qk(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}var Ce=(()=>{class n{constructor(t,r,i){this.method=t,this.attribute=r,i!==void 0&&(Array.isArray(i)?this.values=i:this.values=[i])}toString(){return JSON.stringify({method:this.method,attribute:this.attribute,values:this.values})}}return n.equal=(e,t)=>new n("equal",e,t).toString(),n.notEqual=(e,t)=>new n("notEqual",e,t).toString(),n.lessThan=(e,t)=>new n("lessThan",e,t).toString(),n.lessThanEqual=(e,t)=>new n("lessThanEqual",e,t).toString(),n.greaterThan=(e,t)=>new n("greaterThan",e,t).toString(),n.greaterThanEqual=(e,t)=>new n("greaterThanEqual",e,t).toString(),n.isNull=e=>new n("isNull",e).toString(),n.isNotNull=e=>new n("isNotNull",e).toString(),n.between=(e,t,r)=>new n("between",e,[t,r]).toString(),n.startsWith=(e,t)=>new n("startsWith",e,t).toString(),n.endsWith=(e,t)=>new n("endsWith",e,t).toString(),n.select=e=>new n("select",void 0,e).toString(),n.search=(e,t)=>new n("search",e,t).toString(),n.orderDesc=e=>new n("orderDesc",e).toString(),n.orderAsc=e=>new n("orderAsc",e).toString(),n.orderRandom=()=>new n("orderRandom").toString(),n.cursorAfter=e=>new n("cursorAfter",void 0,e).toString(),n.cursorBefore=e=>new n("cursorBefore",void 0,e).toString(),n.limit=e=>new n("limit",void 0,e).toString(),n.offset=e=>new n("offset",void 0,e).toString(),n.contains=(e,t)=>new n("contains",e,t).toString(),n.notContains=(e,t)=>new n("notContains",e,t).toString(),n.notSearch=(e,t)=>new n("notSearch",e,t).toString(),n.notBetween=(e,t,r)=>new n("notBetween",e,[t,r]).toString(),n.notStartsWith=(e,t)=>new n("notStartsWith",e,t).toString(),n.notEndsWith=(e,t)=>new n("notEndsWith",e,t).toString(),n.createdBefore=e=>n.lessThan("$createdAt",e),n.createdAfter=e=>n.greaterThan("$createdAt",e),n.createdBetween=(e,t)=>n.between("$createdAt",e,t),n.updatedBefore=e=>n.lessThan("$updatedAt",e),n.updatedAfter=e=>n.greaterThan("$updatedAt",e),n.updatedBetween=(e,t)=>n.between("$updatedAt",e,t),n.or=e=>new n("or",void 0,e.map(t=>JSON.parse(t))).toString(),n.and=e=>new n("and",void 0,e.map(t=>JSON.parse(t))).toString(),n.distanceEqual=(e,t,r,i=!0)=>new n("distanceEqual",e,[[t,r,i]]).toString(),n.distanceNotEqual=(e,t,r,i=!0)=>new n("distanceNotEqual",e,[[t,r,i]]).toString(),n.distanceGreaterThan=(e,t,r,i=!0)=>new n("distanceGreaterThan",e,[[t,r,i]]).toString(),n.distanceLessThan=(e,t,r,i=!0)=>new n("distanceLessThan",e,[[t,r,i]]).toString(),n.intersects=(e,t)=>new n("intersects",e,[t]).toString(),n.notIntersects=(e,t)=>new n("notIntersects",e,[t]).toString(),n.crosses=(e,t)=>new n("crosses",e,[t]).toString(),n.notCrosses=(e,t)=>new n("notCrosses",e,[t]).toString(),n.overlaps=(e,t)=>new n("overlaps",e,[t]).toString(),n.notOverlaps=(e,t)=>new n("notOverlaps",e,[t]).toString(),n.touches=(e,t)=>new n("touches",e,[t]).toString(),n.notTouches=(e,t)=>new n("notTouches",e,[t]).toString(),n})(),P=class extends Error{constructor(e,t=0,r="",i=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=r,this.response=i}},gw=(()=>{class n{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:"",devkey:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"21.5.0","X-Appwrite-Response-Format":"1.8.0"},this.realtime={socket:void 0,timeout:void 0,heartbeat:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window==null?void 0:window.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createHeartbeat:()=>{this.realtime.heartbeat&&clearTimeout(this.realtime.heartbeat),this.realtime.heartbeat=window==null?void 0:window.setInterval(()=>{var t;(t=this.realtime.socket)===null||t===void 0||t.send(JSON.stringify({type:"ping"}))},2e4)},createSocket:()=>{var t,r,i;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(t=this.realtime.socket)===null||t===void 0||t.close();return}let o=new URLSearchParams;this.config.project&&o.set("project",this.config.project),this.realtime.channels.forEach(a=>{o.append("channels[]",a)});let s=this.config.endpointRealtime+"/realtime?"+o.toString();(s!==this.realtime.url||!this.realtime.socket||((r=this.realtime.socket)===null||r===void 0?void 0:r.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((i=this.realtime.socket)===null||i===void 0?void 0:i.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=s,this.realtime.socket=new WebSocket(s),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",a=>{this.realtime.reconnectAttempts=0,this.realtime.createHeartbeat()}),this.realtime.socket.addEventListener("close",a=>{var c,l,u;if(!this.realtime.reconnect||((l=(c=this.realtime)===null||c===void 0?void 0:c.lastMessage)===null||l===void 0?void 0:l.type)==="error"&&((u=this.realtime)===null||u===void 0?void 0:u.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}let d=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${d/1e3} seconds.`,a.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},d)}))},onMessage:t=>{var r,i;try{let o=JSON.parse(t.data);switch(this.realtime.lastMessage=o,o.type){case"connected":let s=this.config.session;if(!s){let l=JSON.parse((r=window.localStorage.getItem("cookieFallback"))!==null&&r!==void 0?r:"{}");s=l==null?void 0:l[`a_session_${this.config.project}`]}let a=o.data;s&&!a.user&&((i=this.realtime.socket)===null||i===void 0||i.send(JSON.stringify({type:"authentication",data:{session:s}})));break;case"event":let c=o.data;if(c!=null&&c.channels){if(!c.channels.some(u=>this.realtime.channels.has(u)))return;this.realtime.subscriptions.forEach(u=>{c.channels.some(d=>u.channels.includes(d))&&setTimeout(()=>u.callback(c))})}break;case"pong":break;case"error":throw o.data;default:break}}catch(o){console.error(o)}},cleanUp:t=>{this.realtime.channels.forEach(r=>{t.includes(r)&&(Array.from(this.realtime.subscriptions).some(([o,s])=>s.channels.includes(r))||this.realtime.channels.delete(r))})}}}setEndpoint(t){if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new P("Invalid endpoint URL: "+t);return this.config.endpoint=t,this.config.endpointRealtime=t.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(t){if(!t.startsWith("ws://")&&!t.startsWith("wss://"))throw new P("Invalid realtime endpoint URL: "+t);return this.config.endpointRealtime=t,this}setProject(t){return this.headers["X-Appwrite-Project"]=t,this.config.project=t,this}setJWT(t){return this.headers["X-Appwrite-JWT"]=t,this.config.jwt=t,this}setLocale(t){return this.headers["X-Appwrite-Locale"]=t,this.config.locale=t,this}setSession(t){return this.headers["X-Appwrite-Session"]=t,this.config.session=t,this}setDevKey(t){return this.headers["X-Appwrite-Dev-Key"]=t,this.config.devkey=t,this}subscribe(t,r){let i=typeof t=="string"?[t]:t;i.forEach(s=>this.realtime.channels.add(s));let o=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(o,{channels:i,callback:r}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(o),this.realtime.cleanUp(i),this.realtime.connect()}}prepareRequest(t,r,i={},o={}){if(t=t.toUpperCase(),i=Object.assign({},this.headers,i),typeof window<"u"&&window.localStorage){let a=window.localStorage.getItem("cookieFallback");a&&(i["X-Fallback-Cookies"]=a)}let s={method:t,headers:i};if(i["X-Appwrite-Dev-Key"]===void 0&&(s.credentials="include"),t==="GET")for(let[a,c]of Object.entries(n.flatten(o)))r.searchParams.append(a,c);else switch(i["content-type"]){case"application/json":s.body=JSON.stringify(o);break;case"multipart/form-data":let a=new FormData;for(let[c,l]of Object.entries(o))if(l instanceof File)a.append(c,l,l.name);else if(Array.isArray(l))for(let u of l)a.append(`${c}[]`,u);else a.append(c,l);s.body=a,delete i["content-type"];break}return{uri:r.toString(),options:s}}chunkedUpload(t,r,i={},o={},s){var a;return cp(this,void 0,void 0,function*(){let[c,l]=(a=Object.entries(o).find(([f,p])=>p instanceof File))!==null&&a!==void 0?a:[];if(!l||!c)throw new Error("File not found in payload");if(l.size<=n.CHUNK_SIZE)return yield this.call(t,r,i,o);let u=0,d=null;for(;u<l.size;){let f=u+n.CHUNK_SIZE;f>=l.size&&(f=l.size),i["content-range"]=`bytes ${u}-${f-1}/${l.size}`;let p=l.slice(u,f),h=Object.assign({},o);h[c]=new File([p],l.name),d=yield this.call(t,r,i,h),s&&typeof s=="function"&&s({$id:d.$id,progress:Math.round(f/l.size*100),sizeUploaded:f,chunksTotal:Math.ceil(l.size/n.CHUNK_SIZE),chunksUploaded:Math.ceil(f/n.CHUNK_SIZE)}),d&&d.$id&&(i["x-appwrite-id"]=d.$id),u=f}return d})}ping(){return cp(this,void 0,void 0,function*(){return this.call("GET",new URL(this.config.endpoint+"/ping"))})}call(t,r,i={},o={},s="json"){var a,c;return cp(this,void 0,void 0,function*(){let{uri:l,options:u}=this.prepareRequest(t,r,i,o),d=null,f=yield fetch(l,u);if(f.type==="opaque")throw new P(`Invalid Origin. Register your new client (${window.location.host}) as a new Web platform on your project console dashboard`,403,"forbidden","");let p=f.headers.get("x-appwrite-warning");if(p&&p.split(";").forEach(w=>console.warn("Warning: "+w)),!((a=f.headers.get("content-type"))===null||a===void 0)&&a.includes("application/json")?d=yield f.json():s==="arrayBuffer"?d=yield f.arrayBuffer():d={message:yield f.text()},400<=f.status){let w="";throw!((c=f.headers.get("content-type"))===null||c===void 0)&&c.includes("application/json")||s==="arrayBuffer"?w=JSON.stringify(d):w=d==null?void 0:d.message,new P(d==null?void 0:d.message,f.status,d==null?void 0:d.type,w)}let h=f.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&h&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",h)),d})}static flatten(t,r=""){let i={};for(let[o,s]of Object.entries(t)){let a=r?r+"["+o+"]":o;Array.isArray(s)?i=Object.assign(Object.assign({},i),n.flatten(s,a)):i[a]=s}return i}}return n.CHUNK_SIZE=1024*1024*5,n})(),mw=(()=>{class n{constructor(t){this.client=t}static flatten(t,r=""){let i={};for(let[o,s]of Object.entries(t)){let a=r?r+"["+o+"]":o;Array.isArray(s)?i=Object.assign(Object.assign({},i),n.flatten(s,a)):i[a]=s}return i}}return n.CHUNK_SIZE=5*1024*1024,n})(),Xl=class{constructor(e){this.client=e}get(){let e="/account",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}create(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],password:t[1],name:t[2]};let i=r.userId,o=r.email,s=r.password,a=r.name;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "email"');if(typeof s>"u")throw new P('Missing required parameter: "password"');let c="/account",l={};typeof i<"u"&&(l.userId=i),typeof o<"u"&&(l.email=o),typeof s<"u"&&(l.password=s),typeof a<"u"&&(l.name=a);let u=new URL(this.client.config.endpoint+c),d={"content-type":"application/json"};return this.client.call("post",u,d,l)}updateEmail(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,password:t[0]};let i=r.email,o=r.password;if(typeof i>"u")throw new P('Missing required parameter: "email"');if(typeof o>"u")throw new P('Missing required parameter: "password"');let s="/account/email",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.password=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("patch",c,l,a)}listIdentities(e,...t){let r;!e||e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={queries:e,total:t[0]};let i=r.queries,o=r.total,s="/account/identities",a={};typeof i<"u"&&(a.queries=i),typeof o<"u"&&(a.total=o);let c=new URL(this.client.config.endpoint+s),l={};return this.client.call("get",c,l,a)}deleteIdentity(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={identityId:e};let r=t.identityId;if(typeof r>"u")throw new P('Missing required parameter: "identityId"');let i="/account/identities/{identityId}".replace("{identityId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createJWT(){let e="/account/jwts",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}listLogs(e,...t){let r;!e||e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={queries:e,total:t[0]};let i=r.queries,o=r.total,s="/account/logs",a={};typeof i<"u"&&(a.queries=i),typeof o<"u"&&(a.total=o);let c=new URL(this.client.config.endpoint+s),l={};return this.client.call("get",c,l,a)}updateMFA(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={mfa:e};let r=t.mfa;if(typeof r>"u")throw new P('Missing required parameter: "mfa"');let i="/account/mfa",o={};typeof r<"u"&&(o.mfa=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}createMfaAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new P('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createMFAAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new P('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateMfaAuthenticator(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?r=e||{}:r={type:e,otp:t[0]};let i=r.type,o=r.otp;if(typeof i>"u")throw new P('Missing required parameter: "type"');if(typeof o>"u")throw new P('Missing required parameter: "otp"');let s="/account/mfa/authenticators/{type}".replace("{type}",i),a={};typeof o<"u"&&(a.otp=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}updateMFAAuthenticator(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?r=e||{}:r={type:e,otp:t[0]};let i=r.type,o=r.otp;if(typeof i>"u")throw new P('Missing required parameter: "type"');if(typeof o>"u")throw new P('Missing required parameter: "otp"');let s="/account/mfa/authenticators/{type}".replace("{type}",i),a={};typeof o<"u"&&(a.otp=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}deleteMfaAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new P('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}deleteMFAAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new P('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createMfaChallenge(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?t=e||{}:t={factor:e};let r=t.factor;if(typeof r>"u")throw new P('Missing required parameter: "factor"');let i="/account/mfa/challenges",o={};typeof r<"u"&&(o.factor=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createMFAChallenge(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?t=e||{}:t={factor:e};let r=t.factor;if(typeof r>"u")throw new P('Missing required parameter: "factor"');let i="/account/mfa/challenges",o={};typeof r<"u"&&(o.factor=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateMfaChallenge(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={challengeId:e,otp:t[0]};let i=r.challengeId,o=r.otp;if(typeof i>"u")throw new P('Missing required parameter: "challengeId"');if(typeof o>"u")throw new P('Missing required parameter: "otp"');let s="/account/mfa/challenges",a={};typeof i<"u"&&(a.challengeId=i),typeof o<"u"&&(a.otp=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}updateMFAChallenge(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={challengeId:e,otp:t[0]};let i=r.challengeId,o=r.otp;if(typeof i>"u")throw new P('Missing required parameter: "challengeId"');if(typeof o>"u")throw new P('Missing required parameter: "otp"');let s="/account/mfa/challenges",a={};typeof i<"u"&&(a.challengeId=i),typeof o<"u"&&(a.otp=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}listMfaFactors(){let e="/account/mfa/factors",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}listMFAFactors(){let e="/account/mfa/factors",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}getMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}getMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}createMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}createMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updateMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}updateMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}updateName(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={name:e};let r=t.name;if(typeof r>"u")throw new P('Missing required parameter: "name"');let i="/account/name",o={};typeof r<"u"&&(o.name=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}updatePassword(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={password:e,oldPassword:t[0]};let i=r.password,o=r.oldPassword;if(typeof i>"u")throw new P('Missing required parameter: "password"');let s="/account/password",a={};typeof i<"u"&&(a.password=i),typeof o<"u"&&(a.oldPassword=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("patch",c,l,a)}updatePhone(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={phone:e,password:t[0]};let i=r.phone,o=r.password;if(typeof i>"u")throw new P('Missing required parameter: "phone"');if(typeof o>"u")throw new P('Missing required parameter: "password"');let s="/account/phone",a={};typeof i<"u"&&(a.phone=i),typeof o<"u"&&(a.password=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("patch",c,l,a)}getPrefs(){let e="/account/prefs",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}updatePrefs(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"prefs"in e?t=e||{}:t={prefs:e};let r=t.prefs;if(typeof r>"u")throw new P('Missing required parameter: "prefs"');let i="/account/prefs",o={};typeof r<"u"&&(o.prefs=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}createRecovery(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,url:t[0]};let i=r.email,o=r.url;if(typeof i>"u")throw new P('Missing required parameter: "email"');if(typeof o>"u")throw new P('Missing required parameter: "url"');let s="/account/recovery",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.url=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("post",c,l,a)}updateRecovery(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0],password:t[1]};let i=r.userId,o=r.secret,s=r.password;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');if(typeof s>"u")throw new P('Missing required parameter: "password"');let a="/account/recovery",c={};typeof i<"u"&&(c.userId=i),typeof o<"u"&&(c.secret=o),typeof s<"u"&&(c.password=s);let l=new URL(this.client.config.endpoint+a),u={"content-type":"application/json"};return this.client.call("put",l,u,c)}listSessions(){let e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}deleteSessions(){let e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("delete",r,i,t)}createAnonymousSession(){let e="/account/sessions/anonymous",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}createEmailPasswordSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,password:t[0]};let i=r.email,o=r.password;if(typeof i>"u")throw new P('Missing required parameter: "email"');if(typeof o>"u")throw new P('Missing required parameter: "password"');let s="/account/sessions/email",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.password=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("post",c,l,a)}updateMagicURLSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/sessions/magic-url",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}createOAuth2Session(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?r=e||{}:r={provider:e,success:t[0],failure:t[1],scopes:t[2]};let i=r.provider,o=r.success,s=r.failure,a=r.scopes;if(typeof i>"u")throw new P('Missing required parameter: "provider"');let c="/account/sessions/oauth2/{provider}".replace("{provider}",i),l={};typeof o<"u"&&(l.success=o),typeof s<"u"&&(l.failure=s),typeof a<"u"&&(l.scopes=a);let u=new URL(this.client.config.endpoint+c);l.project=this.client.config.project;for(let[d,f]of Object.entries(mw.flatten(l)))u.searchParams.append(d,f);if(typeof window<"u"&&(window!=null&&window.location)){window.location.href=u.toString();return}else return u.toString()}updatePhoneSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/sessions/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}createSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/sessions/token",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("post",c,l,a)}getSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new P('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}updateSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new P('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}deleteSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new P('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}updateStatus(){let e="/account/status",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}createPushTarget(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={targetId:e,identifier:t[0],providerId:t[1]};let i=r.targetId,o=r.identifier,s=r.providerId;if(typeof i>"u")throw new P('Missing required parameter: "targetId"');if(typeof o>"u")throw new P('Missing required parameter: "identifier"');let a="/account/targets/push",c={};typeof i<"u"&&(c.targetId=i),typeof o<"u"&&(c.identifier=o),typeof s<"u"&&(c.providerId=s);let l=new URL(this.client.config.endpoint+a),u={"content-type":"application/json"};return this.client.call("post",l,u,c)}updatePushTarget(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={targetId:e,identifier:t[0]};let i=r.targetId,o=r.identifier;if(typeof i>"u")throw new P('Missing required parameter: "targetId"');if(typeof o>"u")throw new P('Missing required parameter: "identifier"');let s="/account/targets/{targetId}/push".replace("{targetId}",i),a={};typeof o<"u"&&(a.identifier=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}deletePushTarget(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={targetId:e};let r=t.targetId;if(typeof r>"u")throw new P('Missing required parameter: "targetId"');let i="/account/targets/{targetId}/push".replace("{targetId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createEmailToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],phrase:t[1]};let i=r.userId,o=r.email,s=r.phrase;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "email"');let a="/account/tokens/email",c={};typeof i<"u"&&(c.userId=i),typeof o<"u"&&(c.email=o),typeof s<"u"&&(c.phrase=s);let l=new URL(this.client.config.endpoint+a),u={"content-type":"application/json"};return this.client.call("post",l,u,c)}createMagicURLToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],url:t[1],phrase:t[2]};let i=r.userId,o=r.email,s=r.url,a=r.phrase;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "email"');let c="/account/tokens/magic-url",l={};typeof i<"u"&&(l.userId=i),typeof o<"u"&&(l.email=o),typeof s<"u"&&(l.url=s),typeof a<"u"&&(l.phrase=a);let u=new URL(this.client.config.endpoint+c),d={"content-type":"application/json"};return this.client.call("post",u,d,l)}createOAuth2Token(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?r=e||{}:r={provider:e,success:t[0],failure:t[1],scopes:t[2]};let i=r.provider,o=r.success,s=r.failure,a=r.scopes;if(typeof i>"u")throw new P('Missing required parameter: "provider"');let c="/account/tokens/oauth2/{provider}".replace("{provider}",i),l={};typeof o<"u"&&(l.success=o),typeof s<"u"&&(l.failure=s),typeof a<"u"&&(l.scopes=a);let u=new URL(this.client.config.endpoint+c);l.project=this.client.config.project;for(let[d,f]of Object.entries(mw.flatten(l)))u.searchParams.append(d,f);if(typeof window<"u"&&(window!=null&&window.location)){window.location.href=u.toString();return}else return u.toString()}createPhoneToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,phone:t[0]};let i=r.userId,o=r.phone;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "phone"');let s="/account/tokens/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.phone=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("post",c,l,a)}createEmailVerification(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={url:e};let r=t.url;if(typeof r>"u")throw new P('Missing required parameter: "url"');let i="/account/verifications/email",o={};typeof r<"u"&&(o.url=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createVerification(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={url:e};let r=t.url;if(typeof r>"u")throw new P('Missing required parameter: "url"');let i="/account/verifications/email",o={};typeof r<"u"&&(o.url=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateEmailVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/verifications/email",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}updateVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/verifications/email",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}createPhoneVerification(){let e="/account/verifications/phone",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updatePhoneVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new P('Missing required parameter: "userId"');if(typeof o>"u")throw new P('Missing required parameter: "secret"');let s="/account/verifications/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("put",c,l,a)}};var ec=class{constructor(e){this.client=e}listTransactions(e){let t;!e||e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={queries:e};let r=t.queries,i="/databases/transactions",o={};typeof r<"u"&&(o.queries=r);let s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}createTransaction(e){let t;!e||e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={ttl:e};let r=t.ttl,i="/databases/transactions",o={};typeof r<"u"&&(o.ttl=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}getTransaction(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={transactionId:e};let r=t.transactionId;if(typeof r>"u")throw new P('Missing required parameter: "transactionId"');let i="/databases/transactions/{transactionId}".replace("{transactionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}updateTransaction(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={transactionId:e,commit:t[0],rollback:t[1]};let i=r.transactionId,o=r.commit,s=r.rollback;if(typeof i>"u")throw new P('Missing required parameter: "transactionId"');let a="/databases/transactions/{transactionId}".replace("{transactionId}",i),c={};typeof o<"u"&&(c.commit=o),typeof s<"u"&&(c.rollback=s);let l=new URL(this.client.config.endpoint+a),u={"content-type":"application/json"};return this.client.call("patch",l,u,c)}deleteTransaction(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={transactionId:e};let r=t.transactionId;if(typeof r>"u")throw new P('Missing required parameter: "transactionId"');let i="/databases/transactions/{transactionId}".replace("{transactionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createOperations(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={transactionId:e,operations:t[0]};let i=r.transactionId,o=r.operations;if(typeof i>"u")throw new P('Missing required parameter: "transactionId"');let s="/databases/transactions/{transactionId}/operations".replace("{transactionId}",i),a={};typeof o<"u"&&(a.operations=o);let c=new URL(this.client.config.endpoint+s),l={"content-type":"application/json"};return this.client.call("post",c,l,a)}listDocuments(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],queries:t[1],transactionId:t[2],total:t[3]};let i=r.databaseId,o=r.collectionId,s=r.queries,a=r.transactionId,c=r.total;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');let l="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",i).replace("{collectionId}",o),u={};typeof s<"u"&&(u.queries=s),typeof a<"u"&&(u.transactionId=a),typeof c<"u"&&(u.total=c);let d=new URL(this.client.config.endpoint+l),f={};return this.client.call("get",d,f,u)}createDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,c=r.permissions,l=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');if(typeof a>"u")throw new P('Missing required parameter: "data"');let u="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",i).replace("{collectionId}",o),d={};typeof s<"u"&&(d.documentId=s),typeof a<"u"&&(d.data=a),typeof c<"u"&&(d.permissions=c),typeof l<"u"&&(d.transactionId=l);let f=new URL(this.client.config.endpoint+u),p={"content-type":"application/json"};return this.client.call("post",f,p,d)}getDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],queries:t[2],transactionId:t[3]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.queries,c=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');let l="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),u={};typeof a<"u"&&(u.queries=a),typeof c<"u"&&(u.transactionId=c);let d=new URL(this.client.config.endpoint+l),f={};return this.client.call("get",d,f,u)}upsertDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,c=r.permissions,l=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');if(typeof a>"u")throw new P('Missing required parameter: "data"');let u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),d={};typeof a<"u"&&(d.data=a),typeof c<"u"&&(d.permissions=c),typeof l<"u"&&(d.transactionId=l);let f=new URL(this.client.config.endpoint+u),p={"content-type":"application/json"};return this.client.call("put",f,p,d)}updateDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,c=r.permissions,l=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');let u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),d={};typeof a<"u"&&(d.data=a),typeof c<"u"&&(d.permissions=c),typeof l<"u"&&(d.transactionId=l);let f=new URL(this.client.config.endpoint+u),p={"content-type":"application/json"};return this.client.call("patch",f,p,d)}deleteDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],transactionId:t[2]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');let c="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),l={};typeof a<"u"&&(l.transactionId=a);let u=new URL(this.client.config.endpoint+c),d={"content-type":"application/json"};return this.client.call("delete",u,d,l)}decrementDocumentAttribute(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],attribute:t[2],value:t[3],min:t[4],transactionId:t[5]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.attribute,c=r.value,l=r.min,u=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');if(typeof a>"u")throw new P('Missing required parameter: "attribute"');let d="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/decrement".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s).replace("{attribute}",a),f={};typeof c<"u"&&(f.value=c),typeof l<"u"&&(f.min=l),typeof u<"u"&&(f.transactionId=u);let p=new URL(this.client.config.endpoint+d),h={"content-type":"application/json"};return this.client.call("patch",p,h,f)}incrementDocumentAttribute(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],attribute:t[2],value:t[3],max:t[4],transactionId:t[5]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.attribute,c=r.value,l=r.max,u=r.transactionId;if(typeof i>"u")throw new P('Missing required parameter: "databaseId"');if(typeof o>"u")throw new P('Missing required parameter: "collectionId"');if(typeof s>"u")throw new P('Missing required parameter: "documentId"');if(typeof a>"u")throw new P('Missing required parameter: "attribute"');let d="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/increment".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s).replace("{attribute}",a),f={};typeof c<"u"&&(f.value=c),typeof l<"u"&&(f.max=l),typeof u<"u"&&(f.transactionId=u);let p=new URL(this.client.config.endpoint+d),h={"content-type":"application/json"};return this.client.call("patch",p,h,f)}};var yw,vw,Vr=class n{static custom(e){return e}static unique(e=7){let t=Qk(n,yw,"m",vw).call(n),r="";for(let i=0;i<e;i++){let o=Math.floor(Math.random()*16).toString(16);r+=o}return t+r}};yw=Vr,vw=function(){let e=new Date,t=Math.floor(e.getTime()/1e3),r=e.getMilliseconds();return t.toString(16)+r.toString(16).padStart(5,"0")};var Kn={endpoint:"https://fra.cloud.appwrite.io/v1",projectId:"695e1e98002f12cc47e7",databaseId:"695e1f3c003a73300d66",collections:{levelProgression:"level_progression",settings:"settings"}},tc=class n{constructor(){this.client=new gw,this.client.setEndpoint(Kn.endpoint).setProject(Kn.projectId),this.accountService=new Xl(this.client),this.databasesService=new ec(this.client)}static getInstance(){return n.instance||(n.instance=new n),n.instance}get account(){return this.accountService}get databases(){return this.databasesService}get rawClient(){return this.client}};var Iw=()=>tc.getInstance().account,nc=()=>tc.getInstance().databases;var up=class n{constructor(){this.account=Iw()}static getInstance(){return n.instance||(n.instance=new n),n.instance}async register(e,t,r){try{await this.account.create({userId:Vr.unique(),email:e,password:t,name:r});let i=await this.login(e,t);return{success:!0,user:i.user,session:i.session}}catch(i){return console.error("Registration error:",i),{success:!1,error:this.parseError(i)}}}async login(e,t){try{let r=await this.account.createEmailPasswordSession({email:e,password:t});return{success:!0,user:await this.account.get(),session:r}}catch(r){return console.error("Login error:",r),{success:!1,error:this.parseError(r)}}}async logout(){try{return await this.account.deleteSession({sessionId:"current"}),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:this.parseError(e)}}}async checkSession(){try{let e=await this.account.get(),t=await this.account.getSession({sessionId:"current"});return{isAuthenticated:!0,user:e,session:t}}catch(e){return console.error(e),{isAuthenticated:!1}}}async getCurrentUser(){try{return await this.account.get()}catch(e){return console.error(e),null}}parseError(e){if(e instanceof P)switch(e.code){case 400:case 401:return"Invalid email or password";case 409:return"An account with this email already exists";case 429:return"Too many requests. Please try again later";default:return e.message||"An error occurred during authentication"}return e instanceof Error?e.message:"An unexpected error occurred"}},Gs=up.getInstance();var dp=class extends re{constructor(t,r){super();this.isAuthenticated=t;this.user=r}},fp=class n extends Ae{constructor(){super();this._isAuthenticated=!1;this._currentUser=null;this._isInitialized=!1}static getInstance(){return n.instance||(n.instance=new n),n.instance}async initialize(){if(this._isInitialized)return;let t=await Gs.checkSession();this.updateAuthState(t.isAuthenticated,t.user||null),this._isInitialized=!0}async login(t,r){let i=await Gs.login(t,r);return i.success&&i.user?(this.updateAuthState(!0,i.user),{success:!0}):{success:!1,error:i.error}}async register(t,r,i){let o=await Gs.register(t,r,i);return o.success&&o.user?(this.updateAuthState(!0,o.user),{success:!0}):{success:!1,error:o.error}}async logout(){await Gs.logout(),this.updateAuthState(!1,null)}get isAuthenticated(){return this._isAuthenticated}get currentUser(){return this._currentUser}get userEmail(){var t;return((t=this._currentUser)==null?void 0:t.email)||null}get isInitialized(){return this._isInitialized}updateAuthState(t,r){var o;let i=this._isAuthenticated!==t||((o=this._currentUser)==null?void 0:o.$id)!==(r==null?void 0:r.$id);this._isAuthenticated=t,this._currentUser=r,i&&this.handleEvent(new dp(t,r))}},ye=fp.getInstance();var pp=class n{constructor(){this.databases=nc();this.databaseId=Kn.databaseId;this.collectionId=Kn.collections.levelProgression}static getInstance(){return n.instance||(n.instance=new n),n.instance}async createLevelRecord(e){try{return await this.databases.createDocument({databaseId:this.databaseId,collectionId:this.collectionId,documentId:Vr.unique(),data:e})}catch(t){throw console.error("Failed to create level record:",t),t}}async getHighestLevelForMode(e,t){try{let r=await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.equal("userEmail",e),Ce.equal("mode",t),Ce.equal("isLatestRun",!0),Ce.orderDesc("level"),Ce.limit(1)]});return r.documents.length>0?r.documents[0].level:0}catch(r){return console.error("Failed to get highest level:",r),0}}async getLevelRecordsForMode(e,t){try{return(await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.equal("userEmail",e),Ce.equal("mode",t),Ce.equal("isLatestRun",!0),Ce.orderAsc("level")]})).documents}catch(r){return console.error("Failed to get level records:",r),[]}}async hasCompletedLevel(e,t,r){try{return(await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.equal("userEmail",e),Ce.equal("mode",t),Ce.equal("level",r),Ce.equal("isLatestRun",!0),Ce.limit(1)]})).documents.length>0}catch(i){return console.error("Failed to check level completion:",i),!1}}async markAllRecordsAsOld(e,t){try{let i=(await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.equal("userEmail",e),Ce.equal("mode",t),Ce.equal("isLatestRun",!0)]})).documents.map(o=>this.databases.updateDocument({databaseId:this.databaseId,collectionId:this.collectionId,documentId:o.$id,data:{isLatestRun:!1}}));await Promise.all(i)}catch(r){throw console.error("Failed to mark records as old:",r),r}}},Fr=pp.getInstance();var bw={REGISTRATION_ENABLED:"registrationEnabled",PLAY_ENABLED:"playEnabled"},hp=class n{constructor(){this.databases=nc();this.databaseId=Kn.databaseId;this.collectionId=Kn.collections.settings;this.cache=new Map;this.isInitialized=!1}static getInstance(){return n.instance||(n.instance=new n),n.instance}async initialize(){if(!this.isInitialized)try{let e=await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.limit(100)]});e.documents.forEach(t=>{this.cache.set(t.name,t.value)}),this.isInitialized=!0,console.log(`Settings loaded: ${e.documents.length} settings cached`)}catch(e){console.error("Failed to initialize settings:",e)}}async getSetting(e){return this.isInitialized||await this.initialize(),this.cache.has(e)&&this.cache.get(e)||null}async getBooleanSetting(e,t=!1){let r=await this.getSetting(e);if(r===null)return t;let i=r.toLowerCase().trim();return i==="true"||i==="1"||i==="yes"}async isRegistrationEnabled(){return await this.getBooleanSetting(bw.REGISTRATION_ENABLED,!1)||window.location.hostname==="localhost"}async isPlayEnabled(){return await this.getBooleanSetting(bw.PLAY_ENABLED,!1)||window.location.hostname==="localhost"}async refreshSetting(e){try{let t=await this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Ce.equal("name",e),Ce.limit(1)]});t.documents.length>0?this.cache.set(e,t.documents[0].value):this.cache.delete(e)}catch(t){console.error(`Failed to refresh setting ${e}:`,t)}}async refreshAll(){this.cache.clear(),this.isInitialized=!1,await this.initialize()}clearCache(){this.cache.clear(),this.isInitialized=!1}},zs=hp.getInstance();var Yn=class n{constructor(){this.currentMode="html";this.currentLevelStartTime=null;this.data={html:{currentLevel:1},css:{currentLevel:1}}}static getInstance(){return n.instance||(n.instance=new n),n.instance}async initialize(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot initialize progression: user not authenticated");return}try{let e=await Fr.getHighestLevelForMode(ye.userEmail,"html"),t=await Fr.getHighestLevelForMode(ye.userEmail,"css");this.data={html:{currentLevel:e+1},css:{currentLevel:t+1}}}catch(e){console.error("Failed to initialize progression data:",e)}}setMode(e){this.currentMode=e}getMode(){return this.currentMode}getCurrentLevel(){return this.data[this.currentMode].currentLevel}getCurrentLevelForMode(e){return this.data[e].currentLevel}hasSavedProgress(){return this.data[this.currentMode].currentLevel>1}hasSavedProgressForMode(e){return this.data[e].currentLevel>1}startLevel(){this.currentLevelStartTime=new Date}async advanceToNextLevel(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot advance level: user not authenticated");return}let e=this.data[this.currentMode].currentLevel,t=new Date,r=this.currentLevelStartTime||t;try{await Fr.createLevelRecord({mode:this.currentMode,level:e,startTime:r.toISOString(),finishTime:t.toISOString(),userEmail:ye.userEmail,isLatestRun:!0}),this.data[this.currentMode].currentLevel++,this.currentLevelStartTime=null}catch(i){console.error("Failed to advance level:",i)}}async resetProgress(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot reset progress: user not authenticated");return}try{await Fr.markAllRecordsAsOld(ye.userEmail,this.currentMode),this.data[this.currentMode]={currentLevel:1},this.currentLevelStartTime=null}catch(e){console.error("Failed to reset progress:",e)}}async resetProgressForMode(e){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot reset progress: user not authenticated");return}try{await Fr.markAllRecordsAsOld(ye.userEmail,e),this.data[e]={currentLevel:1},e===this.currentMode&&(this.currentLevelStartTime=null)}catch(t){console.error("Failed to reset progress:",t)}}setCurrentLevel(e){if(e<1)throw new Error("Level must be at least 1");this.data[this.currentMode].currentLevel=e}};var to=[{type:"PinkStar",name:"Pink Star",createInstance:n=>new kt(n,"PinkStar")},{type:"Crabby",name:"Crabby",createInstance:n=>new kt(n,"Crabby")},{type:"FierceTooth",name:"Fierce Tooth",createInstance:n=>new kt(n,"FierceTooth")}],en=class n{constructor(){this.selectedCharacterType="PinkStar";let e=localStorage.getItem("selectedCharacter");e&&this.isValidCharacterType(e)&&(this.selectedCharacterType=e)}static getInstance(){return n.instance||(n.instance=new n),n.instance}getSelectedCharacterType(){return this.selectedCharacterType}getSelectedCharacterDefinition(){return to.find(e=>e.type===this.selectedCharacterType)}setSelectedCharacterType(e){this.selectedCharacterType=e,localStorage.setItem("selectedCharacter",e)}createSelectedCharacter(e){return this.getSelectedCharacterDefinition().createInstance(e)}isValidCharacterType(e){return to.some(t=>t.type===e)}};var Qn={htmlLevels:[{id:1,name:"Link It Up",html:{tags:["<a>","text","</a>"]}},{id:2,name:"Emphasis Required",html:{tags:["<em>","text","</em>"]}},{id:3,name:"Strong Foundation",html:{tags:["<strong>","text","</strong>"]}},{id:4,name:"Emphatic Links",html:{tags:["<em>","<a>","text","</a>","</em>"]}},{id:5,name:"Bold Connections",html:{tags:["<strong>","<a>","text","</a>","</strong>"]}},{id:6,name:"Strongly Emphasized",html:{tags:["<strong>","<em>","text","</em>","</strong>"]}},{id:7,name:"Double Trouble",html:{tags:["<a>","text","</a>","<em>","text","</em>"]}},{id:8,name:"Bold & Linked",html:{tags:["<strong>","text","</strong>","<a>","text","</a>"]}},{id:9,name:"Nested Navigation",html:{tags:["<em>","text","<a>","text","</a>","</em>"]}},{id:10,name:"Emphasis Sandwich",html:{tags:["<em>","text","<strong>","text","</strong>","</em>"]}},{id:11,name:"Line Break Basics",html:{tags:["text","<br/>","text"]}},{id:12,name:"Triple Line Stack",html:{tags:["text","<br/>","text","<br/>","text"]}},{id:13,name:"Link Break",html:{tags:["<a>","text","</a>","<br/>","text"]}},{id:14,name:"Emphasized Lines",html:{tags:["text","<br/>","<em>","text","</em>"]}},{id:15,name:"Strong Line Break",html:{tags:["<strong>","text","<br/>","text","</strong>"]}},{id:16,name:"Paragraph Intro",html:{tags:["text","<p>","text","</p>"]}},{id:17,name:"Paragraph Sandwich",html:{tags:["text","<p>","text","</p>","text"]}},{id:18,name:"Emphasis and Paragraph",html:{tags:["<em>","text","</em>","<p>","text","text","</p>"]}},{id:19,name:"Paragraph Powerhouse",html:{tags:["text","<p>","<strong>","text","text","text","</strong>","</p>"]}},{id:20,name:"Breaking Paragraphs",html:{tags:["text","<p>","text","<br/>","text","</p>"]}},{id:21,name:"Image Debut",html:{tags:["<img/>","<p>","text","text","</p>"]}},{id:22,name:"Picture Perfect Break",html:{tags:["<img/>","<p>","text","<br/>","text","</p>"]}},{id:23,name:"Linked Image Break",html:{tags:["<a>","text","</a>","<br/>","<img/>"]}},{id:24,name:"Clickable Image Link",html:{tags:["<a>","<img/>","<br/>","text","</a>"]}},{id:25,name:"Double Vision",html:{tags:["<img/>","text","<p>","<img/>","text","</p>"]}},{id:26,name:"Main Heading",html:{tags:["<h1>","text","</h1>","text"]}},{id:27,name:"Heading Hierarchy",html:{tags:["<h1>","text","</h1>","<h2>","text","</h2>"]}},{id:28,name:"Emphasized Heading",html:{tags:["<h1>","<em>","text","</em>","</h1>","<img/>"]}},{id:29,name:"Visual Story",html:{tags:["<h2>","text","</h2>","<img/>","<p>","text","</p>"]}},{id:30,name:"Linked Heading Strong",html:{tags:["<h2>","<a>","text","</a>","</h2>","<strong>","text","</strong>"]}},{id:31,name:"Horizontal Divide",html:{tags:["text","<hr/>","text"]}},{id:32,name:"Rule and Break",html:{tags:["text","<hr/>","text","<br/>","text"]}},{id:33,name:"Boxed Image",html:{tags:["<p>","<img/>","</p>","text","<hr/>","text"]}},{id:34,name:"Rule Sandwich",html:{tags:["<hr/>","<img/>","<hr/>","text","<p>","text","</p>"]}},{id:35,name:"Linked Picture Division",html:{tags:["text","<hr/>","<a>","<img/>","</a>","<br/>","text"]}},{id:36,name:"Button Basics",html:{tags:["<button>","text","</button>","<br/>","<img/>"]}},{id:37,name:"Strong Button",html:{tags:["<button>","<strong>","text","</strong>","</button>"]}},{id:38,name:"Button Duo",html:{tags:["<button>","text","</button>","<button>","text","<p>","text","</p>","</button>"]}},{id:39,name:"Fancy Button",html:{tags:["<button>","<img/>","<br/>","<em>","text","</em>","</button>"]}},{id:40,name:"List Inception",html:{tags:["<ul>","<li>","text","</li>","</ul>"]}},{id:41,name:"Double List Items",html:{tags:["<ul>","<li>","text","</li>","<li>","text","</li>","</ul>"]}},{id:42,name:"Ordered Start",html:{tags:["<ol>","<li>","text","</li>","</ol>"]}},{id:43,name:"Numbered Pair",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","</ol>"]}},{id:44,name:"Linked List Item",html:{tags:["<ol>","<li>","text","</li>","<li>","<a>","text","</a>","</li>","</ol>"]}},{id:45,name:"Strong List Entry",html:{tags:["<ul>","<li>","<strong>","text","</strong>","</li>","<li>","text","</li>","</ul>"]}},{id:46,name:"Triple Ordered",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","</ol>"]}},{id:47,name:"Content Explosion",html:{tags:["<img/>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","<p>","text","</p>","text"]}},{id:48,name:"Emphasized List Section",html:{tags:["<h2>","text","</h2>","<em>","<ol>","<li>","text","</li>","<li>","text","</li>","</ol>","</em>","<hr/>","text"]}},{id:49,name:"Complex Navigation",html:{tags:["<h1>","text","</h1>","<ul>","<li>","<a>","<strong>","text","</strong>","</a>","</li>","<li>","text","<em>","text","<br/>","text","</em>","text","</li>","</ul>"]}},{id:50,name:"Nested List Mastery",html:{tags:["<ol>","<li>","text","</li>","<li>","text","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","</li>","<li>","<button>","text","</button>","</li>","</ol>"]}}],cssLevels:[{id:1,name:"Green Link Styling",html:{tags:["<a>","text","</a>"]},css:{tags:["a{","color:","green;","}"]}},{id:2,name:"Red Span",html:{tags:["<span>","text","</span>"]},css:{tags:["span{","color:","red;","}"]}},{id:3,name:"Orange Highlight",html:{tags:["text","<span>","text","</span>","text"]},css:{tags:["span{","color:","orange;","}"]}},{id:4,name:"Blue Division",html:{tags:["text","<div>","text","</div>","text"]},css:{tags:["div{","color:","blue;","}"]}},{id:5,name:"Italic Block",html:{tags:["<div>","text","<br/>","text","</div>"]},css:{tags:["div{","font-style:","italic;","}"]}},{id:6,name:"Green Italic Section",html:{tags:["<div>","text","<p>","text","</p>","</div>"]},css:{tags:["div{","font-style:","italic;","color:","green;","}"]}},{id:7,name:"Big Normal Span",html:{tags:["<em>","text","<span>","text","</span>","text","</em>"]},css:{tags:["span{","font-style:","normal;","font-size:","40px;","}"]}},{id:8,name:"Tiny Blue Emphasis",html:{tags:["text","<em>","text","</em>","text"]},css:{tags:["em{","color:","blue;","font-size:","10px;","}"]}},{id:9,name:"Yellow Background",html:{tags:["<div>","text","text","</div>"]},css:{tags:["div{","background:","yellow;","font-size:","40px;","}"]}},{id:10,name:"Red Right Align",html:{tags:["<div>","text","<br/>","text","</div>"]},css:{tags:["div{","background:","red;","text-align:","right;","}"]}},{id:11,name:"Centered Transparent",html:{tags:["<div>","<img/>","<br/>","text","</div>"]},css:{tags:["div{","text-align:","center;","opacity:","0.5;","}"]}},{id:12,name:"Faded Wide Image",html:{tags:["<h2>","text","</h2>","<img/>"]},css:{tags:["img{","opacity:","0.25;","width:","100%;","}"]}},{id:13,name:"Block Image Quarter",html:{tags:["text","<img/>","text"]},css:{tags:["img{","display:","block;","width:","25%;","}"]}},{id:14,name:"Block Span Fade",html:{tags:["text","<span>","text","</span>","text"]},css:{tags:["span{","display:","block;","opacity:","0.25;","}"]}},{id:15,name:"Inline Green Div",html:{tags:["text","<div>","text","</div>","text"]},css:{tags:["div{","background:","green;","display:","inline;","}"]}},{id:16,name:"Hidden Image",html:{tags:["<h1>","text","</h1>","<img/>"],alternativeSolutions:[["<img/>","<h1>","text","</h1>"],["<h1>","<img/>","text","</h1>"],["<h1>","text","<img/>","</h1>"]]},css:{tags:["h1{","font-style:","italic;","}","img{","display:","none;","}"]}},{id:17,name:"Big Link Only",html:{tags:["<a>","text","</a>","<div>","<img/>","text","</div>"],alternativeSolutions:[["<div>","<img/>","text","</div>","<a>","text","</a>"],["<div>","text","<img/>","</div>","<a>","text","</a>"]]},css:{tags:["a{","font-size:","40px;","}","div{","display:","none;","}"]}},{id:18,name:"Sized Header Right Para",html:{tags:["<h1>","text","</h1>","<p>","text","</p>"]},css:{tags:["h1{","font-size:","20px;","}","p{","text-align:","right;","}"]}},{id:19,name:"Half Button Faded Para",html:{tags:["<button>","text","</button>","<p>","text","</p>"]},css:{tags:["button{","height:","50%;","}","p{","opacity:","0.25;","}"]}},{id:20,name:"Wide Buttons Green Em",html:{tags:["<button>","text","</button>","<em>","text","</em>","<button>","text","</button>"]},css:{tags:["button{","width:","100%;","}","em{","color:","green;","}"]}},{id:21,name:"Orange Padded Center",html:{tags:["<hr/>","<div>","text","</div>","<hr/>"]},css:{tags:["div{","background:","orange;","text-align:","center;","padding:","10px;","}"]}},{id:22,name:"Black Box White Text",html:{tags:["text","<hr/>","<p>","text","</p>"]},css:{tags:["p{","background:","black;","color:","white;","padding:","20px;","}"]}},{id:23,name:"Block Italic Padded Strong",html:{tags:["<strong>","text","</strong>","<strong>","text","</strong>"]},css:{tags:["strong{","display:","block;","font-style:","italic;","padding:","40px;","}"]}},{id:24,name:"Red Margin Right Divs",html:{tags:["<div>","text","</div>","<div>","text","</div>"]},css:{tags:["div{","background:","red;","margin:","40px;","text-align:","right;","}"]}},{id:25,name:"Faded Margin Images",html:{tags:["text","<hr/>","<img/>","<img/>","<br/>","<img/>"]},css:{tags:["img{","margin:","20px;","opacity:","0.5;","width:","40px;","}"]}},{id:26,name:"Block Span Trio",html:{tags:["<span>","text","</span>","<span>","text","</span>","<span>","text","</span>"]},css:{tags:["span{","display:","block;","font-size:","10px;","margin:","40px;","}"]}},{id:27,name:"Inline Black Boxes",html:{tags:["<h2>","text","</h2>","<div>","</div>","<div>","</div>","<div>","</div>"]},css:{tags:["div{","background:","black;","display:","inline;","margin:","10px;","padding:","10px;","}"]}},{id:28,name:"Big Red Half Button",html:{tags:["<button>","text","<p>","text","</p>","</button>"]},css:{tags:["button{","color:","red;","font-size:","40px;","height:","100%;","width:","50%;","}"]}},{id:29,name:"Faded Tiny Image",html:{tags:["<img/>","<strong>","<a>","text","</a>","</strong>"]},css:{tags:["img{","opacity:","0.25;","height:","20px;","width:","100%;","}"]}},{id:30,name:"Orange Scroll Box",html:{tags:["<div>","<h2>","text","</h2>","<img/>","</div>"]},css:{tags:["div{","background:","orange;","height:","25%;","overflow:","scroll;","}"]}},{id:31,name:"Green Hidden Overflow",html:{tags:["<div>","<img/>","</div>","<button>","text","</button>"]},css:{tags:["div{","background:","green;","height:","40px;","overflow:","hidden;","}","button{","font-size:","10px;","}"]}},{id:32,name:"Black Half Box Small Images",html:{tags:["<div>","<img/>","</div>","<p>","<img/>","</p>"]},css:{tags:["div{","background:","black;","width:","50%;","height:","50%;","}","img{","width:","50%;","}"]}},{id:33,name:"Blue Padded Right Button",html:{tags:["<div>","<button>","text","text","</button>","</div>"]},css:{tags:["div{","background:","blue;","padding:","10px;","text-align:","right;","}","button{","width:","50%;","}"]}},{id:34,name:"Big Red Center Blue Em",html:{tags:["<div>","text","<br/>","text","<br/>","<em>","text","</em>","</div>"]},css:{tags:["div{","color:","red;","font-size:","40px;","text-align:","center;","}","em{","color:","blue;","}"]}},{id:35,name:"Faded Padded Right Left Header",html:{tags:["<div>","text","<h1>","text","</h1>","text","</div>"]},css:{tags:["div{","padding:","20px;","opacity:","0.5;","text-align:","right;","}","h1{","text-align:","left;","}"]}},{id:36,name:"Yellow List Faded Small Image",html:{tags:["<ul>","<li>","text","</li>","<li>","text","</li>","<li>","<img/>","</li>","</ul>"]},css:{tags:["ul{","background:","yellow;","margin:","40px;","}","img{","opacity:","0.5;","width:","25%;","}"]}},{id:37,name:"Orange Padded Red Margin List",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","</ol>"]},css:{tags:["ol{","background:","orange;","padding:","40px;","}","li{","margin:","20px;","background:","red;","}"]}},{id:38,name:"Green List Red Italic Nested",html:{tags:["<ol>","<li>","text","<ul>","<li>","text","</li>","</ul>","</li>","</ol>"]},css:{tags:["ol{","color:","green;","width:","50%;","}","ul{","color:","red;","font-style:","italic;","}"]}},{id:39,name:"Yellow Padded Orange List",html:{tags:["<div>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","</div>"]},css:{tags:["div{","background:","yellow;","padding:","20px;","}","ul{","background:","orange;","padding:","40px;","}"]}},{id:40,name:"Half Rule Inline Blue List",html:{tags:["<hr/>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","<hr/>"]},css:{tags:["hr{","height:","10px;","width:","50%;","}","li{","color:","blue;","display:","inline;","}"]}},{id:41,name:"Green Half Box Hidden Span",html:{tags:["<div>","<button>","text","</button>","<span>","text","</span>","</div>"],alternativeSolutions:[["<div>","<button>","text","</button>","</div>","<span>","text","</span>"],["<span>","text","</span>","<div>","<button>","text","</button>","</div>"],["<div>","<span>","text","</span>","<button>","text","</button>","</div>"],["<div>","<button>","<span>","text","</span>","text","</button>","</div>"],["<div>","<button>","text","<span>","text","</span>","</button>","</div>"]]},css:{tags:["div{","background:","green;","height:","50%;","}","button{","height:","50%;","}","span{","display:","none;","}"]}},{id:42,name:"Right Para Black Button No Rule",html:{tags:["<p>","text","</p>","<button>","text","</button>","<p>","text","</p>"]},css:{tags:["p{","text-align:","right;","}","button{","background:","black;","color:","white;","}"]}},{id:43,name:"Center Header Black Bars Margin Image",html:{tags:["<h2>","text","text","</h2>","<div>","</div>","<img/>","<div>","</div>"]},css:{tags:["h2{","text-align:","center;","}","div{","background:","black;","height:","40px;","}","img{","margin:","10px;","}"]}},{id:44,name:"Blue Para Italic Strong Big Faded Spans",html:{tags:["<p>","<strong>","text","<span>","text","</span>","</strong>","text","<span>","text","</span>","text","</p>"]},css:{tags:["p{","color:","blue;","}","strong{","font-style:","italic;","}","span{","font-size:","40px;","opacity:","0.25;","}"]}},{id:45,name:"Red Link Scroll Images",html:{tags:["<a>","text","</a>","<div>","<img/>","<img/>","<img/>","</div>"]},css:{tags:["a{","background:","red;","}","div{","overflow:","scroll;","height:","50px;","}","img{","margin:","20px;","}"]}},{id:46,name:"Hidden Image Center Small Header",html:{tags:["<div>","<img/>","</div>","<h2>","<a>","text","</a>","</h2>"]},css:{tags:["div{","overflow:","hidden;","height:","40px;","}","img{","width:","100%;","}","h2{","font-size:","20px;","text-align:","center;","}"]}},{id:47,name:"Block Padded Links Half Rule Green Em",html:{tags:["<a>","text","</a>","<a>","text","</a>","<hr/>","<em>","text","</em>","text","<em>","text","</em>"]},css:{tags:["a{","display:","block;","padding:","20px;","}","hr{","width:","50%;","}","em{","font-style:","normal;","color:","green;","}"]}},{id:48,name:"Yellow Padded Div Inline Yellow List",html:{tags:["<div>","text","</div>","<ul>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","</ul>"]},css:{tags:["div{","background:","yellow;","padding:","20px;","}","ul{","width:","50%;","}","li{","background:","yellow;","display:","inline;","}"]}},{id:49,name:"Orange List Padded Button Black Italic Span",html:{tags:["<ul>","<li>","text","</li>","<li>","<button>","text","<img/>","</button>","</li>","<li>","<span>","text","</span>","</li>","</ul>"]},css:{tags:["ul{","color:","orange;","}","button{","text-align:","left;","padding:","10px;","}","span{","color:","black;","font-style:","italic;","}"]}},{id:50,name:"Black Box White List Green Nested",html:{tags:["<div>","<ol>","<li>","text","</li>","<li>","text","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","</li>","</ol>","</div>"]},css:{tags:["div{","background:","black;","height:","50%;","}","ol{","background:","white;","width:","50%;","}","ul{","background:","green;","}"]}}]};var ww=32,Xk=20,xw={platforms:[{x:5,y:14,width:10},{x:5,y:13,width:10},{x:5,y:12,width:10},{x:5,y:11,width:10},{x:5,y:10,width:10},{x:5,y:9,width:10}],gridConfig:{xMin:0,xMax:9,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}},Ew={platforms:[{x:1,y:14,width:10},{x:1,y:13,width:10},{x:1,y:12,width:10},{x:1,y:11,width:10},{x:1,y:10,width:10},{x:1,y:9,width:10}],gridConfig:{xMin:0,xMax:9,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}},Cw={platforms:[{x:12,y:14,width:8},{x:12,y:13,width:8},{x:12,y:12,width:10},{x:12,y:11,width:10},{x:12,y:10,width:10},{x:12,y:9,width:10}],gridConfig:{xMin:0,xMax:7,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}};function no(n,e){let{gridConfig:t,platforms:r}=e,i=n.y,o=r[i];if(!o)throw new Error(`No platform found for grid position y=${n.y} (platform index ${i})`);let s=o.x*ww+n.x*t.sectionWidth,a=o.y*ww-Xk;return new g(s,a)}function mp(n,e,t=[]){let r=[],i=new Set,{gridConfig:o}=e,s=o.xMax-o.xMin+1,a=o.yMax-o.yMin+1;if(n>s*a)throw new Error(`Cannot place ${n} tags in a ${s}x${a} grid (max ${s*a} positions)`);for(let c=0;c<n;c++){let l=t[c]||"",u=1;l.length>9?u=3:l.length>4&&(u=2);let d=!1,f=0,p=1e3;for(;!d&&f<p;){f++;let h=Math.floor(Math.random()*a)+o.yMin,w=Math.floor(Math.random()*s)+o.xMin,b=!0;for(let E=0;E<u;E++){let v=w+E;if(v>o.xMax){b=!1;break}let y=`${v},${h}`;if(i.has(y)){b=!1;break}}if(b){for(let E=0;E<u;E++)i.add(`${w+E},${h}`);r.push({x:w,y:h}),d=!0}}if(!d)throw new Error(`Could not place tag ${c+1} of ${n} (text: "${l}") after ${p} attempts`)}return r}var Sw={numLayers:6,layers:[[{type:"static",position:{x:0,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:0,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:0,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:512,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:512,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:512,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:448,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:416,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:384,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:352,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:320,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:288,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:256,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:224,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:192,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:160,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:128,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:96,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:64,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:32,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:32,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:64,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:96,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:128,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:160,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:288,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:256,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:192,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:224,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:352,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:320,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:416,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:384,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:448,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:480},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:480},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:576,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:608,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:672,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:512,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:480,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:448,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:416,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:384,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:352,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:320,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:288,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:256,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:224,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:192,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:160,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:128,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:96,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:32,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:64,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:704,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:672,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:640,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:608,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:576,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:544,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:512,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:480,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:416,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:448,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:384,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:320,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:288,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:256,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:224,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:192,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:128,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:160,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:96,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:64,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:32,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:480,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:608,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:576,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:608,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}}],[{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:52}},{type:"static",position:{x:192,y:320},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:57}},{type:"static",position:{x:288,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:8}},{type:"static",position:{x:320,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:9}},{type:"static",position:{x:352,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:10}},{type:"animated",position:{x:0,y:448},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Big"},animationSpeed:1},{type:"animated",position:{x:480,y:448},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Big"},animationSpeed:1},{type:"animated",position:{x:0,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Medium"},animationSpeed:1},{type:"animated",position:{x:480,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Small"},animationSpeed:1},{type:"animated",position:{x:224,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Small"},animationSpeed:1},{type:"static",position:{x:704,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:7}},{type:"static",position:{x:672,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:6}},{type:"static",position:{x:640,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:5}},{type:"static",position:{x:608,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:4}},{type:"static",position:{x:96,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:14}},{type:"static",position:{x:128,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:15}},{type:"static",position:{x:160,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:16}},{type:"static",position:{x:192,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:17}},{type:"static",position:{x:608,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:1}},{type:"static",position:{x:640,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:2}},{type:"static",position:{x:672,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:3}},{type:"static",position:{x:672,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:51}},{type:"static",position:{x:224,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:52}},{type:"static",position:{x:256,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:53}},{type:"static",position:{x:288,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:54}},{type:"static",position:{x:320,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:55}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:56}},{type:"static",position:{x:384,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:57}},{type:"animated",position:{x:513,y:416},animation:{asset:"Merchant Ship",animationName:"Ship Idle"},animationSpeed:.2},{type:"animated",position:{x:523,y:395},animation:{asset:"Merchant Ship",animationName:"No Wind"},animationSpeed:.4},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:2}},{type:"animated",position:{x:512,y:32},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:1}],[{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:11}},{type:"animated",position:{x:2,y:201},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:.1},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:10}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:10}},{type:"animated",position:{x:577,y:416},animation:{asset:"Merchant Ship",animationName:"Idle"},animationSpeed:1},{type:"animated",position:{x:672,y:271},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.4},{type:"animated",position:{x:704,y:225},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Left"},animationSpeed:.4},{type:"animated",position:{x:0,y:416},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:.3}],[{type:"static",position:{x:0,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:128},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:96},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:32,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:26}},{type:"static",position:{x:32,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:64,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:96,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:128,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:160,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:6}},{type:"static",position:{x:160,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:24}},{type:"static",position:{x:192,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:26}},{type:"static",position:{x:192,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:0,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:0}},{type:"static",position:{x:736,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:736,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:704,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:672,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:672,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:704,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:736,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:17}},{type:"static",position:{x:736,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:128},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:96},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:6}},{type:"static",position:{x:224,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:256,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:288,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:320,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:384,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:416,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:448,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:480,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:544,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:576,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:704,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:672,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:640,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:352,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:704,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:672,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:544,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:512,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:480,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:448,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:416,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:384,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:320,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:256,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:224,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:192,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:160,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:128,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:96,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:64,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:32,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:0,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:16}},{type:"static",position:{x:0,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:512,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:64,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:384,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:256,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:448,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:320,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:128,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:640,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:640,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:1}},{type:"static",position:{x:640,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:17}},{type:"static",position:{x:576,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:608,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:288,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:512,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:19}},{type:"static",position:{x:512,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:512,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:27}},{type:"static",position:{x:608,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:352,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}}],[{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:6}},{type:"static",position:{x:32,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:7}},{type:"static",position:{x:64,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:8}},{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:9}},{type:"static",position:{x:64,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:10}},{type:"animated",position:{x:32,y:272},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.3},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:3}},{type:"static",position:{x:704,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:2}},{type:"static",position:{x:672,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:1}},{type:"static",position:{x:672,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:3}},{type:"static",position:{x:640,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:2}},{type:"static",position:{x:608,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:1}},{type:"animated",position:{x:608,y:398},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.5}],[{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:7}},{type:"static",position:{x:672,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:6}},{type:"static",position:{x:640,y:288},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"animated",position:{x:624,y:192},animation:{asset:"Palm Tree Island Flag",animationName:"Flag"},animationSpeed:.8},{type:"static",position:{x:640,y:320},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"static",position:{x:640,y:352},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}}]]};var Tw={numLayers:1,layers:[[{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:0}},{type:"static",position:{x:352,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:7}},{type:"static",position:{x:352,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:4}},{type:"static",position:{x:352,y:128},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:5}}]]};var rc=24,Zs=16,ic=class{constructor(e,t,r){this.scene=e,this.levelData=t,this.mode=r,r==="html"?this.htmlPlatformConfig=xw:(this.htmlPlatformConfig=Ew,this.cssPlatformConfig=Cw)}build(){return this.buildBackground(),this.buildWalls(),this.buildPlatforms(),this.buildTags(),this.buildPlayers()}buildBackground(){let e=Rr.fromData(Sw);this.scene.addChild(e),this.mode==="css"&&this.scene.addChild(Rr.fromData(Tw))}buildWalls(){this.scene.addChild(ro(new g(0,0),new g(32,32*Zs))),this.scene.addChild(ro(new g(32*(rc-1),0),new g(32,32*Zs))),this.scene.addChild(ro(new g(32,0),new g(32*rc,32))),this.scene.addChild(ro(new g(32,32*(Zs-1)),new g(32*rc,32))),this.scene.addChild(ro(new g(32*(rc-4),32*(Zs-3)),new g(96,64))),this.mode==="css"&&this.scene.addChild(ro(new g(352,0),new g(32,32*(Zs-1))))}buildPlatforms(){this.htmlPlatformConfig.platforms.forEach(e=>{this.scene.addChild(Aw(new g(32*e.x,32*e.y),new g(32*e.width,1)))}),this.cssPlatformConfig&&this.cssPlatformConfig.platforms.forEach(e=>{this.scene.addChild(Aw(new g(32*e.x,32*e.y),new g(32*e.width,1)))})}buildPlayers(){let t=en.getInstance().createSelectedCharacter(no(this.htmlPlatformConfig.playerStartGrid,this.htmlPlatformConfig));if(this.scene.addChild(t,700),this.scene.addChild(t.ghost,900),this.cssPlatformConfig&&this.levelData.css){let r=new jr(no(this.cssPlatformConfig.playerStartGrid,this.cssPlatformConfig));return this.scene.addChild(r,700),this.scene.addChild(r.ghost,900),{player1:t,player2:r}}return{player1:t}}buildTags(){let{tags:e,positions:t}=this.generateNonWinningTagLayout(this.levelData.html.tags,this.htmlPlatformConfig);if(e.forEach((r,i)=>{this.scene.addChild(kw(no(t[i],this.htmlPlatformConfig),r,"html"),800)}),this.cssPlatformConfig&&this.levelData.css){let{tags:r,positions:i}=this.generateNonWinningTagLayout(this.levelData.css.tags,this.cssPlatformConfig);r.forEach((o,s)=>{this.scene.addChild(kw(no(i[s],this.cssPlatformConfig),o,"css"),800)})}}generateNonWinningTagLayout(e,t){let i=0;for(;i<100;){i++;let a=this.shuffleArray([...e]),c=mp(a.length,t,a),u=this.getSpatialSortOrder(c,t).map(d=>a[d]);if(!this.arraysEqual(u,e))return{tags:a,positions:c}}console.warn("Could not generate non-winning layout after max attempts, using shuffled fallback");let o=this.shuffleArray([...e]),s=mp(o.length,t,o);return{tags:o,positions:s}}getSpatialSortOrder(e,t){let i=e.map(s=>no(s,t));return e.map((s,a)=>a).sort((s,a)=>{let c=i[s],l=i[a];return Math.abs(c.y-l.y)<16?c.x-l.x:c.y-l.y})}shuffleArray(e){let t=[...e],r=0,i=100;do{for(let o=t.length-1;o>0;o--){let s=Math.floor(Math.random()*(o+1));[t[o],t[s]]=[t[s],t[o]]}r++}while(this.arraysEqual(t,e)&&r<i);return t}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}};function ro(n,e){let t=new Bn(n);return t.addChild(new $i(n,e)),t}function Aw(n,e){let t=new Ji(n,e);return t.filterCollisionFn=({collider:r,velocity:i})=>!(r instanceof Xe&&r.isDropping||r instanceof Xe&&i.y<=0),t}function kw(n,e,t){let r=new st(n,e,t);return r.filterCollisionFn=({collider:i,velocity:o})=>!(i instanceof Xe&&i.isDropping||i instanceof Xe&&o.y<=0),r}var oc=class{constructor(e,t,r){this.rowTolerance=16;this.scene=e,this.levelData=t,this.isCssMode=r==="css"}getCurrentHtml(){let t=le.childrenByType(st,this.scene).filter(i=>i.tagType==="html");return this.sortTags(t).map(i=>i.text).join(" ")}getCurrentCss(){let t=le.childrenByType(st,this.scene).filter(i=>i.tagType==="css");return this.sortTags(t).map(i=>i.text).join(" ")}isCorrect(){let e=this.getCurrentHtml(),t=e===this.getHtmlSolution();if(!t&&this.levelData.html.alternativeSolutions){for(let i of this.levelData.html.alternativeSolutions)if(e===i.join(" ")){t=!0;break}}if(!this.isCssMode)return t;let r=!0;if(this.levelData.css){let i=this.getCurrentCss(),o=this.getCssSolution();if(r=this.compareCss(i,o),!r&&this.levelData.css.alternativeSolutions)for(let s of this.levelData.css.alternativeSolutions){let a=s.join(" ");if(this.compareCss(i,a)){r=!0;break}}}return t&&r}sortTags(e){return[...e].sort((t,r)=>Math.abs(t.position.y-r.position.y)<this.rowTolerance?t.position.x-r.position.x:t.position.y-r.position.y)}getHtmlSolution(){return this.levelData.html.tags.join(" ")}getCssSolution(){var e;return((e=this.levelData.css)==null?void 0:e.tags.join(" "))||""}parseCssRules(e){let t=[],r=e.split(" ").filter(o=>o.length>0),i=0;for(;i<r.length;){let o=r[i];if(o.endsWith("{")){let s=o,a=new Set;for(i++;i<r.length&&!r[i].endsWith("}");){let c=r[i];if(c.endsWith("{"))return null;if(i++,i<r.length&&!r[i].endsWith("}")){let l=r[i];if(l.endsWith("{"))return null;a.add(c+l),i++}}if(i>=r.length||!r[i].endsWith("}")||r[i]!=="}")return null;i++,t.push({selector:s,properties:a})}else return o.endsWith("}"),null}return t}compareCss(e,t){let r=this.parseCssRules(e),i=this.parseCssRules(t);if(r===null||i===null||r.length!==i.length)return!1;let o=[...i];for(let s of r){let a=!1;for(let c=0;c<o.length;c++){let l=o[c];if(s.selector!==l.selector||s.properties.size!==l.properties.size)continue;let u=!0;for(let d of l.properties)if(!s.properties.has(d)){u=!1;break}if(u){o.splice(c,1),a=!0;break}}if(!a)return!1}return!0}};var sc=class{constructor(e,t){this.scene=e,this.player=t}setPlayer(e){this.releaseTag(),this.player=e}handleGrab(){if(this.grabbedTag)this.releaseTag();else{let e=this.findClosestIntersectingTag();e&&(this.grabbedTag=e)}le.childrenByType(st,this.scene).forEach(e=>e.wakeUp())}findClosestIntersectingTag(){let e=this.player.checkAllFutureIntersections(new g(0,1),o=>o instanceof st);if(e.length===0)return;if(e.length===1)return e[0];let t=this.player.position.add(this.player.colliderOffset).add(new g(this.player.collider.dimensions.width/2,this.player.collider.dimensions.height/2)),r=e[0],i=this.getTagCenterDistance(e[0],t);for(let o=1;o<e.length;o++){let s=e[o],a=this.getTagCenterDistance(s,t);a<i&&(i=a,r=s)}return r}getTagCenterDistance(e,t){return e.position.add(new g(e.width/2,e.height/2)).sub(t).length()}update(e){this.grabbedTag&&!e&&(this.grabbedTag.position=this.player.position.add(this.player.colliderOffset).add(new g(this.player.collider.dimensions.width/2,0)).sub(new g(this.grabbedTag.width/2,0)).add(new g(this.player.pointing===0?-6:6,4))),this.player.updateGhostPosition(),this.updateGhostVisibility(),this.updateHighlight()}updateHighlight(){if(this.highlightedTag&&(this.highlightedTag.setHighlight(!1),this.highlightedTag=void 0),this.grabbedTag)return;let e=this.findClosestIntersectingTag();e&&(this.highlightedTag=e,this.highlightedTag.setHighlight(!0))}updateGhostVisibility(){let e=this.player.checkAllCurrentIntersections(t=>t instanceof st);e.length>0?(this.player.ghostGraphics.clipRegion=e.map(t=>{let r=t.collider;return{item:t,position:new g(r.position.x,r.position.y)}}),this.player.ghostGraphics.isVisible=!0):(this.player.ghostGraphics.clipRegion=void 0,this.player.ghostGraphics.isVisible=!1)}getGrabbedTag(){return this.grabbedTag}releaseTag(){this.grabbedTag=void 0}};var n1={topLeft:14,topCenter:15,topRight:16,middleLeft:23,middleCenter:24,middleRight:25,bottomLeft:32,bottomCenter:33,bottomRight:34},Ks=class extends Vn{constructor(e,t,r){let i=W.get("deviceInfo");i!=null&&i.isMobile&&(r.scale=new g(1.7,1.7));let s=W.get("assets")["Wood and Paper UI - Buttons"].tilemaps["Wood and Paper"],a=n1,c=new Ge(t,s.get(a.topLeft),s.get(a.topCenter),s.get(a.topRight),s.get(a.middleLeft),s.get(a.middleCenter),s.get(a.middleRight),s.get(a.bottomLeft),s.get(a.bottomCenter),s.get(a.bottomRight));c.fillColor="rgba(0, 0, 0, 0.1)",super(e,void 0,void 0,c),this.textComponent=r,this.buttonElement.addEventListener("keydown",l=>l.preventDefault())}get width(){var e;return((e=this.hoverBackground)==null?void 0:e.width)||0}get height(){var e;return((e=this.hoverBackground)==null?void 0:e.height)||0}};var Ys=class extends ${constructor(t){super();this.characterButtons=[];this.onChange=t,this.selectionManager=en.getInstance();let r=this.selectionManager.getSelectedCharacterType();for(let a of to){let c=new ge(a.name),l=a.type===r,u=new je(new g(0,0),c,l?"primary":"secondary");u.action=()=>{this.selectCharacter(a.type)},this.characterButtons.push(u)}let i=this.characterButtons.reduce((a,c)=>a+c.width,0),o=8,s=i+o*(this.characterButtons.length-1);this.layout=new me(new g(0,0),new g(s,this.characterButtons[0].height)),this.layout.flexDirection="row",this.layout.justifyContent="center",this.layout.alignItems="center",this.layout.gap=o;for(let a of this.characterButtons)this.layout.addChild(a);this.addChild(this.layout)}selectCharacter(t){this.selectionManager.setSelectedCharacterType(t);let r=this.selectionManager.getSelectedCharacterType();for(let i=0;i<to.length;i++){let o=to[i],s=this.characterButtons[i],a=new ge(o.name),c=o.type===r,l=new je(new g(0,0),a,c?"primary":"secondary");l.action=()=>{this.selectCharacter(o.type)},this.layout.removeChild(s),this.layout.addChild(l),this.characterButtons[i]=l}this.onChange&&this.onChange()}get width(){return this.layout.width}get height(){return this.layout.height}};var Qs=class extends ${constructor(e,t){super(e);let r=new g(4,4);this.board=new Xt(new g(0,0),t.size.add(r.mul(2)),"secondary",!1,"white"),t.position=r,(this.board.paper||this.board).addChild(t),this.addChild(this.board)}get width(){return this.board.width}get height(){return this.board.height}};var ac=class{constructor(e,t,r,i,o=!1,s,a=!1,c){this.isPaused=!1;this.showSolutionToggle=!0;this.scene=e,this.levelData=t,this.onExit=r,this.onWin=i,this.hasNextLevel=o,this.onCharacterChange=s,this.isCssMode=a,this.onPlayerSwitch=c,this.viewport=W.get("viewport")}initialize(){this.createBottomRightUI(),this.createTopRightUI(),this.isCssMode&&this.createPlayerSwitchButtons()}createBottomRightUI(){this.levelNameText=new ge(`Level ${this.levelData.id}`,0,"hero");let e=new ge("Menu");this.menuButton=new je(new g(0,0),e),this.menuButton.action=()=>{this.showPauseMenu()},this.uiLayout=new me(new g(0,this.viewport.height-60),new g(this.viewport.width,60)),this.uiLayout.flexDirection="column",this.uiLayout.justifyContent="flex-end",this.uiLayout.alignItems="flex-end",this.uiLayout.padding={top:8,right:8,bottom:8,left:8},this.uiLayout.gap=6,this.uiLayout.addChild(this.menuButton),this.uiLayout.addChild(this.levelNameText),this.scene.addChild(this.uiLayout)}createPlayerSwitchButtons(){let e=new ge("Switch");this.playerSwitchButton=new Ks(new g(34,260),new g(320,220),e),this.playerSwitchButton.action=()=>{this.onPlayerSwitch&&this.onPlayerSwitch()},this.scene.addChild(this.playerSwitchButton),this.setActivePlayer("player1")}setActivePlayer(e){this.playerSwitchButton&&(e==="player1"?this.playerSwitchButton.position=new g(384,260):this.playerSwitchButton.position=new g(34,260),this.playerSwitchButton.blur())}createTopRightUI(){this.htmlPreview=new Qi(new g(0,0),new g(300,260),"");let e=new Qs(new g(0,0),this.htmlPreview);this.solutionToggleButtonText=new ge("Solution         "),this.solutionToggleButton=new je(new g(0,0),this.solutionToggleButtonText,"secondary"),this.solutionToggleButton.translation=new g(-4,-24),this.solutionToggleButton.action=()=>{this.showSolutionToggle=!this.showSolutionToggle,this.solutionToggleButtonText&&this.solutionToggleButtonText.setText(this.showSolutionToggle?"Solution":"Current result")},this.targetLayout=new me(new g(0,0),this.viewport),this.targetLayout.flexDirection="column",this.targetLayout.justifyContent="flex-start",this.targetLayout.alignItems="flex-end",this.targetLayout.padding={top:0,right:20,bottom:20,left:20},this.targetLayout.gap=4,this.targetLayout.addChild(e),this.targetLayout.addChild(this.solutionToggleButton),this.scene.addChild(this.targetLayout)}updateHtmlPreview(e,t,r,i){if(!this.htmlPreview)return;let o,s="";this.showSolutionToggle?(o=t,s=i||""):(o=e,s=r||""),this.htmlPreview.setHtml(o,s)}setCtrlPressed(){this.showSolutionToggle=!this.showSolutionToggle,this.solutionToggleButtonText&&this.solutionToggleButtonText.setText(this.showSolutionToggle?"Solution":"Current result")}showPauseMenu(){if(this.isPaused)return;this.isPaused=!0,this.menuButton&&(this.menuButton.isVisible=!1);let e=new Zn(new g(0,0),[{type:"button",label:"Continue",autofocus:!0,action:()=>{this.hidePauseMenu()}},{type:"button",label:"Exit",action:()=>{this.hidePauseMenu(),this.onExit&&this.onExit()}},{type:"custom",element:new Ys(()=>{this.onCharacterChange&&this.onCharacterChange()})}]),t=new me(new g(0,0),new g(e.width,e.height));t.flexDirection="column",t.alignItems="center",t.addChild(e);let r=new me(new g(0,0),this.viewport);r.justifyContent="center",r.alignItems="center",r.addChild(t),this.pauseMenu=r,this.scene.addChild(this.pauseMenu,1e3),e.triggerAutofocus()}hidePauseMenu(){!this.isPaused||!this.pauseMenu||(this.isPaused=!1,this.scene.removeChild(this.pauseMenu),this.pauseMenu=void 0,this.menuButton&&(this.menuButton.isVisible=!0))}showWinMenu(){if(this.winMenu)return;this.menuButton&&(this.menuButton.isVisible=!1);let e=[];this.hasNextLevel&&this.onWin?e.push({type:"button",label:"Next level",autofocus:!0,action:()=>{this.onWin&&this.onWin()}}):this.hasNextLevel||e.push({type:"text",text:"All Levels Complete!"}),e.push({type:"button",label:"Exit",autofocus:!this.hasNextLevel,action:()=>{this.onExit&&this.onExit()},variant:this.hasNextLevel?"secondary":"primary"});let t=new Zn(new g(0,0),e),r=new me(new g(0,0),this.viewport);r.justifyContent="center",r.alignItems="center",r.addChild(t),this.winMenu=r,this.scene.addChild(this.winMenu,1e3),t.triggerAutofocus()}isPauseMenuShown(){return this.isPaused}togglePauseMenu(){this.isPaused?this.hidePauseMenu():this.showPauseMenu()}};var Wr=class extends Qe{constructor(t,r=1,i,o,s=!1){super();this.hasWon=!1;this.mode=t;let a=Qn,l=(t==="html"?a.htmlLevels:a.cssLevels).find(u=>u.id===r);if(!l)throw new Error(`Level with id ${r} not found`);this.currentLevel=l,this.onExit=i,this.onWin=o,this.hasNextLevel=s,this.run()}async run(){let r=new ic(this,this.currentLevel,this.mode).build();this.player1=r.player1,this.player2=r.player2,this.activePlayer=this.player1,this.player2&&(this.player2.enabled=!1),this.uiManager=new ac(this,this.currentLevel,this.onExit,this.onWin,this.hasNextLevel,()=>this.changePlayer1Character(),this.mode==="css",()=>this.switchActivePlayer()),this.uiManager.initialize(),this.tagInteraction=new sc(this,this.activePlayer),this.winChecker=new oc(this,this.currentLevel,this.mode),this.setupEventHandlers(),Yn.getInstance().startLevel()}setupEventHandlers(){this.on(ce,this.handleKeyboardInput.bind(this)),this.on(Or,()=>{var t;(t=this.tagInteraction)==null||t.handleGrab()}),this.on(Gt,()=>{var t,r,i,o;if(this.winChecker&&((t=this.tagInteraction)==null||t.update(this.hasWon),!this.hasWon)){let s=this.winChecker.getCurrentHtml(),a=this.winChecker.getCurrentCss();(r=this.uiManager)==null||r.updateHtmlPreview(s,this.winChecker.getHtmlSolution(),a,this.winChecker.getCssSolution()),!(((i=this.tagInteraction)==null?void 0:i.getGrabbedTag())!==void 0)&&this.winChecker.isCorrect()&&(this.hasWon=!0,Yn.getInstance().advanceToNextLevel().catch(u=>{console.error("Failed to advance level:",u)}),(o=this.uiManager)==null||o.showWinMenu())}})}handleKeyboardInput(t){var r,i;t instanceof ce&&(t.action===0&&t.key==="Control"&&((r=this.uiManager)==null||r.setCtrlPressed()),t.action===0&&t.key==="Escape"&&((i=this.uiManager)==null||i.togglePauseMenu()),t.action===0&&t.key==="Shift"&&this.player2&&this.switchActivePlayer())}switchActivePlayer(){var t,r;!this.player1||!this.player2||(this.activePlayer===this.player1?(this.player1.enabled=!1,this.player2.enabled=!0,this.activePlayer=this.player2,(t=this.uiManager)==null||t.setActivePlayer("player2")):(this.player2.enabled=!1,this.player1.enabled=!0,this.activePlayer=this.player1,(r=this.uiManager)==null||r.setActivePlayer("player1")),this.activePlayer.showExclamation(),this.tagInteraction&&this.tagInteraction.setPlayer(this.activePlayer))}changePlayer1Character(){if(!this.player1||!(this.player1 instanceof kt))return;let r=en.getInstance().getSelectedCharacterType();this.player1.setCharacterType(r)}};var io=class extends Qe{constructor(t){super();this.isLoading=!1;let r=W.get("viewport");this.formLayout=new zn(new g(0,0),{title:"Login",inputs:[{key:"email",placeholder:"Email",type:"email",width:200,name:"email",autocomplete:"username",autofocus:!0},{key:"password",placeholder:"Password",type:"password",width:200,name:"password",autocomplete:"current-password"}],mainAction:{label:"Login",onAction:o=>this.handleLogin(o,t.onLoginSuccess)},secondaryActions:[{label:"Register",onAction:t.onRegisterRequest}],backAction:t.onBack});let i=new me(new g(0,0),r);i.justifyContent="center",i.alignItems="center",i.addChild(this.formLayout),this.addChild(i),this.setupKeyboardShortcuts(),this.on(Fe,()=>{this.formLayout.triggerAutofocus()})}setupKeyboardShortcuts(){}async handleLogin(t,r){if(this.isLoading)return;let i=t.email.trim(),o=t.password;if(!i||!o){this.showError("Enter email and password");return}if(!this.isValidEmail(i)){this.showError("Invalid email address");return}this.isLoading=!0,this.hideError(),this.setButtonsEnabled(!1);try{let s=await ye.login(i,o);s.success?(this.formLayout.clearInputs(),r()):this.formLayout.showError(s.error||"Login failed")}catch(s){console.error("Login error:",s),this.formLayout.showError("Unexpected error occurred")}finally{this.isLoading=!1,this.formLayout.setButtonsEnabled(!0)}}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}showError(t){this.formLayout.showError(t)}hideError(){this.formLayout.hideError()}setButtonsEnabled(t){this.formLayout.setButtonsEnabled(t)}};var oo=class extends Qe{constructor(t){super();this.isLoading=!1;let r=W.get("viewport");this.formLayout=new zn(new g(0,0),{title:"Register",inputs:[{key:"email",placeholder:"Email",type:"email",width:200,name:"email",autocomplete:"username",autofocus:!0},{key:"password",placeholder:"Password",type:"password",width:200,name:"password",autocomplete:"new-password"},{key:"confirmPassword",placeholder:"Confirm Password",type:"password",width:200,name:"confirmPassword",autocomplete:"new-password"}],mainAction:{label:"Register",onAction:o=>this.handleRegister(o,t.onRegisterSuccess)},secondaryActions:[{label:"Login",onAction:t.onLoginRequest}],backAction:t.onBack});let i=new me(new g(0,0),r);i.justifyContent="center",i.alignItems="center",i.addChild(this.formLayout),this.addChild(i),this.setupKeyboardShortcuts(),this.on(Fe,()=>{this.formLayout.triggerAutofocus()})}setupKeyboardShortcuts(){}async handleRegister(t,r){if(this.isLoading)return;let i=t.email.trim(),o=t.password,s=t.confirmPassword;if(!i||!o||!s){this.showError("All fields are required");return}if(!this.isValidEmail(i)){this.showError("Invalid email address");return}if(o.length<8){this.showError("Password must be at least 8 characters");return}if(o!==s){this.showError("Passwords do not match");return}this.isLoading=!0,this.hideError(),this.setButtonsEnabled(!1);try{let a=await ye.register(i,o);a.success?(this.formLayout.clearInputs(),r()):this.formLayout.showError(a.error||"Registration failed")}catch(a){console.error("Registration error:",a),this.formLayout.showError("Unexpected error occurred")}finally{this.isLoading=!1,this.formLayout.setButtonsEnabled(!0)}}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}showError(t){this.formLayout.showError(t)}hideError(){this.formLayout.hideError()}setButtonsEnabled(t){this.formLayout.setButtonsEnabled(t)}};var so=class so{constructor(e){this.elementRef=e;this.isVisible=!1;this.buttons=[];this.isInitialized=!1;this.eventListeners=new Map}ngOnDestroy(){this.cleanup()}setCallback(e){this.onControlCallback=e}ensureInitialized(){this.isInitialized||(this.setupButtons(),this.isInitialized=!0)}setupButtons(){let e=this.elementRef.nativeElement.querySelector(".touch-controls-container");e&&(this.buttons=Array.from(e.querySelectorAll(".touch-btn")),this.buttons.forEach(t=>{let r=t.getAttribute("data-key");if(!r)return;let i=c=>{var l;c.preventDefault(),c.stopPropagation(),t.classList.add("pressed"),(l=this.onControlCallback)==null||l.call(this,r,!0)},o=c=>{var l;c.preventDefault(),c.stopPropagation(),t.classList.remove("pressed"),(l=this.onControlCallback)==null||l.call(this,r,!1)},s=c=>c.preventDefault(),a={touchstart:i,touchend:o,touchcancel:o,mousedown:i,mouseup:o,mouseleave:o,contextmenu:s,dragstart:s};this.eventListeners.set(t,a),t.addEventListener("touchstart",a.touchstart,{passive:!1}),t.addEventListener("touchend",a.touchend,{passive:!1}),t.addEventListener("touchcancel",a.touchcancel,{passive:!1}),t.addEventListener("mousedown",a.mousedown),t.addEventListener("mouseup",a.mouseup),t.addEventListener("mouseleave",a.mouseleave),t.addEventListener("contextmenu",a.contextmenu),t.addEventListener("dragstart",a.dragstart)}))}cleanup(){this.buttons.forEach(e=>{let t=this.eventListeners.get(e);t&&(e.removeEventListener("touchstart",t.touchstart),e.removeEventListener("touchend",t.touchend),e.removeEventListener("touchcancel",t.touchcancel),e.removeEventListener("mousedown",t.mousedown),e.removeEventListener("mouseup",t.mouseup),e.removeEventListener("mouseleave",t.mouseleave),e.removeEventListener("contextmenu",t.contextmenu),e.removeEventListener("dragstart",t.dragstart))}),this.eventListeners.clear(),this.buttons=[]}show(){this.ensureInitialized(),this.isVisible=!0}hide(){this.isVisible=!1}};so.\u0275fac=function(t){return new(t||so)(Ya(mr))},so.\u0275cmp=Go({type:so,selectors:[["app-touch-controls"]],decls:13,vars:2,consts:[[1,"touch-controls-container"],[1,"button-group","dpad"],["data-key","ArrowUp","data-interactive","true",1,"touch-btn","up"],["data-key","ArrowLeft","data-interactive","true",1,"touch-btn","left"],["data-key","ArrowDown","data-interactive","true",1,"touch-btn","down"],["data-key","ArrowRight","data-interactive","true",1,"touch-btn","right"],[1,"button-group","action"],["data-key"," ","data-interactive","true",1,"touch-btn","grab"]],template:function(t,r){t&1&&(Tn(0,"div",0)(1,"div",1)(2,"button",2),gr(3," \u2191 "),_n(),Tn(4,"button",3),gr(5," \u2190 "),_n(),Tn(6,"button",4),gr(7," \u2193 "),_n(),Tn(8,"button",5),gr(9," \u2192 "),_n()(),Tn(10,"div",6)(11,"button",7),gr(12," GRAB "),_n()()()),t&2&&el("visible",r.isVisible)},styles:[".touch-controls-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:0;right:0;display:none;justify-content:space-between;padding:0 20px;pointer-events:none;z-index:2000;gap:10px}.touch-controls-container.visible[_ngcontent-%COMP%]{display:flex}.button-group[_ngcontent-%COMP%]{display:flex;align-items:center;pointer-events:none}.button-group.dpad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,60px);grid-template-rows:repeat(2,60px);gap:5px}.button-group.action[_ngcontent-%COMP%]{display:flex;align-items:center}.touch-btn[_ngcontent-%COMP%]{width:60px;height:60px;font-size:24px;font-weight:700;border:2px solid rgba(255,255,255,.3);border-radius:8px;background:#0009;color:#fff;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:none;pointer-events:auto;transition:all .1s}.touch-btn.up[_ngcontent-%COMP%]{grid-column:2;grid-row:1}.touch-btn.left[_ngcontent-%COMP%]{grid-column:1;grid-row:2}.touch-btn.down[_ngcontent-%COMP%]{grid-column:2;grid-row:2}.touch-btn.right[_ngcontent-%COMP%]{grid-column:3;grid-row:2}.touch-btn.grab[_ngcontent-%COMP%]{width:80px;height:80px;font-size:14px}.touch-btn[_ngcontent-%COMP%]:active, .touch-btn.pressed[_ngcontent-%COMP%]{background:#6496ffcc;transform:scale(.95)}"]});var lc=so;var Js={dynamic:{"Captain Clown Nose":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Captain Clown Nose.aseprite"},"Captain Clown Nose Dialogue":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Dialogue.aseprite"},"Captain Clown Nose Dust Particles":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Dust Particles.aseprite"},"Merchant Ship":{path:"./sprites/Treasure Hunters/Merchant Ship/Aseprite/Merchant Ship.aseprite"},"Palm Tree Island":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Palm Tree Island (ArtBoard).aseprite"},"Palm Tree Island Chest":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Chest.aseprite"},"Palm Tree Island Flag":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Flag.aseprite"},"Palm Tree Island Palm Tree":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Palm Tree.aseprite"},"Palm Tree Island Ship Helm":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Ship Helm.aseprite"},"Palm Tree Island Water Reflect":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Water Reflect.aseprite"},"Pirate Ship":{path:"./sprites/Treasure Hunters/Pirate Ship/Aseprite/TileSets.aseprite"},"Pirate Ship Decorations":{path:"./sprites/Treasure Hunters/Pirate Ship/Aseprite/Decorations.aseprite"},"Pirate Treasure":{path:"./sprites/Treasure Hunters/Pirate Treasure/Aseprite/Pirate Treasure.aseprite"},"Shooter Traps":{path:"./sprites/Treasure Hunters/Shooter Traps/Aseprite/Shooter Traps.aseprite"},"The Crusty Crew Crabby":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Crabby.aseprite"},"The Crusty Crew Dialogue":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Dialogue.aseprite"},"The Crusty Crew Dust Particles":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Dust Particles.aseprite"},"The Crusty Crew Fierce Tooth":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Fierce Tooth.aseprite"},"The Crusty Crew Pink Star":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Pink Star.aseprite"},"Wood and Paper UI":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper.aseprite"},"Wood and Paper UI - Boards":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Boards.aseprite"},"Wood and Paper UI - Buttons Large":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Buttons Large.aseprite"},"Wood and Paper UI - Buttons":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Buttons.aseprite"},"Wood and Paper UI Button Cooldown":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Button Cooldown.aseprite"},Paper:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Paper.aseprite"},Chars:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Chars.aseprite"},CharsHero:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/CharsHero.aseprite"}},chars:{Chars:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Chars.aseprite",map:{__unknown__:81," ":0,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26,"1":27,"2":28,"3":29,"4":30,"5":31,"6":32,"7":33,"8":34,"9":35,"0":36,"-":37,"!":46,":":50,"%":78,"/":40,"<":85,">":86,";":87,"{":88,"}":89}},CharsHero:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/CharsHero.aseprite",map:{__unknown__:0," ":0,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26,"1":27,"2":28,"3":29,"4":30,"5":31,"6":32,"7":33,"8":34,"9":35,"0":36,"-":37}}},loading:"./sprites/Treasure Hunters/Loading.aseprite"};var i1=["game"],o1=["canvas"],s1=["touchControls"],ao=class ao{constructor(){this.viewport=new g(768,512);W.set("viewport",this.viewport);let e=Un.getDeviceInfo();W.set("deviceInfo",e),console.log("Device detection:",{isMobile:e.isMobile,isTablet:e.isTablet,isDesktop:e.isDesktop,hasTouch:e.hasTouch,orientation:Un.getOrientation(),isPWA:Un.isPWA()})}async ngAfterViewInit(){var b,E,v;let e=(b=this.gameElement)==null?void 0:b.nativeElement,t=(E=this.canvasElement)==null?void 0:E.nativeElement;if(!e)throw new Error("Game element not found!");if(!t)throw new Error("Game canvas not found!");this.resizeListener=()=>this.onResize(e),window.addEventListener("resize",this.resizeListener);let r=this.calculateZoom(e);this.renderer=new Li(t,e,r);let i=W.get("deviceInfo"),o=[new Ii(document.documentElement),new Pn(t,this.renderer.globalToLocalPoint.bind(this.renderer))];if(i!=null&&i.isMobile||i!=null&&i.hasTouch){let y=new Ci;o.push(y),this.touchControlsComponent&&this.touchControlsComponent.setCallback((I,M)=>{M?y.pressKey(I):y.releaseKey(I)})}let s=new vi(this.viewport,this.renderer,new Oi,o);((i==null?void 0:i.isMobile)||(i==null?void 0:i.hasTouch))&&s.on(Fe,y=>{var I,M;y instanceof Fe&&(y.scene instanceof Wr?(I=this.touchControlsComponent)==null||I.show():(M=this.touchControlsComponent)==null||M.hide())}),s.start(120,120);let c=new eo(Js.loading,Js.chars.Chars);s.loadScene(c),await c.run(),await c.loadAssets(Js.dynamic,Js.chars);let l=Yn.getInstance(),u=y=>{l.setMode(y);let I=[],M=l.getCurrentLevel(),x=(y==="html"?Qn.htmlLevels:Qn.cssLevels).length;return M>x?I.push({type:"text",text:"All Levels Complete!"}):l.hasSavedProgress()&&I.push({type:"button",label:`Continue - Level ${M}`,autofocus:!0,action:()=>{d(M,y)}}),I.push({type:"button",autofocus:!l.hasSavedProgress(),label:l.hasSavedProgress()?"New Game":"Start Game",action:async()=>{await l.resetProgress(),d(1,y)}}),new Ur(I,async()=>{s.loadScene(await h())})},d=(y,I)=>{let M=I==="html"?Qn.htmlLevels:Qn.cssLevels,S=M.findIndex(T=>T.id===y),x=S<M.length-1;s.loadScene(new Wr(I,y,async()=>{s.loadScene(await h())},()=>{if(x){let T=M[S+1];d(T.id,I)}else s.loadScene(u(I))},x))},f=new oo({onRegisterSuccess:async()=>{console.log("Registration successful!"),await l.initialize(),s.loadScene(await h())},onLoginRequest:()=>{console.log("Login requested from register"),s.loadScene(p)},onBack:async()=>{console.log("Back from register"),s.loadScene(await h())}}),p=new io({onLoginSuccess:async()=>{console.log("Login successful!"),await l.initialize(),s.loadScene(await h())},onRegisterRequest:()=>{console.log("Register requested from login"),s.loadScene(f)},onBack:async()=>{console.log("Back from login"),s.loadScene(await h())}}),h=async()=>{let y=[];return ye.isAuthenticated?(await zs.isPlayEnabled()&&(y.push({type:"button",label:"HTML Mode",autofocus:!0,action:()=>{s.loadScene(u("html"))}}),y.push({type:"button",label:"CSS Mode",action:()=>{s.loadScene(u("css"))}})),y.push({type:"button",label:"Logout",variant:"secondary",action:async()=>{await ye.logout(),console.log("User logged out"),s.loadScene(await h())}})):(y.push({type:"button",label:"Login",variant:"primary",autofocus:!0,action:()=>{s.loadScene(p)}}),await zs.isRegistrationEnabled()&&y.push({type:"button",label:"Register",variant:"primary",action:()=>{s.loadScene(f)}})),new Ur(y,void 0)};await zs.initialize(),await ye.initialize(),ye.isAuthenticated?(await l.initialize(),console.log("User already logged in:",(v=ye.currentUser)==null?void 0:v.email)):console.log("No active session");let w=await h();s.loadScene(w)}ngOnDestroy(){this.resizeListener&&window.removeEventListener("resize",this.resizeListener)}calculateZoom(e){let t=e.clientWidth,r=e.clientHeight,i=t/this.viewport.width,o=r/this.viewport.height;return Math.min(i,o)}onResize(e){if(!this.renderer)return;let t=this.calculateZoom(e);this.renderer.setZoom(t),this.renderer.setViewport(this.viewport)}};ao.\u0275fac=function(t){return new(t||ao)},ao.\u0275cmp=Go({type:ao,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Xa(i1,5)(o1,5)(s1,5),t&2){let i;Yo(i=Qo())&&(r.gameElement=i.first),Yo(i=Qo())&&(r.canvasElement=i.first),Yo(i=Qo())&&(r.touchControlsComponent=i.first)}},decls:9,vars:0,consts:[["game",""],["canvas",""],["touchControls",""],["rel","preconnect","href",Wo`https://fonts.googleapis.com`],["rel","preconnect","href",Wo`https://fonts.gstatic.com`,"crossorigin",""],["href",Wo`https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@700&display=swap`,"rel","stylesheet"],[1,"main"]],template:function(t,r){t&1&&(yi(0,"link",3)(1,"link",4)(2,"link",5),zo(3,"div",6,0),yi(5,"canvas",null,1),Zo(),yi(7,"app-touch-controls",null,2))},dependencies:[lc],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}"]});var cc=ao;Pd(cc,{providers:[]}).catch(n=>console.error(n));
