var Uw=Object.create;var Bl=Object.defineProperty,Ww=Object.defineProperties,qw=Object.getOwnPropertyDescriptor,Gw=Object.getOwnPropertyDescriptors,zw=Object.getOwnPropertyNames,Vf=Object.getOwnPropertySymbols,Zw=Object.getPrototypeOf,Ff=Object.prototype.hasOwnProperty,Kw=Object.prototype.propertyIsEnumerable;var Bf=(n,e,t)=>e in n?Bl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_e=(n,e)=>{for(var t in e||={})Ff.call(e,t)&&Bf(n,t,e[t]);if(Vf)for(var t of Vf(e))Kw.call(e,t)&&Bf(n,t,e[t]);return n},vt=(n,e)=>Ww(n,Gw(e));var Yi=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var V=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Yw=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zw(e))!Ff.call(n,i)&&i!==t&&Bl(n,i,{get:()=>e[i],enumerable:!(r=qw(e,i))||r.enumerable});return n};var Qw=(n,e,t)=>(t=n!=null?Uw(Zw(n)):{},Yw(e||!n||!n.__esModule?Bl(t,"default",{value:n,enumerable:!0}):t,n));var L=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var Ay=V((_i,Ti)=>{"use strict";(function(n){var e=typeof _i=="object"&&_i&&!_i.nodeType&&_i,t=typeof Ti=="object"&&Ti&&!Ti.nodeType&&Ti,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(n=r);var i,o=2147483647,s=36,a=1,l=26,c=38,d=700,u=72,f=128,p="-",h=/^xn--/,w=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=s-a,g=Math.floor,v=String.fromCharCode,D;function C(N){throw new RangeError(b[N])}function x(N,R){for(var j=N.length,M=[];j--;)M[j]=R(N[j]);return M}function T(N,R){var j=N.split("@"),M="";j.length>1&&(M=j[0]+"@",N=j[1]),N=N.replace(I,".");var U=N.split("."),K=x(U,R).join(".");return M+K}function E(N){for(var R=[],j=0,M=N.length,U,K;j<M;)U=N.charCodeAt(j++),U>=55296&&U<=56319&&j<M?(K=N.charCodeAt(j++),(K&64512)==56320?R.push(((U&1023)<<10)+(K&1023)+65536):(R.push(U),j--)):R.push(U);return R}function S(N){return x(N,function(R){var j="";return R>65535&&(R-=65536,j+=v(R>>>10&1023|55296),R=56320|R&1023),j+=v(R),j}).join("")}function A(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:s}function B(N,R){return N+22+75*(N<26)-((R!=0)<<5)}function F(N,R,j){var M=0;for(N=j?g(N/d):N>>1,N+=g(N/R);N>y*l>>1;M+=s)N=g(N/y);return g(M+(y+1)*N/(N+c))}function Q(N){var R=[],j=N.length,M,U=0,K=f,q=u,be,ae,Te,Le,xe,Oe,ot,ze,Nt;for(be=N.lastIndexOf(p),be<0&&(be=0),ae=0;ae<be;++ae)N.charCodeAt(ae)>=128&&C("not-basic"),R.push(N.charCodeAt(ae));for(Te=be>0?be+1:0;Te<j;){for(Le=U,xe=1,Oe=s;Te>=j&&C("invalid-input"),ot=A(N.charCodeAt(Te++)),(ot>=s||ot>g((o-U)/xe))&&C("overflow"),U+=ot*xe,ze=Oe<=q?a:Oe>=q+l?l:Oe-q,!(ot<ze);Oe+=s)Nt=s-ze,xe>g(o/Nt)&&C("overflow"),xe*=Nt;M=R.length+1,q=F(U-Le,M,Le==0),g(U/M)>o-K&&C("overflow"),K+=g(U/M),U%=M,R.splice(U++,0,K)}return S(R)}function fe(N){var R,j,M,U,K,q,be,ae,Te,Le,xe,Oe=[],ot,ze,Nt,ks;for(N=E(N),ot=N.length,R=f,j=0,K=u,q=0;q<ot;++q)xe=N[q],xe<128&&Oe.push(v(xe));for(M=U=Oe.length,U&&Oe.push(p);M<ot;){for(be=o,q=0;q<ot;++q)xe=N[q],xe>=R&&xe<be&&(be=xe);for(ze=M+1,be-R>g((o-j)/ze)&&C("overflow"),j+=(be-R)*ze,R=be,q=0;q<ot;++q)if(xe=N[q],xe<R&&++j>o&&C("overflow"),xe==R){for(ae=j,Te=s;Le=Te<=K?a:Te>=K+l?l:Te-K,!(ae<Le);Te+=s)ks=ae-Le,Nt=s-Le,Oe.push(v(B(Le+ks%Nt,0))),ae=g(ks/Nt);Oe.push(v(B(ae,0))),K=F(j,ze,M==U),j=0,++M}++j,++R}return Oe.join("")}function O(N){return T(N,function(R){return h.test(R)?Q(R.slice(4).toLowerCase()):R})}function $(N){return T(N,function(R){return w.test(R)?"xn--"+fe(R):R})}if(i={version:"1.4.1",ucs2:{decode:E,encode:S},decode:Q,encode:fe,toASCII:$,toUnicode:O},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(Ti.exports==e)t.exports=i;else for(D in i)i.hasOwnProperty(D)&&(e[D]=i[D]);else n.punycode=i})(_i)});var Mr=V((a3,ky)=>{"use strict";ky.exports=TypeError});var Ny=V(()=>{"use strict"});var ps=V((d3,Xy)=>{"use strict";var Ku=typeof Map=="function"&&Map.prototype,Vu=Object.getOwnPropertyDescriptor&&Ku?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,rl=Ku&&Vu&&typeof Vu.get=="function"?Vu.get:null,Py=Ku&&Map.prototype.forEach,Yu=typeof Set=="function"&&Set.prototype,Bu=Object.getOwnPropertyDescriptor&&Yu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,il=Yu&&Bu&&typeof Bu.get=="function"?Bu.get:null,Ry=Yu&&Set.prototype.forEach,h0=typeof WeakMap=="function"&&WeakMap.prototype,us=h0?WeakMap.prototype.has:null,m0=typeof WeakSet=="function"&&WeakSet.prototype,fs=m0?WeakSet.prototype.has:null,g0=typeof WeakRef=="function"&&WeakRef.prototype,Ly=g0?WeakRef.prototype.deref:null,y0=Boolean.prototype.valueOf,v0=Object.prototype.toString,I0=Function.prototype.toString,w0=String.prototype.match,Qu=String.prototype.slice,Rn=String.prototype.replace,b0=String.prototype.toUpperCase,Oy=String.prototype.toLowerCase,qy=RegExp.prototype.test,jy=Array.prototype.concat,qt=Array.prototype.join,x0=Array.prototype.slice,Hy=Math.floor,Wu=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Fu=Object.getOwnPropertySymbols,qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Di=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Fe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Di||!0)?Symbol.toStringTag:null,Gy=Object.prototype.propertyIsEnumerable,$y=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Vy(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||qy.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-Hy(-n):Hy(n);if(r!==n){var i=String(r),o=Qu.call(e,i.length+1);return Rn.call(i,t,"$&_")+"."+Rn.call(Rn.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Rn.call(e,t,"$&_")}var Gu=Ny(),By=Gu.custom,Fy=Ky(By)?By:null,zy={__proto__:null,double:'"',single:"'"},E0={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Xy.exports=function n(e,t,r,i){var o=t||{};if(dn(o,"quoteStyle")&&!dn(zy,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(dn(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=dn(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(dn(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(dn(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Qy(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?Vy(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?Vy(e,c):c}var d=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof e=="object")return zu(e)?"[Array]":"[Object]";var u=B0(o,r);if(typeof i>"u")i=[];else if(Yy(i,e)>=0)return"[Circular]";function f(F,Q,fe){if(Q&&(i=x0.call(i),i.push(Q)),fe){var O={depth:o.depth};return dn(o,"quoteStyle")&&(O.quoteStyle=o.quoteStyle),n(F,O,r+1,i)}return n(F,o,r+1,i)}if(typeof e=="function"&&!Uy(e)){var p=N0(e),h=nl(e,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(h.length>0?" { "+qt.call(h,", ")+" }":"")}if(Ky(e)){var w=Di?Rn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):qu.call(e);return typeof e=="object"&&!Di?ds(w):w}if(H0(e)){for(var I="<"+Oy.call(String(e.nodeName)),b=e.attributes||[],y=0;y<b.length;y++)I+=" "+b[y].name+"="+Zy(C0(b[y].value),"double",o);return I+=">",e.childNodes&&e.childNodes.length&&(I+="..."),I+="</"+Oy.call(String(e.nodeName))+">",I}if(zu(e)){if(e.length===0)return"[]";var g=nl(e,f);return u&&!V0(g)?"["+Zu(g,u)+"]":"[ "+qt.call(g,", ")+" ]"}if(_0(e)){var v=nl(e,f);return!("cause"in Error.prototype)&&"cause"in e&&!Gy.call(e,"cause")?"{ ["+String(e)+"] "+qt.call(jy.call("[cause]: "+f(e.cause),v),", ")+" }":v.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+qt.call(v,", ")+" }"}if(typeof e=="object"&&s){if(Fy&&typeof e[Fy]=="function"&&Gu)return Gu(e,{depth:d-r});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(P0(e)){var D=[];return Py&&Py.call(e,function(F,Q){D.push(f(Q,e,!0)+" => "+f(F,e))}),Wy("Map",rl.call(e),D,u)}if(O0(e)){var C=[];return Ry&&Ry.call(e,function(F){C.push(f(F,e))}),Wy("Set",il.call(e),C,u)}if(R0(e))return Uu("WeakMap");if(j0(e))return Uu("WeakSet");if(L0(e))return Uu("WeakRef");if(D0(e))return ds(f(Number(e)));if(A0(e))return ds(f(Wu.call(e)));if(M0(e))return ds(y0.call(e));if(T0(e))return ds(f(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!S0(e)&&!Uy(e)){var x=nl(e,f),T=$y?$y(e)===Object.prototype:e instanceof Object||e.constructor===Object,E=e instanceof Object?"":"null prototype",S=!T&&Fe&&Object(e)===e&&Fe in e?Qu.call(Ln(e),8,-1):E?"Object":"",A=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=A+(S||E?"["+qt.call(jy.call([],S||[],E||[]),": ")+"] ":"");return x.length===0?B+"{}":u?B+"{"+Zu(x,u)+"}":B+"{ "+qt.call(x,", ")+" }"}return String(e)};function Zy(n,e,t){var r=t.quoteStyle||e,i=zy[r];return i+n+i}function C0(n){return Rn.call(String(n),/"/g,"&quot;")}function zu(n){return Ln(n)==="[object Array]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function S0(n){return Ln(n)==="[object Date]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function Uy(n){return Ln(n)==="[object RegExp]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function _0(n){return Ln(n)==="[object Error]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function T0(n){return Ln(n)==="[object String]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function D0(n){return Ln(n)==="[object Number]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function M0(n){return Ln(n)==="[object Boolean]"&&(!Fe||!(typeof n=="object"&&Fe in n))}function Ky(n){if(Di)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!qu)return!1;try{return qu.call(n),!0}catch{}return!1}function A0(n){if(!n||typeof n!="object"||!Wu)return!1;try{return Wu.call(n),!0}catch{}return!1}var k0=Object.prototype.hasOwnProperty||function(n){return n in this};function dn(n,e){return k0.call(n,e)}function Ln(n){return v0.call(n)}function N0(n){if(n.name)return n.name;var e=w0.call(I0.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function Yy(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}function P0(n){if(!rl||!n||typeof n!="object")return!1;try{rl.call(n);try{il.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function R0(n){if(!us||!n||typeof n!="object")return!1;try{us.call(n,us);try{fs.call(n,fs)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function L0(n){if(!Ly||!n||typeof n!="object")return!1;try{return Ly.call(n),!0}catch{}return!1}function O0(n){if(!il||!n||typeof n!="object")return!1;try{il.call(n);try{rl.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function j0(n){if(!fs||!n||typeof n!="object")return!1;try{fs.call(n,fs);try{us.call(n,us)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function H0(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function Qy(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return Qy(Qu.call(n,0,e.maxStringLength),e)+r}var i=E0[e.quoteStyle||"single"];i.lastIndex=0;var o=Rn.call(Rn.call(n,i,"\\$1"),/[\x00-\x1f]/g,$0);return Zy(o,"single",e)}function $0(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+b0.call(e.toString(16))}function ds(n){return"Object("+n+")"}function Uu(n){return n+" { ? }"}function Wy(n,e,t,r){var i=r?Zu(t,r):qt.call(t,", ");return n+" ("+e+") {"+i+"}"}function V0(n){for(var e=0;e<n.length;e++)if(Yy(n[e],`
`)>=0)return!1;return!0}function B0(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=qt.call(Array(n.indent+1)," ");else return null;return{base:t,prev:qt.call(Array(e+1),t)}}function Zu(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+qt.call(n,","+t)+`
`+e.prev}function nl(n,e){var t=zu(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=dn(n,i)?e(n[i],n):""}var o=typeof Fu=="function"?Fu(n):[],s;if(Di){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in n)dn(n,l)&&(t&&String(Number(l))===l&&l<n.length||Di&&s["$"+l]instanceof Symbol||(qy.call(/[^\w$]/,l)?r.push(e(l,n)+": "+e(n[l],n)):r.push(l+": "+e(n[l],n))));if(typeof Fu=="function")for(var c=0;c<o.length;c++)Gy.call(n,o[c])&&r.push("["+e(o[c])+"]: "+e(n[o[c]],n));return r}});var ev=V((u3,Jy)=>{"use strict";var F0=ps(),U0=Mr(),ol=function(n,e,t){for(var r=n,i;(i=r.next)!=null;r=i)if(i.key===e)return r.next=i.next,t||(i.next=n.next,n.next=i),i},W0=function(n,e){if(n){var t=ol(n,e);return t&&t.value}},q0=function(n,e,t){var r=ol(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},G0=function(n,e){return n?!!ol(n,e):!1},z0=function(n,e){if(n)return ol(n,e,!0)};Jy.exports=function(){var e,t={assert:function(r){if(!t.has(r))throw new U0("Side channel does not contain "+F0(r))},delete:function(r){var i=e&&e.next,o=z0(e,r);return o&&i&&i===o&&(e=void 0),!!o},get:function(r){return W0(e,r)},has:function(r){return G0(e,r)},set:function(r,i){e||(e={next:void 0}),q0(e,r,i)}};return t}});var Xu=V((f3,tv)=>{"use strict";tv.exports=Object});var rv=V((p3,nv)=>{"use strict";nv.exports=Error});var ov=V((h3,iv)=>{"use strict";iv.exports=EvalError});var av=V((m3,sv)=>{"use strict";sv.exports=RangeError});var cv=V((g3,lv)=>{"use strict";lv.exports=ReferenceError});var uv=V((y3,dv)=>{"use strict";dv.exports=SyntaxError});var pv=V((v3,fv)=>{"use strict";fv.exports=URIError});var mv=V((I3,hv)=>{"use strict";hv.exports=Math.abs});var yv=V((w3,gv)=>{"use strict";gv.exports=Math.floor});var Iv=V((b3,vv)=>{"use strict";vv.exports=Math.max});var bv=V((x3,wv)=>{"use strict";wv.exports=Math.min});var Ev=V((E3,xv)=>{"use strict";xv.exports=Math.pow});var Sv=V((C3,Cv)=>{"use strict";Cv.exports=Math.round});var Tv=V((S3,_v)=>{"use strict";_v.exports=Number.isNaN||function(e){return e!==e}});var Mv=V((_3,Dv)=>{"use strict";var Z0=Tv();Dv.exports=function(e){return Z0(e)||e===0?e:e<0?-1:1}});var kv=V((T3,Av)=>{"use strict";Av.exports=Object.getOwnPropertyDescriptor});var Ju=V((D3,Nv)=>{"use strict";var sl=kv();if(sl)try{sl([],"length")}catch{sl=null}Nv.exports=sl});var Rv=V((M3,Pv)=>{"use strict";var al=Object.defineProperty||!1;if(al)try{al({},"a",{value:1})}catch{al=!1}Pv.exports=al});var Ov=V((A3,Lv)=>{"use strict";Lv.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var $v=V((k3,Hv)=>{"use strict";var jv=typeof Symbol<"u"&&Symbol,K0=Ov();Hv.exports=function(){return typeof jv!="function"||typeof Symbol!="function"||typeof jv("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:K0()}});var ef=V((N3,Vv)=>{"use strict";Vv.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var tf=V((P3,Bv)=>{"use strict";var Y0=Xu();Bv.exports=Y0.getPrototypeOf||null});var Wv=V((R3,Uv)=>{"use strict";var Q0="Function.prototype.bind called on incompatible ",X0=Object.prototype.toString,J0=Math.max,eD="[object Function]",Fv=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},tD=function(e,t){for(var r=[],i=t||0,o=0;i<e.length;i+=1,o+=1)r[o]=e[i];return r},nD=function(n,e){for(var t="",r=0;r<n.length;r+=1)t+=n[r],r+1<n.length&&(t+=e);return t};Uv.exports=function(e){var t=this;if(typeof t!="function"||X0.apply(t)!==eD)throw new TypeError(Q0+t);for(var r=tD(arguments,1),i,o=function(){if(this instanceof i){var d=t.apply(this,Fv(r,arguments));return Object(d)===d?d:this}return t.apply(e,Fv(r,arguments))},s=J0(0,t.length-r.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+nD(a,",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var c=function(){};c.prototype=t.prototype,i.prototype=new c,c.prototype=null}return i}});var hs=V((L3,qv)=>{"use strict";var rD=Wv();qv.exports=Function.prototype.bind||rD});var ll=V((O3,Gv)=>{"use strict";Gv.exports=Function.prototype.call});var nf=V((j3,zv)=>{"use strict";zv.exports=Function.prototype.apply});var Kv=V((H3,Zv)=>{"use strict";Zv.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var Qv=V(($3,Yv)=>{"use strict";var iD=hs(),oD=nf(),sD=ll(),aD=Kv();Yv.exports=aD||iD.call(sD,oD)});var rf=V((V3,Xv)=>{"use strict";var lD=hs(),cD=Mr(),dD=ll(),uD=Qv();Xv.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new cD("a function is required");return uD(lD,dD,e)}});var iI=V((B3,rI)=>{"use strict";var fD=rf(),Jv=Ju(),tI;try{tI=[].__proto__===Array.prototype}catch(n){if(!n||typeof n!="object"||!("code"in n)||n.code!=="ERR_PROTO_ACCESS")throw n}var of=!!tI&&Jv&&Jv(Object.prototype,"__proto__"),nI=Object,eI=nI.getPrototypeOf;rI.exports=of&&typeof of.get=="function"?fD([of.get]):typeof eI=="function"?function(e){return eI(e==null?e:nI(e))}:!1});var cI=V((F3,lI)=>{"use strict";var oI=ef(),sI=tf(),aI=iI();lI.exports=oI?function(e){return oI(e)}:sI?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return sI(e)}:aI?function(e){return aI(e)}:null});var uI=V((U3,dI)=>{"use strict";var pD=Function.prototype.call,hD=Object.prototype.hasOwnProperty,mD=hs();dI.exports=mD.call(pD,hD)});var ul=V((W3,yI)=>{"use strict";var Y,gD=Xu(),yD=rv(),vD=ov(),ID=av(),wD=cv(),Ni=uv(),ki=Mr(),bD=pv(),xD=mv(),ED=yv(),CD=Iv(),SD=bv(),_D=Ev(),TD=Sv(),DD=Mv(),mI=Function,sf=function(n){try{return mI('"use strict"; return ('+n+").constructor;")()}catch{}},ms=Ju(),MD=Rv(),af=function(){throw new ki},AD=ms?(function(){try{return arguments.callee,af}catch{try{return ms(arguments,"callee").get}catch{return af}}})():af,Mi=$v()(),Re=cI(),kD=tf(),ND=ef(),gI=nf(),gs=ll(),Ai={},PD=typeof Uint8Array>"u"||!Re?Y:Re(Uint8Array),Ar={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Y:ArrayBuffer,"%ArrayIteratorPrototype%":Mi&&Re?Re([][Symbol.iterator]()):Y,"%AsyncFromSyncIteratorPrototype%":Y,"%AsyncFunction%":Ai,"%AsyncGenerator%":Ai,"%AsyncGeneratorFunction%":Ai,"%AsyncIteratorPrototype%":Ai,"%Atomics%":typeof Atomics>"u"?Y:Atomics,"%BigInt%":typeof BigInt>"u"?Y:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Y:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Y:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":yD,"%eval%":eval,"%EvalError%":vD,"%Float16Array%":typeof Float16Array>"u"?Y:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Y:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Y:FinalizationRegistry,"%Function%":mI,"%GeneratorFunction%":Ai,"%Int8Array%":typeof Int8Array>"u"?Y:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Y:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Mi&&Re?Re(Re([][Symbol.iterator]())):Y,"%JSON%":typeof JSON=="object"?JSON:Y,"%Map%":typeof Map>"u"?Y:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Mi||!Re?Y:Re(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":gD,"%Object.getOwnPropertyDescriptor%":ms,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Y:Promise,"%Proxy%":typeof Proxy>"u"?Y:Proxy,"%RangeError%":ID,"%ReferenceError%":wD,"%Reflect%":typeof Reflect>"u"?Y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Y:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Mi||!Re?Y:Re(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Mi&&Re?Re(""[Symbol.iterator]()):Y,"%Symbol%":Mi?Symbol:Y,"%SyntaxError%":Ni,"%ThrowTypeError%":AD,"%TypedArray%":PD,"%TypeError%":ki,"%Uint8Array%":typeof Uint8Array>"u"?Y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Y:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Y:Uint32Array,"%URIError%":bD,"%WeakMap%":typeof WeakMap>"u"?Y:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Y:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Y:WeakSet,"%Function.prototype.call%":gs,"%Function.prototype.apply%":gI,"%Object.defineProperty%":MD,"%Object.getPrototypeOf%":kD,"%Math.abs%":xD,"%Math.floor%":ED,"%Math.max%":CD,"%Math.min%":SD,"%Math.pow%":_D,"%Math.round%":TD,"%Math.sign%":DD,"%Reflect.getPrototypeOf%":ND};if(Re)try{null.error}catch(n){fI=Re(Re(n)),Ar["%Error.prototype%"]=fI}var fI,RD=function n(e){var t;if(e==="%AsyncFunction%")t=sf("async function () {}");else if(e==="%GeneratorFunction%")t=sf("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=sf("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&Re&&(t=Re(i.prototype))}return Ar[e]=t,t},pI={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ys=hs(),cl=uI(),LD=ys.call(gs,Array.prototype.concat),OD=ys.call(gI,Array.prototype.splice),hI=ys.call(gs,String.prototype.replace),dl=ys.call(gs,String.prototype.slice),jD=ys.call(gs,RegExp.prototype.exec),HD=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$D=/\\(\\)?/g,VD=function(e){var t=dl(e,0,1),r=dl(e,-1);if(t==="%"&&r!=="%")throw new Ni("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new Ni("invalid intrinsic syntax, expected opening `%`");var i=[];return hI(e,HD,function(o,s,a,l){i[i.length]=a?hI(l,$D,"$1"):s||o}),i},BD=function(e,t){var r=e,i;if(cl(pI,r)&&(i=pI[r],r="%"+i[0]+"%"),cl(Ar,r)){var o=Ar[r];if(o===Ai&&(o=RD(r)),typeof o>"u"&&!t)throw new ki("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Ni("intrinsic "+e+" does not exist!")};yI.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new ki("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ki('"allowMissing" argument must be a boolean');if(jD(/^%?[^%]*%?$/,e)===null)throw new Ni("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=VD(e),i=r.length>0?r[0]:"",o=BD("%"+i+"%",t),s=o.name,a=o.value,l=!1,c=o.alias;c&&(i=c[0],OD(r,LD([0,1],c)));for(var d=1,u=!0;d<r.length;d+=1){var f=r[d],p=dl(f,0,1),h=dl(f,-1);if((p==='"'||p==="'"||p==="`"||h==='"'||h==="'"||h==="`")&&p!==h)throw new Ni("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(l=!0),i+="."+f,s="%"+i+"%",cl(Ar,s))a=Ar[s];else if(a!=null){if(!(f in a)){if(!t)throw new ki("base intrinsic for "+e+" exists, but the property is not available.");return}if(ms&&d+1>=r.length){var w=ms(a,f);u=!!w,u&&"get"in w&&!("originalValue"in w.get)?a=w.get:a=a[f]}else u=cl(a,f),a=a[f];u&&!l&&(Ar[s]=a)}}return a}});var lf=V((q3,wI)=>{"use strict";var vI=ul(),II=rf(),FD=II([vI("%String.prototype.indexOf%")]);wI.exports=function(e,t){var r=vI(e,!!t);return typeof r=="function"&&FD(e,".prototype.")>-1?II([r]):r}});var cf=V((G3,xI)=>{"use strict";var UD=ul(),vs=lf(),WD=ps(),qD=Mr(),bI=UD("%Map%",!0),GD=vs("Map.prototype.get",!0),zD=vs("Map.prototype.set",!0),ZD=vs("Map.prototype.has",!0),KD=vs("Map.prototype.delete",!0),YD=vs("Map.prototype.size",!0);xI.exports=!!bI&&function(){var e,t={assert:function(r){if(!t.has(r))throw new qD("Side channel does not contain "+WD(r))},delete:function(r){if(e){var i=KD(e,r);return YD(e)===0&&(e=void 0),i}return!1},get:function(r){if(e)return GD(e,r)},has:function(r){return e?ZD(e,r):!1},set:function(r,i){e||(e=new bI),zD(e,r,i)}};return t}});var CI=V((z3,EI)=>{"use strict";var QD=ul(),pl=lf(),XD=ps(),fl=cf(),JD=Mr(),Pi=QD("%WeakMap%",!0),eM=pl("WeakMap.prototype.get",!0),tM=pl("WeakMap.prototype.set",!0),nM=pl("WeakMap.prototype.has",!0),rM=pl("WeakMap.prototype.delete",!0);EI.exports=Pi?function(){var e,t,r={assert:function(i){if(!r.has(i))throw new JD("Side channel does not contain "+XD(i))},delete:function(i){if(Pi&&i&&(typeof i=="object"||typeof i=="function")){if(e)return rM(e,i)}else if(fl&&t)return t.delete(i);return!1},get:function(i){return Pi&&i&&(typeof i=="object"||typeof i=="function")&&e?eM(e,i):t&&t.get(i)},has:function(i){return Pi&&i&&(typeof i=="object"||typeof i=="function")&&e?nM(e,i):!!t&&t.has(i)},set:function(i,o){Pi&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Pi),tM(e,i,o)):fl&&(t||(t=fl()),t.set(i,o))}};return r}:fl});var df=V((Z3,SI)=>{"use strict";var iM=Mr(),oM=ps(),sM=ev(),aM=cf(),lM=CI(),cM=lM||aM||sM;SI.exports=function(){var e,t={assert:function(r){if(!t.has(r))throw new iM("Side channel does not contain "+oM(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,i){e||(e=cM()),e.set(r,i)}};return t}});var hl=V((K3,_I)=>{"use strict";var dM=String.prototype.replace,uM=/%20/g,uf={RFC1738:"RFC1738",RFC3986:"RFC3986"};_I.exports={default:uf.RFC3986,formatters:{RFC1738:function(n){return dM.call(n,uM,"+")},RFC3986:function(n){return String(n)}},RFC1738:uf.RFC1738,RFC3986:uf.RFC3986}});var gf=V((Y3,MI)=>{"use strict";var fM=hl(),pM=df(),ff=Object.prototype.hasOwnProperty,kr=Array.isArray,gl=pM(),TI=function(e,t){return gl.set(e,t),e},ml=function(e){return gl.has(e)},hf=function(e){return gl.get(e)},DI=function(e,t){gl.set(e,t)},Gt=(function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),hM=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(kr(r)){for(var i=[],o=0;o<r.length;++o)typeof r[o]<"u"&&i.push(r[o]);t.obj[t.prop]=i}}},mf=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},mM=function n(e,t,r){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(kr(e))e.push(t);else if(e&&typeof e=="object")if(ml(e)){var i=hf(e)+1;e[i]=t,DI(e,i)}else(r&&(r.plainObjects||r.allowPrototypes)||!ff.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object"){if(ml(t)){for(var o=Object.keys(t),s=r&&r.plainObjects?{__proto__:null,0:e}:{0:e},a=0;a<o.length;a++){var l=parseInt(o[a],10);s[l+1]=t[o[a]]}return TI(s,hf(t)+1)}return[e].concat(t)}var c=e;return kr(e)&&!kr(t)&&(c=mf(e,r)),kr(e)&&kr(t)?(t.forEach(function(d,u){if(ff.call(e,u)){var f=e[u];f&&typeof f=="object"&&d&&typeof d=="object"?e[u]=n(f,d,r):e.push(d)}else e[u]=d}),e):Object.keys(t).reduce(function(d,u){var f=t[u];return ff.call(d,u)?d[u]=n(d[u],f,r):d[u]=f,d},c)},gM=function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},yM=function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},pf=1024,vM=function(e,t,r,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var a="",l=0;l<s.length;l+=pf){for(var c=s.length>=pf?s.slice(l,l+pf):s,d=[],u=0;u<c.length;++u){var f=c.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===fM.RFC1738&&(f===40||f===41)){d[d.length]=c.charAt(u);continue}if(f<128){d[d.length]=Gt[f];continue}if(f<2048){d[d.length]=Gt[192|f>>6]+Gt[128|f&63];continue}if(f<55296||f>=57344){d[d.length]=Gt[224|f>>12]+Gt[128|f>>6&63]+Gt[128|f&63];continue}u+=1,f=65536+((f&1023)<<10|c.charCodeAt(u)&1023),d[d.length]=Gt[240|f>>18]+Gt[128|f>>12&63]+Gt[128|f>>6&63]+Gt[128|f&63]}a+=d.join("")}return a},IM=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var o=t[i],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],d=s[c];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(t.push({obj:s,prop:c}),r.push(d))}return hM(t),e},wM=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},bM=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},xM=function(e,t,r,i){if(ml(e)){var o=hf(e)+1;return e[o]=t,DI(e,o),e}var s=[].concat(e,t);return s.length>r?TI(mf(s,{plainObjects:i}),s.length-1):s},EM=function(e,t){if(kr(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)};MI.exports={arrayToObject:mf,assign:gM,combine:xM,compact:IM,decode:yM,encode:vM,isBuffer:bM,isOverflow:ml,isRegExp:wM,maybeMap:EM,merge:mM}});var LI=V((Q3,RI)=>{"use strict";var kI=df(),yl=gf(),Is=hl(),CM=Object.prototype.hasOwnProperty,NI={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},zt=Array.isArray,SM=Array.prototype.push,PI=function(n,e){SM.apply(n,zt(e)?e:[e])},_M=Date.prototype.toISOString,AI=Is.default,Ae={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yl.encode,encodeValuesOnly:!1,filter:void 0,format:AI,formatter:Is.formatters[AI],indices:!1,serializeDate:function(e){return _M.call(e)},skipNulls:!1,strictNullHandling:!1},TM=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},yf={},DM=function n(e,t,r,i,o,s,a,l,c,d,u,f,p,h,w,I,b,y){for(var g=e,v=y,D=0,C=!1;(v=v.get(yf))!==void 0&&!C;){var x=v.get(e);if(D+=1,typeof x<"u"){if(x===D)throw new RangeError("Cyclic object value");C=!0}typeof v.get(yf)>"u"&&(D=0)}if(typeof d=="function"?g=d(t,g):g instanceof Date?g=p(g):r==="comma"&&zt(g)&&(g=yl.maybeMap(g,function(j){return j instanceof Date?p(j):j})),g===null){if(s)return c&&!I?c(t,Ae.encoder,b,"key",h):t;g=""}if(TM(g)||yl.isBuffer(g)){if(c){var T=I?t:c(t,Ae.encoder,b,"key",h);return[w(T)+"="+w(c(g,Ae.encoder,b,"value",h))]}return[w(t)+"="+w(String(g))]}var E=[];if(typeof g>"u")return E;var S;if(r==="comma"&&zt(g))I&&c&&(g=yl.maybeMap(g,c)),S=[{value:g.length>0?g.join(",")||null:void 0}];else if(zt(d))S=d;else{var A=Object.keys(g);S=u?A.sort(u):A}var B=l?String(t).replace(/\./g,"%2E"):String(t),F=i&&zt(g)&&g.length===1?B+"[]":B;if(o&&zt(g)&&g.length===0)return F+"[]";for(var Q=0;Q<S.length;++Q){var fe=S[Q],O=typeof fe=="object"&&fe&&typeof fe.value<"u"?fe.value:g[fe];if(!(a&&O===null)){var $=f&&l?String(fe).replace(/\./g,"%2E"):String(fe),N=zt(g)?typeof r=="function"?r(F,$):F:F+(f?"."+$:"["+$+"]");y.set(e,D);var R=kI();R.set(yf,y),PI(E,n(O,N,r,i,o,s,a,l,r==="comma"&&I&&zt(g)?null:c,d,u,f,p,h,w,I,b,R))}}return E},MM=function(e){if(!e)return Ae;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Ae.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Is.default;if(typeof e.format<"u"){if(!CM.call(Is.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=Is.formatters[r],o=Ae.filter;(typeof e.filter=="function"||zt(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in NI?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=Ae.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Ae.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ae.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ae.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ae.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ae.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ae.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ae.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ae.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ae.encodeValuesOnly,filter:o,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ae.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ae.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ae.strictNullHandling}};RI.exports=function(n,e){var t=n,r=MM(e),i,o;typeof r.filter=="function"?(o=r.filter,t=o("",t)):zt(r.filter)&&(o=r.filter,i=o);var s=[];if(typeof t!="object"||t===null)return"";var a=NI[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var c=kI(),d=0;d<i.length;++d){var u=i[d],f=t[u];r.skipNulls&&f===null||PI(s,DM(f,u,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}var p=s.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),p.length>0?h+p:""}});var $I=V((X3,HI)=>{"use strict";var On=gf(),vl=Object.prototype.hasOwnProperty,OI=Array.isArray,Ce={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:On.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},AM=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},jI=function(n,e,t){if(n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1)return n.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return n},kM="utf8=%26%2310003%3B",NM="utf8=%E2%9C%93",PM=function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,t.throwOnLimitExceeded?o+1:o);if(t.throwOnLimitExceeded&&s.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var a=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===NM?c="utf-8":s[l]===kM&&(c="iso-8859-1"),a=l,l=s.length);for(l=0;l<s.length;++l)if(l!==a){var d=s[l],u=d.indexOf("]="),f=u===-1?d.indexOf("="):u+1,p,h;if(f===-1?(p=t.decoder(d,Ce.decoder,c,"key"),h=t.strictNullHandling?null:""):(p=t.decoder(d.slice(0,f),Ce.decoder,c,"key"),p!==null&&(h=On.maybeMap(jI(d.slice(f+1),t,OI(r[p])?r[p].length:0),function(I){return t.decoder(I,Ce.decoder,c,"value")}))),h&&t.interpretNumericEntities&&c==="iso-8859-1"&&(h=AM(String(h))),d.indexOf("[]=")>-1&&(h=OI(h)?[h]:h),p!==null){var w=vl.call(r,p);w&&t.duplicates==="combine"?r[p]=On.combine(r[p],h,t.arrayLimit,t.plainObjects):(!w||t.duplicates==="last")&&(r[p]=h)}}return r},RM=function(n,e,t,r){var i=0;if(n.length>0&&n[n.length-1]==="[]"){var o=n.slice(0,-1).join("");i=Array.isArray(e)&&e[o]?e[o].length:0}for(var s=r?e:jI(e,t,i),a=n.length-1;a>=0;--a){var l,c=n[a];if(c==="[]"&&t.parseArrays)On.isOverflow(s)?l=s:l=t.allowEmptyArrays&&(s===""||t.strictNullHandling&&s===null)?[]:On.combine([],s,t.arrayLimit,t.plainObjects);else{l=t.plainObjects?{__proto__:null}:{};var d=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,u=t.decodeDotInKeys?d.replace(/%2E/g,"."):d,f=parseInt(u,10);!t.parseArrays&&u===""?l={0:s}:!isNaN(f)&&c!==u&&String(f)===u&&f>=0&&t.parseArrays&&f<=t.arrayLimit?(l=[],l[f]=s):u!=="__proto__"&&(l[u]=s)}s=l}return s},LM=function(e,t){var r=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(t.depth<=0)return!t.plainObjects&&vl.call(Object.prototype,r)&&!t.allowPrototypes?void 0:[r];var i=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,s=i.exec(r),a=s?r.slice(0,s.index):r,l=[];if(a){if(!t.plainObjects&&vl.call(Object.prototype,a)&&!t.allowPrototypes)return;l.push(a)}for(var c=0;(s=o.exec(r))!==null&&c<t.depth;){c+=1;var d=s[1].slice(1,-1);if(!t.plainObjects&&vl.call(Object.prototype,d)&&!t.allowPrototypes)return;l.push(s[1])}if(s){if(t.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+t.depth+" and strictDepth is true");l.push("["+r.slice(s.index)+"]")}return l},OM=function(e,t,r,i){if(e){var o=LM(e,r);if(o)return RM(o,t,r,i)}},jM=function(e){if(!e)return Ce;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?Ce.charset:e.charset,r=typeof e.duplicates>"u"?Ce.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ce.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ce.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ce.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ce.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ce.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ce.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ce.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ce.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ce.decoder,delimiter:typeof e.delimiter=="string"||On.isRegExp(e.delimiter)?e.delimiter:Ce.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ce.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ce.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ce.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ce.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ce.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ce.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}};HI.exports=function(n,e){var t=jM(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?{__proto__:null}:{};for(var r=typeof n=="string"?PM(n,t):n,i=t.plainObjects?{__proto__:null}:{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],l=OM(a,r[a],t,typeof n=="string");i=On.merge(i,l,t)}return t.allowSparse===!0?i:On.compact(i)}});var BI=V((J3,VI)=>{"use strict";var HM=LI(),$M=$I(),VM=hl();VI.exports={formats:VM,parse:$M,stringify:HM}});var bf=V(Li=>{"use strict";var BM=Ay();function gt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var FM=/^([a-z0-9.+-]+:)/i,UM=/:[0-9]*$/,WM=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,qM=["<",">",'"',"`"," ","\r",`
`,"	"],GM=["{","}","|","\\","^","`"].concat(qM),vf=["'"].concat(GM),FI=["%","/","?",";","#"].concat(vf),UI=["/","?","#"],zM=255,WI=/^[+a-z0-9A-Z_-]{0,63}$/,ZM=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,KM={javascript:!0,"javascript:":!0},If={javascript:!0,"javascript:":!0},Ri={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wf=BI();function ws(n,e,t){if(n&&typeof n=="object"&&n instanceof gt)return n;var r=new gt;return r.parse(n,e,t),r}gt.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",o=n.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),n=o.join(i);var a=n;if(a=a.trim(),!t&&n.split("#").length===1){var l=WM.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=wf.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=FM.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(t||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(c&&If[c])&&(a=a.substr(2),this.slashes=!0)}if(!If[c]&&(u||c&&!Ri[c])){for(var f=-1,p=0;p<UI.length;p++){var h=a.indexOf(UI[p]);h!==-1&&(f===-1||h<f)&&(f=h)}var w,I;f===-1?I=a.lastIndexOf("@"):I=a.lastIndexOf("@",f),I!==-1&&(w=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(w)),f=-1;for(var p=0;p<FI.length;p++){var h=a.indexOf(FI[p]);h!==-1&&(f===-1||h<f)&&(f=h)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var y=this.hostname.split(/\./),p=0,g=y.length;p<g;p++){var v=y[p];if(v&&!v.match(WI)){for(var D="",C=0,x=v.length;C<x;C++)v.charCodeAt(C)>127?D+="x":D+=v[C];if(!D.match(WI)){var T=y.slice(0,p),E=y.slice(p+1),S=v.match(ZM);S&&(T.push(S[1]),E.unshift(S[2])),E.length&&(a="/"+E.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>zM?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=BM.toASCII(this.hostname));var A=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+A,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!KM[d])for(var p=0,g=vf.length;p<g;p++){var F=vf[p];if(a.indexOf(F)!==-1){var Q=encodeURIComponent(F);Q===F&&(Q=escape(F)),a=a.split(F).join(Q)}}var fe=a.indexOf("#");fe!==-1&&(this.hash=a.substr(fe),a=a.slice(0,fe));var O=a.indexOf("?");if(O!==-1?(this.search=a.substr(O),this.query=a.substr(O+1),e&&(this.query=wf.parse(this.query)),a=a.slice(0,O)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Ri[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",$=this.search||"";this.path=A+$}return this.href=this.format(),this};function YM(n){return typeof n=="string"&&(n=ws(n)),n instanceof gt?n.format():gt.prototype.format.call(n)}gt.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=wf.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Ri[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+i+t+s+r};function QM(n,e){return ws(n,!1,!0).resolve(e)}gt.prototype.resolve=function(n){return this.resolveObject(ws(n,!1,!0)).format()};function XM(n,e){return n?ws(n,!1,!0).resolveObject(e):e}gt.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new gt;e.parse(n,!1,!0),n=e}for(var t=new gt,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];t[o]=this[o]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(t[l]=n[l])}return Ri[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!Ri[n.protocol]){for(var c=Object.keys(n),d=0;d<c.length;d++){var u=c[d];t[u]=n[u]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!If[n.protocol]){for(var g=(n.pathname||"").split("/");g.length&&!(n.host=g.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var f=t.pathname||"",p=t.search||"";t.path=f+p}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var h=t.pathname&&t.pathname.charAt(0)==="/",w=n.host||n.pathname&&n.pathname.charAt(0)==="/",I=w||h||t.host&&n.pathname,b=I,y=t.pathname&&t.pathname.split("/")||[],g=n.pathname&&n.pathname.split("/")||[],v=t.protocol&&!Ri[t.protocol];if(v&&(t.hostname="",t.port=null,t.host&&(y[0]===""?y[0]=t.host:y.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(g[0]===""?g[0]=n.host:g.unshift(n.host)),n.host=null),I=I&&(g[0]===""||y[0]==="")),w)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,y=g;else if(g.length)y||(y=[]),y.pop(),y=y.concat(g),t.search=n.search,t.query=n.query;else if(n.search!=null){if(v){t.host=y.shift(),t.hostname=t.host;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!y.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=y.slice(-1)[0],x=(t.host||n.host||y.length>1)&&(C==="."||C==="..")||C==="",T=0,E=y.length;E>=0;E--)C=y[E],C==="."?y.splice(E,1):C===".."?(y.splice(E,1),T++):T&&(y.splice(E,1),T--);if(!I&&!b)for(;T--;T)y.unshift("..");I&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),x&&y.join("/").substr(-1)!=="/"&&y.push("");var S=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(v){t.hostname=S?"":y.length?y.shift():"",t.host=t.hostname;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return I=I||t.host&&y.length,I&&!S&&y.unshift(""),y.length>0?t.pathname=y.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};gt.prototype.parseHost=function(){var n=this.host,e=UM.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};Li.parse=ws;Li.resolve=QM;Li.resolveObject=XM;Li.format=YM;Li.Url=gt});var GI=V((qI,Il)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof Il=="object"&&Il.exports?Il.exports=e():n.xmlserializer=e()})(qI,function(){var n=function(f){return f.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},e=function(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t=function(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},r=function(f){var p=f.value;return" "+f.name+'="'+e(p)+'"'},i=function(f){var p=f.tagName;return f.namespaceURI==="http://www.w3.org/1999/xhtml"&&(p=p.toLowerCase()),p},o=function(f,p){var h=Array.prototype.map.call(f.attributes||f.attrs,function(w){return w.name}).indexOf("xmlns")>=0;return!h&&(p||f.namespaceURI!==f.parentNode.namespaceURI)?' xmlns="'+f.namespaceURI+'"':""},s=function(f){return Array.prototype.map.call(f.childNodes,function(p){return u(p)}).join("")},a=function(f,p){var h="<"+i(f);return h+=o(f,p),Array.prototype.forEach.call(f.attributes||f.attrs,function(w){h+=r(w)}),f.childNodes.length>0?(h+=">",h+=s(f),h+="</"+i(f)+">"):h+="/>",h},l=function(f){var p=f.nodeValue||f.value||"";return t(p)},c=function(f){return"<!--"+f.data.replace(/-/g,"&#45;")+"-->"},d=function(f){return"<![CDATA["+f.nodeValue+"]]>"},u=function(f,p){var h=p&&p.rootNode;if(f.nodeName==="#document"||f.nodeName==="#document-fragment")return s(f);if(f.tagName)return a(f,h);if(f.nodeName==="#text")return l(f);if(f.nodeName==="#comment")return c(f);if(f.nodeName==="#cdata-section")return d(f)};return{serializeToString:function(f){return n(u(f,{rootNode:!0}))}}})});var KI=V(ZI=>{"use strict";var JM=function(n){var e=new XMLSerializer;return Array.prototype.map.call(n.childNodes,function(t){return e.serializeToString(t)}).join("")},eA=function(n){if(n.documentElement.tagName==="parsererror"&&n.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml")return n.documentElement;if((n.documentElement.tagName==="xml"||n.documentElement.tagName==="html")&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0];if(n.documentElement.tagName==="html"&&n.documentElement.childNodes&&n.documentElement.childNodes.length>0&&n.documentElement.childNodes[0].nodeName==="body"&&n.documentElement.childNodes[0].childNodes&&n.documentElement.childNodes[0].childNodes.length&&n.documentElement.childNodes[0].childNodes[0].nodeName==="parsererror")return n.documentElement.childNodes[0].childNodes[0]},zI=[new RegExp(`^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)
?</div>`),new RegExp(`^(.+)
`)],tA=function(n){var e=JM(n),t,r;for(t=0;t<zI.length;t++)if(r=zI[t].exec(e),r)return r[1]},nA=function(n){var e;if(n===null)throw new Error("Parse error");var t=eA(n);if(t!==void 0)throw e=tA(t)||"Parse error",new Error(e)};ZI.failOnParseError=function(n){return nA(n),n}});var bs=V(Ge=>{"use strict";var rA=bf();Ge.getDocumentBaseUrl=function(n){return n.baseURI!=="about:blank"?n.baseURI:null};Ge.clone=function(n){var e={},t;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e};Ge.cloneArray=function(n){return Array.prototype.slice.apply(n,[0])};Ge.joinUrl=function(n,e){return n?rA.resolve(n,e):e};Ge.isDataUri=function(n){return/^data:/.test(n)};Ge.collectAndReportErrors=function(n){var e=[];return Promise.all(n.map(function(t){return t.catch(function(r){e.push(r)})})).then(function(){return e})};var xf=null,iA=function(n,e){return e===!1||e==="none"||e==="repeated"?((xf===null||e!=="repeated")&&(xf=Date.now()),n+"?_="+xf):n};Ge.ajax=function(n,e){return new Promise(function(t,r){var i=new window.XMLHttpRequest,o=Ge.joinUrl(e.baseUrl,n),s,a=function(){r({msg:"Unable to load url",url:o})};s=iA(o,e.cache),i.addEventListener("load",function(){i.status===200||i.status===0?t(i.response):a()},!1),i.addEventListener("error",a,!1);try{i.open("GET",s,!0),i.overrideMimeType(e.mimeType),i.send(null)}catch{a()}})};Ge.binaryAjax=function(n,e){var t=Ge.clone(e);return t.mimeType="text/plain; charset=x-user-defined",Ge.ajax(n,t).then(function(r){for(var i="",o=0;o<r.length;o++)i+=String.fromCharCode(r.charCodeAt(o)&255);return i})};var oA=function(n){var e=function(t,r){return t.substring(0,r.length)===r};return e(n,"<?xml")||e(n,"<svg")?"image/svg+xml":"image/png"};Ge.getDataURIForImageURL=function(n,e){return Ge.binaryAjax(n,e).then(function(t){var r=btoa(t),i=oA(t);return"data:"+i+";base64,"+r})};var Ef=[],sA=function(n){return Ef.indexOf(n)<0&&Ef.push(n),Ef.indexOf(n)};Ge.memoize=function(n,e,t){if(typeof t!="object")throw new Error("cacheBucket is not an object");return function(){var r=Array.prototype.slice.call(arguments),i=e(r),o=sA(n),s;return t[o]&&t[o][i]?t[o][i]:(s=n.apply(null,r),t[o]=t[o]||{},t[o][i]=s,s)}}});var XI=V(QI=>{"use strict";var xs=bs(),aA=function(n,e){var t=null;n.hasAttribute("src")?t=n.getAttribute("src"):n.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=n.getAttributeNS("http://www.w3.org/1999/xlink","href"):n.hasAttribute("href")&&(t=n.getAttribute("href"));var r=xs.getDocumentBaseUrl(n.ownerDocument),i=xs.clone(e);return!i.baseUrl&&r&&(i.baseUrl=r),xs.getDataURIForImageURL(t,i).then(function(o){return o},function(o){throw{resourceType:"image",url:o.url,msg:"Unable to load image "+o.url}})},lA=function(n){return n.filter(function(e){var t=null;return e.hasAttribute("src")?t=e.getAttribute("src"):e.hasAttributeNS("http://www.w3.org/1999/xlink","href")?t=e.getAttributeNS("http://www.w3.org/1999/xlink","href"):e.hasAttribute("href")&&(t=e.getAttribute("href")),t!==null&&!xs.isDataUri(t)})},cA=function(n){return Array.prototype.filter.call(n,function(e){return e.type==="image"})},YI=function(n){return Array.prototype.slice.call(n)};QI.inline=function(n,e){var t=YI(n.getElementsByTagName("img")),r=YI(n.getElementsByTagName("image")),i=cA(n.getElementsByTagName("input"));t=t.concat(r),t=t.concat(i);var o=lA(t);return xs.collectAndReportErrors(o.map(function(s){return aA(s,e).then(function(a){s.attributes.src?s.attributes.src.value=a:s.attributes["xlink:href"]?s.attributes["xlink:href"].value=a:s.attributes.href&&(s.attributes.href.value=a)})}))}});var ew=V(JI=>{"use strict";var wl=bs(),dA=function(n,e){var t=n.attributes.src.value,r=wl.getDocumentBaseUrl(n.ownerDocument),i=wl.clone(e);return!i.baseUrl&&r&&(i.baseUrl=r),wl.ajax(t,i).catch(function(o){throw{resourceType:"script",url:o.url,msg:"Unable to load script "+o.url}})},uA=function(n){return n.replace(/<\//g,"<\\/")},fA=function(n,e){n.attributes.removeNamedItem("src"),n.textContent=uA(e)},pA=function(n){var e=n.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})};JI.inline=function(n,e){var t=pA(n);return wl.collectAndReportErrors(t.map(function(r){return dA(r,e).then(function(i){fA(r,i)})}))}});var bl=V(jn=>{"use strict";jn.unquoteString=function(n){var e=/^"(.*)"$/,t=/^'(.*)'$/;return e.test(n)?n.replace(e,"$1"):t.test(n)?n.replace(t,"$1"):n};jn.rulesForCssText=function(n,e){var t=document.implementation.createHTMLDocument(""),r=document.createElement("style"),i;return r.textContent=n,e&&e.nonce&&(r.nonce=e.nonce),t.body.appendChild(r),i=r.sheet.cssRules,Array.prototype.slice.call(i)};jn.cssRulesToText=function(n){return n.reduce(function(e,t){return e+t.cssText},"")};jn.exchangeRule=function(n,e,t,r){var i=n.indexOf(e);n[i]=jn.rulesForCssText(t,r)[0]};jn.changeFontFaceRuleSrc=function(n,e,t,r){var i="@font-face { font-family: "+e.style.getPropertyValue("font-family")+"; ";e.style.getPropertyValue("font-style")&&(i+="font-style: "+e.style.getPropertyValue("font-style")+"; "),e.style.getPropertyValue("font-weight")&&(i+="font-weight: "+e.style.getPropertyValue("font-weight")+"; "),e.style.getPropertyValue("unicode-range")&&(i+="unicode-range: "+e.style.getPropertyValue("unicode-range")+"; "),i+="src: "+t+"}",jn.exchangeRule(n,e,i,r)}});var tw=V(Es=>{"use strict";var hA=bl(),mA=function(n){var e=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return n.replace(e,"$1")};Es.extractCssUrl=function(n){var e=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/,t;if(!e.test(n))throw new Error("Invalid url");return t=e.exec(n)[1],hA.unquoteString(mA(t))};var gA=function(n){var e=`\\s*(?:"[^"]*"|'[^']*'|[^\\(]+)\\s*`,t="(url\\("+e+"\\)|[^,\\s]+)",r="(?:\\s*"+t+")+",i="^\\s*("+r+")(?:\\s*,\\s*("+r+"))*\\s*$",o=new RegExp(r,"g"),s,a=[],l=function(c){var d=new RegExp(t,"g"),u=[],f;for(f=d.exec(c);f;)u.push(f[1]),f=d.exec(c);return u};if(n.match(new RegExp(i))){for(s=o.exec(n);s;)a.push(l(s[0])),s=o.exec(n);return a}return[]},yA=function(n){var e,t;for(e=0;e<n.length;e++)try{return t=Es.extractCssUrl(n[e]),{url:t,idx:e}}catch{}};Es.parse=function(n){var e=gA(n);return e.map(function(t){var r=yA(t);return r?{preUrl:t.slice(0,r.idx),url:r.url,postUrl:t.slice(r.idx+1)}:{preUrl:t}})};Es.serialize=function(n){var e=n.map(function(t){var r=[].concat(t.preUrl);return t.url&&r.push('url("'+t.url+'")'),t.postUrl&&(r=r.concat(t.postUrl)),r.join(" ")});return e.join(", ")}});var rw=V((nw,Cf)=>{"use strict";(function(n){if(typeof nw=="object"&&typeof Cf<"u")Cf.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e=this,e.cssFontFaceSrc=n()}})(function(){var n,e,t;return(function r(i,o,s){function a(d,u){if(!o[d]){if(!i[d]){var f=typeof Yi=="function"&&Yi;if(!u&&f)return f(d,!0);if(l)return l(d,!0);var p=new Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p}var h=o[d]={exports:{}};i[d][0].call(h.exports,function(w){var I=i[d][1][w];return a(I||w)},h,h.exports,r,i,o,s)}return o[d].exports}for(var l=typeof Yi=="function"&&Yi,c=0;c<s.length;c++)a(s[c]);return a})({1:[function(r,i,o){"use strict";function s(c,d){function u(){this.constructor=c}u.prototype=d.prototype,c.prototype=new u}function a(c,d,u,f){this.message=c,this.expected=d,this.found=u,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}s(a,Error),a.buildMessage=function(c,d){var u={literal:function(y){return'"'+p(y.text)+'"'},class:function(y){var g="",v;for(v=0;v<y.parts.length;v++)g+=y.parts[v]instanceof Array?h(y.parts[v][0])+"-"+h(y.parts[v][1]):h(y.parts[v]);return"["+(y.inverted?"^":"")+g+"]"},any:function(y){return"any character"},end:function(y){return"end of input"},other:function(y){return y.description}};function f(y){return y.charCodeAt(0).toString(16).toUpperCase()}function p(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+f(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+f(g)})}function h(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+f(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+f(g)})}function w(y){return u[y.type](y)}function I(y){var g=new Array(y.length),v,D;for(v=0;v<y.length;v++)g[v]=w(y[v]);if(g.sort(),g.length>0){for(v=1,D=1;v<g.length;v++)g[v-1]!==g[v]&&(g[D]=g[v],D++);g.length=D}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function b(y){return y?'"'+p(y)+'"':"end of input"}return"Expected "+I(c)+" but "+b(d)+" found."};function l(c,d){d=d!==void 0?d:{};var u={},f={start:Of},p=Of,h="",w=function(){return[]},I=",",b=ze(",",!1),y=function(_,P){return[_].concat(P)},g=function(_){return[_]},v=function(_,P){return{url:_,format:P}},D=function(_){return{url:_}},C="url(",x=ze("url(",!1),T=")",E=ze(")",!1),S=function(_){return _},A="format(",B=ze("format(",!1),F="local(",Q=ze("local(",!1),fe=function(_){return{local:_}},O=/^[^)]/,$=Nt([")"],!0,!1),N=function(_){return Fw.extractValue(_.join(""))},R=/^[ \t\r\n\f]/,j=Nt([" ","	","\r",`
`,"\f"],!1,!1),M=0,U=0,K=[{line:1,column:1}],q=0,be=[],ae=0,Te;if("startRule"in d){if(!(d.startRule in f))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');p=f[d.startRule]}function Le(){return c.substring(U,M)}function xe(){return Ki(U,M)}function Oe(_,P){throw P=P!==void 0?P:Ki(U,M),Lf([jw(_)],c.substring(U,M),P)}function ot(_,P){throw P=P!==void 0?P:Ki(U,M),Hw(_,P)}function ze(_,P){return{type:"literal",text:_,ignoreCase:P}}function Nt(_,P,W){return{type:"class",parts:_,inverted:P,ignoreCase:W}}function ks(){return{type:"any"}}function Ow(){return{type:"end"}}function jw(_){return{type:"other",description:_}}function Rf(_){var P=K[_],W;if(P)return P;for(W=_-1;!K[W];)W--;for(P=K[W],P={line:P.line,column:P.column};W<_;)c.charCodeAt(W)===10?(P.line++,P.column=1):P.column++,W++;return K[_]=P,P}function Ki(_,P){var W=Rf(_),re=Rf(P);return{start:{offset:_,line:W.line,column:W.column},end:{offset:P,line:re.line,column:re.column}}}function yt(_){M<q||(M>q&&(q=M,be=[]),be.push(_))}function Hw(_,P){return new a(_,null,null,P)}function Lf(_,P,W){return new a(a.buildMessage(_,P),_,P,W)}function Of(){var _,P;return _=jf(),_===u&&(_=M,P=h,P!==u&&(U=_,P=w()),_=P),_}function jf(){var _,P,W,re,Vl,Wn;if(_=M,P=Hf(),P!==u){for(W=[],re=Or();re!==u;)W.push(re),re=Or();if(W!==u)if(c.charCodeAt(M)===44?(re=I,M++):(re=u,ae===0&&yt(b)),re!==u){for(Vl=[],Wn=Or();Wn!==u;)Vl.push(Wn),Wn=Or();Vl!==u?(Wn=jf(),Wn!==u?(U=_,P=y(P,Wn),_=P):(M=_,_=u)):(M=_,_=u)}else M=_,_=u;else M=_,_=u}else M=_,_=u;return _===u&&(_=M,P=Hf(),P!==u&&(U=_,P=g(P)),_=P),_}function Hf(){var _;return _=$w(),_===u&&(_=Bw()),_}function $w(){var _,P,W,re;if(_=M,P=$f(),P!==u){if(W=[],re=Or(),re!==u)for(;re!==u;)W.push(re),re=Or();else W=u;W!==u?(re=Vw(),re!==u?(U=_,P=v(P,re),_=P):(M=_,_=u)):(M=_,_=u)}else M=_,_=u;return _===u&&(_=M,P=$f(),P!==u&&(U=_,P=D(P)),_=P),_}function $f(){var _,P,W,re;return _=M,c.substr(M,4)===C?(P=C,M+=4):(P=u,ae===0&&yt(x)),P!==u?(W=$l(),W!==u?(c.charCodeAt(M)===41?(re=T,M++):(re=u,ae===0&&yt(E)),re!==u?(U=_,P=S(W),_=P):(M=_,_=u)):(M=_,_=u)):(M=_,_=u),_}function Vw(){var _,P,W,re;return _=M,c.substr(M,7)===A?(P=A,M+=7):(P=u,ae===0&&yt(B)),P!==u?(W=$l(),W!==u?(c.charCodeAt(M)===41?(re=T,M++):(re=u,ae===0&&yt(E)),re!==u?(U=_,P=S(W),_=P):(M=_,_=u)):(M=_,_=u)):(M=_,_=u),_}function Bw(){var _,P,W,re;return _=M,c.substr(M,6)===F?(P=F,M+=6):(P=u,ae===0&&yt(Q)),P!==u?(W=$l(),W!==u?(c.charCodeAt(M)===41?(re=T,M++):(re=u,ae===0&&yt(E)),re!==u?(U=_,P=fe(W),_=P):(M=_,_=u)):(M=_,_=u)):(M=_,_=u),_}function $l(){var _,P,W;if(_=M,P=[],O.test(c.charAt(M))?(W=c.charAt(M),M++):(W=u,ae===0&&yt($)),W!==u)for(;W!==u;)P.push(W),O.test(c.charAt(M))?(W=c.charAt(M),M++):(W=u,ae===0&&yt($));else P=u;return P!==u&&(U=_,P=N(P)),_=P,_}function Or(){var _;return R.test(c.charAt(M))?(_=c.charAt(M),M++):(_=u,ae===0&&yt(j)),_}var Fw=r("../util");if(Te=p(),Te!==u&&M===c.length)return Te;throw Te!==u&&M<c.length&&yt(Ow()),Lf(be,q<c.length?c.charAt(q):null,q<c.length?Ki(q,q+1):Ki(q,q))}i.exports={SyntaxError:a,parse:l}},{"../util":3}],2:[function(r,i,o){var s=r("./grammar");o.SyntaxError=function(a,l){this.message=a,this.offset=l},o.parse=function(a){try{return s.parse(a)}catch(l){throw new o.SyntaxError(l.message,l.offset)}},o.serialize=function(a){return a.map(function(l){var c;return l.url?(c='url("'+l.url+'")',l.format&&(c+=' format("'+l.format+'")')):c='local("'+l.local+'")',c}).join(", ")}},{"./grammar":1}],3:[function(r,i,o){var s=function(l){var c=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return l.replace(c,"$1")},a=function(l){var c=/^"(.*)"$/,d=/^'(.*)'$/;return c.test(l)?l.replace(c,"$1"):d.test(l)?l.replace(d,"$1"):l};o.extractValue=function(l){return a(s(l))}},{}]},{},[2])(2)})});var fw=V(Oi=>{"use strict";var kt=bs(),Cs=bl(),xl=tw(),El=rw(),ow=function(n,e,t){n.style.setProperty(e,t,n.style.getPropertyPriority(e))},sw=function(n){return n.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})},aw=function(n){var e=[];return n.forEach(function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})}),e},lw=function(n){return n.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})},cw=function(n){return n.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})},dw=function(n){var e=[];return n.forEach(function(t,r){t.url&&!kt.isDataUri(t.url)&&e.push(r)}),e},uw=function(n){var e=[];return n.forEach(function(t,r){t.url&&!kt.isDataUri(t.url)&&e.push(r)}),e};Oi.adjustPathsOfCssResources=function(n,e,t){var r=sw(e),i=aw(r),o=!1;return i.forEach(function(s){var a=xl.parse(s.value),l=dw(a),c;l.length>0&&(l.forEach(function(d){var u=a[d].url,f=kt.joinUrl(n,u);a[d].url=f}),c=xl.serialize(a),ow(s.rule,s.property,c),o=!0)}),lw(e).forEach(function(s){var a=s.style.getPropertyValue("src"),l,c;try{l=El.parse(a)}catch{return}c=uw(l),c.length>0&&(c.forEach(function(d){var u=l[d].url,f=kt.joinUrl(n,u);l[d].url=f}),Cs.changeFontFaceRuleSrc(e,s,El.serialize(l,t),t),o=!0)}),cw(e).forEach(function(s){var a=s.href,l=kt.joinUrl(n,a);Cs.exchangeRule(e,s,"@import url("+l+");",t),o=!0}),o};var iw=function(n,e,t){var r=n.indexOf(e);n.splice(r,1),t.forEach(function(i,o){n.splice(r+o,0,i)})},vA=function(n,e,t,r){var i=e.href,o;return i=Cs.unquoteString(i),o=kt.joinUrl(r.baseUrl,i),t.indexOf(o)>=0?(iw(n,e,[]),Promise.resolve([])):(t.push(o),kt.ajax(i,r).then(function(s){var a=Cs.rulesForCssText(s,r);return Oi.loadCSSImportsForRules(a,t,r).then(function(l){return Oi.adjustPathsOfCssResources(i,a,r),iw(n,e,a),l.errors})},function(s){throw{resourceType:"stylesheet",url:s.url,msg:"Unable to load stylesheet "+s.url}}))};Oi.loadCSSImportsForRules=function(n,e,t){var r=cw(n),i=[],o=!1;return Promise.all(r.map(function(s){return vA(n,s,e,t).then(function(a){i=i.concat(a),o=!0},function(a){i.push(a)})})).then(function(){return{hasChanges:o,errors:i}})};var IA=function(n,e){var t=xl.parse(n),r=dw(t),i=!1;return kt.collectAndReportErrors(r.map(function(o){var s=t[o].url;return kt.getDataURIForImageURL(s,e).then(function(a){t[o].url=a,i=!0},function(a){throw{resourceType:"backgroundImage",url:a.url,msg:"Unable to load background-image "+a.url}})})).then(function(o){return{backgroundValue:xl.serialize(t),hasChanges:i,errors:o}})},wA=function(n,e){var t=sw(n),r=aw(t),i=[],o=!1;return Promise.all(r.map(function(s){return IA(s.value,e).then(function(a){a.hasChanges&&(ow(s.rule,s.property,a.backgroundValue),o=!0),i=i.concat(a.errors)})})).then(function(){return{hasChanges:o,errors:i}})},bA=function(n,e){var t=!1,r,i;try{r=El.parse(n)}catch{r=[]}return i=uw(r),kt.collectAndReportErrors(i.map(function(o){var s=r[o],a=s.format||"woff";return kt.binaryAjax(s.url,e).then(function(l){var c=btoa(l);s.url="data:font/"+a+";base64,"+c,t=!0},function(l){throw{resourceType:"fontFace",url:l.url,msg:"Unable to load font-face "+l.url}})})).then(function(o){return{srcDeclarationValue:El.serialize(r),hasChanges:t,errors:o}})},xA=function(n,e){var t=lw(n),r=[],i=!1;return Promise.all(t.map(function(o){var s=o.style.getPropertyValue("src");return bA(s,e).then(function(a){a.hasChanges&&(Cs.changeFontFaceRuleSrc(n,o,a.srcDeclarationValue,e),i=!0),r=r.concat(a.errors)})})).then(function(){return{hasChanges:i,errors:r}})};Oi.loadAndInlineCSSResourcesForRules=function(n,e){var t=!1,r=[];return Promise.all([wA,xA].map(function(i){return i(n,e).then(function(o){t=t||o.hasChanges,r=r.concat(o.errors)})})).then(function(){return{hasChanges:t,errors:r}})}});var hw=V(Zt=>{"use strict";var un=bs(),EA=XI(),CA=ew(),Ss=fw(),Cl=bl(),SA=function(n){return un.joinUrl(n,".")},_A=function(n){var e=n.map(function(t,r){return r===n.length-1&&(t={baseUrl:SA(t.baseUrl)}),JSON.stringify(t)});return e},pw=function(n,e){return e.cache!==!1&&e.cache!=="none"&&e.cacheBucket?un.memoize(n,_A,e.cacheBucket):n},TA=function(n,e,t){var r=Cl.rulesForCssText(n,t);return Ss.loadCSSImportsForRules(r,e,t).then(function(i){return Ss.loadAndInlineCSSResourcesForRules(r,t).then(function(o){var s=i.errors.concat(o.errors),a=i.hasChanges||o.hasChanges;return a&&(n=Cl.cssRulesToText(r)),{hasChanges:a,content:n,errors:s}})})},DA=function(n,e,t){var r=n.textContent,i=pw(TA,e);return i(r,t,e).then(function(o){return o.hasChanges&&(n.childNodes[0].nodeValue=o.content),un.cloneArray(o.errors)})},MA=function(n){var e=n.getElementsByTagName("style");return Array.prototype.filter.call(e,function(t){return!t.attributes.type||t.attributes.type.value==="text/css"})};Zt.loadAndInlineStyles=function(n,e){var t=MA(n),r=[],i=[],o;return o=un.clone(e),o.baseUrl=o.baseUrl||un.getDocumentBaseUrl(n),Promise.all(t.map(function(s){return DA(s,o,i).then(function(a){r=r.concat(a)})})).then(function(){return r})};var AA=function(n,e){var t=n.parentNode,r;e=e.trim(),e&&(r=n.ownerDocument.createElement("style"),r.type="text/css",r.appendChild(n.ownerDocument.createTextNode(e)),t.insertBefore(r,n)),t.removeChild(n)},kA=function(n,e){return un.ajax(n,e).then(function(t){var r=Cl.rulesForCssText(t,e);return{content:t,cssRules:r}}).then(function(t){var r=Ss.adjustPathsOfCssResources(n,t.cssRules,e);return{content:t.content,cssRules:t.cssRules,hasChanges:r}}).then(function(t){return Ss.loadCSSImportsForRules(t.cssRules,[],e).then(function(r){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||r.hasChanges,errors:r.errors}})}).then(function(t){return Ss.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(r){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||r.hasChanges,errors:t.errors.concat(r.errors)}})}).then(function(t){var r=t.content;return t.hasChanges&&(r=Cl.cssRulesToText(t.cssRules)),{content:r,errors:t.errors}})},NA=function(n,e){var t=n.attributes.href.value,r=un.getDocumentBaseUrl(n.ownerDocument),i=un.clone(e);!i.baseUrl&&r&&(i.baseUrl=r);var o=pw(kA,e);return o(t,i).then(function(s){return{content:s.content,errors:un.cloneArray(s.errors)}})},PA=function(n){var e=n.getElementsByTagName("link");return Array.prototype.filter.call(e,function(t){return t.attributes.rel&&t.attributes.rel.value==="stylesheet"&&(!t.attributes.type||t.attributes.type.value==="text/css")})};Zt.loadAndInlineCssLinks=function(n,e){var t=PA(n),r=[];return Promise.all(t.map(function(i){return NA(i,e).then(function(o){AA(i,o.content+`
`),r=r.concat(o.errors)},function(o){r.push({resourceType:"stylesheet",url:o.url,msg:"Unable to load stylesheet "+o.url})})})).then(function(){return r})};Zt.loadAndInlineImages=EA.inline;Zt.loadAndInlineScript=CA.inline;Zt.inlineReferences=function(n,e){var t=[],r=[Zt.loadAndInlineImages,Zt.loadAndInlineStyles,Zt.loadAndInlineCssLinks];return e.inlineScripts!==!1&&r.push(Zt.loadAndInlineScript),Promise.all(r.map(function(i){return i(n,e).then(function(o){t=t.concat(o)})})).then(function(){return t})}});var gw=V((mw,Sl)=>{"use strict";(function(n,e){n===void 0&&window!==void 0&&(n=window),typeof define=="function"&&define.amd?define(["url","xmlserializer","sane-domparser-error","inlineresources"],function(t,r,i,o){return n.rasterizeHTML=e(t,r,i,o)}):typeof Sl=="object"&&Sl.exports?Sl.exports=e(bf(),GI(),KI(),hw()):n.rasterizeHTML=e(n.url,n.xmlserializer,n.sanedomparsererror,n.inlineresources)})(mw,function(n,e,t,r){var i=(function(p){"use strict";var h={},w=[];h.joinUrl=function(y,g){return y?p.resolve(y,g):g},h.getConstantUniqueIdFor=function(y){return w.indexOf(y)<0&&w.push(y),w.indexOf(y)},h.clone=function(y){var g={},v;for(v in y)y.hasOwnProperty(v)&&(g[v]=y[v]);return g};var I=function(y){return typeof y=="object"&&y!==null},b=function(y){return I(y)&&Object.prototype.toString.apply(y).match(/\[object (Canvas|HTMLCanvasElement|OffscreenCanvas)\]/i)};return h.parseOptionalParameters=function(y){var g={canvas:null,options:{}};return y[0]==null||b(y[0])?(g.canvas=y[0]||null,g.options=h.clone(y[1])):g.options=h.clone(y[0]),g},h})(n),o=(function(p){"use strict";var h={},w=function(I,b,y){var g=I[b];return I[b]=function(){var v=Array.prototype.slice.call(arguments);return y.apply(this,[v,g])},g};return h.baseUrlRespectingXhr=function(I,b){var y=function(){var g=new I;return w(g,"open",function(v,D){var C=v.shift(),x=v.shift(),T=p.joinUrl(b,x);return D.apply(this,[C,T].concat(v))}),g};return y},h.finishNotifyingXhr=function(I){var b=0,y=0,g=!1,v,D=new Promise(function(x){v=function(){var T=b-y;T<=0&&g&&x({totalCount:b})}}),C=function(){var x=new I;return w(x,"send",function(T,E){return b+=1,E.apply(this,arguments)}),x.addEventListener("load",function(){y+=1,v()}),x};return C.waitForRequestsToFinish=function(){return g=!0,v(),D},C},h})(i),s=(function(){"use strict";var p={},h=function(C){return Array.prototype.slice.call(C)};p.addClassName=function(C,x){C.className+=" "+x},p.addClassNameRecursively=function(C,x){p.addClassName(C,x),C.parentNode!==C.ownerDocument&&p.addClassNameRecursively(C.parentNode,x)};var w=function(C,x){var T=C.parentStyleSheet,E=h(T.cssRules).indexOf(C);T.insertRule(x,E+1),T.deleteRule(E)},I=function(C,x){var T=C.cssText.replace(/^[^\{]+/,""),E=x+" "+T;w(C,E)},b=function(C){return h(C).reduce(function(x,T){return x+T.cssText},"")},y=function(C){C.textContent=b(C.sheet.cssRules)},g=function(C){var x=document.implementation.createHTMLDocument(""),T=document.createElement("style");T.textContent=C.textContent,x.body.appendChild(T),C.sheet=T.sheet},v=function(C){return"((?:^|[^.#:\\w])|(?=\\W))("+C.join("|")+")(?=\\W|$)"},D=function(C,x,T){var E=v(x);h(C.querySelectorAll("style")).forEach(function(S){typeof S.sheet>"u"&&g(S);var A=h(S.sheet.cssRules).filter(function(B){return B.selectorText&&new RegExp(E,"i").test(B.selectorText)});A.length&&(A.forEach(function(B){var F=B.selectorText.replace(new RegExp(E,"gi"),function(Q,fe,O){return fe+T(O)});F!==B.selectorText&&I(B,F)}),y(S))})};return p.rewriteCssSelectorWith=function(C,x,T){D(C,[x],function(){return T})},p.lowercaseCssTypeSelectors=function(C,x){D(C,x,function(T){return T.toLowerCase()})},p.findHtmlOnlyNodeNames=function(C){var x=C.ownerDocument.createTreeWalker(C,NodeFilter.SHOW_ELEMENT),T={},E={},S;do S=x.currentNode.tagName.toLowerCase(),x.currentNode.namespaceURI==="http://www.w3.org/1999/xhtml"?T[S]=!0:E[S]=!0;while(x.nextNode());return Object.keys(T).filter(function(A){return!E[A]})},p})(),a=(function(p){"use strict";var h={},w=function(b){return Array.prototype.slice.call(b)},I={active:!0,hover:!0,focus:!1,target:!1};return h.fakeUserAction=function(b,y,g){var v=b.querySelector(y),D=":"+g,C="rasterizehtml"+g;v&&(I[g]?p.addClassNameRecursively(v,C):p.addClassName(v,C),p.rewriteCssSelectorWith(b,D,"."+C))},h.persistInputValues=function(b){var y=b.querySelectorAll("input"),g=b.querySelectorAll("textarea"),v=function(D){return D.type==="checkbox"||D.type==="radio"};w(y).filter(v).forEach(function(D){D.checked?D.setAttribute("checked",""):D.removeAttribute("checked")}),w(y).filter(function(D){return!v(D)}).forEach(function(D){D.setAttribute("value",D.value)}),w(g).forEach(function(D){D.textContent=D.value})},h.rewriteTagNameSelectorsToLowerCase=function(b){p.lowercaseCssTypeSelectors(b,p.findHtmlOnlyNodeNames(b))},h})(s),l=(function(p,h,w,I){"use strict";var b={},y=function(O,$,N,R){var j=O.createElement($);return j.style.visibility="hidden",j.style.width=N+"px",j.style.height=R+"px",j.style.position="absolute",j.style.top=-1e4-R+"px",j.style.left=-1e4-N+"px",O.getElementsByTagName("body")[0].appendChild(j),j},g=function(O){return O>0?new Promise(function($){setTimeout($,O)}):Promise.resolve()};b.executeJavascript=function(O,$){return new Promise(function(N){var R=y(I.document,"iframe",$.width,$.height),j=O.outerHTML,M=[],U=$.executeJsTimeout||0,K=function(){I.document.getElementsByTagName("body")[0].removeChild(R)},q=function(){var Le=R.contentDocument;N({document:Le,errors:M,cleanUp:K})},be=R.contentWindow.XMLHttpRequest,ae=h.finishNotifyingXhr(be),Te=h.baseUrlRespectingXhr(ae,$.baseUrl);R.onload=function(){g(U).then(ae.waitForRequestsToFinish).then(q)},R.contentDocument.open(),R.contentWindow.XMLHttpRequest=Te,R.contentWindow.onerror=function(Le){M.push({resourceType:"scriptExecution",msg:Le})},R.contentDocument.write("<!DOCTYPE html>"),R.contentDocument.write(j),R.contentDocument.close()})};var v=function(O,$,N){var R=O.createElement("iframe");return R.style.width=$+"px",R.style.height=N+"px",R.style.visibility="hidden",R.style.position="absolute",R.style.top=-1e4-N+"px",R.style.left=-1e4-$+"px",R.style.borderWidth=0,R.sandbox="allow-same-origin",R.scrolling="no",R},D=function(O,$,N){var R=Math.floor(O/N),j=Math.floor($/N);return v(I.document,R,j)},C=function(O,$,N,R){return{width:Math.max(O.width*R,$),height:Math.max(O.height*R,N)}},x=function(O,$){var N=O.querySelector($);if(N)return N;if(O.ownerDocument.querySelector($)===O)return O;throw{message:"Clipping selector not found"}},T=function(O,$,N,R,j){var M=Math.max(O.scrollWidth,O.clientWidth),U=Math.max(O.scrollHeight,O.clientHeight),K,q,be,ae,Te,Le,xe,Oe;return $?(Le=x(O,$),xe=Le.getBoundingClientRect(),K=xe.top,q=xe.left,be=xe.width,ae=xe.height):(K=0,q=0,be=M,ae=U),Oe=C({width:be,height:ae},N,R,j),Te=I.getComputedStyle(O.ownerDocument.documentElement).fontSize,{left:q,top:K,width:Oe.width,height:Oe.height,viewportWidth:M,viewportHeight:U,rootFontSize:Te}},E=function(O,$){var N=O.tagName;return $.querySelector(N)},S=function(O){var $=O.tagName.toLowerCase();return $==="html"||$==="body"?O.outerHTML:'<body style="margin: 0;">'+O.outerHTML+"</body>"};b.calculateDocumentContentSize=function(O,$){return new Promise(function(N,R){var j=$.zoom||1,M;M=D($.width,$.height,j),I.document.getElementsByTagName("body")[0].appendChild(M),M.onload=function(){var U=M.contentDocument,K;try{K=T(E(O,U),$.clip,$.width,$.height,j),N(K)}catch(q){R(q)}finally{I.document.getElementsByTagName("body")[0].removeChild(M)}},M.contentDocument.open(),M.contentDocument.write("<!DOCTYPE html>"),M.contentDocument.write(S(O)),M.contentDocument.close()})},b.parseHtmlFragment=function(O){var $=I.document.implementation.createHTMLDocument("");$.documentElement.innerHTML=O;var N=$.querySelector("body").firstChild;if(!N)throw"Invalid source";return N};var A=function(O,$){var N=/<html((?:\s+[^>]*)?)>/im.exec($),R=I.document.implementation.createHTMLDocument(""),j,M,U,K;if(N)for(j="<div"+N[1]+"></div>",R.documentElement.innerHTML=j,U=R.querySelector("div"),M=0;M<U.attributes.length;M++)K=U.attributes[M],O.documentElement.setAttribute(K.name,K.value)};b.parseHTML=function(O){var $=I.document.implementation.createHTMLDocument("");return $.documentElement.innerHTML=O,A($,O),$};var B=function(O){try{return w.failOnParseError(O)}catch($){throw{message:"Invalid source",originalError:$}}};b.validateXHTML=function(O){var $=new DOMParser,N=$.parseFromString(O,"application/xml");B(N)};var F=null,Q=function(O,$){return $==="none"||$==="repeated"?((F===null||$!=="repeated")&&(F=Date.now()),O+"?_="+F):O},fe=function(O,$){return new Promise(function(N,R){var j=new window.XMLHttpRequest,M=p.joinUrl($.baseUrl,O),U=Q(M,$.cache),K=function(q){R({message:"Unable to load page",originalError:q})};j.addEventListener("load",function(){j.status===200||j.status===0?N(j.responseXML):K(j.statusText)},!1),j.addEventListener("error",function(q){K(q)},!1);try{j.open("GET",U,!0),j.responseType="document",j.send(null)}catch(q){K(q)}})};return b.loadDocument=function(O,$){return fe(O,$).then(function(N){return B(N)})},b})(i,o,t,window),c=(function(){"use strict";var p={},h=function(x,T){return T?URL.createObjectURL(new Blob([x],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(x)},w=function(x){x instanceof Blob&&URL.revokeObjectURL(x)},I='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',b=function(x){return new Promise(function(T,E){var S=document.createElement("canvas"),A=new Image;A.onload=function(){var B=S.getContext("2d");try{B.drawImage(A,0,0),S.toDataURL("image/png"),T(!0)}catch{T(!1)}},A.onerror=E,A.src=x})},y=function(){var x=h(I,!0);return b(x).then(function(T){return w(x),T?!1:b(h(I,!1)).then(function(E){return E})},function(){return!1})},g=function(){return new Promise(function(x,T){y().then(function(E){x(!E)},function(){T()})})},v,D=function(){return v===void 0&&(v=g()),v},C=function(x){return D().then(function(T){return h(x,T)})};return p.renderSvg=function(x){return new Promise(function(T,E){var S,A,B=function(){A.onload=null,A.onerror=null},F=function(){S&&w(S)};A=new Image,A.onload=function(){B(),F(),T(A)},A.onerror=function(){F(),E()},C(x).then(function(Q){S=Q,A.src=S},E)})},p})(window),d=(function(p,h,w,I){"use strict";var b={},y=function(E,S){var A=S||1,B={width:E.width,height:E.height,"font-size":E.rootFontSize};return A!==1&&(B.style="transform:scale("+A+"); transform-origin: 0 0;"),B},g=function(E){var S,A,B,F;S=Math.round(E.viewportWidth),A=Math.round(E.viewportHeight),B=-E.left,F=-E.top;var Q={x:B,y:F,width:S,height:A};return Q},v=function(E){var S=E.style||"";E.style=S+"float: left;"},D=function(E){E.externalResourcesRequired=!0},C=function(){return'<style scoped="">html::-webkit-scrollbar { display: none; }</style>'},x=function(E){var S=Object.keys(E);return S.length?" "+S.map(function(A){return A+'="'+E[A]+'"'}).join(" "):""},T=function(E,S,A){var B=I.serializeToString(E);h.validateXHTML(B);var F=g(S);return v(F),D(F),'<svg xmlns="http://www.w3.org/2000/svg"'+x(y(S,A))+">"+C()+"<foreignObject"+x(F)+">"+B+"</foreignObject></svg>"};return b.getSvgForDocument=function(E,S,A){return w.rewriteTagNameSelectorsToLowerCase(E),T(E,S,A)},b.drawDocumentAsSvg=function(E,S){return["hover","active","focus","target"].forEach(function(A){S[A]&&w.fakeUserAction(E,S[A],A)}),h.calculateDocumentContentSize(E,S).then(function(A){return b.getSvgForDocument(E,A,S.zoom)})},b})(i,l,a,e),u=(function(p,h,w,I,b,y){"use strict";var g={},v=function(E){return{message:"Error rendering page",originalError:E}},D=function(E){return b.renderSvg(E).then(function(S){return{image:S,svg:E}},function(S){throw v(S)})},C=function(E,S){try{S.getContext("2d").drawImage(E,0,0)}catch(A){throw v(A)}},x=function(E,S,A){return I.drawDocumentAsSvg(E,A).then(D).then(function(B){return S&&C(B.image,S),B})},T=function(E,S){return h.executeJavascript(E,S).then(function(A){var B=A.document;return w.persistInputValues(B),{document:B,errors:A.errors,cleanUp:A.cleanUp}})};return g.rasterize=function(E,S,A){var B;return B=p.clone(A),B.inlineScripts=A.executeJs===!0,y.inlineReferences(E,B).then(function(F){return A.executeJs?T(E,A).then(function(Q){return{element:Q.document.documentElement,errors:F.concat(Q.errors),cleanUp:Q.cleanUp}}):{element:E,errors:F,cleanUp:function(){}}}).then(function(F){return x(F.element,S,A).then(function(Q){return F.cleanUp(),{image:Q.image,svg:Q.svg,errors:F.errors}})})},g})(i,l,a,d,c,r),f=(function(p,h,w){"use strict";var I={},b=function(C,x){var T=300,E=200,S=C?C.width:T,A=C?C.height:E,B=x.width!==void 0?x.width:S,F=x.height!==void 0?x.height:A;return{width:B,height:F}},y=function(C){var x=b(C.canvas,C.options),T;return T=p.clone(C.options),T.width=x.width,T.height=x.height,T};I.drawDocument=function(){var C=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x),E=C.documentElement?C.documentElement:C;return w.rasterize(E,T.canvas,y(T))};var g=function(C,x,T){var E=h.parseHTML(C);return I.drawDocument(E,x,T)};I.drawHTML=function(){var C=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x);return g(C,T.canvas,T.options)};var v=function(C,x,T){var E=document.implementation.createHTMLDocument("");E.replaceChild(C.documentElement,E.documentElement);var S=T?p.clone(T):{};return T.baseUrl||(S.baseUrl=x),{document:E,options:S}},D=function(C,x,T){return h.loadDocument(C,T).then(function(E){var S=v(E,C,T);return I.drawDocument(S.document,x,S.options)})};return I.drawURL=function(){var C=arguments[0],x=Array.prototype.slice.call(arguments,1),T=p.parseOptionalParameters(x);return D(C,T.canvas,T.options)},I})(i,l,u);return f})});var Fl=null;var Uf=1;var jr=Symbol("SIGNAL");function J(n){let e=Fl;return Fl=n,e}function Ns(){return Fl}var Wl={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wf(n){if(!(Rs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Uf)){if(!n.producerMustRecompute(n)&&!Gl(n)){Ul(n);return}n.producerRecomputeValue(n),Ul(n)}}function Ul(n){n.dirty=!1,n.lastCleanEpoch=Uf}function ql(n){return n&&qf(n),J(n)}function qf(n){n.producersTail=void 0,n.recomputing=!0}function Gf(n,e){J(e),n&&zf(n)}function zf(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Rs(n))do t=zl(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Gl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Wf(t),r!==t.version))return!0}return!1}function Ps(n){if(Rs(n)){let e=n.producers;for(;e!==void 0;)e=zl(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function zl(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Rs(e)){let o=e.producers;for(;o!==void 0;)o=zl(o)}return t}function Rs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Xw(){throw new Error}var Jw=Xw;function Zl(n){Jw=n}function Ze(n){return typeof n=="function"}function Ls(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Os=Ls(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ze(r))try{r()}catch(o){e=o instanceof Os?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Zf(o)}catch(s){e=e??[],s instanceof Os?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Os(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Zf(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qi(t,e)}remove(e){let{_finalizers:t}=this;t&&Qi(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var Kl=je.EMPTY;function js(n){return n instanceof je||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function Zf(n){Ze(n)?n():n.unsubscribe()}var It={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Hr={setTimeout(n,e,...t){let{delegate:r}=Hr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Hr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kf(n){Hr.setTimeout(()=>{let{onUnhandledError:e}=It;if(e)e(n);else throw n})}function Yl(){}var Yf=Ql("C",void 0,void 0);function Qf(n){return Ql("E",void 0,n)}function Xf(n){return Ql("N",n,void 0)}function Ql(n,e,t){return{kind:n,value:e,error:t}}var qn=null;function $r(n){if(It.useDeprecatedSynchronousErrorHandling){let e=!qn;if(e&&(qn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qn;if(qn=null,t)throw r}}else n()}function Jf(n){It.useDeprecatedSynchronousErrorHandling&&qn&&(qn.errorThrown=!0,qn.error=n)}var Gn=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,js(e)&&e.add(this)):this.destination=nb}static create(e,t,r){return new Vr(e,t,r)}next(e){this.isStopped?Jl(Xf(e),this):this._next(e)}error(e){this.isStopped?Jl(Qf(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jl(Yf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eb=Function.prototype.bind;function Xl(n,e){return eb.call(n,e)}var ec=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hs(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hs(r)}else Hs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hs(t)}}},Vr=class extends Gn{constructor(e,t,r){super();let i;if(Ze(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&It.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xl(e.next,o),error:e.error&&Xl(e.error,o),complete:e.complete&&Xl(e.complete,o)}):i=e}this.destination=new ec(i)}};function Hs(n){It.useDeprecatedSynchronousErrorHandling?Jf(n):Kf(n)}function tb(n){throw n}function Jl(n,e){let{onStoppedNotification:t}=It;t&&Hr.setTimeout(()=>t(n,e))}var nb={closed:!0,next:Yl,error:tb,complete:Yl};var ep=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tp(n){return n}function np(n){return n.length===0?tp:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Br=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=ib(t)?t:new Vr(t,r,i);return $r(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=rp(r),new r((i,o)=>{let s=new Vr({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ep](){return this}pipe(...t){return np(t)(this)}toPromise(t){return t=rp(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function rp(n){var e;return(e=n??It.Promise)!==null&&e!==void 0?e:Promise}function rb(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}function ib(n){return n&&n instanceof Gn||rb(n)&&js(n)}function ob(n){return Ze(n?.lift)}function ip(n){return e=>{if(ob(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function op(n,e,t,r,i){return new tc(n,e,t,r,i)}var tc=class extends Gn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var sp=Ls(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qt=(()=>{class n extends Br{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new $s(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new sp}next(t){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$r(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Kl:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Qi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Br;return t.source=this,t}}return n.create=(e,t)=>new $s(e,t),n})(),$s=class extends Qt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Kl}};var Xi=class extends Qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function nc(n,e){return ip((t,r)=>{let i=0;t.subscribe(op(r,o=>{r.next(n.call(e,o,i++))}))})}var rc;function Vs(){return rc}function Pt(n){let e=rc;return rc=n,e}var ap=Symbol("NotFound");function Fr(n){return n===ap||n?.name==="\u0275NotFound"}var te=class extends Error{code;constructor(e,t){super(Ic(e,t)),this.code=e}};function ub(n){return`NG0${Math.abs(n)}`}function Ic(n,e){return`${ub(n)}${e?": "+e:""}`}var no=globalThis;function ce(n){for(let e in n)if(n[e]===ce)return e;throw Error("")}function Zn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function wc(n,e){return n?e?`${n} ${e}`:n:e||""}var fb=ce({__forward_ref__:ce});function bc(n){return n.__forward_ref__=bc,n.toString=function(){return Zn(this())},n}function st(n){return pp(n)?n():n}function pp(n){return typeof n=="function"&&n.hasOwnProperty(fb)&&n.__forward_ref__===bc}function Ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xc(n){return pb(n,Ec)}function pb(n,e){return n.hasOwnProperty(e)&&n[e]||null}function hb(n){let e=n?.[Ec]??null;return e||null}function oc(n){return n&&n.hasOwnProperty(sc)?n[sc]:null}var Ec=ce({\u0275prov:ce}),sc=ce({\u0275inj:ce}),ie=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hp(n){return n&&!!n.\u0275providers}var mp=ce({\u0275cmp:ce}),gp=ce({\u0275dir:ce}),yp=ce({\u0275pipe:ce});var ac=ce({\u0275fac:ce}),zr=ce({__NG_ELEMENT_ID__:ce}),lp=ce({__NG_ENV_ID__:ce});function Xn(n){return Sc(n,"@Component"),n[mp]||null}function Cc(n){return Sc(n,"@Directive"),n[gp]||null}function vp(n){return Sc(n,"@Pipe"),n[yp]||null}function Sc(n,e){if(n==null)throw new te(-919,!1)}function Ip(n){return typeof n=="string"?n:n==null?"":String(n)}function wp(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ip(n)}var bp=ce({ngErrorCode:ce}),mb=ce({ngErrorMessage:ce}),gb=ce({ngTokenPath:ce});function _c(n,e){return xp("",-200,e)}function Gs(n,e){throw new te(-201,!1)}function xp(n,e,t){let r=new te(e,n);return r[bp]=e,r[mb]=n,t&&(r[gb]=t),r}function yb(n){return n[bp]}var lc;function Ep(){return lc}function Xe(n){let e=lc;return lc=n,e}function Tc(n,e,t){let r=xc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Gs(n,"")}var vb={},zn=vb,Ib="__NG_DI_FLAG__",cc=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Wr(t)||0;try{return this.injector.get(e,r&8?null:zn,r)}catch(i){if(Fr(i))return i;throw i}}};function wb(n,e=0){let t=Vs();if(t===void 0)throw new te(-203,!1);if(t===null)return Tc(n,void 0,e);{let r=bb(e),i=t.retrieve(n,r);if(Fr(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(Ep()||wb)(st(n),e)}function ee(n,e){return de(n,Wr(e))}function Wr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bb(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function dc(n){let e=[];for(let t=0;t<n.length;t++){let r=st(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=xb(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function xb(n){return n[Ib]}function qr(n,e){let t=n.hasOwnProperty(ac);return t?n[ac]:null}function Cp(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Sp(n){return n.flat(Number.POSITIVE_INFINITY)}function zs(n,e){n.forEach(t=>Array.isArray(t)?zs(t,e):e(t))}function Dc(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ro(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Jn={},Kn=[],er=new ie(""),_p=new ie("",-1),Mc=new ie(""),eo=class{get(e,t=zn){if(t===zn){let i=xp("",-201);throw i.name="\u0275NotFound",i}return t}};function Ac(n){return{\u0275providers:n}}function Eb(...n){return{\u0275providers:kc(!0,n),\u0275fromNgModule:!0}}function kc(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return zs(e,s=>{let a=s;Fs(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Tp(i,o),t}function Tp(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Nc(i,o=>{e(o,r)})}}function Fs(n,e,t,r){if(n=st(n),!n)return!1;let i=null,o=oc(n),s=!o&&Xn(n);if(!o&&!s){let l=n.ngModule;if(o=oc(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Fs(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{zs(o.imports,d=>{Fs(d,e,t,r)&&(c||=[],c.push(d))})}finally{}c!==void 0&&Tp(c,e)}if(!a){let c=qr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Kn},i),e({provide:Mc,useValue:i,multi:!0},i),e({provide:er,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;Nc(l,d=>{e(d,c)})}}else return!1;return i!==n&&n.providers!==void 0}function Nc(n,e){for(let t of n)hp(t)&&(t=t.\u0275providers),Array.isArray(t)?Nc(t,e):e(t)}var Cb=ce({provide:String,useValue:ce});function Dp(n){return n!==null&&typeof n=="object"&&Cb in n}function Sb(n){return!!(n&&n.useExisting)}function _b(n){return!!(n&&n.useFactory)}function Us(n){return typeof n=="function"}var io=new ie(""),Bs={},cp={},ic;function oo(){return ic===void 0&&(ic=new eo),ic}var wt=class{},Gr=class extends wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,fc(e,s=>this.processProvider(s)),this.records.set(_p,Ur(void 0,this)),i.has("environment")&&this.records.set(wt,Ur(void 0,this));let o=this.records.get(io);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mc,Kn,{self:!0}))}retrieve(e,t){let r=Wr(t)||0;try{return this.get(e,zn,r)}catch(i){if(Fr(i))return i;throw i}}destroy(){Ji(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Ji(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ji(this);let t=Pt(this),r=Xe(void 0),i;try{return e()}finally{Pt(t),Xe(r)}}get(e,t=zn,r){if(Ji(this),e.hasOwnProperty(lp))return e[lp](this);let i=Wr(r),o,s=Pt(this),a=Xe(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let d=kb(e)&&xc(e);d&&this.injectableDefInScope(d)?c=Ur(uc(e),Bs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?oo():this.parent;return t=i&8&&t===zn?null:t,l.get(e,t)}catch(l){let c=yb(l);throw c===-200||c===-201?new te(c,null):l}finally{Xe(a),Pt(s)}}resolveInjectorInitializers(){let e=J(null),t=Pt(this),r=Xe(void 0),i;try{let o=this.get(er,Kn,{self:!0});for(let s of o)s()}finally{Pt(t),Xe(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=st(e);let t=Us(e)?e:st(e&&e.provide),r=Db(e);if(!Us(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ur(void 0,Bs,!0),i.factory=()=>dc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===cp)throw _c(Zn(e));return t.value===Bs&&(t.value=cp,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Ab(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=st(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function uc(n){let e=xc(n),t=e!==null?e.factory:qr(n);if(t!==null)return t;if(n instanceof ie)throw new te(204,!1);if(n instanceof Function)return Tb(n);throw new te(204,!1)}function Tb(n){if(n.length>0)throw new te(204,!1);let t=hb(n);return t!==null?()=>t.factory(n):()=>new n}function Db(n){if(Dp(n))return Ur(void 0,n.useValue);{let e=Mp(n);return Ur(e,Bs)}}function Mp(n,e,t){let r;if(Us(n)){let i=st(n);return qr(i)||uc(i)}else if(Dp(n))r=()=>st(n.useValue);else if(_b(n))r=()=>n.useFactory(...dc(n.deps||[]));else if(Sb(n))r=(i,o)=>de(st(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=st(n&&(n.useClass||n.provide));if(Mb(n))r=()=>new i(...dc(n.deps));else return qr(i)||uc(i)}return r}function Ji(n){if(n.destroyed)throw new te(205,!1)}function Ur(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mb(n){return!!n.deps}function Ab(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function kb(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function fc(n,e){for(let t of n)Array.isArray(t)?fc(t,e):t&&hp(t)?fc(t.\u0275providers,e):e(t)}function Zs(n,e){let t;n instanceof Gr?(Ji(n),t=n):t=new cc(n);let r,i=Pt(t),o=Xe(void 0);try{return e()}finally{Pt(i),Xe(o)}}function Ap(){return Ep()!==void 0||Vs()!=null}var bt=0,z=1,G=2,ke=3,at=4,lt=5,so=6,ao=7,Je=8,tr=9,en=10,ct=11,Zr=12,Pc=13,Kr=14,xt=15,hn=16,nr=17,Rt=18,lo=19,Rc=20,Xt=21,Ks=22,co=23,et=24,Ys=25,uo=26,Lt=27,kp=1;var mn=7,fo=8,rr=9,Ue=10;function tn(n){return Array.isArray(n)&&typeof n[kp]=="object"}function Et(n){return Array.isArray(n)&&n[kp]===!0}function Lc(n){return(n.flags&4)!==0}function po(n){return n.componentOffset>-1}function Np(n){return(n.flags&1)===1}function Yr(n){return!!n.template}function Qr(n){return(n[G]&512)!==0}function ir(n){return(n[G]&256)===256}var Pp="svg",Rp="math";function Ot(n){for(;Array.isArray(n);)n=n[bt];return n}function gn(n,e){return Ot(e[n.index])}function Oc(n,e){return n.data[e]}function yn(n,e){let t=e[n];return tn(t)?t:t[bt]}function Lp(n){return(n[G]&4)===4}function Qs(n){return(n[G]&128)===128}function Op(n){return Et(n[ke])}function ho(n,e){return e==null?null:n[e]}function jc(n){n[nr]=0}function Hc(n){n[G]&1024||(n[G]|=1024,Qs(n)&&go(n))}function mo(n){return!!(n[G]&9216||n[et]?.dirty)}function Xs(n){n[en].changeDetectionScheduler?.notify(8),n[G]&64&&(n[G]|=1024),mo(n)&&go(n)}function go(n){n[en].changeDetectionScheduler?.notify(0);let e=pn(n);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!Qs(e)));)e=pn(e)}function $c(n,e){if(ir(n))throw new te(911,!1);n[Xt]===null&&(n[Xt]=[]),n[Xt].push(e)}function jp(n,e){if(n[Xt]===null)return;let t=n[Xt].indexOf(e);t!==-1&&n[Xt].splice(t,1)}function pn(n){let e=n[ke];return Et(e)?e[ke]:e}function Hp(n){return n[ao]??=[]}function $p(n){return n.cleanup??=[]}function Vp(n,e,t,r){let i=Hp(e);i.push(t),n.firstCreatePass&&$p(n).push(r,i.length-1)}var ue={lFrame:eh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pc=!1;function Bp(){return ue.lFrame.elementDepthCount}function Fp(){ue.lFrame.elementDepthCount++}function Up(){ue.lFrame.elementDepthCount--}function Wp(){return ue.skipHydrationRootTNode!==null}function qp(n){return ue.skipHydrationRootTNode===n}function Gp(){ue.skipHydrationRootTNode=null}function dt(){return ue.lFrame.lView}function Vc(){return ue.lFrame.tView}function vn(){let n=Bc();for(;n!==null&&n.type===64;)n=n.parent;return n}function Bc(){return ue.lFrame.currentTNode}function zp(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Js(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function Fc(){return ue.lFrame.isParent}function Zp(){ue.lFrame.isParent=!1}function Uc(){return pc}function Wc(n){let e=pc;return pc=n,e}function Kp(n){return ue.lFrame.bindingIndex=n}function Yp(){return ue.lFrame.inI18n}function Qp(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,ea(e)}function Xp(){return ue.lFrame.currentDirectiveIndex}function ea(n){ue.lFrame.currentDirectiveIndex=n}function qc(){return ue.lFrame.currentQueryIndex}function ta(n){ue.lFrame.currentQueryIndex=n}function Nb(n){let e=n[z];return e.type===2?e.declTNode:e.type===1?n[lt]:null}function Gc(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Nb(o),i===null||(o=o[Kr],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=Jp();return r.currentTNode=e,r.lView=n,!0}function na(n){let e=Jp(),t=n[z];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Jp(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?eh(n):e}function eh(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function th(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zc=th;function ra(){let n=th();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nh(){return ue.lFrame.selectedIndex}function In(n){ue.lFrame.selectedIndex=n}function rh(){return ue.lFrame.currentNamespace}var ih=!0;function oh(){return ih}function sh(n){ih=n}function dp(n,e=null,t=null,r){let i=ah(n,e,t,r);return i.resolveInjectorInitializers(),i}function ah(n,e=null,t=null,r,i=new Set){let o=[t||Kn,Eb(n)];return r=r||(typeof n=="object"?void 0:Zn(n)),new Gr(o,e||oo(),r||null,i)}var Yn=class n{static THROW_IF_NOT_FOUND=zn;static NULL=new eo;static create(e,t){if(Array.isArray(e))return dp({name:""},t,e,"");{let r=e.name??"";return dp({name:r},e.parent,e.providers,r)}}static \u0275prov=Ee({token:n,providedIn:"any",factory:()=>de(_p)});static __NG_ELEMENT_ID__=-1},Ct=new ie(""),ia=(()=>{class n{static __NG_ELEMENT_ID__=Pb;static __NG_ENV_ID__=t=>t}return n})(),hc=class extends ia{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ir(this._lView)}onDestroy(e){let t=this._lView;return $c(t,e),()=>jp(t,e)}};function Pb(){return new hc(dt())}var Zc=!1,or=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Xi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Br(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),mc=class extends Qt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Ap()&&(this.destroyRef=ee(ia,{optional:!0})??void 0,this.pendingTasks=ee(or,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},fn=mc;function Ws(...n){}function Kc(n){let e,t;function r(){n=Ws;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Yc(n){return queueMicrotask(()=>n()),()=>{n=Ws}}var Qc="isAngularZone",to=Qc+"_ID",Rb=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new fn(!1);onMicrotaskEmpty=new fn(!1);onStable=new fn(!1);onError=new fn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Zc}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qc)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Lb,Ws,Ws);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Lb={};function Xc(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ob(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Kc(()=>{n.callbackScheduled=!1,gc(n),n.isCheckStableRunning=!0,Xc(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gc(n)}function jb(n){let e=()=>{Ob(n)},t=Rb++;n._inner=n._inner.fork({name:"angular",properties:{[Qc]:!0,[to]:t,[to+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(Hb(l))return r.invokeTask(o,s,a,l);try{return up(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),fp(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return up(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!$b(l)&&e(),fp(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,gc(n),Xc(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function gc(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function up(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fp(n){n._nesting--,Xc(n)}var qs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new fn;onMicrotaskEmpty=new fn;onStable=new fn;onError=new fn;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Hb(n){return lh(n,"__ignore_ng_zone__")}function $b(n){return lh(n,"__scheduler_tick__")}function lh(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Jt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Xr=new ie("",{factory:()=>{let n=ee(De),e=ee(wt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Jt),t.handleError(r))})}}}),ch={provide:er,useValue:()=>{let n=ee(Jt,{optional:!0})},multi:!0};var Qn=class{},Jr=new ie("",{factory:()=>!0});var oa=new ie("");var dh=(()=>{class n{static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new yc})}return n})(),yc=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},vc=class{[jr];constructor(e){this[jr]=e}destroy(){this[jr].destroy()}};function Ph(n){return{toString:n}.toString()}function Fb(n){return typeof n=="function"}function Rh(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ua=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ub(n){return n.type.prototype.ngOnChanges&&(n.setInput=qb),Wb}function Wb(){let n=Oh(this),e=n?.current;if(e){let t=n.previous;if(t===Jn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function qb(n,e,t,r,i){let o=this.declaredInputs[r],s=Oh(n)||Gb(n,{previous:Jn,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new ua(c&&c.currentValue,t,l===Jn),Rh(n,e,i,t)}var Lh="__ngSimpleChanges__";function Oh(n){return n[Lh]||null}function Gb(n,e){return n[Lh]=e}var uh=[];var me=function(n,e=null,t){for(let r=0;r<uh.length;r++){let i=uh[r];i(n,e,t)}},le=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(le||{});function zb(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Ub(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Zb(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function aa(n,e,t){jh(n,e,3,t)}function la(n,e,t,r){(n[G]&3)===t&&jh(n,e,t,r)}function Jc(n,e){let t=n[G];(t&3)===e&&(t&=16383,t+=1,n[G]=t)}function jh(n,e,t,r){let i=r!==void 0?n[nr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[nr]+=65536),(a<o||o==-1)&&(Kb(n,t,e,l),n[nr]=(n[nr]&4294901760)+l+2),l++}function fh(n,e){me(le.LifecycleHookStart,n,e);let t=J(null);try{e.call(n)}finally{J(t),me(le.LifecycleHookEnd,n,e)}}function Kb(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[G]>>14<n[nr]>>16&&(n[G]&3)===e&&(n[G]+=16384,fh(a,o)):fh(a,o)}var ti=-1,Io=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Yb(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Qb(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Qb(n){return n.charCodeAt(0)===64}function bd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ph(n,t,i,null,e[++r]):ph(n,t,i,null,null))}}return n}function ph(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Hh(n){return n!==ti}function fa(n){return n&32767}function Xb(n){return n>>16}function pa(n,e){let t=Xb(n),r=e;for(;t>0;)r=r[Kr],t--;return r}var rd=!0;function hh(n){let e=rd;return rd=n,e}var Jb=256,$h=Jb-1,Vh=5,ex=0,jt={};function tx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(zr)&&(r=t[zr]),r==null&&(r=t[zr]=ex++);let i=r&$h,o=1<<i;e.data[n+(i>>Vh)]|=o}function Bh(n,e){let t=Fh(n,e);if(t!==-1)return t;let r=e[z];r.firstCreatePass&&(n.injectorIndex=e.length,ed(r.data,n),ed(e,null),ed(r.blueprint,null));let i=xd(n,e),o=n.injectorIndex;if(Hh(i)){let s=fa(i),a=pa(i,e),l=a[z].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function ed(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fh(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function xd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=zh(i),r===null)return ti;if(t++,i=i[Kr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ti}function nx(n,e,t){tx(n,e,t)}function Uh(n,e,t){if(t&8||n!==void 0)return n;Gs(e,"NodeInjector")}function Wh(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[tr],o=Xe(void 0);try{return i?i.get(e,r,t&8):Tc(e,r,t&8)}finally{Xe(o)}}return Uh(r,e,t)}function qh(n,e,t,r=0,i){if(n!==null){if(e[G]&2048&&!(r&2)){let s=sx(n,e,t,r,jt);if(s!==jt)return s}let o=Gh(n,e,t,r,jt);if(o!==jt)return o}return Wh(e,t,r,i)}function Gh(n,e,t,r,i){let o=ix(t);if(typeof o=="function"){if(!Gc(e,n,r))return r&1?Uh(i,t,r):Wh(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Gs(t);else return s}finally{zc()}}else if(typeof o=="number"){let s=null,a=Fh(n,e),l=ti,c=r&1?e[xt][lt]:null;for((a===-1||r&4)&&(l=a===-1?xd(n,e):e[a+8],l===ti||!gh(r,!1)?a=-1:(s=e[z],a=fa(l),e=pa(l,e)));a!==-1;){let d=e[z];if(mh(o,a,d.data)){let u=rx(a,e,t,s,r,c);if(u!==jt)return u}l=e[a+8],l!==ti&&gh(r,e[z].data[a+8]===c)&&mh(o,a,e)?(s=d,a=fa(l),e=pa(l,e)):a=-1}}return i}function rx(n,e,t,r,i,o){let s=e[z],a=s.data[n+8],l=r==null?po(a)&&rd:r!=s&&(a.type&3)!==0,c=i&1&&o===a,d=ca(a,s,t,l,c);return d!==null?ha(e,s,d,a,i):jt}function ca(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,d=o>>20,u=r?a:a+d,f=i?a+d:c;for(let p=u;p<f;p++){let h=s[p];if(p<l&&t===h||p>=l&&h.type===t)return p}if(i){let p=s[l];if(p&&Yr(p)&&p.type===t)return l}return null}function ha(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Io){let a=o;if(a.resolving){let p=wp(s[t]);throw _c(p)}let l=hh(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],d,u=a.injectImpl?Xe(a.injectImpl):null,f=Gc(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&zb(t,s[t],e)}finally{u!==null&&Xe(u),hh(l),a.resolving=!1,zc()}}return o}function ix(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(zr)?n[zr]:void 0;return typeof e=="number"?e>=0?e&$h:ox:e}function mh(n,e,t){let r=1<<n;return!!(t[e+(n>>Vh)]&r)}function gh(n,e){return!(n&2)&&!(n&1&&e)}var sr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qh(this._tNode,this._lView,e,Wr(r),t)}};function ox(){return new sr(vn(),dt())}function sx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[G]&2048&&!Qr(s);){let a=Gh(o,s,t,r|2,jt);if(a!==jt)return a;let l=o.parent;if(!l){let c=s[Rc];if(c){let d=c.get(t,jt,r);if(d!==jt)return d}l=zh(s),s=s[Kr]}o=l}return i}function zh(n){let e=n[z],t=e.type;return t===2?e.declTNode:t===1?n[lt]:null}function ax(){return ii(vn(),dt())}function ii(n,e){return new So(gn(n,e))}var So=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ax}return n})();function lx(n){return n instanceof So?n.nativeElement:n}function cx(){return this._results[Symbol.iterator]()}var ma=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Sp(e);(this._changesDetected=!Cp(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=cx};function Zh(n){return(n.flags&128)===128}var Ed=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Ed||{}),Kh=new Map,dx=0;function ux(){return dx++}function fx(n){Kh.set(n[lo],n)}function id(n){Kh.delete(n[lo])}var yh="__ngContext__";function wo(n,e){tn(e)?(n[yh]=e[lo],fx(e)):n[yh]=e}function Yh(n){return Xh(n[Zr])}function Qh(n){return Xh(n[at])}function Xh(n){for(;n!==null&&!Et(n);)n=n[at];return n}var px;function Cd(n){px=n}var wa=new ie("",{factory:()=>hx}),hx="ng";var ba=new ie(""),_o=new ie("",{providedIn:"platform",factory:()=>"unknown"});var xa=new ie("",{factory:()=>ee(Ct).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Jh=!1,em=new ie("",{factory:()=>Jh});function Sd(n){return(n.flags&32)===32}var mx=()=>null;function tm(n,e,t=!1){return mx(n,e,t)}function nm(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ta(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function od(n,e,t){ta(0);let r=J(null);try{e(n,t)}finally{J(r)}}function gx(n,e,t){if(Lc(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{J(r)}}}var St=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(St||{});var sa;function yx(){if(sa===void 0&&(sa=null,no.trustedTypes))try{sa=no.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sa}function vx(n){return yx()?.createScriptURL(n)||n}function rm(n,e,t){return n.createElement(e,t)}function ga(n,e,t,r,i){n.insertBefore(e,t,r,i)}function im(n,e,t){n.appendChild(e,t)}function vh(n,e,t,r,i){r!==null?ga(n,e,t,r,i):im(n,e,t)}function Ix(n,e,t,r){n.removeChild(null,e,t,r)}function wx(n,e,t){n.setAttribute(e,"style",t)}function bx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function om(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Yb(n,e,r),i!==null&&bx(n,e,i),o!==null&&wx(n,e,o)}function To(n){return vx(n[0])}var xx="ng-template";function Ex(n){return n.type===4&&n.value!==xx}function sd(n){return(n&1)===0}function Ih(n,e){return n?":not("+e.trim()+")":e}function Cx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!sd(s)&&(e+=Ih(o,i),i=""),r=s,o=o||!sd(r);t++}return i!==""&&(e+=Ih(o,i)),e}function Sx(n){return n.map(Cx).join(",")}function _x(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!sd(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var _d={};function sm(n,e,t,r,i,o,s,a,l,c,d){let u=Lt+r,f=u+i,p=Tx(u,f),h=typeof c=="function"?c():c;return p[z]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1,ssrId:d}}function Tx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_d);return t}function Dx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Td(n,e,t,r,i,o,s,a,l,c,d){let u=e.blueprint.slice();return u[bt]=i,u[G]=r|4|128|8|64|1024,(c!==null||n&&n[G]&2048)&&(u[G]|=2048),jc(u),u[ke]=u[Kr]=n,u[Je]=t,u[en]=s||n&&n[en],u[ct]=a||n&&n[ct],u[tr]=l||n&&n[tr]||null,u[lt]=o,u[lo]=ux(),u[so]=d,u[Rc]=c,u[xt]=e.type==2?n[xt]:u,u}function Mx(n,e,t){let r=gn(e,n),i=Dx(t),o=n[en].rendererFactory,s=cm(n,Td(n,i,null,am(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function am(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function lm(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function cm(n,e){return n[Zr]?n[Pc][at]=e:n[Zr]=e,n[Pc]=e,e}function Ax(n,e,t,r){if(!r)if((e[G]&3)===3){let o=n.preOrderCheckHooks;o!==null&&aa(e,o,t)}else{let o=n.preOrderHooks;o!==null&&la(e,o,0,t)}In(t)}var Ea=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ea||{});function ad(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],l=null;(s&Ea.SignalBased)!==0&&(l=e[o][jr]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):Rh(e,l,o,r)}finally{J(i)}}var lr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(lr||{}),kx;function Dd(n,e){return kx(n,e)}var ni=new Set,Md=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Md||{}),Do=new ie(""),wh=new Set;function Ad(n){wh.has(n)||(wh.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var dm=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})();var Nx=new ie("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:ee(wt)})});function um(n,e,t){let r=n.get(Nx);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Px(n,e){for(let[t,r]of e)um(n,r.animateFns)}function bh(n,e,t,r){let i=n?.[uo]?.enter;e!==null&&i&&i.has(t.index)&&Px(r,i)}function ei(n,e,t,r,i,o,s,a){if(i!=null){let l,c=!1;Et(i)?l=i:tn(i)&&(c=!0,i=i[bt]);let d=Ot(i);n===0&&r!==null?(bh(a,r,o,t),s==null?im(e,r,d):ga(e,r,d,s||null,!0)):n===1&&r!==null?(bh(a,r,o,t),ga(e,r,d,s||null,!0)):n===2?xh(a,o,t,u=>{Ix(e,d,c,u)}):n===3&&xh(a,o,t,()=>{e.destroyNode(d)}),l!=null&&zx(e,n,t,l,o,r,s)}}function Rx(n,e){fm(n,e),e[bt]=null,e[lt]=null}function Lx(n,e,t,r,i,o){r[bt]=i,r[lt]=e,Ca(n,r,t,1,i,o)}function fm(n,e){e[en].changeDetectionScheduler?.notify(9),Ca(n,e,e[ct],2,null,null)}function Ox(n){let e=n[Zr];if(!e)return td(n[z],n);for(;e;){let t=null;if(tn(e))t=e[Zr];else{let r=e[Ue];r&&(t=r)}if(!t){for(;e&&!e[at]&&e!==n;)tn(e)&&td(e[z],e),e=e[ke];e===null&&(e=n),tn(e)&&td(e[z],e),t=e&&e[at]}e=t}}function kd(n,e){let t=n[rr],r=t.indexOf(e);t.splice(r,1)}function pm(n,e){if(ir(e))return;let t=e[ct];t.destroyNode&&Ca(n,e,t,3,null,null),Ox(e)}function td(n,e){if(ir(e))return;let t=J(null);try{e[G]&=-129,e[G]|=256,e[et]&&Ps(e[et]),$x(n,e),Hx(n,e),e[z].type===1&&e[ct].destroy();let r=e[hn];if(r!==null&&Et(e[ke])){r!==e[ke]&&kd(r,e);let i=e[Rt];i!==null&&i.detachView(n)}id(e)}finally{J(t)}}function xh(n,e,t,r){let i=n?.[uo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ni.add(n),um(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:d}=c();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),jx(n,r)}else n&&ni.delete(n),r(!1)},i)}function jx(n,e){let t=n[uo]?.running;if(t){t.then(()=>{n[uo].running=void 0,ni.delete(n),e(!0)});return}e(!1)}function Hx(n,e){let t=n.cleanup,r=e[ao];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ao]=null);let i=e[Xt];if(i!==null){e[Xt]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[co];if(o!==null){e[co]=null;for(let s of o)s.destroy()}}function $x(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Io)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];me(le.LifecycleHookStart,a,l);try{l.call(a)}finally{me(le.LifecycleHookEnd,a,l)}}else{me(le.LifecycleHookStart,i,o);try{o.call(i)}finally{me(le.LifecycleHookEnd,i,o)}}}}}function Vx(n,e,t){return Bx(n,e.parent,t)}function Bx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[bt];if(po(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===St.None||i===St.Emulated)return null}return gn(r,t)}function Fx(n,e,t){return Wx(n,e,t)}function Ux(n,e,t){return n.type&40?gn(n,t):null}var Wx=Ux,Eh;function qx(n,e,t,r){let i=Vx(n,r,e),o=e[ct],s=r.parent||e[lt],a=Fx(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)vh(o,i,t[l],a,!1);else vh(o,i,t,a,!1);Eh!==void 0&&Eh(o,r,e,t,i)}function yo(n,e){if(e!==null){let t=e.type;if(t&3)return gn(e,n);if(t&4)return ld(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return yo(n,r);{let i=n[e.index];return Et(i)?ld(-1,i):Ot(i)}}else{if(t&128)return yo(n,e.next);if(t&32)return Dd(e,n)()||Ot(n[e.index]);{let r=hm(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=pn(n[xt]);return yo(i,r)}else return yo(n,e.next)}}}return null}function hm(n,e){if(e!==null){let r=n[xt][lt],i=e.projection;return r.projection[i]}return null}function ld(n,e){let t=Ue+n+1;if(t<e.length){let r=e[t],i=r[z].firstChild;if(i!==null)return yo(r,i)}return e[mn]}function Nd(n,e,t,r,i,o,s){for(;t!=null;){let a=r[tr];if(t.type===128){t=t.next;continue}let l=r[t.index],c=t.type;if(s&&e===0&&(l&&wo(Ot(l),r),t.flags|=2),!Sd(t))if(c&8)Nd(n,e,t.child,r,i,o,!1),ei(e,n,a,i,l,t,o,r);else if(c&32){let d=Dd(t,r),u;for(;u=d();)ei(e,n,a,i,u,t,o,r);ei(e,n,a,i,l,t,o,r)}else c&16?Gx(n,e,r,t,i,o):ei(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function Ca(n,e,t,r,i,o){Nd(t,r,n.firstChild,e,i,o,!1)}function Gx(n,e,t,r,i,o){let s=t[xt],l=s[lt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];ei(e,n,t[tr],i,d,r,o,t)}else{let c=l,d=s[ke];Zh(r)&&(c.flags|=128),Nd(n,e,c,d,i,o,!0)}}function zx(n,e,t,r,i,o,s){let a=r[mn],l=Ot(r);a!==l&&ei(e,n,t,o,a,i,s);for(let c=Ue;c<r.length;c++){let d=r[c];Ca(d[z],d,n,e,o,a)}}function mm(n,e,t,r,i){let o=nh(),s=r&2;try{In(-1),s&&e.length>Lt&&Ax(n,e,Lt,!1);let a=s?le.TemplateUpdateStart:le.TemplateCreateStart;me(a,i,t),t(r,i)}finally{In(o);let a=s?le.TemplateUpdateEnd:le.TemplateCreateEnd;me(a,i,t)}}function Zx(n,e,t){Jx(n,e,t),(t.flags&64)===64&&eE(n,e,t)}function Kx(n,e,t=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Yx(n,e,t,r){let o=r.get(em,Jh)||t===St.ShadowDom||t===St.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return Qx(s),s}function Qx(n){Xx(n)}var Xx=()=>null;function Jx(n,e,t){let r=t.directiveStart,i=t.directiveEnd;po(t)&&Mx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Bh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ha(e,n,s,t);if(wo(l,e),o!==null&&nE(e,s-r,l,a,t,o),Yr(a)){let c=yn(t.index,e);c[Je]=ha(e,n,s,t)}}}function eE(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Xp();try{In(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];ea(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&tE(l,c)}}finally{In(-1),ea(s)}}function tE(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function nE(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];ad(r,t,l,c)}}function rE(n,e,t,r,i){let o=Lt+t,s=e[z],a=i(s,e,n,r,t);e[o]=a,Js(n,!0);let l=n.type===2;return l?(om(e[ct],a,n),(Bp()===0||Np(n))&&wo(a,e),Fp()):wo(a,e),oh()&&(!l||!Sd(n))&&qx(s,e,a,n),n}function iE(n){let e=n;return Fc()?Zp():(e=e.parent,Js(e,!1)),e}function oE(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],u=e.data[c];ad(u,t[c],d,i),a=!0}if(o)for(let l of o){let c=t[l],d=e.data[l];ad(d,c,r,i),a=!0}return a}function sE(n,e){let t=yn(e,n),r=t[z];aE(r,t);let i=t[bt];i!==null&&t[so]===null&&(t[so]=tm(i,t[tr])),me(le.ComponentStart);try{Pd(r,t,t[Je])}finally{me(le.ComponentEnd,t[Je])}}function aE(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Pd(n,e,t){na(e);try{let r=n.viewQuery;r!==null&&od(1,r,t);let i=n.template;i!==null&&mm(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Rt]?.finishViewCreation(n),n.staticContentQueries&&nm(n,e),n.staticViewQueries&&od(2,n.viewQuery,t);let o=n.components;o!==null&&lE(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[G]&=-5,ra()}}function lE(n,e){for(let t=0;t<e.length;t++)sE(n,e[t])}function cE(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[G]&4096?4096:16,l=Td(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[hn]=c;let d=n[Rt];return d!==null&&(l[Rt]=d.createEmbeddedView(o)),Pd(o,l,t),l}finally{J(i)}}function Ch(n,e){return!e||e.firstChild===null||Zh(n)}function bo(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Ot(o)),Et(o)&&gm(o,r);let s=t.type;if(s&8)bo(n,e,t.child,r);else if(s&32){let a=Dd(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=hm(e,t);if(Array.isArray(a))r.push(...a);else{let l=pn(e[xt]);bo(l[z],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gm(n,e){for(let t=Ue;t<n.length;t++){let r=n[t],i=r[z].firstChild;i!==null&&bo(r[z],r,i,e)}n[mn]!==n[bt]&&e.push(n[mn])}function ym(n){if(n[Ys]!==null){for(let e of n[Ys])e.impl.addSequence(e);n[Ys].length=0}}var vm=[];function dE(n){return n[et]??uE(n)}function uE(n){let e=vm.pop()??Object.create(pE);return e.lView=n,e}function fE(n){n.lView[et]!==n&&(n.lView=null,vm.push(n))}var pE=vt(_e({},Wl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{go(n.lView)},consumerOnSignalRead(){this.lView[et]=this}});function hE(n){let e=n[et]??Object.create(mE);return e.lView=n,e}var mE=vt(_e({},Wl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=pn(n.lView);for(;e&&!Im(e[z]);)e=pn(e);e&&Hc(e)},consumerOnSignalRead(){this.lView[et]=this}});function Im(n){return n.type!==2}function wm(n){if(n[co]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[co])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[G]&8192)}}var gE=100;function bm(n,e=0){let r=n[en].rendererFactory,i=!1;i||r.begin?.();try{yE(n,e)}finally{i||r.end?.()}}function yE(n,e){let t=Uc();try{Wc(!0),cd(n,e);let r=0;for(;mo(n);){if(r===gE)throw new te(103,!1);r++,cd(n,1)}}finally{Wc(t)}}function vE(n,e,t,r){if(ir(e))return;let i=e[G],o=!1,s=!1;na(e);let a=!0,l=null,c=null;o||(Im(n)?(c=dE(e),l=ql(c)):Ns()===null?(a=!1,c=hE(e),l=ql(c)):e[et]&&(Ps(e[et]),e[et]=null));try{jc(e),Kp(n.bindingStartIndex),t!==null&&mm(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let p=n.preOrderCheckHooks;p!==null&&aa(e,p,null)}else{let p=n.preOrderHooks;p!==null&&la(e,p,0,null),Jc(e,0)}if(s||IE(e),wm(e),xm(e,0),n.contentQueries!==null&&nm(n,e),!o)if(d){let p=n.contentCheckHooks;p!==null&&aa(e,p)}else{let p=n.contentHooks;p!==null&&la(e,p,1),Jc(e,1)}bE(n,e);let u=n.components;u!==null&&Cm(e,u,0);let f=n.viewQuery;if(f!==null&&od(2,f,r),!o)if(d){let p=n.viewCheckHooks;p!==null&&aa(e,p)}else{let p=n.viewHooks;p!==null&&la(e,p,2),Jc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ks]){for(let p of e[Ks])p();e[Ks]=null}o||(ym(e),e[G]&=-73)}catch(d){throw o||go(e),d}finally{c!==null&&(Gf(c,l),a&&fE(c)),ra()}}function xm(n,e){for(let t=Yh(n);t!==null;t=Qh(t))for(let r=Ue;r<t.length;r++){let i=t[r];Em(i,e)}}function IE(n){for(let e=Yh(n);e!==null;e=Qh(e)){if(!(e[G]&2))continue;let t=e[rr];for(let r=0;r<t.length;r++){let i=t[r];Hc(i)}}}function wE(n,e,t){me(le.ComponentStart);let r=yn(e,n);try{Em(r,t)}finally{me(le.ComponentEnd,r[Je])}}function Em(n,e){Qs(n)&&cd(n,e)}function cd(n,e){let r=n[z],i=n[G],o=n[et],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gl(o)),s||=!1,o&&(o.dirty=!1),n[G]&=-9217,s)vE(r,n,r.template,n[Je]);else if(i&8192){let a=J(null);try{wm(n),xm(n,1);let l=r.components;l!==null&&Cm(n,l,1),ym(n)}finally{J(a)}}}function Cm(n,e,t){for(let r=0;r<e.length;r++)wE(n,e[r],t)}function bE(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)In(~i);else{let o=i,s=t[++r],a=t[++r];Qp(s,o);let l=e[o];me(le.HostBindingsUpdateStart,l);try{a(2,l)}finally{me(le.HostBindingsUpdateEnd,l)}}}}finally{In(-1)}}function Sm(n,e){let t=Uc()?64:1088;for(n[en].changeDetectionScheduler?.notify(e);n;){n[G]|=t;let r=pn(n);if(Qr(n)&&!r)return n;n=r}return null}function xE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function EE(n,e,t,r=!0){let i=e[z];if(CE(i,e,n,t),r){let s=ld(t,n),a=e[ct],l=a.parentNode(n[mn]);l!==null&&Lx(i,n[lt],a,e,l,s)}let o=e[so];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dd(n,e){if(n.length<=Ue)return;let t=Ue+e,r=n[t];if(r){let i=r[hn];i!==null&&i!==n&&kd(i,r),e>0&&(n[t-1][at]=r[at]);let o=ro(n,Ue+e);Rx(r[z],r);let s=o[Rt];s!==null&&s.detachView(o[z]),r[ke]=null,r[at]=null,r[G]&=-129}return r}function CE(n,e,t,r){let i=Ue+r,o=t.length;r>0&&(t[i-1][at]=e),r<o-Ue?(e[at]=t[i],Dc(t,Ue+r,e)):(t.push(e),e[at]=null),e[ke]=t;let s=e[hn];s!==null&&t!==s&&_m(s,e);let a=e[Rt];a!==null&&a.insertView(n),Xs(e),e[G]|=128}function _m(n,e){let t=n[rr],r=e[ke];if(tn(r))n[G]|=2;else{let i=r[ke][xt];e[xt]!==i&&(n[G]|=2)}t===null?n[rr]=[e]:t.push(e)}var ri=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[z];return bo(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Je]}set context(e){this._lView[Je]=e}get destroyed(){return ir(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ke];if(Et(e)){let t=e[fo],r=t?t.indexOf(this):-1;r>-1&&(dd(e,r),ro(t,r))}this._attachedToViewContainer=!1}pm(this._lView[z],this._lView)}onDestroy(e){$c(this._lView,e)}markForCheck(){Sm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[G]&=-129}reattach(){Xs(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,bm(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qr(this._lView),t=this._lView[hn];t!==null&&!e&&kd(t,this._lView),fm(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Qr(this._lView),r=this._lView[hn];r!==null&&!t&&_m(r,this._lView),Xs(this._lView)}};var xo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=SE;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=cE(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ri(o)}}return n})();function SE(){return Rd(vn(),dt())}function Rd(n,e){return n.type&4?new xo(e,n,ii(n,e)):null}function Tm(n,e,t,r,i){let o=n.data[e];if(o===null)o=_E(n,e,t,r,i),Yp()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=zp();o.injectorIndex=s===null?-1:s.injectorIndex}return Js(o,!0),o}function _E(n,e,t,r,i){let o=Bc(),s=Fc(),a=s?o:o&&o.parent,l=n.data[e]=DE(n,a,t,e,r,i);return TE(n,l,o,s),l}function TE(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function DE(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Wp()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ME=()=>null;function Sh(n,e){return ME(n,e)}var Dm=class{},Sa=class{},ud=class{resolveComponentFactory(e){throw new te(917,!1)}},_a=class{static NULL=new ud},ar=class{};var Mm=(()=>{class n{static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>null})}return n})();var da={},fd=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,da,r);return i!==da||t===da?i:this.parentInjector.get(e,t,r)}};function ya(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=wc(i,a);else if(o==2){let l=a,c=e[++s];r=wc(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Am(n,e=0){let t=dt();if(t===null)return de(n,e);let r=vn();return qh(r,t,st(n),e)}function AE(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,c=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,l,c]=d.resolveHostDirectives(s);break}PE(n,e,t,a,o,l,c)}o!==null&&r!==null&&kE(t,r,o)}function kE(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function NE(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function PE(n,e,t,r,i,o,s){let a=r.length,l=null;for(let f=0;f<a;f++){let p=r[f];l===null&&Yr(p)&&(l=p,NE(n,t,f)),nx(Bh(t,e),n,p.type)}$E(t,n.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let f=0;f<a;f++){let p=r[f];p.providersResolver&&p.providersResolver(p)}let c=!1,d=!1,u=lm(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let p=r[f];if(t.mergedAttrs=bd(t.mergedAttrs,p.hostAttrs),LE(n,t,e,u,p),HE(u,p,i),s!==null&&s.has(p)){let[w,I]=s.get(p);t.directiveToIndex.set(p.type,[u,w+t.directiveStart,I+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,u);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let h=p.type.prototype;!c&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!d&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),u++}RE(n,t,o)}function RE(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_h(0,e,i,r),_h(1,e,i,r),Dh(e,r,!1);else{let o=t.get(i);Th(0,e,o,r),Th(1,e,o,r),Dh(e,r,!0)}}}function _h(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),km(e,o)}}function Th(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),km(e,s)}}function km(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Dh(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ex(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let d of c)if(d===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===e){s??=[],s.push(c[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function LE(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=qr(i.type,!0)),s=new Io(o,Yr(i),Am,null);n.blueprint[r]=s,t[r]=s,OE(n,e,r,lm(n,t,i.hostVars,_d),i)}function OE(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;jE(s)!=a&&s.push(a),s.push(t,r,o)}}function jE(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function HE(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yr(e)&&(t[""]=n)}}function $E(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function VE(n,e,t,r,i,o,s,a){let l=e[z],c=l.consts,d=ho(c,s),u=Tm(l,n,t,r,d);return o&&AE(l,e,u,ho(c,a),i),u.mergedAttrs=bd(u.mergedAttrs,u.attrs),u.attrs!==null&&ya(u,u.attrs,!1),u.mergedAttrs!==null&&ya(u,u.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,u),u}function BE(n,e){Zb(n,e),Lc(e)&&n.queries.elementEnd(e)}function FE(n,e,t,r,i,o){let s=e.consts,a=ho(s,i),l=Tm(e,n,t,r,a);if(l.mergedAttrs=bd(l.mergedAttrs,l.attrs),o!=null){let c=ho(s,o);l.localNames=[];for(let d=0;d<c.length;d+=2)l.localNames.push(c[d],-1)}return l.attrs!==null&&ya(l,l.attrs,!1),l.mergedAttrs!==null&&ya(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}var pd=Symbol("BINDING");var hd=class extends _a{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Xn(e);return new Eo(t,this.ngModule)}};function UE(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ea.SignalBased)!==0};return i&&(o.transform=i),o})}function WE(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function qE(n,e,t){let r=e instanceof wt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new fd(t,r):t}function GE(n){let e=n.get(ar,null);if(e===null)throw new te(407,!1);let t=n.get(Mm,null),r=n.get(Qn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function zE(n,e){let t=Nm(n);return rm(e,t,t==="svg"?Pp:t==="math"?Rp:null)}function Nm(n){return(n.selectors[0][0]||"div").toLowerCase()}var Eo=class extends Sa{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=UE(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=WE(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Sx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){me(le.DynamicComponentStart);let a=J(null);try{let l=this.componentDef,c=ZE(r,l,s,o),d=qE(l,i||this.ngModule,e),u=GE(d),f=u.rendererFactory.createRenderer(null,l),p=r?Yx(f,r,l.encapsulation,d):zE(l,f),h=s?.some(Mh)||o?.some(b=>typeof b!="function"&&b.bindings.some(Mh)),w=Td(null,c,null,512|am(l),null,null,u,f,d,null,tm(p,d,!0));w[Lt]=p,na(w);let I=null;try{let b=VE(Lt,w,2,"#host",()=>c.directiveRegistry,!0,0);om(f,p,b),wo(p,w),Zx(c,w,b),gx(c,b,w),BE(c,b),t!==void 0&&YE(b,this.ngContentSelectors,t),I=yn(b.index,w),w[Je]=I[Je],Pd(c,w,null)}catch(b){throw I!==null&&id(I),id(w),b}finally{me(le.DynamicComponentEnd),ra()}return new va(this.componentType,w,!!h)}finally{J(a)}}};function ZE(n,e,t,r){let i=n?["ng-version","21.0.6"]:_x(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[pd].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let u=r[d];if(typeof u!="function")for(let f of u.bindings){a+=f[pd].requiredVars;let p=d+1;f.create&&(f.targetIdx=p,(o??=[]).push(f)),f.update&&(f.targetIdx=p,(s??=[]).push(f))}}let l=[e];if(r)for(let d of r){let u=typeof d=="function"?d:d.type,f=Cc(u);l.push(f)}return sm(0,null,KE(o,s),1,a,l,null,null,null,[i],null)}function KE(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Mh(n){let e=n[pd].kind;return e==="input"||e==="twoWay"}var va=class extends Dm{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Oc(t[z],Lt),this.location=ii(this._tNode,t),this.instance=yn(this._tNode.index,t)[Je],this.hostView=this.changeDetectorRef=new ri(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=oE(r,i[z],i,e,t);this.previousInputValues.set(e,t);let s=yn(r.index,i);Sm(s,1)}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function YE(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ta=(()=>{class n{static __NG_ELEMENT_ID__=QE}return n})();function QE(){let n=vn();return Rm(n,dt())}var XE=Ta,Pm=class extends XE{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ii(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){let e=xd(this._hostTNode,this._hostLView);if(Hh(e)){let t=pa(e,this._hostLView),r=fa(e),i=t[z].data[r+8];return new sr(i,t)}else return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ah(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Sh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Ch(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!Fb(e),c;if(l)c=t;else{let I=t||{};c=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef,s=I.directives,a=I.bindings}let d=l?e:new Eo(Xn(e)),u=r||this.parentInjector;if(!o&&d.ngModule==null){let b=(l?u:this.parentInjector).get(wt,null);b&&(o=b)}let f=Xn(d.componentType??{}),p=Sh(this._lContainer,f?.id??null),h=p?.firstChild??null,w=d.create(u,i,h,o,s,a);return this.insertImpl(w.hostView,c,Ch(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Op(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ke],c=new Pm(l,l[lt],l[ke]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return EE(s,i,o,r),e.attachToViewContainerRef(),Dc(nd(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ah(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=dd(this._lContainer,t);r&&(ro(nd(this._lContainer),t),pm(r[z],r))}detach(e){let t=this._adjustIndex(e,-1),r=dd(this._lContainer,t);return r&&ro(nd(this._lContainer),t)!=null?new ri(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ah(n){return n[fo]}function nd(n){return n[fo]||(n[fo]=[])}function Rm(n,e){let t,r=e[n.index];return Et(r)?t=r:(t=xE(r,e,null,n),e[n.index]=t,cm(e,t)),eC(t,e,n,r),new Pm(t,n,e)}function JE(n,e){let t=n[ct],r=t.createComment(""),i=gn(e,n),o=t.parentNode(i);return ga(t,o,r,t.nextSibling(i),!1),r}var eC=tC;function tC(n,e,t,r){if(n[mn])return;let i;t.type&8?i=Ot(r):i=JE(e,t),n[mn]=i}var md=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},gd=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ld(e,t).matches!==null&&this.queries[t].setDirty()}},yd=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=cC(e):this.predicate=e}},vd=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Id=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,nC(t,o)),this.matchTNodeWithReadOption(e,t,ca(t,e,o,!1,!1))}else r===xo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ca(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===So||i===Ta||i===xo&&t.type&4)this.addMatch(t.index,-2);else{let o=ca(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function nC(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function rC(n,e){return n.type&11?ii(n,e):n.type&4?Rd(n,e):null}function iC(n,e,t,r){return t===-1?rC(e,n):t===-2?oC(n,e,r):ha(n,n[z],t,e)}function oC(n,e,t){if(t===So)return ii(e,n);if(t===xo)return Rd(e,n);if(t===Ta)return Rm(e,n)}function Lm(n,e,t,r){let i=e[Rt].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(iC(e,d,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function wd(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Lm(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],d=e[-l];for(let u=Ue;u<d.length;u++){let f=d[u];f[hn]===f[ke]&&wd(f[z],f,c,r)}if(d[rr]!==null){let u=d[rr];for(let f=0;f<u.length;f++){let p=u[f];wd(p[z],p,c,r)}}}}}return r}function sC(n,e){return n[Rt].queries[e].queryList}function aC(n,e,t){let r=new ma((t&4)===4);return Vp(n,e,r,r.destroy),(e[Rt]??=new gd).queries.push(new md(r))-1}function lC(n,e,t){let r=Vc();return r.firstCreatePass&&(dC(r,new yd(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),aC(r,dt(),e)}function cC(n){return n.split(",").map(e=>e.trim())}function dC(n,e,t){n.queries===null&&(n.queries=new vd),n.queries.track(new Id(e,t))}function Ld(n,e){return n.queries.getByIndex(e)}function uC(n,e){let t=n[z],r=Ld(t,e);return r.crossesNgTemplate?wd(t,n,e,[]):Lm(t,n,r,e)}var Ia=class{};var Co=class extends Ia{injector;componentFactoryResolver=new hd(this);instance=null;constructor(e){super();let t=new Gr([...e.providers,{provide:Ia,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],e.parent||oo(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Om(n,e,t=null){return new Co({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var fC=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=kc(!1,t.type),i=r.length>0?Om([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ee({token:n,providedIn:"environment",factory:()=>new n(de(wt))})}return n})();function Od(n){return Ph(()=>{let e=gC(n),t=vt(_e({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ed.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(fC).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||St.Emulated,styles:n.styles||Kn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ad("NgStandalone"),yC(t);let r=n.dependencies;return t.directiveDefs=kh(r,pC),t.pipeDefs=kh(r,vp),t.id=vC(t),t})}function pC(n){return Xn(n)||Cc(n)}function hC(n,e){if(n==null)return Jn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Ea.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function mC(n){if(n==null)return Jn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function gC(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Jn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hC(n.inputs,e),outputs:mC(n.outputs),debugInfo:null}}function yC(n){n.features?.forEach(e=>e(n))}function kh(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function vC(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var jd=new ie("");function Hd(n){return!!n&&typeof n.then=="function"}function jm(n){return!!n&&typeof n.subscribe=="function"}var Hm=new ie("");var $d=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=ee(Hm,{optional:!0})??[];injector=ee(Yn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Zs(this.injector,i);if(Hd(o))t.push(o);else if(jm(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$m=new ie("");function Vm(){Zl(()=>{let n="";throw new te(600,n)})}function Bm(n){return n.isBoundToModule}var IC=10;var Mo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ee(Xr);afterRenderManager=ee(dm);zonelessEnabled=ee(Jr);rootEffectScheduler=ee(dh);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ee(or);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(nc(t=>!t))}constructor(){ee(Do,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=ee(wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Yn.NULL){return this._injector.get(De).run(()=>{me(le.BootstrapComponentStart);let s=t instanceof Sa;if(!this._injector.get($d).done){let h="";throw new te(405,h)}let l;s?l=t:l=this._injector.get(_a).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=Bm(l)?void 0:this._injector.get(Ia),d=r||l.selector,u=l.create(i,[],d,c),f=u.location.nativeElement,p=u.injector.get(jd,null);return p?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),vo(this.components,u),p?.unregisterApplication(f)}),this._loadComponent(u),me(le.BootstrapComponentEnd,u),u})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(le.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Md.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw me(le.ChangeDetectionEnd),new te(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),me(le.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ar,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<IC;){me(le.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{me(le.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!mo(i))continue;let o=r&&!this.zonelessEnabled?0:1;bm(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;vo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get($m,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var PP=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ao(n,e,t,r){let i=dt(),o=i[z],s=n+Lt,a=o.firstCreatePass?FE(s,o,2,e,t,r):o.data[s];return rE(a,i,n,e,wC),r!=null&&Kx(i,a),Ao}function ko(){let n=vn(),e=iE(n);return qp(e)&&Gp(),Up(),ko}function No(n,e,t,r){return Ao(n,e,t,r),ko(),No}var wC=(n,e,t,r,i)=>(sh(!0),rm(e[ct],r,rh()));var Po="en-US";var bC=Po;function Fm(n){typeof n=="string"&&(bC=n.toLowerCase().replace(/_/g,"-"))}function Da(n,e,t){return lC(n,e,t),Da}function Ma(n){let e=dt(),t=Vc(),r=qc();ta(r+1);let i=Ld(t,r);if(n.dirty&&Lp(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=uC(e,r);n.reset(o,lx),n.notifyOnChanges()}return!0}return!1}function Aa(){return sC(dt(),qc())}var Um=(()=>{class n{applicationErrorHandler=ee(Xr);appRef=ee(Mo);taskService=ee(or);ngZone=ee(De);zonelessEnabled=ee(Jr);tracing=ee(Do,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(to):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ee(oa,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Yc:Kc;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(to+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Yc(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wm(){return[{provide:Qn,useExisting:Um},{provide:De,useClass:qs},{provide:Jr,useValue:!0}]}function xC(){return typeof $localize<"u"&&$localize.locale||Po}var Vd=new ie("",{factory:()=>ee(Vd,{optional:!0,skipSelf:!0})||xC()});var MC=(()=>{class n{zone=ee(De);changeDetectionScheduler=ee(Qn);applicationRef=ee(Mo);applicationErrorHandler=ee(Xr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AC=new ie("",{factory:()=>!1});function kC({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new De(vt(_e({},Gm()),{scheduleInRootZone:e})),[{provide:Jr,useValue:!1},{provide:De,useFactory:n},{provide:er,multi:!0,useFactory:()=>{let t=ee(MC,{optional:!0});return()=>t.initialize()}},{provide:er,multi:!0,useFactory:()=>{let t=ee(NC);return()=>{t.initialize()}}},{provide:oa,useValue:e??Zc}]}function qm(n){let e=n?.scheduleInRootZone,t=kC({ngZoneFactory:()=>{let r=Gm(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&Ad("NgZone_CoalesceEvent"),new De(r)},scheduleInRootZone:e});return Ac([{provide:AC,useValue:!0},t])}function Gm(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var NC=(()=>{class n{subscription=new je;initialized=!1;zone=ee(De);pendingTasks=ee(or);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bd=new ie(""),PC=new ie("");function Ro(n){return!n.moduleRef}function RC(n){let e=Ro(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{Ro(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xr),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ro(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Bd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Bd);s.add(o),n.moduleRef.onDestroy(()=>{vo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return OC(r,t,()=>{let o=e.get(or),s=o.add(),a=e.get($d);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Vd,Po);if(Fm(l||Po),!e.get(PC,!0))return Ro(n)?e.get(Mo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ro(n)){let d=e.get(Mo);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return LC?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var LC;function OC(n,e,t){try{let r=t();return Hd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var ka=null;function jC(n=[],e){return Yn.create({name:e,providers:[{provide:io,useValue:"platform"},{provide:Bd,useValue:new Set([()=>ka=null])},...n]})}function HC(n=[]){if(ka)return ka;let e=jC(n);return ka=e,Vm(),$C(e),e}function $C(n){let e=n.get(ba,null);Zs(n,()=>{e?.forEach(t=>t())})}function zm(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;me(le.BootstrapApplicationStart);try{let o=i?.injector??HC(r),s=[Wm(),ch,...t||[]],a=new Co({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return RC({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{me(le.BootstrapApplicationEnd)}}var Zm=null;function Oo(){return Zm}function Ud(n){Zm??=n}var Lo=class{};function Wd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var jo=class{};var Km="browser";var Ho=class{_doc;constructor(e){this._doc=e}manager},Na=(()=>{class n extends Ho{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(Ct))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),La=new ie(""),Zd=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Na));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Na);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(La),de(De))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),qd="ng-app-id";function Ym(n){for(let e of n)e.remove()}function Qm(n,e){let t=e.createElement("style");return t.textContent=n,t}function VC(n,e,t,r){let i=n.head?.querySelectorAll(`style[${qd}="${e}"],link[${qd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(qd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function zd(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Kd=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,VC(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Qm);r?.forEach(i=>this.addUsage(i,this.external,zd))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Ym(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Ym(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Qm(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,zd(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(Ct),de(wa),de(xa,8),de(_o))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),Gd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yd=/%COMP%/g;var Jm="%COMP%",BC=`_nghost-${Jm}`,FC=`_ngcontent-${Jm}`,UC=!0,WC=new ie("",{factory:()=>UC});function qC(n){return FC.replace(Yd,n)}function GC(n){return BC.replace(Yd,n)}function eg(n,e){return e.map(t=>t.replace(Yd,n))}var Qd=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,l=null,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.defaultRenderer=new $o(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Ra?i.applyToHost(t):i instanceof Vo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.tracingService;switch(r.encapsulation){case St.Emulated:o=new Ra(l,c,r,this.appId,d,s,a,u);break;case St.ShadowDom:return new Pa(l,t,r,s,a,this.nonce,u,c);case St.ExperimentalIsolatedShadowDom:return new Pa(l,t,r,s,a,this.nonce,u);default:o=new Vo(l,c,r,d,s,a,u);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(Zd),de(Kd),de(wa),de(WC),de(Ct),de(De),de(xa),de(Do,8))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),$o=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Gd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Xm(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Xm(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Gd[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Gd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(lr.DashCase|lr.Important)?e.style.setProperty(t,r,i&lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Oo().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Xm(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Pa=class extends $o{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,l){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=r.styles;c=eg(r.id,c);for(let u of c){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=u,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let u of d){let f=zd(u,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Vo=class extends $o{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let c=r.styles;this.styles=l?eg(l,c):c,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ni.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ra=class extends Vo{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,t,r,o,s,a,l,c),this.contentAttr=qC(c),this.hostAttr=GC(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Oa=class n extends Lo{supportsDOMEvents=!0;static makeCurrent(){Ud(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=zC();return t==null?null:ZC(t)}resetBaseElement(){Bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wd(document.cookie,e)}},Bo=null;function zC(){return Bo=Bo||document.head.querySelector("base"),Bo?Bo.getAttribute("href"):null}function ZC(n){return new URL(n,document.baseURI).pathname}var KC=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),tg=["alt","control","meta","shift"],YC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QC={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ng=(()=>{class n extends Ho{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oo().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),tg.forEach(c=>{let d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=YC[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),tg.forEach(s=>{if(s!==i){let a=QC[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(Ct))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();function Xd(n,e,t){let r=_e({rootComponent:n,platformRef:t?.platformRef},XC(e));return zm(r)}function XC(n){return{appProviders:[...rS,...n?.providers??[]],platformProviders:nS}}function JC(){Oa.makeCurrent()}function eS(){return new Jt}function tS(){return Cd(document),document}var nS=[{provide:_o,useValue:Km},{provide:ba,useValue:JC,multi:!0},{provide:Ct,useFactory:tS}];var rS=[{provide:io,useValue:"root"},{provide:Jt,useFactory:eS},{provide:La,useClass:Na,multi:!0},{provide:La,useClass:ng,multi:!0},Qd,Kd,Zd,{provide:ar,useExisting:Qd},{provide:jo,useClass:KC},[]];var m=class n{x;y;constructor(e,t){this.x=e||0,this.y=t||0}get width(){return this.x}set width(e){this.x=e}get left(){return this.x}get height(){return this.y}set height(e){this.y=e}get top(){return this.y}add(e){return new n(this.x+e.x,this.y+e.y)}sub(e){return this.add(e.mul(-1))}mul(e){return new n(this.x*e,this.y*e)}div(e){return this.mul(1/e)}clone(){return new n(this.x,this.y)}get normal(){return new n(rg(this.x),rg(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}};function rg(n){return n>0?1:n<0?-1:0}var oe=class{_phase=0;_propagationStopped=!1;_target;_source=null;stopPropagation(){this._propagationStopped=!0,this.destroy()}get propagationStopped(){return this._propagationStopped}get target(){return this._target}set target(e){if(this._target!==void 0)throw new Error("Event target already set!");this._target=e,this._phase=0}get source(){return this._source}set source(e){if(this._source!==null)throw new Error("Event source already set!");this._source=e}get phase(){return this._phase}capture(){this._phase=1}destroy(){this._target=null,this._source=null}};var Ht=class extends oe{};var nn=class extends oe{};var Ne=class{_eventHandlers=new Map;on(e,t){let r=this._eventHandlers.get(e)||new Set;r.has(t)||(r.add(t),this._eventHandlers.set(e,r))}off(e,t){let r=this._eventHandlers.get(e)||new Set;r.delete(t),this._eventHandlers.set(e,r)}handleEvent(e){e.source===null&&(e.source=this);for(let[t,r]of this._eventHandlers)if(e instanceof t){for(let i of r)if(i(e),e.propagationStopped)return}}};var rn=class extends oe{};var wn=class extends Ne{_parent;_children=[];_depthSortedChildrenCache;_childrenCacheDirty=!0;_visible=!0;_depth=0;constructor(e){super(),e&&e.forEach(t=>this.addChild(t))}set isVisible(e){this._visible=e}get isVisible(){if(!this._visible)return!1;let e=this.parent;return e?e.isVisible:!0}get depth(){return this._depth}set depth(e){this._depth!==e&&(this._depth=e,this._parent&&(this._parent._childrenCacheDirty=!0))}get children(){return this._children}get depthSortedChildren(){return(this._childrenCacheDirty||!this._depthSortedChildrenCache)&&(this._depthSortedChildrenCache=[...this._children].sort((e,t)=>e.depth-t.depth),this._childrenCacheDirty=!1),this._depthSortedChildrenCache}get parent(){return this._parent}set parent(e){if(this._parent!==void 0)throw new Error("Cannot set parent while one already set! First remove this child from existing parent.");this._parent=e,this.dispatchEvent(new rn)}get rootElement(){return this._parent===void 0?this:this._parent.rootElement}clearParent(){this._parent=void 0}addChild(e,t=0){this._children.push(e),e._depth=t,this._childrenCacheDirty=!0,e.parent=this,e.dispatchEvent(new Ht)}removeChild(e){this._children=this._children.filter(t=>t!==e),this._childrenCacheDirty=!0,e.dispatchEvent(new nn),e.clearParent()}removeAllChildren(){this._children.forEach(e=>{e.dispatchEvent(new nn),e.removeAllChildren(),e.clearParent()}),this._children=[],this._childrenCacheDirty=!0}remove(){if(this._parent===void 0)throw new Error("Cannot remove, no parent set!");this._parent.removeChild(this)}dispatchEvent(e){if(e.target===void 0){e.target=this,this.rootElement.dispatchEvent(e);return}if(super.handleEvent(e),!e.propagationStopped&&!(e.target===this&&(e.capture(),super.handleEvent(e),e.propagationStopped))&&e.phase===0){this._children.length===0&&e.destroy();for(let t of this._children)if(t.dispatchEvent(e),e.propagationStopped)return}}};var Ke=class extends wn{};function ig(n,e,t=!1){let r=t?n.depthSortedChildren:n.children;for(let i of r)e(i),ig(i,e,t)}var ne=class{static childrenByType(e,t,r=!1,i=!1){if(!r){let a=[];return ig(t,l=>{l instanceof e&&a.push(l)},!1),a}let o=[];function s(a,l){for(let c of a.children){let d=l+c.depth;i&&!c.isVisible||(c instanceof e&&o.push({element:c,depth:d}),s(c,d))}}return s(t,0),o.sort((a,l)=>a.depth-l.depth),o.map(a=>a.element)}static parentByType(e,t){if(t.parent instanceof e)return t.parent;if(t.parent)return this.parentByType(e,t.parent)}};var bn=class{constructor(e){this.workFn=e;this.maxFps=10,this.fpsInterval=this.computeFpsInterval(),this.previousTime=0,this.adjustedPreviousTime=0,this.stopRequested=!1,document.addEventListener("visibilitychange",()=>{document.hidden?this.stopRequested=!0:this.start(this.maxFps)})}maxFps;fpsInterval;previousTime;adjustedPreviousTime;stopRequested;start(e){this.maxFps=e,this.fpsInterval=this.computeFpsInterval(),this.previousTime=0,this.adjustedPreviousTime=0,this.stopRequested=!1,requestAnimationFrame(this.workLoop.bind(this))}workLoop(e){if(!this.stopRequested){if(this.previousTime===0)this.previousTime=e,this.adjustedPreviousTime=e;else{let t=e-this.adjustedPreviousTime;t>=this.fpsInterval&&(this.workFn(e,e-this.previousTime),this.adjustedPreviousTime=e-t%this.fpsInterval,this.previousTime=e)}requestAnimationFrame(this.workLoop.bind(this))}}computeFpsInterval(){return 1e3/this.maxFps}};var Z=class{static _data=new Map;static get(e){return this._data.get(e)}static set(e,t){this._data.set(e,t)}};var xn=class extends oe{constructor(t){super();this.scene=t}};var oi=class extends Ne{constructor(t,r,i,o){super();this.viewport=t;this.renderer=r;this.physicsSimulation=i;this.inputDevices=o;r.setViewport(t),i.setViewport(t)}loadScene(t){this.renderer.setRootElement(t),this.physicsSimulation.setRootElement(t),this.inputDevices.forEach(r=>r.setRootElement(t)),this.handleEvent(new xn(t))}start(t,r){this.renderer.start(t),this.physicsSimulation.start(r)}};var En=class extends Ne{rootElement;setRootElement(e){this.rootElement=e}dispatchEvent(e){e.target=null,this.rootElement?.dispatchEvent(e)}};var We=class extends oe{};var ge=class extends We{constructor(t,r){super();this.key=t;this.action=r}},si=class extends En{constructor(e){super(),e.addEventListener("keydown",this.eventHandler.bind(this)),e.addEventListener("keyup",this.eventHandler.bind(this))}eventHandler(e){this.dispatchEvent(new ge(e.key,e.type==="keydown"?0:1))}};var iS=[0,2,1];var Cn=class extends We{constructor(t,r,i){super();this.button=t;this.action=r;this.point=i}},$t=class extends We{constructor(t){super();this.point=t}},Sn=class n extends En{constructor(t,r){super();this.getLocalPoint=r;t.addEventListener("mousedown",this.inputEventHandler.bind(this)),t.addEventListener("mouseup",this.inputEventHandler.bind(this)),t.addEventListener("mousemove",this.moveEventHandler.bind(this))}static lastPosition=null;static getLastPosition(){return n.lastPosition}inputEventHandler(t){for(let r of iS)t.button===r&&this.dispatchEvent(new Cn(r,t.type==="mousedown"?0:1,this.getLocalPoint(new m(t.x,t.y))))}moveEventHandler(t){let r=this.getLocalPoint(new m(t.x,t.y));n.lastPosition=r,this.dispatchEvent(new $t(r))}};var ai=class extends We{constructor(t,r){super();this.type=t;this.meta=r}},li=class extends Ne{constructor(t){super();this.element=t}trigger(t,r){let i={when:o=>(this.element.on(o.type,s=>{o.condition(s)&&this.handleEvent(new ai(t,r))}),i)};return i}};var ja=class extends oe{},ci=class extends Ne{inputMapper;_state=new Map;constructor(e){super(),this.inputMapper=new li(e),this.inputMapper.on(ai,t=>{let r=t.meta==="on";r!==this._state.get(t.type)&&(this._state.set(t.type,r),this.handleEvent(new ja))})}setOn(e){return this.inputMapper.trigger(e,"on")}setOff(e){return this.inputMapper.trigger(e,"off")}onChange(e){this.on(ja,()=>{e(this._state)})}get state(){return this._state}};var _n=class extends We{constructor(t){super();this.point=t}},cr=class extends We{constructor(t){super();this.point=t}},dr=class extends We{constructor(t,r){super();this.button=t;this.point=r}};var di=class extends Ne{constructor(t){super();this._target=t;this.setupListeners()}isHovered=!1;hasCheckedInitialPosition=!1;get target(){return this._target}setupListeners(){this.target.on(rn,this.handleElementAdded.bind(this)),this.target.rootElement.on($t,this.handleMouseMove.bind(this)),this.target.rootElement.on(Cn,this.handleMouseInput.bind(this))}handleElementAdded(){this.hasCheckedInitialPosition||(this.hasCheckedInitialPosition=!0,setTimeout(()=>{this.checkInitialPosition()},15))}checkInitialPosition(){let t=Sn.getLastPosition();t&&this.isPointInBounds(t)&&(this.isHovered=!0,this.handleEvent(new _n(t)))}handleMouseMove(t){if(!(t instanceof $t))return;let r=this.isPointInBounds(t.point);r&&!this.isHovered?(this.isHovered=!0,this.handleEvent(new _n(t.point))):!r&&this.isHovered&&(this.isHovered=!1,this.handleEvent(new cr(t.point)))}handleMouseInput(t){t instanceof Cn&&t.action===1&&this.isHovered&&this.handleEvent(new dr(t.button,t.point))}isPointInBounds(t){let r=this.target.position,i=this.target.width,o=this.target.height;return t.x>=r.x&&t.x<=r.x+i&&t.y>=r.y&&t.y<=r.y+o}destroy(){this.target.off(rn,this.handleElementAdded.bind(this)),this.target.rootElement.off($t,this.handleMouseMove.bind(this)),this.target.rootElement.off(Cn,this.handleMouseInput.bind(this))}};var ut=class extends wn{attachedDOM;draw(e){}};function Tn(n){return"item"in n&&"position"in n}var H=class n extends ut{_position;_translation;_opacity=1;_scale=new m(1,1);_fillColor=void 0;clipRegion=void 0;cacheable=!1;constructor(e,t){super(t),this._position=e||new m,this._translation=new m}get cacheKey(){}get opacity(){let e=this._opacity,t=ne.parentByType(n,this);return t&&(e*=t.opacity),e}set opacity(e){this._opacity=e}get scale(){let e=this._scale,t=ne.parentByType(n,this);return t&&(e=new m(e.x*t.scale.x,e.y*t.scale.y)),e}set scale(e){this._scale=e}get ownPosition(){return this._position.add(this._translation)}get position(){let e=this.ownPosition,t=ne.parentByType(n,this);return t?t.position.add(e):e}set position(e){this._position=e}set translation(e){this._translation=e}get fillColor(){if(this._fillColor!==void 0)return this._fillColor;let e=ne.parentByType(n,this);if(e)return e.fillColor}set fillColor(e){this._fillColor=e}get width(){return 0}get height(){return 0}get size(){return new m(this.width,this.height)}};function sS(n,e){let t=new Image;t.onload=()=>L(null,null,function*(){let{naturalWidth:r,naturalHeight:i}=t,s=new OffscreenCanvas(r,i).getContext("2d");if(s){s.drawImage(t,0,0);let a=yield createImageBitmap(s.getImageData(0,0,r,i));e(a)}}),t.src=n}var Vt=class n{static nextId=0;id;data=new Image;width=0;height=0;constructor(){this.id=`tex_${n.nextId++}`}static empty(){return new n}static load(e){let t=new n;return sS(e,r=>{t.data=r,t.width=r.width,t.height=r.height}),t}static fromImageBitmap(e){let t=new n;return t.data=e,t.width=e.width,t.height=e.height,t}toOffscreenCanvas(){let e=new OffscreenCanvas(this.width,this.height);return e.getContext("2d")?.drawImage(this.data,0,0),e}};var _t=class{cache=new Map;get(e,t){return L(this,null,function*(){let r=this.cache.get(e);return r||(r=t(),this.cache.set(e,r)),r})}};var Jd=class{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){let t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){let t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach(t=>{let r=this.references.get(t);r&&(r.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,t])=>!t.resolved&&!t.requested).map(([e,t])=>e)}},Tt=new Map,ur="___parser_",Dt={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Ha={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},$a={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},ve=class n{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new n}primitiveGenerateN(e,t){let r=Ha[e],i=$a[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${r}(offset, ${i});`),t.pushCode(`offset += ${Dt[e]};`)}primitiveN(e,t,r){return this.setNextParser(e,t,r)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,r){return r.length=e,this.setNextParser("bit",t,r)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return Tt.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!Tt.has(t.type)&&!(t.type in Dt))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(let r in t.choices){let i=parseInt(r,10),o=t.choices[i];if(isNaN(i))throw new Error(`Choice key "${r}" is not a number.`);if(typeof o=="string"&&!Tt.has(o)&&!(o in Dt))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof n)&&!Tt.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof n)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in Dt)&&!Tt.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){let t=new Jd(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${ur+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${ur+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){let t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(r=>{var i;(i=Tt.get(r))===null||i===void 0||i.addAliasedCode(e)})}compile(){let e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(Dt).indexOf(this.type)>=0)e=Dt[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=Dt[this.options.type]:this.options.type instanceof n&&(t=this.options.type.sizeOf()),e=this.options.length*t}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,r){let i=new n;return i.type=e,i.varName=t,i.options=r,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}let t=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;let t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let r=e.addImport(this.options.assert);e.pushCode(`if (!${r}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){let t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){let r=e.generateTmpVariable();e.pushCode(`var ${r} = 0;`);let i=(d=0)=>{let u=0;for(let f=d;f<e.bitFields.length;f++){let p=e.bitFields[f].options.length;if(u+p>32)break;u+=p}return u},o=d=>(d<=8?(e.pushCode(`${r} = dataView.getUint8(offset);`),d=8):d<=16?(e.pushCode(`${r} = dataView.getUint16(offset);`),d=16):d<=24?(e.pushCode(`${r} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),d=24):(e.pushCode(`${r} = dataView.getUint32(offset);`),d=32),e.pushCode(`offset += ${d/8};`),d),s=0,a=this.endian==="be",l=0,c=0;e.bitFields.forEach((d,u)=>{let f=d.options.length;if(f>c){if(c){let w=-1>>>32-c;e.pushCode(`${d.varName} = (${r} & 0x${w.toString(16)}) << ${f-c};`),f-=c}s=0,c=l=o(i(u)-c)}let p=a?l-s-f:s,h=-1>>>32-f;e.pushCode(`${d.varName} ${f<d.options.length?"|=":"="} ${r} >> ${p} & 0x${h.toString(16)};`),d.options.length===32&&e.pushCode(`${d.varName} >>>= 0`),d.options.assert&&d.generateAssert(e),d.options.formatter&&d.generateFormatter(e,d.varName,d.options.formatter),s+=f,c-=f}),e.bitFields=[]}}generateSeek(e){let t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){let t=e.generateVariable(this.varName),r=e.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",s='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let a=this.options.length;e.pushCode(`var ${r} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${r} < ${a});`);let l=`offset - ${r} < ${a} ? offset - 1 : offset`;e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, ${l}), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, ${l}));`)}else if(this.options.length){let a=e.generateOption(this.options.length);e.pushCode(o?`${t} = Array.from(buffer.subarray(offset, offset + ${a}), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${r} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, offset - 1), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${r} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(o?`${t} = Array.from(buffer.subarray(${r}, offset), ${s}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${r}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){let t=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let r=this.options.readUntil,i=e.generateTmpVariable(),o=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${o} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${o} = dataView.getUint8(offset);`);let s=e.addImport(r);e.pushCode(`if (${s}.call(${e.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${t} = buffer.subarray(offset);`);else{let r=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${r});`),e.pushCode(`offset += ${r};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){let t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),i=this.options.type,o=e.generateTmpVariable(),s=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,c=typeof l=="string";if(c?e.pushCode(`${s} = {};`):e.pushCode(`${s} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):r!==void 0?e.pushCode(`for (var ${o} = offset + ${r}; offset < ${o}; ) {`):e.pushCode(`for (var ${o} = ${t}; ${o} > 0; ${o}--) {`),typeof i=="string")if(Tt.get(i)){let d=e.generateTmpVariable();if(e.pushCode(`var ${d} = ${ur+i}(offset, {`),e.useContextVariables){let u=e.generateVariable();e.pushCode(`$parent: ${u},`),e.pushCode(`$root: ${u}.$root,`),!this.options.readUntil&&r===void 0&&e.pushCode(`$index: ${t} - ${o},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${d}.result; offset = ${d}.offset;`),i!==this.alias&&e.addReference(i)}else{let d=Ha[i],u=$a[i];e.pushCode(`var ${a} = dataView.get${d}(offset, ${u});`),e.pushCode(`offset += ${Dt[i]};`)}else if(i instanceof n){e.pushCode(`var ${a} = {};`);let d=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${d};`),e.pushCode(`${a}.$root = ${d}.$root;`),!this.options.readUntil&&r===void 0&&e.pushCode(`${a}.$index = ${t} - ${o};`)),i.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(c?e.pushCode(`${s}[${a}.${l}] = ${a};`):e.pushCode(`${s}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){let d=this.options.readUntil,u=e.addImport(d);e.pushCode(`while (!${u}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,r){if(typeof r=="string"){let i=e.generateVariable(this.varName);if(Tt.has(r)){let o=e.generateTmpVariable();e.pushCode(`var ${o} = ${ur+r}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${i}.$parent,`),e.pushCode(`$root: ${i}.$root,`)),e.pushCode("});"),e.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),r!==this.alias&&e.addReference(r)}else{let o=Ha[r],s=$a[r];e.pushCode(`${i} = dataView.get${o}(offset, ${s});`),e.pushCode(`offset += ${Dt[r]}`)}}else r instanceof n&&(e.pushPath(t),r.generate(e),e.popPath(t))}generateChoice(e){let t=e.generateOption(this.options.tag),r=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${r} = {};`),e.useContextVariables)){let i=e.generateVariable();e.pushCode(`${r}.$parent = ${i};`),e.pushCode(`${r}.$root = ${i}.$root;`)}e.pushCode(`switch(${t}) {`);for(let i in this.options.choices){let o=parseInt(i,10),s=this.options.choices[o];e.pushCode(`case ${o}:`),this.generateChoiceCase(e,this.varName,s),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}generateNest(e){let t=e.generateVariable(this.varName);if(this.options.type instanceof n){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){let r=e.generateVariable();e.pushCode(`${t}.$parent = ${r};`),e.pushCode(`${t}.$root = ${r}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(Tt.has(this.options.type)){let r=e.generateTmpVariable();if(e.pushCode(`var ${r} = ${ur+this.options.type}(offset, {`),e.useContextVariables){let i=e.generateVariable();e.pushCode(`$parent: ${i},`),e.pushCode(`$root: ${i}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${r}.result; offset = ${r}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){let t=e.generateVariable(this.varName),r=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){let l=this.options.readUntil,c=e.generateTmpVariable(),d=e.generateTmpVariable();e.pushCode(`var ${c} = offset;`),e.pushCode(`var ${d} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${d} = dataView.getUint8(offset);`);let u=e.addImport(l);e.pushCode(`if (${u}.call(${e.generateVariable()}, ${d}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${r} = buffer.subarray(${c}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${r} = buffer.subarray(offset);`);else{let l=e.generateOption(this.options.length);e.pushCode(`${r} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${r} = buffer.constructor.from(${r});`);let i=e.generateTmpVariable(),o=e.generateTmpVariable(),s=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${r} = ${a}.call(this, ${r}).subarray(0);`),e.pushCode(`var ${i} = buffer;`),e.pushCode(`var ${o} = offset;`),e.pushCode(`var ${s} = dataView;`),e.pushCode(`buffer = ${r};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof n)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(Tt.has(this.options.type)){let l=e.generateTmpVariable();e.pushCode(`var ${l} = ${ur+this.options.type}(0);`),e.pushCode(`${t} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${i};`),e.pushCode(`dataView = ${s};`),e.pushCode(`offset = ${o};`)}generateFormatter(e,t,r){if(typeof r=="function"){let i=e.addImport(r);e.pushCode(`${t} = ${i}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){let t=this.options.type,r=e.generateOption(this.options.offset),i=e.generateTmpVariable(),o=e.generateVariable(this.varName);if(e.pushCode(`var ${i} = offset;`),e.pushCode(`offset = ${r};`),this.options.type instanceof n){if(e.pushCode(`${o} = {};`),e.useContextVariables){let s=e.generateVariable();e.pushCode(`${o}.$parent = ${s};`),e.pushCode(`${o}.$root = ${s}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${o}.$parent;`),e.pushCode(`delete ${o}.$root;`))}else if(Tt.has(this.options.type)){let s=e.generateTmpVariable();if(e.pushCode(`var ${s} = ${ur+this.options.type}(offset, {`),e.useContextVariables){let a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${o} = ${s}.result; offset = ${s}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(Dt).indexOf(this.options.type)>=0){let s=Ha[t],a=$a[t];e.pushCode(`${o} = dataView.get${s}(offset, ${a});`),e.pushCode(`offset += ${Dt[t]};`)}e.pushCode(`offset = ${i};`)}generateSaveOffset(e){let t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}};var aS=new ve().endianness("little").array("data",{type:"uint8",lengthInBytes:function(){return this.$parent.size-6}}),lS=new ve().endianness("little").uint8("red").uint8("green").uint8("blue"),cS=new ve().endianness("little").uint8("red").uint8("green").uint8("blue").uint8("alpha"),Va=new ve().endianness("little").uint16("length").string("value",{length:"length"}),sg=new ve().endianness("little").uint16("numberOfPackets").array("packets",{type:new ve().endianness("little").uint8("entriesToSkip").uint8("numberOfColors").array("colors",{type:lS,length:function(){return this.numberOfColors||256}}),length:"numberOfPackets"}),dS=new ve().endianness("little").uint32("size").uint32("firstIndex").uint32("lastIndex").seek(8).array("colors",{type:new ve().endianness("little").uint16("flags").nest("color",{type:cS}).array("name",{type:Va,length:function(){return this.flags===1?1:0}}),length:function(){return this.lastIndex-this.firstIndex+1}}),uS=new ve().endianness("little").uint16("flags").uint16("type").uint16("childLevel").uint16("ignored").uint16("ignored").uint16("blendMode").uint8("opacity").seek(3).nest("name",{type:Va}).array("tilesetIndex",{type:"uint32le",length:function(){return this.type===2?1:0}}),fS=new ve().endianness("little").uint16("linkedFrame"),pS=new ve().endianness("little").uint16("w").uint16("h").array("rawCompressed",{type:"uint8",length:function(){return this.$parent.$parent.size-26}}),hS=new ve().endianness("little").uint16("w").uint16("h").uint16("bitsPerTile").uint32("tileIdBitmask").uint32("xFlipBitmask").uint32("yFlipBitmask").uint32("diagonalFlipBitmask").seek(10).array("rawCompressed",{type:"uint8",length:function(){return this.$parent.$parent.size-54}}),eu=1,tu=2,mS=3,gS=new ve().endianness("little").uint16("layerIndex").int16("x").int16("y").uint8("opacity").uint16("cellType").int16("zIndex").seek(5).choice("data",{tag:"cellType",choices:{[eu]:fS,[tu]:pS,[mS]:hS}}),yS=new ve().endianness("little").uint16("fromFrame").uint16("toFrame").uint8("loopAnimationDirection").uint16("repeatAnimation").seek(10).nest("tagName",{type:Va}),vS=new ve().endianness("little").uint16("numberOfTags").seek(8).array("tags",{type:yS,length:"numberOfTags"}),IS=new ve().endianness("little").uint32("tilesetId").uint32("tilesetFlags").uint32("numberOfTiles").uint16("tileWidth").uint16("tileHeight").int16("baseIndex").seek(14).nest("name",{type:Va}).array("external",{type:"uint32le",length:function(){return this.tilesetFlags&1?2:0}}).array("internalLength",{type:"uint32le",length:function(){return this.tilesetFlags&2?1:0}}).array("rawCompressed",{type:"uint8",length:function(){return this.tilesetFlags&2?this.internalLength[0]:0}}),wS=new ve().endianness("little").uint32("fileSize").uint16("magicNumber").uint16("frames").uint16("width").uint16("height").uint16("colorDepth").uint32("flags").uint16("DEPRECATED_speed").seek(8).uint8("transparentIndex").seek(3).uint16("numberOfColors").uint8("pixelWidth").uint8("pixelHeight").int16("gridX").int16("gridY").uint16("gridWidth").uint16("gridHeight").seek(84),bS=new ve().endianness("little").uint32("bytesInFrame").uint16("magicNumber").uint16("oldChunks").uint16("frameDuration").seek(2).uint32("chunks"),ui=8196,nu=8197,Ba=8216,xS=4,ES=17,ru=8217,iu=8227,CS=new ve().endianness("little").uint32("size").uint16("chunkType").choice("data",{tag:"chunkType",choices:{[xS]:sg,[ES]:sg,[ui]:uS,[nu]:gS,[Ba]:vS,[ru]:dS,[iu]:IS},defaultChoice:aS}),SS=new ve().endianness("little").nest("header",{type:bS}).array("chunks",{type:CS,length:function(){return this.header.chunks||this.header.oldChunks}}),ag=new ve().useContextVars().endianness("little").nest("header",{type:wS}).array("frames",{type:SS,length:"header.frames"});function yi(n){let e=n.length;for(;--e>=0;)n[e]=0}var _S=0,Gg=1,TS=2,DS=3,MS=258,Du=29,ns=256,Zo=ns+1+Du,hi=30,Mu=19,zg=2*Zo+1,fr=15,ou=16,AS=7,Au=256,Zg=16,Kg=17,Yg=18,Iu=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),za=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),kS=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NS=512,sn=new Array((Zo+2)*2);yi(sn);var qo=new Array(hi*2);yi(qo);var Ko=new Array(NS);yi(Ko);var Yo=new Array(MS-DS+1);yi(Yo);var ku=new Array(Du);yi(ku);var Za=new Array(hi);yi(Za);function su(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var Xg,Jg,ey;function au(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var ty=n=>n<256?Ko[n]:Ko[256+(n>>>7)],Qo=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},Ye=(n,e,t)=>{n.bi_valid>ou-t?(n.bi_buf|=e<<n.bi_valid&65535,Qo(n,n.bi_buf),n.bi_buf=e>>ou-n.bi_valid,n.bi_valid+=t-ou):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Ft=(n,e,t)=>{Ye(n,t[e*2],t[e*2+1])},ny=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},PS=n=>{n.bi_valid===16?(Qo(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},RS=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,d,u,f,p,h,w=0;for(f=0;f<=fr;f++)n.bl_count[f]=0;for(t[n.heap[n.heap_max]*2+1]=0,c=n.heap_max+1;c<zg;c++)d=n.heap[c],f=t[t[d*2+1]*2+1]+1,f>l&&(f=l,w++),t[d*2+1]=f,!(d>r)&&(n.bl_count[f]++,p=0,d>=a&&(p=s[d-a]),h=t[d*2],n.opt_len+=h*(f+p),o&&(n.static_len+=h*(i[d*2+1]+p)));if(w!==0){do{for(f=l-1;n.bl_count[f]===0;)f--;n.bl_count[f]--,n.bl_count[f+1]+=2,n.bl_count[l]--,w-=2}while(w>0);for(f=l;f!==0;f--)for(d=n.bl_count[f];d!==0;)u=n.heap[--c],!(u>r)&&(t[u*2+1]!==f&&(n.opt_len+=(f-t[u*2+1])*t[u*2],t[u*2+1]=f),d--)}},ry=(n,e,t)=>{let r=new Array(fr+1),i=0,o,s;for(o=1;o<=fr;o++)i=i+t[o-1]<<1,r[o]=i;for(s=0;s<=e;s++){let a=n[s*2+1];a!==0&&(n[s*2]=ny(r[a]++,a))}},LS=()=>{let n,e,t,r,i,o=new Array(fr+1);for(t=0,r=0;r<Du-1;r++)for(ku[r]=t,n=0;n<1<<Iu[r];n++)Yo[t++]=r;for(Yo[t-1]=r,i=0,r=0;r<16;r++)for(Za[r]=i,n=0;n<1<<za[r];n++)Ko[i++]=r;for(i>>=7;r<hi;r++)for(Za[r]=i<<7,n=0;n<1<<za[r]-7;n++)Ko[256+i++]=r;for(e=0;e<=fr;e++)o[e]=0;for(n=0;n<=143;)sn[n*2+1]=8,n++,o[8]++;for(;n<=255;)sn[n*2+1]=9,n++,o[9]++;for(;n<=279;)sn[n*2+1]=7,n++,o[7]++;for(;n<=287;)sn[n*2+1]=8,n++,o[8]++;for(ry(sn,Zo+1,o),n=0;n<hi;n++)qo[n*2+1]=5,qo[n*2]=ny(n,5);Xg=new su(sn,Iu,ns+1,Zo,fr),Jg=new su(qo,za,0,hi,fr),ey=new su(new Array(0),kS,0,Mu,AS)},iy=n=>{let e;for(e=0;e<Zo;e++)n.dyn_ltree[e*2]=0;for(e=0;e<hi;e++)n.dyn_dtree[e*2]=0;for(e=0;e<Mu;e++)n.bl_tree[e*2]=0;n.dyn_ltree[Au*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},oy=n=>{n.bi_valid>8?Qo(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},lg=(n,e,t,r)=>{let i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]},lu=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&lg(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!lg(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},cg=(n,e,t)=>{let r,i,o=0,s,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+o++]&255,r+=(n.pending_buf[n.sym_buf+o++]&255)<<8,i=n.pending_buf[n.sym_buf+o++],r===0?Ft(n,i,e):(s=Yo[i],Ft(n,s+ns+1,e),a=Iu[s],a!==0&&(i-=ku[s],Ye(n,i,a)),r--,s=ty(r),Ft(n,s,t),a=za[s],a!==0&&(r-=Za[s],Ye(n,r,a)));while(o<n.sym_next);Ft(n,Au,e)},wu=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,l=-1,c;for(n.heap_len=0,n.heap_max=zg,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=l=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)c=n.heap[++n.heap_len]=l<2?++l:0,t[c*2]=1,n.depth[c]=0,n.opt_len--,i&&(n.static_len-=r[c*2+1]);for(e.max_code=l,s=n.heap_len>>1;s>=1;s--)lu(n,t,s);c=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],lu(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[c*2]=t[s*2]+t[a*2],n.depth[c]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=c,n.heap[1]=c++,lu(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],RS(n,e),ry(t,l,n.bl_count)},dg=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<l&&o===s)&&(a<c?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[Zg*2]++):a<=10?n.bl_tree[Kg*2]++:n.bl_tree[Yg*2]++,a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))},ug=(n,e,t)=>{let r,i=-1,o,s=e[1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<l&&o===s)){if(a<c)do Ft(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(Ft(n,o,n.bl_tree),a--),Ft(n,Zg,n.bl_tree),Ye(n,a-3,2)):a<=10?(Ft(n,Kg,n.bl_tree),Ye(n,a-3,3)):(Ft(n,Yg,n.bl_tree),Ye(n,a-11,7));a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}},OS=n=>{let e;for(dg(n,n.dyn_ltree,n.l_desc.max_code),dg(n,n.dyn_dtree,n.d_desc.max_code),wu(n,n.bl_desc),e=Mu-1;e>=3&&n.bl_tree[Qg[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},jS=(n,e,t,r)=>{let i;for(Ye(n,e-257,5),Ye(n,t-1,5),Ye(n,r-4,4),i=0;i<r;i++)Ye(n,n.bl_tree[Qg[i]*2+1],3);ug(n,n.dyn_ltree,e-1),ug(n,n.dyn_dtree,t-1)},HS=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<ns;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},fg=!1,$S=n=>{fg||(LS(),fg=!0),n.l_desc=new au(n.dyn_ltree,Xg),n.d_desc=new au(n.dyn_dtree,Jg),n.bl_desc=new au(n.bl_tree,ey),n.bi_buf=0,n.bi_valid=0,iy(n)},sy=(n,e,t,r)=>{Ye(n,(_S<<1)+(r?1:0),3),oy(n),Qo(n,t),Qo(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},VS=n=>{Ye(n,Gg<<1,3),Ft(n,Au,sn),PS(n)},BS=(n,e,t,r)=>{let i,o,s=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=HS(n)),wu(n,n.l_desc),wu(n,n.d_desc),s=OS(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?sy(n,e,t,r):n.strategy===4||o===i?(Ye(n,(Gg<<1)+(r?1:0),3),cg(n,sn,qo)):(Ye(n,(TS<<1)+(r?1:0),3),jS(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),cg(n,n.dyn_ltree,n.dyn_dtree)),iy(n),r&&oy(n)},FS=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(Yo[t]+ns+1)*2]++,n.dyn_dtree[ty(e)*2]++),n.sym_next===n.sym_end),US=$S,WS=sy,qS=BS,GS=FS,zS=VS,ZS={_tr_init:US,_tr_stored_block:WS,_tr_flush_block:qS,_tr_tally:GS,_tr_align:zS},KS=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},Xo=KS,YS=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},QS=new Uint32Array(YS()),XS=(n,e,t,r)=>{let i=QS,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1},Pe=XS,mr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:JS,_tr_stored_block:bu,_tr_flush_block:e_,_tr_tally:An,_tr_align:t_}=ZS,{Z_NO_FLUSH:kn,Z_PARTIAL_FLUSH:n_,Z_FULL_FLUSH:r_,Z_FINISH:ft,Z_BLOCK:pg,Z_OK:He,Z_STREAM_END:hg,Z_STREAM_ERROR:Ut,Z_DATA_ERROR:i_,Z_BUF_ERROR:cu,Z_DEFAULT_COMPRESSION:o_,Z_FILTERED:s_,Z_HUFFMAN_ONLY:Fa,Z_RLE:a_,Z_FIXED:l_,Z_DEFAULT_STRATEGY:c_,Z_UNKNOWN:d_,Z_DEFLATED:Qa}=vi,u_=9,f_=15,p_=8,h_=29,m_=256,xu=m_+1+h_,g_=30,y_=19,v_=2*xu+1,I_=15,X=3,Mn=258,Wt=Mn+X+1,w_=32,mi=42,Nu=57,Eu=69,Cu=73,Su=91,_u=103,pr=113,Uo=666,qe=1,Ii=2,gr=3,wi=4,b_=3,hr=(n,e)=>(n.msg=mr[e],e),mg=n=>n*2-(n>4?9:0),Dn=n=>{let e=n.length;for(;--e>=0;)n[e]=0},x_=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},E_=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,Nn=E_,tt=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},nt=(n,e)=>{e_(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,tt(n.strm)},se=(n,e)=>{n.pending_buf[n.pending++]=e},Fo=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},Tu=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=Xo(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Pe(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},ay=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,l=n.strstart>n.w_size-Wt?n.strstart-(n.w_size-Wt):0,c=n.window,d=n.w_mask,u=n.prev,f=n.strstart+Mn,p=c[r+s-1],h=c[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(c[i+s]!==h||c[i+s-1]!==p||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<f);if(o=Mn-(f-r),r=f-Mn,o>s){if(n.match_start=e,s=o,o>=a)break;p=c[r+s-1],h=c[r+s]}}while((e=u[e&d])>l&&--t!==0);return s<=n.lookahead?s:n.lookahead},gi=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-Wt)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),x_(n),r+=e),n.strm.avail_in===0)break;if(t=Tu(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=X)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=Nn(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=Nn(n,n.ins_h,n.window[i+X-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<X)););}while(n.lookahead<Wt&&n.strm.avail_in!==0)},ly=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,o,s=0,a=n.strm.avail_in;do{if(r=65535,o=n.bi_valid+42>>3,n.strm.avail_out<o||(o=n.strm.avail_out-o,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>o&&(r=o),r<t&&(r===0&&e!==ft||e===kn||r!==i+n.strm.avail_in)))break;s=e===ft&&r===i+n.strm.avail_in?1:0,bu(n,0,0,s),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,tt(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(Tu(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(s===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),s?wi:e!==kn&&e!==ft&&n.strm.avail_in===0&&n.strstart===n.block_start?Ii:(o=n.window_size-n.strstart,n.strm.avail_in>o&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,o+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),o>n.strm.avail_in&&(o=n.strm.avail_in),o&&(Tu(n.strm,n.window,n.strstart,o),n.strstart+=o,n.insert+=o>n.w_size-n.insert?n.w_size-n.insert:o),n.high_water<n.strstart&&(n.high_water=n.strstart),o=n.bi_valid+42>>3,o=n.pending_buf_size-o>65535?65535:n.pending_buf_size-o,t=o>n.w_size?n.w_size:o,i=n.strstart-n.block_start,(i>=t||(i||e===ft)&&e!==kn&&n.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,s=e===ft&&n.strm.avail_in===0&&r===i?1:0,bu(n,n.block_start,r,s),n.block_start+=r,tt(n.strm)),s?gr:qe)},du=(n,e)=>{let t,r;for(;;){if(n.lookahead<Wt){if(gi(n),n.lookahead<Wt&&e===kn)return qe;if(n.lookahead===0)break}if(t=0,n.lookahead>=X&&(n.ins_h=Nn(n,n.ins_h,n.window[n.strstart+X-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-Wt&&(n.match_length=ay(n,t)),n.match_length>=X)if(r=An(n,n.strstart-n.match_start,n.match_length-X),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=X){n.match_length--;do n.strstart++,n.ins_h=Nn(n,n.ins_h,n.window[n.strstart+X-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=Nn(n,n.ins_h,n.window[n.strstart+1]);else r=An(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(nt(n,!1),n.strm.avail_out===0))return qe}return n.insert=n.strstart<X-1?n.strstart:X-1,e===ft?(nt(n,!0),n.strm.avail_out===0?gr:wi):n.sym_next&&(nt(n,!1),n.strm.avail_out===0)?qe:Ii},fi=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<Wt){if(gi(n),n.lookahead<Wt&&e===kn)return qe;if(n.lookahead===0)break}if(t=0,n.lookahead>=X&&(n.ins_h=Nn(n,n.ins_h,n.window[n.strstart+X-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=X-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-Wt&&(n.match_length=ay(n,t),n.match_length<=5&&(n.strategy===s_||n.match_length===X&&n.strstart-n.match_start>4096)&&(n.match_length=X-1)),n.prev_length>=X&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-X,r=An(n,n.strstart-1-n.prev_match,n.prev_length-X),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=Nn(n,n.ins_h,n.window[n.strstart+X-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=X-1,n.strstart++,r&&(nt(n,!1),n.strm.avail_out===0))return qe}else if(n.match_available){if(r=An(n,0,n.window[n.strstart-1]),r&&nt(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return qe}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=An(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<X-1?n.strstart:X-1,e===ft?(nt(n,!0),n.strm.avail_out===0?gr:wi):n.sym_next&&(nt(n,!1),n.strm.avail_out===0)?qe:Ii},C_=(n,e)=>{let t,r,i,o,s=n.window;for(;;){if(n.lookahead<=Mn){if(gi(n),n.lookahead<=Mn&&e===kn)return qe;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=X&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Mn;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Mn-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=X?(t=An(n,1,n.match_length-X),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=An(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(nt(n,!1),n.strm.avail_out===0))return qe}return n.insert=0,e===ft?(nt(n,!0),n.strm.avail_out===0?gr:wi):n.sym_next&&(nt(n,!1),n.strm.avail_out===0)?qe:Ii},S_=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(gi(n),n.lookahead===0)){if(e===kn)return qe;break}if(n.match_length=0,t=An(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(nt(n,!1),n.strm.avail_out===0))return qe}return n.insert=0,e===ft?(nt(n,!0),n.strm.avail_out===0?gr:wi):n.sym_next&&(nt(n,!1),n.strm.avail_out===0)?qe:Ii};function Bt(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var Wo=[new Bt(0,0,0,0,ly),new Bt(4,4,8,4,du),new Bt(4,5,16,8,du),new Bt(4,6,32,32,du),new Bt(4,4,16,16,fi),new Bt(8,16,32,32,fi),new Bt(8,16,128,128,fi),new Bt(8,32,128,256,fi),new Bt(32,128,258,1024,fi),new Bt(32,258,258,4096,fi)],__=n=>{n.window_size=2*n.w_size,Dn(n.head),n.max_lazy_match=Wo[n.level].max_lazy,n.good_match=Wo[n.level].good_length,n.nice_match=Wo[n.level].nice_length,n.max_chain_length=Wo[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=X-1,n.match_available=0,n.ins_h=0};function T_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Qa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(v_*2),this.dyn_dtree=new Uint16Array((2*g_+1)*2),this.bl_tree=new Uint16Array((2*y_+1)*2),Dn(this.dyn_ltree),Dn(this.dyn_dtree),Dn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(I_+1),this.heap=new Uint16Array(2*xu+1),Dn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*xu+1),Dn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var rs=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==mi&&e.status!==Nu&&e.status!==Eu&&e.status!==Cu&&e.status!==Su&&e.status!==_u&&e.status!==pr&&e.status!==Uo?1:0},cy=n=>{if(rs(n))return hr(n,Ut);n.total_in=n.total_out=0,n.data_type=d_;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Nu:e.wrap?mi:pr,n.adler=e.wrap===2?0:1,e.last_flush=-2,JS(e),He},dy=n=>{let e=cy(n);return e===He&&__(n.state),e},D_=(n,e)=>rs(n)||n.state.wrap!==2?Ut:(n.state.gzhead=e,He),uy=(n,e,t,r,i,o)=>{if(!n)return Ut;let s=1;if(e===o_&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>u_||t!==Qa||r<8||r>15||e<0||e>9||o<0||o>l_||r===8&&s!==1)return hr(n,Ut);r===8&&(r=9);let a=new T_;return n.state=a,a.strm=n,a.status=mi,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+X-1)/X),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,dy(n)},M_=(n,e)=>uy(n,e,Qa,f_,p_,c_),A_=(n,e)=>{if(rs(n)||e>pg||e<0)return n?hr(n,Ut):Ut;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===Uo&&e!==ft)return hr(n,n.avail_out===0?cu:Ut);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(tt(n),n.avail_out===0)return t.last_flush=-1,He}else if(n.avail_in===0&&mg(e)<=mg(r)&&e!==ft)return hr(n,cu);if(t.status===Uo&&n.avail_in!==0)return hr(n,cu);if(t.status===mi&&t.wrap===0&&(t.status=pr),t.status===mi){let i=Qa+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Fa||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=w_),i+=31-i%31,Fo(t,i),t.strstart!==0&&(Fo(t,n.adler>>>16),Fo(t,n.adler&65535)),n.adler=1,t.status=pr,tt(n),t.pending!==0)return t.last_flush=-1,He}if(t.status===Nu){if(n.adler=0,se(t,31),se(t,139),se(t,8),t.gzhead)se(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),se(t,t.gzhead.time&255),se(t,t.gzhead.time>>8&255),se(t,t.gzhead.time>>16&255),se(t,t.gzhead.time>>24&255),se(t,t.level===9?2:t.strategy>=Fa||t.level<2?4:0),se(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(se(t,t.gzhead.extra.length&255),se(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Pe(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Eu;else if(se(t,0),se(t,0),se(t,0),se(t,0),se(t,0),se(t,t.level===9?2:t.strategy>=Fa||t.level<2?4:0),se(t,b_),t.status=pr,tt(n),t.pending!==0)return t.last_flush=-1,He}if(t.status===Eu){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,tt(n),t.pending!==0)return t.last_flush=-1,He;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Cu}if(t.status===Cu){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i)),tt(n),t.pending!==0)return t.last_flush=-1,He;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,se(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=Su}if(t.status===Su){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i)),tt(n),t.pending!==0)return t.last_flush=-1,He;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,se(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Pe(n.adler,t.pending_buf,t.pending-i,i))}t.status=_u}if(t.status===_u){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(tt(n),t.pending!==0))return t.last_flush=-1,He;se(t,n.adler&255),se(t,n.adler>>8&255),n.adler=0}if(t.status=pr,tt(n),t.pending!==0)return t.last_flush=-1,He}if(n.avail_in!==0||t.lookahead!==0||e!==kn&&t.status!==Uo){let i=t.level===0?ly(t,e):t.strategy===Fa?S_(t,e):t.strategy===a_?C_(t,e):Wo[t.level].func(t,e);if((i===gr||i===wi)&&(t.status=Uo),i===qe||i===gr)return n.avail_out===0&&(t.last_flush=-1),He;if(i===Ii&&(e===n_?t_(t):e!==pg&&(bu(t,0,0,!1),e===r_&&(Dn(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),tt(n),n.avail_out===0))return t.last_flush=-1,He}return e!==ft?He:t.wrap<=0?hg:(t.wrap===2?(se(t,n.adler&255),se(t,n.adler>>8&255),se(t,n.adler>>16&255),se(t,n.adler>>24&255),se(t,n.total_in&255),se(t,n.total_in>>8&255),se(t,n.total_in>>16&255),se(t,n.total_in>>24&255)):(Fo(t,n.adler>>>16),Fo(t,n.adler&65535)),tt(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?He:hg)},k_=n=>{if(rs(n))return Ut;let e=n.state.status;return n.state=null,e===pr?hr(n,i_):He},N_=(n,e)=>{let t=e.length;if(rs(n))return Ut;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==mi||r.lookahead)return Ut;if(i===1&&(n.adler=Xo(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Dn(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(e.subarray(t-r.w_size,t),0),e=l,t=r.w_size}let o=n.avail_in,s=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,gi(r);r.lookahead>=X;){let l=r.strstart,c=r.lookahead-(X-1);do r.ins_h=Nn(r,r.ins_h,r.window[l+X-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=X-1,gi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=X-1,r.match_available=0,n.next_in=s,n.input=a,n.avail_in=o,r.wrap=i,He},P_=M_,R_=uy,L_=dy,O_=cy,j_=D_,H_=A_,$_=k_,V_=N_,B_="pako deflate (from Nodeca project)",Go={deflateInit:P_,deflateInit2:R_,deflateReset:L_,deflateResetKeep:O_,deflateSetHeader:j_,deflate:H_,deflateEnd:$_,deflateSetDictionary:V_,deflateInfo:B_},F_=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),U_=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)F_(t,r)&&(n[r]=t[r])}}return n},W_=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},Xa={assign:U_,flattenChunks:W_},fy=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fy=!1}var Jo=new Uint8Array(256);for(let n=0;n<256;n++)Jo[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Jo[254]=Jo[254]=1;var q_=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},G_=(n,e)=>{if(e<65534&&n.subarray&&fy)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},z_=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=Jo[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return G_(o,i)},Z_=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Jo[n[t]]>e?t:e},es={string2buf:q_,buf2string:z_,utf8border:Z_};function K_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var py=K_,hy=Object.prototype.toString,{Z_NO_FLUSH:Y_,Z_SYNC_FLUSH:Q_,Z_FULL_FLUSH:X_,Z_FINISH:J_,Z_OK:Ka,Z_STREAM_END:eT,Z_DEFAULT_COMPRESSION:tT,Z_DEFAULT_STRATEGY:nT,Z_DEFLATED:rT}=vi;function is(n){this.options=Xa.assign({level:tT,method:rT,chunkSize:16384,windowBits:15,memLevel:8,strategy:nT},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new py,this.strm.avail_out=0;let t=Go.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Ka)throw new Error(mr[t]);if(e.header&&Go.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=es.string2buf(e.dictionary):hy.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Go.deflateSetDictionary(this.strm,r),t!==Ka)throw new Error(mr[t]);this._dict_set=!0}}is.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?J_:Y_,typeof n=="string"?t.input=es.string2buf(n):hy.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(o===Q_||o===X_)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Go.deflate(t,o),i===eT)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Go.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ka;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};is.prototype.onData=function(n){this.chunks.push(n)};is.prototype.onEnd=function(n){n===Ka&&(this.result=Xa.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Pu(n,e){let t=new is(e);if(t.push(n,!0),t.err)throw t.msg||mr[t.err];return t.result}function iT(n,e){return e=e||{},e.raw=!0,Pu(n,e)}function oT(n,e){return e=e||{},e.gzip=!0,Pu(n,e)}var sT=is,aT=Pu,lT=iT,cT=oT,dT=vi,uT={Deflate:sT,deflate:aT,deflateRaw:lT,gzip:cT,constants:dT},Ua=16209,fT=16191,pT=function(e,t){let r,i,o,s,a,l,c,d,u,f,p,h,w,I,b,y,g,v,D,C,x,T,E,S,A=e.state;r=e.next_in,E=e.input,i=r+(e.avail_in-5),o=e.next_out,S=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),l=A.dmax,c=A.wsize,d=A.whave,u=A.wnext,f=A.window,p=A.hold,h=A.bits,w=A.lencode,I=A.distcode,b=(1<<A.lenbits)-1,y=(1<<A.distbits)-1;e:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),g=w[p&b];t:for(;;){if(v=g>>>24,p>>>=v,h-=v,v=g>>>16&255,v===0)S[o++]=g&65535;else if(v&16){D=g&65535,v&=15,v&&(h<v&&(p+=E[r++]<<h,h+=8),D+=p&(1<<v)-1,p>>>=v,h-=v),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),g=I[p&y];n:for(;;){if(v=g>>>24,p>>>=v,h-=v,v=g>>>16&255,v&16){if(C=g&65535,v&=15,h<v&&(p+=E[r++]<<h,h+=8,h<v&&(p+=E[r++]<<h,h+=8)),C+=p&(1<<v)-1,C>l){e.msg="invalid distance too far back",A.mode=Ua;break e}if(p>>>=v,h-=v,v=o-s,C>v){if(v=C-v,v>d&&A.sane){e.msg="invalid distance too far back",A.mode=Ua;break e}if(x=0,T=f,u===0){if(x+=c-v,v<D){D-=v;do S[o++]=f[x++];while(--v);x=o-C,T=S}}else if(u<v){if(x+=c+u-v,v-=u,v<D){D-=v;do S[o++]=f[x++];while(--v);if(x=0,u<D){v=u,D-=v;do S[o++]=f[x++];while(--v);x=o-C,T=S}}}else if(x+=u-v,v<D){D-=v;do S[o++]=f[x++];while(--v);x=o-C,T=S}for(;D>2;)S[o++]=T[x++],S[o++]=T[x++],S[o++]=T[x++],D-=3;D&&(S[o++]=T[x++],D>1&&(S[o++]=T[x++]))}else{x=o-C;do S[o++]=S[x++],S[o++]=S[x++],S[o++]=S[x++],D-=3;while(D>2);D&&(S[o++]=S[x++],D>1&&(S[o++]=S[x++]))}}else if((v&64)===0){g=I[(g&65535)+(p&(1<<v)-1)];continue n}else{e.msg="invalid distance code",A.mode=Ua;break e}break}}else if((v&64)===0){g=w[(g&65535)+(p&(1<<v)-1)];continue t}else if(v&32){A.mode=fT;break e}else{e.msg="invalid literal/length code",A.mode=Ua;break e}break}}while(r<i&&o<a);D=h>>3,r-=D,h-=D<<3,p&=(1<<h)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),A.hold=p,A.bits=h},pi=15,gg=852,yg=592,vg=0,uu=1,Ig=2,hT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vT=(n,e,t,r,i,o,s,a)=>{let l=a.bits,c=0,d=0,u=0,f=0,p=0,h=0,w=0,I=0,b=0,y=0,g,v,D,C,x,T=null,E,S=new Uint16Array(pi+1),A=new Uint16Array(pi+1),B=null,F,Q,fe;for(c=0;c<=pi;c++)S[c]=0;for(d=0;d<r;d++)S[e[t+d]]++;for(p=l,f=pi;f>=1&&S[f]===0;f--);if(p>f&&(p=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<f&&S[u]===0;u++);for(p<u&&(p=u),I=1,c=1;c<=pi;c++)if(I<<=1,I-=S[c],I<0)return-1;if(I>0&&(n===vg||f!==1))return-1;for(A[1]=0,c=1;c<pi;c++)A[c+1]=A[c]+S[c];for(d=0;d<r;d++)e[t+d]!==0&&(s[A[e[t+d]]++]=d);if(n===vg?(T=B=s,E=20):n===uu?(T=hT,B=mT,E=257):(T=gT,B=yT,E=0),y=0,d=0,c=u,x=o,h=p,w=0,D=-1,b=1<<p,C=b-1,n===uu&&b>gg||n===Ig&&b>yg)return 1;for(;;){F=c-w,s[d]+1<E?(Q=0,fe=s[d]):s[d]>=E?(Q=B[s[d]-E],fe=T[s[d]-E]):(Q=96,fe=0),g=1<<c-w,v=1<<h,u=v;do v-=g,i[x+(y>>w)+v]=F<<24|Q<<16|fe|0;while(v!==0);for(g=1<<c-1;y&g;)g>>=1;if(g!==0?(y&=g-1,y+=g):y=0,d++,--S[c]===0){if(c===f)break;c=e[t+s[d]]}if(c>p&&(y&C)!==D){for(w===0&&(w=p),x+=u,h=c-w,I=1<<h;h+w<f&&(I-=S[h+w],!(I<=0));)h++,I<<=1;if(b+=1<<h,n===uu&&b>gg||n===Ig&&b>yg)return 1;D=y&C,i[D]=p<<24|h<<16|x-o|0}}return y!==0&&(i[x+y]=c-w<<24|64<<16|0),a.bits=p,0},zo=vT,IT=0,my=1,gy=2,{Z_FINISH:wg,Z_BLOCK:wT,Z_TREES:Wa,Z_OK:yr,Z_STREAM_END:bT,Z_NEED_DICT:xT,Z_STREAM_ERROR:pt,Z_DATA_ERROR:yy,Z_MEM_ERROR:vy,Z_BUF_ERROR:ET,Z_DEFLATED:bg}=vi,Ja=16180,xg=16181,Eg=16182,Cg=16183,Sg=16184,_g=16185,Tg=16186,Dg=16187,Mg=16188,Ag=16189,Ya=16190,on=16191,fu=16192,kg=16193,pu=16194,Ng=16195,Pg=16196,Rg=16197,Lg=16198,qa=16199,Ga=16200,Og=16201,jg=16202,Hg=16203,$g=16204,Vg=16205,hu=16206,Bg=16207,Fg=16208,Ie=16209,Iy=16210,wy=16211,CT=852,ST=592,_T=15,TT=_T,Ug=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function DT(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var vr=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<Ja||e.mode>wy?1:0},by=n=>{if(vr(n))return pt;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Ja,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(CT),e.distcode=e.distdyn=new Int32Array(ST),e.sane=1,e.back=-1,yr},xy=n=>{if(vr(n))return pt;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,by(n)},Ey=(n,e)=>{let t;if(vr(n))return pt;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?pt:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,xy(n))},Cy=(n,e)=>{if(!n)return pt;let t=new DT;n.state=t,t.strm=n,t.window=null,t.mode=Ja;let r=Ey(n,e);return r!==yr&&(n.state=null),r},MT=n=>Cy(n,TT),Wg=!0,mu,gu,AT=n=>{if(Wg){mu=new Int32Array(512),gu=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(zo(my,n.lens,0,288,mu,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;zo(gy,n.lens,0,32,gu,0,n.work,{bits:5}),Wg=!1}n.lencode=mu,n.lenbits=9,n.distcode=gu,n.distbits=5},Sy=(n,e,t,r)=>{let i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},kT=(n,e)=>{let t,r,i,o,s,a,l,c,d,u,f,p,h,w,I=0,b,y,g,v,D,C,x,T,E=new Uint8Array(4),S,A,B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vr(n)||!n.output||!n.input&&n.avail_in!==0)return pt;t=n.state,t.mode===on&&(t.mode=fu),s=n.next_out,i=n.output,l=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,c=t.hold,d=t.bits,u=a,f=l,T=yr;e:for(;;)switch(t.mode){case Ja:if(t.wrap===0){t.mode=fu;break}for(;d<16;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,E[0]=c&255,E[1]=c>>>8&255,t.check=Pe(t.check,E,2,0),c=0,d=0,t.mode=xg;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){n.msg="incorrect header check",t.mode=Ie;break}if((c&15)!==bg){n.msg="unknown compression method",t.mode=Ie;break}if(c>>>=4,d-=4,x=(c&15)+8,t.wbits===0&&(t.wbits=x),x>15||x>t.wbits){n.msg="invalid window size",t.mode=Ie;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=c&512?Ag:on,c=0,d=0;break;case xg:for(;d<16;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(t.flags=c,(t.flags&255)!==bg){n.msg="unknown compression method",t.mode=Ie;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ie;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=Pe(t.check,E,2,0)),c=0,d=0,t.mode=Eg;case Eg:for(;d<32;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,E[2]=c>>>16&255,E[3]=c>>>24&255,t.check=Pe(t.check,E,4,0)),c=0,d=0,t.mode=Cg;case Cg:for(;d<16;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=Pe(t.check,E,2,0)),c=0,d=0,t.mode=Sg;case Sg:if(t.flags&1024){for(;d<16;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(E[0]=c&255,E[1]=c>>>8&255,t.check=Pe(t.check,E,2,0)),c=0,d=0}else t.head&&(t.head.extra=null);t.mode=_g;case _g:if(t.flags&1024&&(p=t.length,p>a&&(p=a),p&&(t.head&&(x=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+p),x)),t.flags&512&&t.wrap&4&&(t.check=Pe(t.check,r,p,o)),a-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=Tg;case Tg:if(t.flags&2048){if(a===0)break e;p=0;do x=r[o+p++],t.head&&x&&t.length<65536&&(t.head.name+=String.fromCharCode(x));while(x&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=Pe(t.check,r,p,o)),a-=p,o+=p,x)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Dg;case Dg:if(t.flags&4096){if(a===0)break e;p=0;do x=r[o+p++],t.head&&x&&t.length<65536&&(t.head.comment+=String.fromCharCode(x));while(x&&p<a);if(t.flags&512&&t.wrap&4&&(t.check=Pe(t.check,r,p,o)),a-=p,o+=p,x)break e}else t.head&&(t.head.comment=null);t.mode=Mg;case Mg:if(t.flags&512){for(;d<16;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(t.wrap&4&&c!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ie;break}c=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=on;break;case Ag:for(;d<32;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}n.adler=t.check=Ug(c),c=0,d=0,t.mode=Ya;case Ya:if(t.havedict===0)return n.next_out=s,n.avail_out=l,n.next_in=o,n.avail_in=a,t.hold=c,t.bits=d,xT;n.adler=t.check=1,t.mode=on;case on:if(e===wT||e===Wa)break e;case fu:if(t.last){c>>>=d&7,d-=d&7,t.mode=hu;break}for(;d<3;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}switch(t.last=c&1,c>>>=1,d-=1,c&3){case 0:t.mode=kg;break;case 1:if(AT(t),t.mode=qa,e===Wa){c>>>=2,d-=2;break e}break;case 2:t.mode=Pg;break;case 3:n.msg="invalid block type",t.mode=Ie}c>>>=2,d-=2;break;case kg:for(c>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ie;break}if(t.length=c&65535,c=0,d=0,t.mode=pu,e===Wa)break e;case pu:t.mode=Ng;case Ng:if(p=t.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;i.set(r.subarray(o,o+p),s),a-=p,o+=p,l-=p,s+=p,t.length-=p;break}t.mode=on;break;case Pg:for(;d<14;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(t.nlen=(c&31)+257,c>>>=5,d-=5,t.ndist=(c&31)+1,c>>>=5,d-=5,t.ncode=(c&15)+4,c>>>=4,d-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ie;break}t.have=0,t.mode=Rg;case Rg:for(;t.have<t.ncode;){for(;d<3;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.lens[B[t.have++]]=c&7,c>>>=3,d-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,S={bits:t.lenbits},T=zo(IT,t.lens,0,19,t.lencode,0,t.work,S),t.lenbits=S.bits,T){n.msg="invalid code lengths set",t.mode=Ie;break}t.have=0,t.mode=Lg;case Lg:for(;t.have<t.nlen+t.ndist;){for(;I=t.lencode[c&(1<<t.lenbits)-1],b=I>>>24,y=I>>>16&255,g=I&65535,!(b<=d);){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(g<16)c>>>=b,d-=b,t.lens[t.have++]=g;else{if(g===16){for(A=b+2;d<A;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(c>>>=b,d-=b,t.have===0){n.msg="invalid bit length repeat",t.mode=Ie;break}x=t.lens[t.have-1],p=3+(c&3),c>>>=2,d-=2}else if(g===17){for(A=b+3;d<A;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}c>>>=b,d-=b,x=0,p=3+(c&7),c>>>=3,d-=3}else{for(A=b+7;d<A;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}c>>>=b,d-=b,x=0,p=11+(c&127),c>>>=7,d-=7}if(t.have+p>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ie;break}for(;p--;)t.lens[t.have++]=x}}if(t.mode===Ie)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ie;break}if(t.lenbits=9,S={bits:t.lenbits},T=zo(my,t.lens,0,t.nlen,t.lencode,0,t.work,S),t.lenbits=S.bits,T){n.msg="invalid literal/lengths set",t.mode=Ie;break}if(t.distbits=6,t.distcode=t.distdyn,S={bits:t.distbits},T=zo(gy,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,S),t.distbits=S.bits,T){n.msg="invalid distances set",t.mode=Ie;break}if(t.mode=qa,e===Wa)break e;case qa:t.mode=Ga;case Ga:if(a>=6&&l>=258){n.next_out=s,n.avail_out=l,n.next_in=o,n.avail_in=a,t.hold=c,t.bits=d,pT(n,f),s=n.next_out,i=n.output,l=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,c=t.hold,d=t.bits,t.mode===on&&(t.back=-1);break}for(t.back=0;I=t.lencode[c&(1<<t.lenbits)-1],b=I>>>24,y=I>>>16&255,g=I&65535,!(b<=d);){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(y&&(y&240)===0){for(v=b,D=y,C=g;I=t.lencode[C+((c&(1<<v+D)-1)>>v)],b=I>>>24,y=I>>>16&255,g=I&65535,!(v+b<=d);){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}c>>>=v,d-=v,t.back+=v}if(c>>>=b,d-=b,t.back+=b,t.length=g,y===0){t.mode=Vg;break}if(y&32){t.back=-1,t.mode=on;break}if(y&64){n.msg="invalid literal/length code",t.mode=Ie;break}t.extra=y&15,t.mode=Og;case Og:if(t.extra){for(A=t.extra;d<A;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=jg;case jg:for(;I=t.distcode[c&(1<<t.distbits)-1],b=I>>>24,y=I>>>16&255,g=I&65535,!(b<=d);){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if((y&240)===0){for(v=b,D=y,C=g;I=t.distcode[C+((c&(1<<v+D)-1)>>v)],b=I>>>24,y=I>>>16&255,g=I&65535,!(v+b<=d);){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}c>>>=v,d-=v,t.back+=v}if(c>>>=b,d-=b,t.back+=b,y&64){n.msg="invalid distance code",t.mode=Ie;break}t.offset=g,t.extra=y&15,t.mode=Hg;case Hg:if(t.extra){for(A=t.extra;d<A;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ie;break}t.mode=$g;case $g:if(l===0)break e;if(p=f-l,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ie;break}p>t.wnext?(p-=t.wnext,h=t.wsize-p):h=t.wnext-p,p>t.length&&(p=t.length),w=t.window}else w=i,h=s-t.offset,p=t.length;p>l&&(p=l),l-=p,t.length-=p;do i[s++]=w[h++];while(--p);t.length===0&&(t.mode=Ga);break;case Vg:if(l===0)break e;i[s++]=t.length,l--,t.mode=Ga;break;case hu:if(t.wrap){for(;d<32;){if(a===0)break e;a--,c|=r[o++]<<d,d+=8}if(f-=l,n.total_out+=f,t.total+=f,t.wrap&4&&f&&(n.adler=t.check=t.flags?Pe(t.check,i,f,s-f):Xo(t.check,i,f,s-f)),f=l,t.wrap&4&&(t.flags?c:Ug(c))!==t.check){n.msg="incorrect data check",t.mode=Ie;break}c=0,d=0}t.mode=Bg;case Bg:if(t.wrap&&t.flags){for(;d<32;){if(a===0)break e;a--,c+=r[o++]<<d,d+=8}if(t.wrap&4&&c!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ie;break}c=0,d=0}t.mode=Fg;case Fg:T=bT;break e;case Ie:T=yy;break e;case Iy:return vy;case wy:default:return pt}return n.next_out=s,n.avail_out=l,n.next_in=o,n.avail_in=a,t.hold=c,t.bits=d,(t.wsize||f!==n.avail_out&&t.mode<Ie&&(t.mode<hu||e!==wg))&&Sy(n,n.output,n.next_out,f-n.avail_out),u-=n.avail_in,f-=n.avail_out,n.total_in+=u,n.total_out+=f,t.total+=f,t.wrap&4&&f&&(n.adler=t.check=t.flags?Pe(t.check,i,f,n.next_out-f):Xo(t.check,i,f,n.next_out-f)),n.data_type=t.bits+(t.last?64:0)+(t.mode===on?128:0)+(t.mode===qa||t.mode===pu?256:0),(u===0&&f===0||e===wg)&&T===yr&&(T=ET),T},NT=n=>{if(vr(n))return pt;let e=n.state;return e.window&&(e.window=null),n.state=null,yr},PT=(n,e)=>{if(vr(n))return pt;let t=n.state;return(t.wrap&2)===0?pt:(t.head=e,e.done=!1,yr)},RT=(n,e)=>{let t=e.length,r,i,o;return vr(n)||(r=n.state,r.wrap!==0&&r.mode!==Ya)?pt:r.mode===Ya&&(i=1,i=Xo(i,e,t,0),i!==r.check)?yy:(o=Sy(n,e,t,t),o?(r.mode=Iy,vy):(r.havedict=1,yr))},LT=xy,OT=Ey,jT=by,HT=MT,$T=Cy,VT=kT,BT=NT,FT=PT,UT=RT,WT="pako inflate (from Nodeca project)",an={inflateReset:LT,inflateReset2:OT,inflateResetKeep:jT,inflateInit:HT,inflateInit2:$T,inflate:VT,inflateEnd:BT,inflateGetHeader:FT,inflateSetDictionary:UT,inflateInfo:WT};function qT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var GT=qT,_y=Object.prototype.toString,{Z_NO_FLUSH:zT,Z_FINISH:ZT,Z_OK:ts,Z_STREAM_END:yu,Z_NEED_DICT:vu,Z_STREAM_ERROR:KT,Z_DATA_ERROR:qg,Z_MEM_ERROR:YT}=vi;function os(n){this.options=Xa.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new py,this.strm.avail_out=0;let t=an.inflateInit2(this.strm,e.windowBits);if(t!==ts)throw new Error(mr[t]);if(this.header=new GT,an.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=es.string2buf(e.dictionary):_y.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=an.inflateSetDictionary(this.strm,e.dictionary),t!==ts)))throw new Error(mr[t])}os.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?ZT:zT,_y.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=an.inflate(t,s),o===vu&&i&&(o=an.inflateSetDictionary(t,i),o===ts?o=an.inflate(t,s):o===qg&&(o=vu));t.avail_in>0&&o===yu&&t.state.wrap>0&&n[t.next_in]!==0;)an.inflateReset(t),o=an.inflate(t,s);switch(o){case KT:case qg:case vu:case YT:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===yu))if(this.options.to==="string"){let l=es.utf8border(t.output,t.next_out),c=t.next_out-l,d=es.buf2string(t.output,l);t.next_out=c,t.avail_out=r-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===ts&&a===0)){if(o===yu)return o=an.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};os.prototype.onData=function(n){this.chunks.push(n)};os.prototype.onEnd=function(n){n===ts&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xa.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Ru(n,e){let t=new os(e);if(t.push(n),t.err)throw t.msg||mr[t.err];return t.result}function QT(n,e){return e=e||{},e.raw=!0,Ru(n,e)}var XT=os,JT=Ru,e0=QT,t0=Ru,n0=vi,r0={Inflate:XT,inflate:JT,inflateRaw:e0,ungzip:t0,constants:n0},{Deflate:TF,deflate:DF,deflateRaw:MF,gzip:AF}=uT,{Inflate:kF,inflate:i0,inflateRaw:NF,ungzip:PF}=r0;var el=i0;var Lu=class{data=new Map;get(e){return this.data.get(e)}set(e,t){this.data.set(e,t)}rawDataToRGBA(e,t,r){if(t===16){let i=e.byteLength/2*4,o=new Uint8Array(i);for(let s=0;s<i;s+=4){let a=Math.floor(s/4)*2;o[s+0]=e[a+0],o[s+1]=e[a+0],o[s+2]=e[a+0],o[s+3]=e[a+1]}return o}else if(t===8){let i=e.byteLength*4,o=new Uint8Array(i);for(let s=0;s<i;s+=4){let a=Math.floor(s/4),l=[255,255,255,0];e[a]!==r&&(l=this.get(e[a])??[255,255,255,0]),o[s+0]=l[0],o[s+1]=l[1],o[s+2]=l[2],o[s+3]=Math.ceil(l[3]*255)}return o}return e}},Ir=class{constructor(e){this.loader=e}getColorPallette(e){let t=new Lu,r=this.loader.findFrameChunk(e,ru);if(r){let i=r.firstIndex;for(let o of r.colors)t.set(i,[o.color.red,o.color.green,o.color.blue,o.color.alpha]),i++}return t}};var wr=class{constructor(e){this.loader=e;this.collorPalletteLoader=new Ir(e)}frameCache=new _t;collorPalletteLoader;getFrame(e){return L(this,null,function*(){return this.frameCache.get(e.toString(10),()=>L(this,null,function*(){if(!this.loader.data)throw new Error("Aseprite file not loaded!");let t=this.loader.data.frames[e],r=this.getDrawContext(),i=this.collorPalletteLoader.getColorPallette(0),o=this.loader.findFrameChunks(0,ui),s=this.loader.findFrameChunks(e,nu);for(let c of s)if(c.cellType===eu){let d=yield this.getFrame(c.data.linkedFrame),u=o[c.layerIndex];(u.flags&1)===1&&!this.loader.ignoredLayerNames.includes(u.name.value)&&(r.save(),r.drawImage(d.texture.data,0,0),r.restore())}else if(c.cellType===tu){let d=o[c.layerIndex];if((d.flags&1)===1&&!this.loader.ignoredLayerNames.includes(d.name.value)){let u=c.data,f=u.rawCompressed,p=el(new Uint8Array(f)),h=i.rawDataToRGBA(p,this.loader.data.header.colorDepth,this.loader.data.header.transparentIndex),w=new ImageData(new Uint8ClampedArray(h),u.w,u.h),I=yield createImageBitmap(w);r.save(),r.globalAlpha=c.opacity/255*(d?.opacity??255)/255,r.drawImage(I,c.x,c.y),r.restore()}}let a=r.getImageData(0,0,this.loader.data.header.width,this.loader.data.header.height),l=yield createImageBitmap(a);return{texture:Vt.fromImageBitmap(l),duration:t.header.frameDuration}}))})}getFrames(e,t){return L(this,null,function*(){let r=[];for(let i=e;i<=t;i++)r.push(yield this.getFrame(i));return r})}getDrawContext(){let t=new OffscreenCanvas(this.loader.data?.header.width||0,this.loader.data?.header.height||0).getContext("2d");if(!t)throw new Error("Could not obtain OffscreenCanvas 2D Context for processing Aseprite!");return t.imageSmoothingEnabled=!1,t}};var ss=class{constructor(e){this.loader=e;this.frameLoader=new wr(e)}animationCache=new _t;frameLoader;getAnimationNames(){if(!this.loader.data)throw new Error("Aseprite file not loaded!");let e=this.loader.findFrameChunk(0,Ba);return e?e.tags.map(t=>t.tagName.value):[]}getAnimation(e){return L(this,null,function*(){return this.animationCache.get(e,()=>L(this,null,function*(){if(!this.loader.data)throw new Error("Aseprite file not loaded!");let t=this.loader.findFrameChunk(0,Ba);if(!t)throw Error("Aseprite file has no tags!");let r=t.tags.find(o=>o.tagName.value===e);if(!r)throw Error(`Animation with name ${e} not found !`);let i=yield this.frameLoader.getFrames(r.fromFrame,r.toFrame);return{duration:i.map(o=>o.duration).reduce((o,s)=>o+s,0),frames:i,direction:r.loopAnimationDirection,repeat:r.repeatAnimation<=2?r.repeatAnimation:3,repeatTimes:r.repeatAnimation<=2?0:r.repeatAnimation}}))})}};var as=class n{static asepriteCache=new _t;data;ignoredLayerNames=[];static load(e){return L(this,null,function*(){return n.asepriteCache.get(e,()=>L(null,null,function*(){let t=new n,i=yield(yield fetch(e)).arrayBuffer();if(t.data=ag.parse(new Uint8Array(i)),t.data.header.magicNumber!==42464)throw Error("Invalid Aseprite file header magic number!");return t}))})}findFrameChunks(e,t){if(!this.data)throw new Error("Aseprite file not loaded!");return this.data.frames[e].chunks.filter(o=>o.chunkType===t).map(o=>o.data)}findFrameChunk(e,t){let r=this.findFrameChunks(e,t);if(r.length===1)return r[0];if(r.length===0)return;throw new Error(`Multiple Chunks of type ${t} found!`)}};var ls=class{constructor(e){this.loader=e;this.collorPalletteLoader=new Ir(e)}tilemapCache=new _t;collorPalletteLoader;getTilemapNames(e=0){if(!this.loader.data)throw new Error("Aseprite file not loaded!");return this.loader.findFrameChunks(e,ui).filter(r=>!(!r.tilesetIndex||r.tilesetIndex.length!==1)).map(r=>r.name.value)}getTilemap(e,t=0){return L(this,null,function*(){return this.tilemapCache.get(`${e}-${t}`,()=>L(this,null,function*(){if(!this.loader.data)throw new Error("Aseprite file not loaded!");let r=this.loader.findFrameChunks(t,iu),o=this.loader.findFrameChunks(t,ui).find(f=>f.name.value===e);if(!o)throw new Error(`Tilemap Layer with name ${e} not found!`);if(!o.tilesetIndex||o.tilesetIndex.length!==1)throw new Error(`Layer with name ${e} is not a Tilemap!`);let s=r[o.tilesetIndex[0]],a=this.collorPalletteLoader.getColorPallette(t),l=el(new Uint8Array(s.rawCompressed)),c=a.rawDataToRGBA(l,this.loader.data.header.colorDepth,this.loader.data.header.transparentIndex),d=s.tileWidth*s.tileHeight*4,u=new Map;for(let f=0;f<s.numberOfTiles;f+=1){let p=s.baseIndex+f-1,h=c.slice(f*d,(f+1)*d),w=new ImageData(new Uint8ClampedArray(h),s.tileWidth,s.tileHeight),I=yield createImageBitmap(w);u.set(p,Vt.fromImageBitmap(I))}return u}))})}};var br=class n{constructor(e){this.loader=e;this.frameLoader=new wr(e),this.animationLoader=new ss(e),this.tilemapLoader=new ls(e)}frameLoader;animationLoader;tilemapLoader;static load(e){return L(this,null,function*(){return new n(yield as.load(e))})}ignoreLayers(e){this.loader.ignoredLayerNames=e}getFrame(e){return L(this,null,function*(){return this.frameLoader.getFrame(e)})}getFrames(e,t){return L(this,null,function*(){return this.frameLoader.getFrames(e,t)})}getAnimationNames(){return this.animationLoader.getAnimationNames()}getAnimation(e){return L(this,null,function*(){return this.animationLoader.getAnimation(e)})}getTilemapNames(e=0){return this.tilemapLoader.getTilemapNames(e)}getTilemap(e,t=0){return L(this,null,function*(){return this.tilemapLoader.getTilemap(e,t)})}};var xr=class{constructor(e,t,r){this.asset=e;this.tileset=t;this.tileId=r}toObject(){return{asset:this.asset,tileset:this.tileset,tileId:this.tileId}}};var Er=class{constructor(e,t){this.asset=e;this.animationName=t}toObject(){return{asset:this.asset,animationName:this.animationName}}};var Cr=class{assets={};chars={};init(e,t,r){return L(this,null,function*(){let i=Object.keys(e).length,o=t?Object.keys(t).length:0,s=i+o,a=0;for(let l in e){let c=e[l];a++,r?.({current:a,total:s,percentage:a/s*100,currentFile:l});let d=yield br.load(c.path);d.ignoreLayers(["Grid"]),this.assets[l]={tilemaps:{},animations:{}};for(let u of d.getTilemapNames())this.assets[l].tilemaps[u]=yield d.getTilemap(u);for(let u of d.getAnimationNames())this.assets[l].animations[u]=yield d.getAnimation(u)}if(t)for(let l in t){let c=t[l].path;a++,r?.({current:a,total:s,percentage:a/s*100,currentFile:l});let d=yield br.load(c);d.ignoreLayers(["Grid"]);let u=yield d.getTilemap(l);this.chars[l]={};for(let f in t[l].map)this.chars[l][f]=u.get(t[l].map[f]);this.chars[l].__unknown__=u.get(t[l].map.__unknown__)}})}};var pe=class extends H{_meta;_texture=Vt.empty();constructor(e,t,r){super(t,r),e&&(this.texture=e)}get texture(){return this._texture}set texture(e){this._texture=e}get width(){return this._texture.width}get height(){return this._texture.height}withMeta(e){this._meta=e}getMeta(){return this._meta}};var Ve=class n extends H{constructor(t,r,i=[]){super(r,i);this._animation=t;this.frameIndex=0,this.previousTime=0,this._frames=t.frames,t.direction===1&&(this._frames=this._frames.reverse()),this.animationRepeatIndex=t.repeatTimes,this.on(ht,this.onTick.bind(this))}_meta;flipH=!1;flipV=!1;_frames=[];frameIndex;animationRepeatIndex;stopped=!1;previousTime;animationSpeed=1;get animation(){return this._animation}get currentFrame(){return this._frames[this.frameIndex]}static empty(){return new n({duration:0,frames:[],direction:0,repeat:0,repeatTimes:0})}onTick(t){if(this.stopped)return;this.previousTime===0&&(this.previousTime=t.currentTime);let r=(t.currentTime-this.previousTime)*this.animationSpeed,i=this._frames[this.frameIndex];if(!i)return;let o=0;for(;r>=i.duration;)r-=i.duration,this.advanceFrame(),i=this._frames[this.frameIndex],o+=1,o>10&&(r=0);o>0&&(this.previousTime=t.currentTime)}play(){this.stopped=!1,this._animation.repeat===0?this.frameIndex=0:this._animation.repeat===1?this.frameIndex=0:this._animation.repeat===2?(this.frameIndex=0,this.animationRepeatIndex=1):this._animation.repeat===3&&(this.frameIndex=0,this.animationRepeatIndex=this._animation.repeatTimes)}stop(){this.stopped=!0,this.previousTime=0}advanceFrame(){if(this.frameIndex+=1,this.frameIndex>=this._frames.length)if(this._animation.repeat===0)this.frameIndex=0;else if(this._animation.repeat===1){this.frameIndex=this._frames.length-1,this.stop();return}else if(this._animation.repeat===2){if(this.frameIndex=0,this.animationRepeatIndex-=1,this.animationRepeatIndex<=0){this.frameIndex=this._frames.length-1,this.stop();return}}else if(this._animation.repeat===3){if(this.frameIndex=0,this.animationRepeatIndex-=1,this.animationRepeatIndex===0){this.stop();return}}else{this.stop();return}}get width(){return this._frames[0].texture.width}get height(){return this._frames[0].texture.height}get animationDuration(){return this._animation.duration}withMeta(t){this._meta=t}getMeta(){return this._meta}};var Sr=class n extends H{constructor(t){super();this._numLayers=t;for(let r=0;r<t;r+=1)this.addChild(new H)}getLayer(t){return this.children.at(t)}get numLayers(){return this._numLayers}get width(){let t=0,r=this.position;for(let i=0;i<this._numLayers;i+=1){let o=this.children[i];if(o){for(let s of o.children)if(s instanceof H){let c=s.position.x-r.x+s.width;c>t&&(t=c)}}}return t}get height(){let t=0,r=this.position;for(let i=0;i<this._numLayers;i+=1){let o=this.children[i];if(o){for(let s of o.children)if(s instanceof H){let c=s.position.y-r.y+s.height;c>t&&(t=c)}}}return t}toObject(){let t={numLayers:this._numLayers,layers:[]};for(let r=0;r<this._numLayers;r+=1){let i=[];for(let o of this.children[r].children)if(o instanceof Ve){let s=o.getMeta();s instanceof Er&&i.push({type:"animated",position:{x:o.position.x,y:o.position.y},animation:s.toObject(),animationSpeed:o.animationSpeed})}else if(o instanceof pe){let s=o.getMeta();s instanceof xr&&i.push({type:"static",position:{x:o.position.x,y:o.position.y},texture:s.toObject()})}t.layers.push(i)}return t}clear(t){this.removeAllChildren(),this._numLayers=t;for(let r=0;r<this._numLayers;r+=1)this.addChild(new H)}static fromData(t){let r=new n(t.numLayers),i=Z.get("assets");for(let o=0;o<t.layers.length;o+=1){let s=t.layers[o];for(let a of s)if(a.type==="animated"){let l=i[a.animation.asset].animations[a.animation.animationName],c=new Ve(l,new m(a.position.x,a.position.y));c.animationSpeed=a.animationSpeed??1,c.withMeta(new Er(a.animation.asset,a.animation.animationName)),r.getLayer(o)?.addChild(c)}else if(a.type==="static"){let l=i[a.texture.asset].tilemaps[a.texture.tileset].get(a.texture.tileId),c=new pe(l,new m(a.position.x,a.position.y));c.withMeta(new xr(a.texture.asset,a.texture.tileset,a.texture.tileId)),r.getLayer(o)?.addChild(c)}}return r}};var ht=class extends oe{constructor(t){super();this.currentTime=t;super.target=null}};var Ou=class{pool=new Map;maxCanvasesPerSize=10;getCanvas(e,t,r="default"){let i=`${e}x${t}:${r}`,o=this.pool.get(i);o||(o=[],this.pool.set(i,o));for(let c of o)if(!c.inUse){c.inUse=!0,c.lastPurpose=r;let d=c.context;switch(r){case"fill-color":case"result":d.clearRect(0,0,e,t);break;case"mask":d.setTransform(1,0,0,1,0,0),d.globalCompositeOperation="source-over",d.clearRect(0,0,e,t);break;case"clip":d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,e,t);break;case"default":default:d.setTransform(1,0,0,1,0,0),d.globalCompositeOperation="source-over",d.clearRect(0,0,e,t);break}return{canvas:c.canvas,context:c.context}}let s=new OffscreenCanvas(e,t),a=s.getContext("2d");if(!a)throw new Error("Failed to get 2D context for temporary canvas");a.imageSmoothingEnabled=!1;let l={canvas:s,context:a,inUse:!0,lastPurpose:r};return o.length<this.maxCanvasesPerSize&&o.push(l),{canvas:s,context:a}}releaseCanvas(e){for(let t of this.pool.values())for(let r of t)if(r.canvas===e){r.inUse=!1;return}}releaseAll(){for(let e of this.pool.values())for(let t of e)t.inUse=!1}resetCanvas(e,t,r){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,r),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.imageSmoothingEnabled=!1,e.fillStyle="#000000",e.strokeStyle="#000000",e.lineWidth=1}getStats(){let e=0,t=0;for(let r of this.pool.values())e+=r.length,t+=r.filter(i=>i.inUse).length;return{totalCanvases:e,inUse:t,available:e-t}}},ju=new Ou;var Hu=class{cache=new Map;maxCacheSize=100;maxAge=5e3;get(e){let t=this.cache.get(e);return t?(t.hitCount++,t.timestamp=performance.now(),t.canvas):null}set(e,t,r,i){this.cache.size>=this.maxCacheSize&&this.evictLRU();let o=new OffscreenCanvas(r,i),s=o.getContext("2d");if(!s)throw new Error("Failed to create cache canvas context");s.imageSmoothingEnabled=!1,s.drawImage(t,0,0),this.cache.set(e,{canvas:o,context:s,timestamp:performance.now(),hitCount:0})}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}evictLRU(){let e=null,t=1/0,r=1/0;for(let[i,o]of this.cache){let s=performance.now()-o.timestamp;if(s>this.maxAge){this.cache.delete(i);return}s/(o.hitCount+1)>t/(r+1)&&(e=i,t=s,r=o.hitCount)}e&&this.cache.delete(e)}static generateKey(e,t,r,...i){return`${e}:${t}x${r}:${i.join(":")}`}renderAndCache(e,t,r,i){let o=this.get(e);if(o)return o;this.set(e,i,t,r);let s=this.cache.get(e);if(!s)throw new Error("Failed to retrieve newly cached canvas");return s.canvas}getStats(){let e=0,t=0,r=performance.now();for(let i of this.cache.values())e+=i.hitCount,t+=r-i.timestamp;return{size:this.cache.size,totalHits:e,averageAge:this.cache.size>0?t/this.cache.size:0}}},tl=new Hu;var bi=class{constructor(e,t,r){this.zoom=r;this.workLoop=new bn(this.render.bind(this)),this.rootDOM=t,this.rootDOM.style.isolation="isolate",this.canvas=e,this.canvas.style.display="block",this.canvas.style.imageRendering="pixelated";let i=this.canvas.getContext("2d");if(!i)throw new Error("CanvasRenderingContext2D could not be obtained!");this.context=i,this.context.imageSmoothingEnabled=!1}rootDOM;canvas;context;rootElement;workLoop;renderCount=0;cacheHitCount=0;prevRenderCount=0;prevCacheHitCount=0;attachedDOMElements=new Set;maskElements=new Set;setViewport(e){this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.style.width=e.width*this.zoom+"px",this.canvas.style.height=e.height*this.zoom+"px"}setZoom(e){this.zoom=e}getElement(){return this.canvas}globalToLocalPoint(e){let t=e.x,r=e.y,i=this.canvas.getBoundingClientRect();return t-=i.left,r-=i.top,new m(Math.round(t/this.zoom),Math.round(r/this.zoom))}localToGlobalPoint(e){return new m(e.x*this.zoom,e.y*this.zoom)}setRootElement(e){this.rootElement=e}start(e){this.workLoop.start(e)}getRenderStats(){return{renderCount:this.prevRenderCount,cacheHitCount:this.prevCacheHitCount}}hasCanvasItemClipMask(e){return e?(Array.isArray(e)?e:[e]).some(r=>Tn(r)):!1}createTempCanvas(e,t,r){return ju.getCanvas(e,t,r)}applyRectangleClips(e,t){if(!t)return;let i=(Array.isArray(t)?t:[t]).filter(o=>!Tn(o));if(i.length>0){e.beginPath();for(let o of i)e.rect(o.x,o.y,o.width,o.height);e.clip()}}applyRectangleClipsToCanvas(e,t,r,i){if(!t)return e;let s=(Array.isArray(t)?t:[t]).filter(c=>!Tn(c));if(s.length===0)return e;let a=new OffscreenCanvas(r,i),l=a.getContext("2d");if(!l)throw new Error("Failed to get 2D context for rectangle clip canvas");l.imageSmoothingEnabled=!1,l.save(),l.beginPath();for(let c of s)l.rect(c.x,c.y,c.width,c.height);return l.clip(),l.drawImage(e,0,0),l.restore(),a}applyCanvasItemClipMasks(e,t,r){if(!t||!this.hasCanvasItemClipMask(t))return e;let o=(Array.isArray(t)?t:[t]).filter(d=>Tn(d));if(o.length===0)return e;let{canvas:s,context:a}=this.createTempCanvas(r.width,r.height,"mask");a.save(),a.translate(-r.x,-r.y);for(let d of o)Tn(d)&&this.renderCanvasItem(a,d.item,!0);a.restore();let l=new OffscreenCanvas(r.width,r.height),c=l.getContext("2d");if(!c)throw new Error("Failed to get 2D context for clip mask result canvas");return c.imageSmoothingEnabled=!1,c.drawImage(e,0,0),c.globalCompositeOperation="destination-in",c.drawImage(s,0,0),l}renderCanvasItem(e,t,r=!1){if(t.isVisible&&(this.renderCount++,t instanceof Ve?this.drawAnimatedSprite(e,t):t instanceof pe?this.drawSprite(e,t):t.draw(e),r)){let i=ne.childrenByType(ut,t,!1);for(let o of i)this.renderCanvasItem(e,o,r)}}renderCachedItem(e,t,r){let i=tl.get(r);if(i){this.cacheHitCount++,e.save(),t.opacity<1&&(e.globalAlpha=t.opacity),e.drawImage(i,Math.floor(t.position.x),Math.floor(t.position.y)),e.restore();return}let o=t.width,s=t.height,{canvas:a,context:l}=this.createTempCanvas(o,s,"cache"),c=t.ownPosition.clone(),d=ne.parentByType(H,t),u=d?d.position:new m(0,0);t.position=new m(0,0).sub(u),this.renderCanvasItem(l,t,!0),t.position=c,tl.set(r,a,o,s),e.save(),t.opacity<1&&(e.globalAlpha=t.opacity),e.drawImage(a,Math.floor(t.position.x),Math.floor(t.position.y)),e.restore(),this.renderCount++}applyFillColorToTexture(e,t,r,i){if(!i)return null;let o=new OffscreenCanvas(t,r),s=o.getContext("2d");if(!s)throw new Error("Failed to get 2D context for fill color canvas");return s.imageSmoothingEnabled=!1,s.drawImage(e,0,0),s.globalCompositeOperation="source-in",s.fillStyle=i,s.fillRect(0,0,t,r),o}drawTextureWithTransforms(e,t,r,i,o,s,a,l,c=!1,d=!1,u=new m(1,1)){if(this.hasCanvasItemClipMask(l)){let{canvas:p,context:h}=this.createTempCanvas(i,o),I=this.applyFillColorToTexture(t,i,o,a)||t;if(c||d){let v=c?-1:1,D=d?-1:1;h.scale(v,D),h.drawImage(I,v*0,0,v*i,o)}else h.drawImage(I,0,0);let b=this.applyCanvasItemClipMasks(p,l,{x:Math.floor(r.x),y:Math.floor(r.y),width:i,height:o}),y=i*u.x,g=o*u.y;e.save(),this.applyRectangleClips(e,l),s<1&&(e.globalAlpha=s),e.drawImage(b,Math.floor(r.x),Math.floor(r.y),y,g),e.restore()}else if((l?Array.isArray(l)?l:[l]:[]).filter(I=>!Tn(I)).length>0){let{canvas:I,context:b}=this.createTempCanvas(i,o),g=this.applyFillColorToTexture(t,i,o,a)||t;if(c||d){let x=c?-1:1,T=d?-1:1;b.scale(x,T),b.drawImage(g,x*0,0,x*i,o)}else b.drawImage(g,0,0);let v=this.applyRectangleClipsToCanvas(I,l,i,o),D=i*u.x,C=o*u.y;e.save(),s<1&&(e.globalAlpha=s),e.drawImage(v,Math.floor(r.x),Math.floor(r.y),D,C),e.restore()}else{e.save(),s<1&&(e.globalAlpha=s);let b=this.applyFillColorToTexture(t,i,o,a)||t,y=i*u.x,g=o*u.y;if(c||d){let v=c?-1:1,D=d?-1:1;e.translate(Math.floor(r.x),Math.floor(r.y)),e.scale(v,D),e.drawImage(b,0,0,v*y,D*g)}else e.drawImage(b,Math.floor(r.x),Math.floor(r.y),y,g);e.restore()}}drawSprite(e,t){let r=t.texture;this.drawTextureWithTransforms(e,r.data,t.position,r.width,r.height,t.opacity,t.fillColor,t.clipRegion,!1,!1,t.scale)}drawAnimatedSprite(e,t){let r=t.currentFrame;if(!r)return;let i=r.texture;this.drawTextureWithTransforms(e,i.data,t.position,i.width,i.height,t.opacity,t.fillColor,t.clipRegion,t.flipH,t.flipV,t.scale)}render(e){if(this.prevRenderCount=this.renderCount,this.prevCacheHitCount=this.cacheHitCount,this.renderCount=0,this.cacheHitCount=0,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),!this.rootElement)return;this.rootElement.dispatchEvent(new ht(e));let t=new Set;for(let r of ne.childrenByType(ut,this.rootElement,!0,!0))if(r.isVisible){if(r instanceof H){if(this.itemHasCachedParent(r))continue;let i=r.cacheable?r.cacheKey:void 0;if(i){this.renderCachedItem(this.context,r,i),this.updateDOMElementPosition(r),r.attachedDOM&&t.add(r.attachedDOM);continue}}this.renderCanvasItem(this.context,r,!1),this.updateDOMElementPosition(r),r.attachedDOM&&t.add(r.attachedDOM)}this.cleanupDetachedDOMElements(t),this.applyMasking(),ju.releaseAll()}itemHasCachedParent(e){let t=ne.parentByType(H,e);return t?t.cacheable&&t.cacheKey&&tl.get(t.cacheKey)?!0:this.itemHasCachedParent(t):!1}updateDOMElementPosition(e){if(!e.attachedDOM)return;let t=e.attachedDOM,r=t.hasAttribute("data-mask"),i=t.hasAttribute("data-no-auto-position");if(this.attachedDOMElements.has(t)||(t.style.position="absolute",t.parentElement||this.rootDOM.appendChild(t),this.attachedDOMElements.add(t),r&&this.maskElements.add(t)),i){e instanceof H&&(t.style.display=e.isVisible?"block":"none");return}let o=new m(0,0),s=0,a=0;e instanceof H&&(o=e.position,s=e.width,a=e.height);let l=this.canvas.getBoundingClientRect(),c=this.rootDOM.getBoundingClientRect(),d=o.x*this.zoom+l.left-c.left,u=o.y*this.zoom+l.top-c.top;t.style.left=`${d}px`,t.style.top=`${u}px`,r&&(t.dataset.maskX=d.toString(),t.dataset.maskY=u.toString(),t.dataset.maskWidth=(s*this.zoom).toString(),t.dataset.maskHeight=(a*this.zoom).toString()),t.style.transform=`scale(${this.zoom})`,t.style.transformOrigin="top left",t.style.display=e.isVisible?"block":"none"}cleanupDetachedDOMElements(e){for(let t of this.attachedDOMElements)e.has(t)||(t.parentElement===this.rootDOM&&this.rootDOM.removeChild(t),this.attachedDOMElements.delete(t),this.maskElements.delete(t))}applyMasking(){if(this.maskElements.size===0){for(let t of this.attachedDOMElements)t.hasAttribute("data-mask")||(t.style.clipPath="",t.style.visibility="");return}let e=[];for(let t of this.maskElements){if(t.style.display==="none")continue;let r=parseFloat(t.dataset.maskX||"0"),i=parseFloat(t.dataset.maskY||"0"),o=parseFloat(t.dataset.maskWidth||"0"),s=parseFloat(t.dataset.maskHeight||"0");e.push({x:r,y:i,width:o,height:s})}for(let t of this.attachedDOMElements){if(t.hasAttribute("data-mask")||t.hasAttribute("data-interactive"))continue;if(e.length===0){t.style.clipPath="",t.style.visibility="";continue}let r=parseFloat(t.style.left||"0"),i=parseFloat(t.style.top||"0"),o=t.getBoundingClientRect(),s=o.width/this.zoom,a=o.height/this.zoom,l=r,c=i,d=l+s*this.zoom,u=c+a*this.zoom,f=!1;for(let p of e){let h=p.x,w=p.y,I=p.x+p.width,b=p.y+p.height;if(l<I&&d>h&&c<b&&u>w){f=!0;let y=Math.max(l,h),g=Math.max(c,w),v=Math.min(d,I),D=Math.min(u,b),C=(y-l)/this.zoom,x=(g-c)/this.zoom,T=(v-l)/this.zoom,E=(D-c)/this.zoom,S=`polygon(
            0% 0%,
            100% 0%,
            100% 100%,
            0% 100%,
            0% 0%,
            ${C}px ${x}px,
            ${C}px ${E}px,
            ${T}px ${E}px,
            ${T}px ${x}px,
            ${C}px ${x}px
          )`;t.style.clipPath=S;break}}f||(t.style.clipPath="",t.style.visibility="")}}};var mt=class extends oe{constructor(t,r,i){super();this.currentTime=t;this.deltaTime=r;this.simulation=i;super.target=null}};var Be=class extends H{sim;_colliderDimensions;_colliderOffset;_filterCollision;constructor(e){super(e)}get dimensions(){let e=this.width,t=this.height;for(let r of ne.childrenByType(H,this))e=Math.max(e,r.width),t=Math.max(t,r.height);return new m(e,t)}get collider(){let e=this._colliderOffset||new m(0,0),t=this._colliderDimensions||this.dimensions;return{position:this.position.add(e),dimensions:t}}set filterCollisionFn(e){this._filterCollision=e}setColliderOffset(e){this._colliderOffset=e}get colliderOffset(){return this._colliderOffset??new m(0,0)}setColliderDimensions(e){this._colliderDimensions=e}attachToSimulation(e){this.sim=e}filterCollision(e){return this._filterCollision?this._filterCollision(e):!0}};var ln=class extends oe{constructor(t,r,i){super();this.currentTime=t;this.deltaTime=r;this.simulation=i;super.target=null}};var Ty=1e3,Mt=class extends Be{_impulse=new m(0,0);_sleeping=!1;_canSleep=!0;_sleepDelay=Ty;avgVelAcc=[new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0),new m(0,0)];constructor(e){super(e),this.on(mt,t=>{this.sim&&!this._sleeping&&(this.applyDrag(),this.applyImpulse(this.velocityDelta(this.sim.gravity,t.deltaTime),t.deltaTime,!1))}),this.on(ln,t=>{if(this._sleeping)return;Math.abs(this._impulse.x)<1&&(this._impulse=new m(0,this._impulse.y)),Math.abs(this._impulse.y)<1&&(this._impulse=new m(this._impulse.x,0));let r=new m(0,0);if(this._impulse.x!==0||this._impulse.y!==0){let i=this.velocityDelta(this._impulse,t.deltaTime),o=this.checkHit(this._impulse,t.deltaTime);this._impulse.normal.x!==0&&(o.x?(this.position=this.position.add(new m(o.x.distance,0)),this._impulse.x=0,r.x+=o.x.distance):(this.position=this.position.add(new m(i.x,0)),this._impulse.x-=i.x,r.x+=i.x)),this._impulse.normal.y!==0&&(o.y?(this.position=this.position.add(new m(0,o.y.distance)),this._impulse.y=0,r.y+=o.y.distance):(this.position=this.position.add(new m(0,i.y)),this._impulse.y-=i.y,r.y+=i.y))}if(this.avgVelAcc.pop(),this.avgVelAcc.unshift(r),this.canSleep){let i=this.avgVelocity(9);i.x===0&&i.y===0&&(this._sleepDelay<=0?this._sleeping=!0:this._sleepDelay-=t.deltaTime)}})}applyDrag(e=.85){this._impulse.x*=e}applyImpulse(e,t,r=!0){r&&this.wakeUp();let i=this._impulse.add(e),o=this.checkHit(i,t);e.normal.x!==0&&!o.x&&(this._impulse.x=i.x),e.normal.y!==0&&!o.y&&(this._impulse.y=i.y)}velocityDelta(e,t){let r=e.mul(t/1e3);return new m(Math.abs(r.x)*r.normal.x,Math.abs(r.y)*r.normal.y)}checkHit(e,t,r,i){return{x:this.sim?.checkFutureCollisionX(this,this.velocityDelta(e,t),o=>this.colliderCheck(o)&&(r?r(o):!0),i),y:this.sim?.checkFutureCollisionY(this,this.velocityDelta(e,t),o=>this.colliderCheck(o)&&(r?r(o):!0),i)}}checkFutureIntersection(e,t){let r=ne.childrenByType(Be,this.rootElement);for(let i of r){if(t&&!t(i))continue;let o=this.sim?.checkFutureIntersection(this.collider.position,e,this.collider.dimensions,i);if(o)return o}}checkAllFutureIntersections(e,t){let r=ne.childrenByType(Be,this.rootElement),i=[];for(let o of r){if(t&&!t(o))continue;let s=this.sim?.checkFutureIntersection(this.collider.position,e,this.collider.dimensions,o);s&&i.push(s)}return i}checkCurrentIntersection(e){return this.checkFutureIntersection(new m(0,0),e)}checkAllCurrentIntersections(e){return this.checkAllFutureIntersections(new m(0,0),e)}isGrounded(){return!!this.checkHit(new m(0,1),1e3).y}avgVelocity(e=3){let t=new m(0,0);e=Math.min(e,9);let r=this.avgVelAcc.slice(0,e);for(let i of r)t.x+=i.x,t.y+=i.y;return t.div(e)}colliderCheck(e){return e!==this}get sleeping(){return this._sleeping}wakeUp(){this._sleeping=!1,this._sleepDelay=Ty}get canSleep(){return this._canSleep}set canSleep(e){this._canSleep=e}};var xi=class{constructor(e=new m(0,1024)){this.gravity=e;this.workLoop=new bn(this.step.bind(this))}viewport;rootElement;workLoop;lastCollisionObjects={x:[],y:[]};wakeUpInterval=250;timeSinceLastWakeUp=0;setViewport(e){this.viewport=e}setRootElement(e){this.rootElement=e;for(let t of ne.childrenByType(Be,this.rootElement))t.attachToSimulation(this);this.rootElement.on(Ht,t=>{let r=t.target;r instanceof Be&&r.attachToSimulation(this)})}start(e){this.workLoop.start(e)}getDebugInformation(){let e=[];function t(r,i,o){let s=r,a=r.add(i);s.x=Math.floor(s.x),s.y=Math.floor(s.y),a.x=Math.floor(a.x),a.y=Math.floor(a.y),e.push({from:s,to:new m(a.x,s.y),color:o}),e.push({from:new m(a.x,s.y),to:a,color:o}),e.push({from:a,to:new m(s.x,a.y),color:o}),e.push({from:new m(s.x,a.y),to:s,color:o})}if(this.rootElement){for(let r of ne.childrenByType(Be,this.rootElement))t(r.collider.position,r.collider.dimensions,r instanceof Mt&&r.sleeping?"rgba(199, 194, 198, 0.5)":"rgba(205, 93, 215, 0.5)");this.lastCollisionObjects.x.length===2&&(t(this.lastCollisionObjects.x[0].position,this.lastCollisionObjects.x[0].dimensions,"rgba(3, 32, 252, 0.5)"),t(this.lastCollisionObjects.x[1].position,this.lastCollisionObjects.x[1].dimensions,"rgba(49, 252, 3, 0.5)")),this.lastCollisionObjects.y.length===2&&(t(this.lastCollisionObjects.y[0].position,this.lastCollisionObjects.y[0].dimensions,"rgba(3, 32, 252, 0.5)"),t(this.lastCollisionObjects.y[1].position,this.lastCollisionObjects.y[1].dimensions,"rgba(252, 3, 65, 0.5)"))}return e}checkFutureIntersection(e,t,r,i){if(!this.rootElement)return!1;let o=e.add(t),s=o.x,a=o.y,l=o.x+r.x,c=o.y+r.y,d=i.collider.position.x,u=i.collider.position.y,f=i.collider.position.x+i.collider.dimensions.x,p=i.collider.position.y+i.collider.dimensions.y;if(Math.max(s,d)<Math.min(l,f)&&Math.max(a,u)<Math.min(c,p))return i}checkFutureCollisionX(e,t,r,i){if(!this.rootElement)return;let o=ne.childrenByType(Be,this.rootElement),s=e.collider.position.add(t),a=s.x,l=s.x+e.collider.dimensions.x;for(let c of o){if(!i&&r&&!r(c)||!c.filterCollision({velocity:t,collider:e}))continue;let d=this.checkFutureIntersection(e.collider.position,t,e.collider.dimensions,c),u=c.collider.position.x,f=c.collider.position.x+c.collider.dimensions.x;if(d){let p=t.x;if(t.normal.x===1){if(l>u&&(p-=l-u,Math.abs(p)<Math.abs(t.x)))return this.lastCollisionObjects.x=[e.collider,c.collider],{collisionObject:c,normal:t.normal.x,distance:p}}else if(t.normal.x===-1&&a<f&&(p+=f-a,Math.abs(p)<Math.abs(t.x)))return this.lastCollisionObjects.x=[e.collider,c.collider],{collisionObject:c,normal:t.normal.x,distance:p}}}this.lastCollisionObjects.x=[]}checkFutureCollisionY(e,t,r,i){if(!this.rootElement)return;let o=ne.childrenByType(Be,this.rootElement),s=e.collider.position.add(t),a=s.y,l=s.y+e.collider.dimensions.y;for(let c of o){if(!i&&r&&!r(c)||!c.filterCollision({velocity:t,collider:e}))continue;let d=this.checkFutureIntersection(e.collider.position,t,e.collider.dimensions,c),u=c.collider.position.y,f=c.collider.position.y+c.collider.dimensions.y;if(d){let p=t.y;if(t.normal.y===1){if(l>u&&(p-=l-u,Math.abs(p)<Math.abs(t.y)))return this.lastCollisionObjects.y=[e.collider,c.collider],{collisionObject:c,normal:t.normal.y,distance:p}}else if(t.normal.y===-1&&a<f&&(p+=f-a,Math.abs(p)<Math.abs(t.y)))return this.lastCollisionObjects.y=[e.collider,c.collider],{collisionObject:c,normal:t.normal.y,distance:p}}}this.lastCollisionObjects.y=[]}step(e,t){if(this.rootElement){if(this.timeSinceLastWakeUp+=t,this.timeSinceLastWakeUp>=this.wakeUpInterval){this.timeSinceLastWakeUp=0;let r=ne.childrenByType(Mt,this.rootElement);for(let i of r)i.sleeping&&i.wakeUp()}this.rootElement.dispatchEvent(new mt(e,t,this)),this.rootElement.dispatchEvent(new ln(e,t,this))}}};var Pn=class extends Be{};var rt=class extends H{content;_margin;_padding;_gap;constructor(e=new m(0,0),t={},r={},i=0){super(e),this._margin={top:t.top??0,right:t.right??0,bottom:t.bottom??0,left:t.left??0},this._padding={top:r.top??0,right:r.right??0,bottom:r.bottom??0,left:r.left??0},this._gap=i}setContent(e){this.content&&this.removeChild(this.content),this.content=e,this.content.position=new m(this._padding.left,this._padding.top),this.addChild(this.content)}addChild(e){super.addChild(e),this.layoutChildren()}removeChild(e){super.removeChild(e),this.layoutChildren()}layoutChildren(){let e=this.children.filter(r=>r instanceof H),t=this._padding.top;for(let r of e)r.position=new m(this._padding.left,t),t+=r.height+this._gap}get margin(){return _e({},this._margin)}get padding(){return _e({},this._padding)}set padding(e){this._padding=e}get gap(){return this._gap}set gap(e){this._gap=e}computeContentSize(){let e=this.children.filter(i=>i instanceof H);if(e.length===0)return new m(0,0);let t=0,r=0;for(let i of e)t=Math.max(t,i.width),r+=i.height;return r+=this._gap*(e.length-1),new m(t,r)}get width(){let e=this.computeContentSize();return this._margin.left+this._padding.left+e.width+this._padding.right+this._margin.right}get height(){let e=this.computeContentSize();return this._margin.top+this._padding.top+e.height+this._padding.bottom+this._margin.bottom}get contentSize(){return this.computeContentSize()}get innerSize(){let e=this.computeContentSize();return new m(this._padding.left+e.width+this._padding.right,this._padding.top+e.height+this._padding.bottom)}};var _r=class extends rt{flexDirection="row";justifyContent="flex-start";alignItems="flex-start";_needsLayout=!0;_cachedContentSize=null;constructor(e=new m(0,0)){super(e,{},{},0),this.on(Ht,()=>{this.markLayoutDirty(),this.layout()}),this.on(nn,()=>{this.markLayoutDirty(),this.layout()}),this.layout()}markLayoutDirty(){this._needsLayout=!0,this._cachedContentSize=null}get width(){return this._needsLayout&&this.layout(),super.width}get height(){return this._needsLayout&&this.layout(),super.height}addChild(e){H.prototype.addChild.call(this,e),this.markLayoutDirty(),this.layout()}removeChild(e){H.prototype.removeChild.call(this,e),this.markLayoutDirty(),this.layout()}computeContentSize(){if(this._cachedContentSize&&!this._needsLayout)return this._cachedContentSize;let e=this.children.filter(i=>i instanceof H);if(e.length===0)return this._cachedContentSize=new m(0,0),this._cachedContentSize;let t=this.flexDirection==="row",r;if(t){let i=0,o=0;for(let s of e)i+=s.width,o=Math.max(o,s.height);i+=this.gap*(e.length-1),r=new m(i,o)}else{let i=0,o=0;for(let s of e)i=Math.max(i,s.width),o+=s.height;o+=this.gap*(e.length-1),r=new m(i,o)}return this._cachedContentSize=r,r}layout(){let e=this.children.filter(p=>p instanceof H);if(e.length===0){this._needsLayout=!1;return}let t=this.flexDirection==="row",r=this.contentSize,i=t?this.padding.left:this.padding.top,o=t?this.padding.top:this.padding.left,s=t?r.width:r.height,a=t?r.height:r.width,l=0,c=[];for(let p of e){let h=t?p.width:p.height;c.push(h),l+=h}let d=this.gap*(e.length-1);l+=d;let u=this.calculateJustifyStart(s,l,e.length)+i,f=this.calculateSpacing(s,l,e.length);for(let p=0;p<e.length;p++){let h=e[p],w=c[p],I=t?h.height:h.width,b=this.calculateCrossAxisPosition(a,I)+o;t?h.position=new m(u,b):h.position=new m(b,u),u+=w+this.gap+f}this._needsLayout=!1}calculateJustifyStart(e,t,r){switch(this.justifyContent){case"flex-start":return 0;case"flex-end":return e-t;case"center":return(e-t)/2;case"space-between":return 0;case"space-around":return(e-t)/(r*2);default:return 0}}calculateSpacing(e,t,r){let i=e-t;switch(this.justifyContent){case"space-between":return r>1?i/(r-1):0;case"space-around":return r>0?i/r:0;default:return 0}}calculateCrossAxisPosition(e,t){switch(this.alignItems){case"flex-start":return 0;case"flex-end":return e-t;case"center":return(e-t)/2;case"stretch":return(e-t)/2;default:return 0}}},he=class extends _r{_fixedSize;constructor(e,t){super(e),this._fixedSize=t,this.layout()}computeContentSize(){if(!this._fixedSize)return new m(0,0);let e=Math.max(0,this._fixedSize.width-this.padding.left-this.padding.right),t=Math.max(0,this._fixedSize.height-this.padding.top-this.padding.bottom);return new m(e,t)}setSize(e){this._fixedSize=e,this.markLayoutDirty()}};var Me=class extends H{_width=0;_height=0;_left;_center;_right;constructor(e,t,r,i){super(),this._width=e,this._height=(t||r||i)?.height||0,this._left=t,this._center=r,this._right=i,this.cacheable=!0;let o=new pe(t),s=new pe(i);this.addChild(o),this.addChild(s),s.position=new m(e-s.width,0),s.position.x<3&&(s.clipRegion={x:3,y:0,width:s.width,height:s.height});let l=e-Math.min(e,o.width+s.width),c=o.width;for(;l>0;){let d=new pe(r);d.position=new m(c,0),l<d.width&&(d.clipRegion={x:0,y:0,width:l,height:d.height}),this.addChild(d),l-=d.width,c+=d.width}}get width(){return this._width}get height(){return this._height}get cacheKey(){if(!this.cacheable)return;let e=this._left?.id||"none",t=this._center?.id||"none",r=this._right?.id||"none",i=this.fillColor||"none";return`3slice:${this._width}:${e}:${t}:${r}:${i}`}};var cn=class extends H{_size=new m(0,0);_topLeft;_topCenter;_topRight;_middleLeft;_middleCenter;_middleRight;_bottomLeft;_bottomCenter;_bottomRight;constructor(e,t,r,i,o,s,a,l,c,d){super(),this._size=e,this._topLeft=t,this._topCenter=r,this._topRight=i,this._middleLeft=o,this._middleCenter=s,this._middleRight=a,this._bottomLeft=l,this._bottomCenter=c,this._bottomRight=d,this.cacheable=!0;let u=new pe(t),f=new pe(i),p=new pe(l),h=new pe(d);this.addChild(u),this.addChild(f),this.addChild(p),this.addChild(h),u.position=new m(0,0),f.position=new m(e.width-f.width,0),p.position=new m(0,e.height-p.height),h.position=new m(e.width-h.width,e.height-h.height);let w=u.width,I=f.width,b=u.height,y=p.height,g=e.width-w-I,v=e.height-b-y;this.tileHorizontal(r,w,0,g),this.tileHorizontal(c,w,e.height-y,g),this.tileVertical(o,0,b,v),this.tileVertical(a,e.width-I,b,v),this.fillCenter(s,w,b,g,v)}tileHorizontal(e,t,r,i){if(!e||i<=0)return;let o=i,s=t;for(;o>0;){let a=new pe(e);a.position=new m(s,r),o<a.width&&(a.clipRegion={x:0,y:0,width:o,height:a.height}),this.addChild(a),o-=a.width,s+=a.width}}tileVertical(e,t,r,i){if(!e||i<=0)return;let o=i,s=r;for(;o>0;){let a=new pe(e);a.position=new m(t,s),o<a.height&&(a.clipRegion={x:0,y:0,width:a.width,height:o}),this.addChild(a),o-=a.height,s+=a.height}}fillCenter(e,t,r,i,o){if(!e||i<=0||o<=0)return;let s=o,a=r;for(;s>0;){let l=i,c=t;for(;l>0;){let d=new pe(e);d.position=new m(c,a);let u=Math.min(l,d.width),f=Math.min(s,d.height);(u<d.width||f<d.height)&&(d.clipRegion={x:0,y:0,width:u,height:f}),this.addChild(d),l-=d.width,c+=d.width}s-=e.height,a+=e.height}}get width(){return this._size.width}get height(){return this._size.height}get cacheKey(){if(!this.cacheable)return;let e=this._topLeft?.id||"none",t=this._topCenter?.id||"none",r=this._topRight?.id||"none",i=this._middleLeft?.id||"none",o=this._middleCenter?.id||"none",s=this._middleRight?.id||"none",a=this._bottomLeft?.id||"none",l=this._bottomCenter?.id||"none",c=this._bottomRight?.id||"none",d=this.fillColor||"none";return`9slice:${this._size.width}:${this._size.height}:${e}:${t}:${r}:${i}:${o}:${s}:${a}:${l}:${c}:${d}`}};var Ei=class extends oe{constructor(t){super();this.start=t}},Tr=class extends oe{},cs=class extends Mt{input;_enabled=!0;_dropping=!1;constructor(e){super(e),this.input=new ci(this),this.input.setOn(0).when({type:ge,condition:r=>r.action===0&&r.key==="ArrowUp"}),this.input.setOn(0).when({type:ge,condition:r=>r.action===0&&r.key==="w"}),this.input.setOff(0).when({type:ge,condition:r=>r.action===1&&r.key==="ArrowUp"}),this.input.setOff(0).when({type:ge,condition:r=>r.action===1&&r.key==="w"}),this.input.setOn(3).when({type:ge,condition:r=>r.action===0&&r.key==="ArrowDown"}),this.input.setOn(3).when({type:ge,condition:r=>r.action===0&&r.key==="s"}),this.input.setOff(3).when({type:ge,condition:r=>r.action===1&&r.key==="ArrowDown"}),this.input.setOff(3).when({type:ge,condition:r=>r.action===1&&r.key==="s"}),this.input.setOn(1).when({type:ge,condition:r=>r.action===0&&r.key==="ArrowLeft"}),this.input.setOn(1).when({type:ge,condition:r=>r.action===0&&r.key==="a"}),this.input.setOff(1).when({type:ge,condition:r=>r.action===1&&r.key==="ArrowLeft"}),this.input.setOff(1).when({type:ge,condition:r=>r.action===1&&r.key==="a"}),this.input.setOn(2).when({type:ge,condition:r=>r.action===0&&r.key==="ArrowRight"}),this.input.setOn(2).when({type:ge,condition:r=>r.action===0&&r.key==="d"}),this.input.setOff(2).when({type:ge,condition:r=>r.action===1&&r.key==="ArrowRight"}),this.input.setOff(2).when({type:ge,condition:r=>r.action===1&&r.key==="d"}),this.input.setOn(4).when({type:ge,condition:r=>r.action===0&&r.key===" "}),this.input.setOff(4).when({type:ge,condition:r=>r.action===1&&r.key===" "});let t=!1;this.input.onChange(r=>{this._enabled&&(r.get(0)&&this.isGrounded()&&(t=!0),r.get(3)&&this.isGrounded()?(this._dropping=!0,this.dispatchEvent(new Ei(!0))):this._dropping&&(this._dropping=!1,this.dispatchEvent(new Ei(!1))),r.get(4)&&this.isGrounded()&&this.dispatchEvent(new Tr))}),this.on(mt,r=>{this._enabled&&(this.input.state.get(1)&&this.input.state.get(2)||(this.input.state.get(1)&&this.applyImpulse(new m(-16,0),r.deltaTime),this.input.state.get(2)&&this.applyImpulse(new m(16,0),r.deltaTime)),t&&(t=!1,this.applyImpulse(new m(0,-288),r.deltaTime)),this._dropping&&this.applyImpulse(new m(0,3),r.deltaTime))}),this.on(ln,r=>{this.switchStance(r.currentTime)})}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get isDropping(){return this._dropping}switchStance(e){}};var Qe=class extends cs{constructor(t,r,i=0,o=new m(0,0)){super(t);this.assetName=r;this.spritePointing=i;this.spriteOffset=o;this.gfx=new H,this.dustGfx=new H,this.addChild(this.dustGfx),this.addChild(this.gfx),this.ghost=new H,this.ghost.isVisible=!1,this.setColliderOffset(new m(0,4)),this.switchStance(0),this._pointing=1}gfx;dustGfx;ghost;activeStance;activeStanceStartTime=0;_pointing=1;dialogueAnimation;get pointing(){return this._pointing}get pointingDefault(){return this._pointing===this.spritePointing}get ghostGraphics(){return this.ghost}updateGhostPosition(){this.ghost.position=this.position}setSpriteOffset(t){this.spriteOffset=t}switchStance(t,r=!1){let i=Z.get("assets"),o="Idle",s=this.avgVelocity();s.y>.1?o="Fall":s.y<-.1&&(o="Jump"),s.x>.1?this._pointing=1:s.x<-.1&&(this._pointing=0);let a=t-this.activeStanceStartTime;if((this.activeStance==="Fall"&&o==="Idle"||this.activeStance==="Ground"&&a<=i[this.assetName].animations.Ground.duration)&&(o="Ground"),o!=="Ground"&&Math.abs(s.y)<.1&&Math.abs(s.x)>.1&&(o="Run"),o!==this.activeStance||r){this.activeStanceStartTime=t,this.activeStance=o,this.gfx.removeAllChildren();let l=new Ve(i[this.assetName].animations[o]),c=new m(-l.width/2+this.collider.dimensions.width/2,0);this.gfx.translation=c,this.ghost.translation=c,this.ghost.removeAllChildren();let d=new Ve(i[this.assetName].animations[o]);d.opacity=.5,d.fillColor="rgba(0, 0, 0, 1)",this.ghost.addChild(d),this.gfx.addChild(l),this.dustGfx.removeAllChildren();let u=i["The Crusty Crew Dust Particles"];if(u&&(o==="Run"||o==="Jump"||o==="Fall")){let f=u.animations[o];if(f){let p=new Ve(f);p.translation=new m(-p.width/2+this.collider.dimensions.width/2,32-p.height),o==="Run"?p.animation.repeat=0:p.animation.repeat=1,this.dustGfx.addChild(p)}}}if(this.gfx.children.length===1){let l=this.gfx?.children[0];l.flipH=this._pointing!==this.spritePointing,l.flipH?l.translation=new m(0,-32).add(this.spriteOffset):l.translation=new m(0,-32).sub(this.spriteOffset)}if(this.dustGfx.children.length===1){let l=this.dustGfx?.children[0];l.flipH=this._pointing===0}if(this.ghost.children.length===1){let l=this.ghost?.children[0];l.clipRegion=this.ghostGraphics.clipRegion,l.flipH=this._pointing!==this.spritePointing,l.flipH?l.translation=new m(0,-32).add(this.spriteOffset):l.translation=new m(0,-32).sub(this.spriteOffset)}}showExclamation(){let r=Z.get("assets")["The Crusty Crew Dialogue"];if(!r||!r.animations.Exclamation)throw new Error("Exclamation animation not found");this.dialogueAnimation&&this.dialogueAnimation.remove(),this.dialogueAnimation=new Ve(r.animations.Exclamation),this.dialogueAnimation.translation=new m(this.colliderOffset.x+this.collider.dimensions.width/2-this.dialogueAnimation.width/2,this.colliderOffset.y-24),this.dialogueAnimation.animation.repeat=1,this.addChild(this.dialogueAnimation)}};var Dr=class extends Qe{constructor(e){super(e,"Captain Clown Nose",1,new m(0,0)),this.setColliderDimensions(new m(16,28))}};var Dy={PinkStar:"The Crusty Crew Pink Star",Crabby:"The Crusty Crew Crabby",FierceTooth:"The Crusty Crew Fierce Tooth"},At=class extends Qe{constructor(e,t){super(e,Dy[t]),this.setCharacterType(t)}setCharacterType(e){this.assetName=Dy[e],e==="Crabby"?this.setColliderDimensions(new m(22,28)):this.setColliderDimensions(new m(18,28)),this.switchStance(0,!0)}};var a0={regular:{charsMapKey:"Chars"},hero:{charsMapKey:"CharsHero"}},we=class extends H{_width=0;_height=0;letterSpacing;style;_text="";constructor(e,t=1,r="regular"){super(),this.letterSpacing=t,this.style=r,e&&this.setText(e),this.cacheable=!0}get cacheKey(){if(!this.cacheable)return;let e=this.fillColor||"none";return`text:${this._text}:${this.style}:${this.letterSpacing}:${e}`}get fillColor(){return super.fillColor}set fillColor(e){super.fillColor=e;for(let t of this.children)t instanceof pe&&(t.fillColor=e)}setTextFromTextures(e){let t=[...this.children];for(let r of t)this.removeChild(r);this._width=0,this._height=0;for(let r=0;r<e.length;r+=1){let i=e[r],o=new pe(i,new m(this._width,0));this.fillColor&&(o.fillColor=this.fillColor),this.addChild(o),this._width+=o.width,r<e.length-1&&(this._width+=this.letterSpacing),this._height=o.height}}setText(e){this._text=e;let t=Z.get("chars"),r=a0[this.style],o=e.toLowerCase().split("").map(s=>t[r.charsMapKey][s]||t[r.charsMapKey].__unknown__).filter(s=>s!==void 0);this.setTextFromTextures(o)}setTextFromCodes(e,t="Chars",r="Chars"){let o=Z.get("assets")[r]?.tilemaps[t];if(!o){console.warn(`Tilemap "${t}" not found in asset "${r}"`);return}let s=[];for(let a of e){let l=o.get(a);if(!l){console.warn(`Texture at index ${a} not found in tilemap`);continue}s.push(l)}this.setTextFromTextures(s)}get width(){return this._width}get height(){return this._height}};var l0={fontFamily:"monospace",fontSize:8,fontWeight:"normal",color:"#000000",letterSpacing:0},Ci=class extends H{textElement;_text;_style;_width=0;_height=0;CHAR_WIDTH=6;CHAR_HEIGHT=8;constructor(e="",t={}){super(),this._text=e,this._style=_e(_e({},l0),t),this.textElement=document.createElement("div"),this.attachedDOM=this.textElement,this.setupDOMElement(),this.setText(e)}setupDOMElement(){let e=this.textElement;e.style.position="absolute",e.style.pointerEvents="none",e.style.whiteSpace="nowrap",e.style.userSelect="none",e.style.overflow="hidden",e.style.fontFamily=this._style.fontFamily,e.style.fontSize=`${this.CHAR_HEIGHT}px`,e.style.fontWeight=this._style.fontWeight,e.style.color=this._style.color,e.style.lineHeight=`${this.CHAR_HEIGHT}px`,e.style.margin="0",e.style.padding="0",e.style.transformOrigin="top left"}setText(e){this._text=e,this.textElement.innerHTML="";let t=e.length;this._width=t*this.CHAR_WIDTH,this._height=this.CHAR_HEIGHT;for(let r=0;r<e.length;r++){let i=document.createElement("span");i.textContent=e[r],i.style.display="inline-block",i.style.width=`${this.CHAR_WIDTH}px`,i.style.height=`${this.CHAR_HEIGHT}px`,i.style.textAlign="center",i.style.lineHeight=`${this.CHAR_HEIGHT}px`,i.style.overflow="hidden",this.textElement.appendChild(i)}this.textElement.style.width=`${this._width}px`,this.textElement.style.height=`${this._height}px`}updateStyle(e){this._style=_e(_e({},this._style),e),this.setupDOMElement()}get text(){return this._text}get width(){return this._width}get height(){return this._height}get fillColor(){return this._style.color}set fillColor(e){e&&(this._style.color=e,this.textElement.style.color=e)}};var it=class extends Mt{constructor(t,r,i="html"){super(t);this.text=r;this.tagType=i;let s=Z.get("assets").Paper.tilemaps.Paper,a=new Ci(r,{fontFamily:'"Source Code Pro", monospace',fontWeight:"700",color:"#000000"});this.slice=new Me(a.width+4,s.get(1),s.get(2),s.get(3)),this.addChild(this.slice),a.position=new m(2,2),this.addChild(a)}slice;_initialDepth;setHighlight(t){this.slice.fillColor=t?"#ffffff":void 0,this.slice.opacity=t?.8:1,this._initialDepth===void 0&&(this._initialDepth=this.depth),this.depth=t?this._initialDepth+5:this._initialDepth}get width(){return this.slice.width}get height(){return this.slice.height}};var My="rgba(0, 0, 0, 0.3)",c0="rgba(255, 255, 255, 0.3)",d0="rgba(100, 150, 255, 0.6)",u0="rgba(0, 0, 0, 0.1)",f0="rgba(128, 128, 128, 0.5)",p0={primary:{multiChar:{left:2,center:3,right:4},multiCharHover:{left:44,center:45,right:46},singleChar:1,singleCharHover:43},secondary:{multiChar:{left:6,center:7,right:8},multiCharHover:{left:48,center:49,right:50},singleChar:5,singleCharHover:47}},$e=class extends H{outline;background;hoverBackground;textComponent;textDefaultPosition;variant;mouseInteraction;action=void 0;_isFocused=!1;_isHovered=!1;_isDisabled=!1;underline;buttonElement;constructor(e,t,r="primary"){super(e),this.textComponent=t,this.variant=r;let i=Z.get("assets");if(r==="text"){let o=i.Chars.tilemaps.Chars;t.position=new m(0,0),this.textDefaultPosition=new m(0,0),this.addChild(t),this.underline=new Me(t.width,o.get(90),o.get(90),o.get(90)),this.underline.position=new m(0,t.height+2),this.underline.isVisible=!1,this.addChild(this.underline)}else{let o=i["Wood and Paper UI - Buttons"].tilemaps["Wood and Paper"],s=1,a=1,l=p0[r];if(t.children.length>1){let d=t.width+12;this.background=new Me(d,o.get(l.multiChar.left),o.get(l.multiChar.center),o.get(l.multiChar.right)),this.hoverBackground=new Me(d,o.get(l.multiCharHover.left),o.get(l.multiCharHover.center),o.get(l.multiCharHover.right)),this.outline=new Me(d+s*2,o.get(l.multiChar.left),o.get(l.multiChar.center),o.get(l.multiChar.right)),t.position=new m(6,4),this.textDefaultPosition=new m(6,4)}else this.background=new pe(o.get(l.singleChar)),this.hoverBackground=new pe(o.get(l.singleCharHover)),this.outline=new Me(this.background.width+s*2,o.get(l.multiChar.left),o.get(l.multiChar.center),o.get(l.multiChar.right)),t.position=new m(5,4),this.textDefaultPosition=new m(5,4);this.outline.position=new m(-s,-a),this.outline.fillColor=My;let c=(this.background.height+a*2)/this.outline.height;this.outline.scale=new m(1,c),this.addChild(this.outline),this.addChild(this.background),this.addChild(this.hoverBackground),this.hoverBackground.isVisible=!1,this.addChild(t)}this.buttonElement=document.createElement("button"),this.attachedDOM=this.buttonElement,this.setupButtonElement(),this.mouseInteraction=new di(this),this.mouseInteraction.on(_n,this.handleMouseEnter.bind(this)),this.mouseInteraction.on(cr,this.handleMouseLeave.bind(this)),this.mouseInteraction.on(dr,this.handleMouseClick.bind(this))}setupButtonElement(){let e=this.buttonElement;e.setAttribute("data-interactive","true"),e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width=`${this.width}px`,e.style.height=`${this.height}px`,e.style.border="none",e.style.outline="none",e.style.background="transparent",e.style.cursor="pointer",e.style.padding="0",e.style.margin="0",e.style.zIndex="1000",e.style.appearance="none",e.style.webkitAppearance="none",e.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),e.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),e.addEventListener("click",this.handleMouseClick.bind(this)),e.addEventListener("focus",()=>this.setFocused(!0)),e.addEventListener("blur",()=>this.setFocused(!1))}handleMouseEnter(){this._isDisabled||(this._isHovered=!0,this.updateVisualState())}handleMouseLeave(){this._isDisabled||(this._isHovered=!1,this.updateVisualState())}updateVisualState(){if(this._isDisabled){this.outline&&this.background&&this.hoverBackground&&(this.outline.fillColor=u0,this.background.isVisible=!0,this.hoverBackground.isVisible=!1),this.underline&&(this.underline.isVisible=!1),this.textComponent.position=this.textDefaultPosition,this.textComponent.fillColor=f0;return}this.textComponent.fillColor=void 0;let e=this._isFocused||this._isHovered;this.variant==="text"?(this.underline&&(this.underline.isVisible=e),this.textComponent.position=this.textDefaultPosition):e?(this.outline&&this.background&&this.hoverBackground&&(this.outline.fillColor=this._isFocused?d0:c0,this.background.isVisible=!1,this.hoverBackground.isVisible=!0),this.textComponent.position=new m(this.textDefaultPosition.x,this.textDefaultPosition.y+1)):(this.outline&&this.background&&this.hoverBackground&&(this.outline.fillColor=My,this.background.isVisible=!0,this.hoverBackground.isVisible=!1),this.textComponent.position=this.textDefaultPosition)}setFocused(e){this._isFocused=e,this.updateVisualState()}get isFocused(){return this._isFocused}setDisabled(e){this._isDisabled=e,this.buttonElement.disabled=e,e?this.buttonElement.style.cursor="not-allowed":this.buttonElement.style.cursor="pointer",this.updateVisualState()}get isDisabled(){return this._isDisabled}activate(){this._isDisabled||this.action&&this.action()}handleMouseClick(){this._isDisabled||this.activate()}getButtonElement(){return this.buttonElement}setButtonType(e){this.buttonElement.type=e}get width(){return this.background?.width||this.textComponent.width}get height(){return this.background?.height||this.textComponent.height}};var Si=class extends H{constructor(t,r){super(t);this._size=r}get width(){return this._size?.width||0}get height(){return this._size?.height||0}};var yw=Qw(gw());var ji=class extends H{_size;htmlContent;cssContent;previewCanvas;context;constructor(e,t,r,i=""){super(),this._size=t,this.position=e,this.htmlContent=r,this.cssContent=i,this.previewCanvas=document.createElement("canvas"),this.previewCanvas.width=this.width*4,this.previewCanvas.height=this.height*4,this.previewCanvas.style.width=this.width+"px",this.previewCanvas.style.height=this.height+"px",this.previewCanvas.style.background="transparent",this.previewCanvas.style.border="none",this.previewCanvas.style.pointerEvents="none",this.previewCanvas.style.imageRendering="crisp-edges";let o=this.previewCanvas.getContext("2d");if(!o)throw new Error("Could not obtain off-screen canvas context");this.context=o,this.attachedDOM=this.previewCanvas,this.renderHtml()}renderHtml(){return L(this,null,function*(){this.context.clearRect(0,0,this.previewCanvas.width,this.previewCanvas.height);let e=this.htmlContent.replaceAll("<img/>",'<img src="/sample-img.png" />'),t=4,r=`
      <!DOCTYPE html>
      <html>
        <head>
          <style>
            body {
              margin: ${16*t}px;
              font-family: Arial, sans-serif;
              font-size: ${12*t}px;
              line-height: 1.4;
            }

            a {
              color: blue;
              text-decoration: underline;
            }

            img {
              width: ${50*t}px;
              height: ${50*t}px;
              border: ${1*t}px solid #000000;
            }
            
            button {
              font-size: ${12*t}px;
              line-height: 1.4;
            }

            /* User-provided CSS */
            ${this.cssContent}
          </style>
        </head>
        <body>${e}</body>
      </html>
    `;try{yield(0,yw.drawHTML)(r,this.previewCanvas,{width:this.previewCanvas.width,height:this.previewCanvas.height,executeJs:!1})}catch(i){console.error("Error rendering HTML with rasterizehtml:",i)}})}setHtml(e,t=""){(this.htmlContent!==e||this.cssContent!==t)&&(this.htmlContent=e,this.cssContent=t,this.renderHtml())}get width(){return this._size.width}get height(){return this._size.height}};var RA={default:{topLeft:33,topCenter:34,topRight:35,middleLeft:45,middleCenter:46,middleRight:47,bottomLeft:57,bottomCenter:58,bottomRight:59},white:{topLeft:41,topCenter:42,topRight:43,middleLeft:53,middleCenter:54,middleRight:55,bottomLeft:65,bottomCenter:66,bottomRight:67}},Nr=class extends H{board;variant;constructor(e,t,r="default"){super(e),this.variant=r,this.createBoard(t)}createBoard(e){let r=Z.get("assets")["Wood and Paper UI - Boards"].tilemaps["Wood and Paper"],i=RA[this.variant];this.board=new cn(e,r.get(i.topLeft),r.get(i.topCenter),r.get(i.topRight),r.get(i.middleLeft),r.get(i.middleCenter),r.get(i.middleRight),r.get(i.bottomLeft),r.get(i.bottomCenter),r.get(i.bottomRight)),this.addChild(this.board)}get width(){return this.board?.width??0}get height(){return this.board?.height??0}setSize(e){this.board&&this.removeChild(this.board),this.createBoard(e)}};var LA={primary:{topLeft:1,topCenter:2,topRight:3,middleLeft:9,middleCenter:10,middleRight:11,bottomLeft:17,bottomCenter:18,bottomRight:19},secondary:{topLeft:5,topCenter:6,topRight:7,middleLeft:13,middleCenter:14,middleRight:15,bottomLeft:21,bottomCenter:22,bottomRight:23}},Kt=class extends H{outline;board;paper;variant;outlined;paperVariant;overlayElements=[];constructor(e,t,r="primary",i=!1,o="default"){super(e),this.variant=r,this.outlined=i,this.paperVariant=o,this.createBoard(t),o!=="none"&&(this.paper=new Nr(new m(0,0),t,o),this.addChild(this.paper))}createBoard(e){let r=Z.get("assets")["Wood and Paper UI - Boards"].tilemaps["Wood and Paper"],i=LA[this.variant];if(this.outlined){let a=new m(e.width+2,e.height+4),l=new m(-1,-2);this.outline=new cn(a,r.get(i.topLeft),r.get(i.topCenter),r.get(i.topRight),r.get(i.middleLeft),r.get(i.middleCenter),r.get(i.middleRight),r.get(i.bottomLeft),r.get(i.bottomCenter),r.get(i.bottomRight)),this.outline.position=l,this.outline.fillColor="rgba(0, 0, 0, 0.3)",this.addChild(this.outline)}this.board=new cn(e,r.get(i.topLeft),r.get(i.topCenter),r.get(i.topRight),r.get(i.middleLeft),r.get(i.middleCenter),r.get(i.middleRight),r.get(i.bottomLeft),r.get(i.bottomCenter),r.get(i.bottomRight)),this.addChild(this.board)}get width(){return this.board?.width??0}get height(){return this.board?.height??0}addOverlay(e){this.overlayElements.push(e),this.addChild(e)}setSize(e){this.board&&this.removeChild(this.board),this.outline&&this.removeChild(this.outline),this.createBoard(e),this.paper&&this.paper instanceof Nr&&this.paper.setSize(e);for(let t of this.overlayElements)this.removeChild(t),this.addChild(t)}};var Hi=class extends Pn{constructor(t,r){super(t);this._size=r;let o=Z.get("assets")["Pirate Ship"].tilemaps.Platforms;this.gfx=new Me(this.width,o.get(51),o.get(52),o.get(50)),this.gfx.position=new m(0,-2),this.addChild(this.gfx)}gfx;get width(){return this._size?.width||0}get height(){return this._size?.height||0}};var _l=class extends oe{constructor(t){super();this.value=t}},Sf=class extends oe{constructor(){super()}},_f=class extends oe{constructor(){super()}},vw="rgba(0, 0, 0, 0.3)",OA="rgba(100, 150, 255, 0.6)",$i=class extends H{inputElement;background;outline;_isFocused=!1;_width;_height;capWidth;constructor(e,t={}){super(e);let{width:r=150,placeholder:i="",type:o="text",maxLength:s,name:a,autocomplete:l}=t;this._width=r,this._height=16;let d=Z.get("assets")["Wood and Paper UI"].tilemaps["Wood and Paper"],u=1,f=1,p=d.get(13);this.capWidth=p?p.width:4,this.background=new Me(this._width,d.get(13),d.get(15),d.get(14)),this.outline=new Me(this._width+u*2,d.get(13),d.get(15),d.get(14)),this.outline.position=new m(-u,-f),this.outline.fillColor=vw;let h=(this.background.height+f*2)/this.outline.height;this.outline.scale=new m(1,h),this.addChild(this.outline),this.addChild(this.background),this._height=this.background.height,this.inputElement=document.createElement("input"),this.inputElement.setAttribute("data-interactive","true"),this.attachedDOM=this.inputElement,this.setupInputElement(i,o,s,a,l)}setupInputElement(e,t,r,i,o){let s=this.inputElement;s.type=t,s.placeholder=e,r&&(s.maxLength=r),i&&(s.name=i),o&&(s.autocomplete=o),s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width=`${this._width}px`,s.style.height=`${this._height}px`,s.style.border="none",s.style.outline="none",s.style.background="transparent",s.style.fontFamily="monospace",s.style.fontSize="8px",s.style.color="#2d2d2d",s.style.paddingLeft=`${this.capWidth}px`,s.style.paddingRight=`${this.capWidth}px`,s.style.paddingTop="0",s.style.paddingBottom="0",s.style.margin="0",s.style.boxSizing="border-box",s.style.zIndex="1000",s.style.pointerEvents="auto",s.style.setProperty("::placeholder","color: #888888"),s.style.appearance="none",s.style.webkitAppearance="none",this.injectAutofillStyles(),s.addEventListener("focus",this.handleFocus.bind(this)),s.addEventListener("blur",this.handleBlur.bind(this)),s.addEventListener("input",this.handleInput.bind(this))}injectAutofillStyles(){let e="input-autofill-override";if(!document.getElementById(e)){let t=document.createElement("style");t.id=e,t.textContent=`
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
          -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
          box-shadow: 0 0 0 1000px transparent inset !important;
          -webkit-text-fill-color: #2d2d2d !important;
          transition: background-color 5000s ease-in-out 0s;
        }
      `,document.head.appendChild(t)}}handleFocus(){this._isFocused=!0,this.updateVisualState(),this.handleEvent(new Sf)}handleBlur(){this._isFocused=!1,this.updateVisualState(),this.handleEvent(new _f)}handleInput(){this.handleEvent(new _l(this.inputElement.value))}updateVisualState(){this._isFocused?this.outline.fillColor=OA:this.outline.fillColor=vw}get value(){return this.inputElement.value}set value(e){this.inputElement.value=e}focus(){this.inputElement.focus()}blur(){this.inputElement.blur()}get isFocused(){return this._isFocused}clear(){this.inputElement.value="",this.handleEvent(new _l(""))}getInputElement(){return this.inputElement}get width(){return this._width}get height(){return this._height}};var Tl=class extends H{constructor(t,r,i){super(t);this._width=r;this._height=i}get width(){return this._width}get height(){return this._height}},Hn=class extends H{board;formBox;formLayout;inputElements=new Map;mainButton;secondaryButtons=[];errorPlaceholder;formElement;constructor(e,t){super(e),this.formElement=document.createElement("form"),this.formElement.setAttribute("data-interactive","true"),this.formElement.setAttribute("data-no-auto-position","true"),this.formElement.style.position="absolute",this.formElement.style.left="0",this.formElement.style.top="0",this.attachedDOM=this.formElement,this.formElement.addEventListener("submit",s=>{s.preventDefault();let a={};for(let[l,c]of this.inputElements)a[l]=c.value;t.mainAction.onAction(a)});let r;if(t.backAction){let s=new we;s.setTextFromCodes([53]),r=new $e(new m(0,0),s,"secondary"),r.action=t.backAction}this.formLayout=new _r(new m(0,0)),this.formLayout.flexDirection="column",this.formLayout.alignItems="center",this.formLayout.gap=0;let i=new we(t.title,0,"hero");this.formLayout.addChild(i);for(let s of t.inputs){let a=new $i(new m(0,0),{width:s.width||200,placeholder:s.placeholder,type:s.type||"text",name:s.name,autocomplete:s.autocomplete});this.inputElements.set(s.key,a),this.formLayout.addChild(a),this.formElement.appendChild(a.getInputElement())}this.errorPlaceholder=new rt(new m(0,0),{},{}),this.formLayout.addChild(this.errorPlaceholder);let o=new we(t.mainAction.label);if(this.mainButton=new $e(new m(0,0),o,"primary"),this.mainButton.action=()=>{let s={};for(let[a,l]of this.inputElements)s[a]=l.value;t.mainAction.onAction(s)},this.formLayout.addChild(this.mainButton),this.mainButton.setButtonType("submit"),this.formElement.appendChild(this.mainButton.getButtonElement()),t.secondaryActions&&t.secondaryActions.length>0){let s=0,a=0;for(let p of t.secondaryActions){let h=new we(p.label),w=new $e(new m(0,0),h,"text");w.action=p.onAction,this.secondaryButtons.push(w),s+=w.width,a=Math.max(a,w.height)}let l=8;s+=l*(this.secondaryButtons.length-1);let c=new he(new m(0,0),new m(s,a));c.flexDirection="row",c.alignItems="center",c.justifyContent="center",c.gap=l;for(let p of this.secondaryButtons)c.addChild(p);let d=8,u=8,f=new Tl(new m(0,0),s,a+d+u);c.position=new m(0,d),f.addChild(c),this.formLayout.addChild(f)}this.formBox=new rt(new m(0,0),{},{top:16,right:16,bottom:16,left:16},0),this.formBox.setContent(this.formLayout),this.board=new Kt(new m(0,0),new m(this.formBox.width,this.formBox.height),"primary",!1,"none"),r&&this.board.addOverlay(r),this.addChild(this.board),this.addChild(this.formBox)}getInput(e){return this.inputElements.get(e)}getInputValue(e){return this.getInput(e)?.value||""}setInputValue(e,t){let r=this.getInput(e);if(!r)throw new Error(`Unknown input "${e}"`);r.value=t}clearInputs(){for(let e of this.inputElements.values())e.clear()}showError(e){let t=this.getErrorElement(e);this.errorPlaceholder.setContent(t),this.board.setSize(new m(this.formBox.width,this.formBox.height))}hideError(){this.errorPlaceholder.content&&(this.errorPlaceholder.removeChild(this.errorPlaceholder.content),this.errorPlaceholder.content=void 0),this.board.setSize(new m(this.formBox.width,this.formBox.height))}setButtonsEnabled(e){this.mainButton.setDisabled(!e);for(let t of this.secondaryButtons)t.setDisabled(!e)}get width(){return this.formBox.width}get height(){return this.formBox.height}getErrorElement(e){let r=Z.get("assets")["Wood and Paper UI"].tilemaps["Wood and Paper"],i=new we(e);i.fillColor="#000000";let o=r.get(211)?.width??0,s=r.get(213)?.width??0,a=new Me(i.width+o+s,r.get(211),r.get(212),r.get(213));i.position=new m(o,15);let l=new Tl(new m(0,0),a.width,a.height);return l.addChild(a),l.addChild(i),l}};var Vi=class{frameCount;startTime;currentFps;constructor(){this.frameCount=0,this.startTime=0,this.currentFps=0}advance(e){this.startTime===0&&(this.startTime=e);let t=e-this.startTime;this.frameCount+=1,this.currentFps=1e3/(t/this.frameCount),t>=1e4&&(this.startTime=e,this.frameCount=0)}get fps(){return this.currentFps}};var $n=class{history=[];maxHistoryLength=120;addSample(e){this.history.push(e),this.history.length>this.maxHistoryLength&&this.history.shift()}draw(e,t,r,i,o){if(this.history.length===0)return;let s=Math.max(...this.history,1),a=Math.min(...this.history,0);e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(t,r,i,o),e.strokeStyle="rgba(255, 255, 255, 0.5)",e.lineWidth=1,e.strokeRect(t,r,i,o),e.strokeStyle="rgba(255, 255, 255, 0.1)",e.beginPath();for(let d=1;d<4;d++){let u=r+o/4*d;e.moveTo(t,u),e.lineTo(t+i,u)}e.stroke(),e.strokeStyle="#00ff00",e.lineWidth=2,e.beginPath();let l=i/this.maxHistoryLength;for(let d=0;d<this.history.length;d++){let f=(this.history[d]-a)/(s-a||1),p=t+d*l,h=r+o-f*o;d===0?e.moveTo(p,h):e.lineTo(p,h)}e.stroke(),e.fillStyle="rgba(255, 255, 255, 0.8)",e.font="10px monospace",e.fillText(`Max: ${s.toFixed(0)}`,t+4,r+12),e.fillText(`Min: ${a.toFixed(0)}`,t+4,r+o-4);let c=this.history[this.history.length-1];e.fillText(`Current: ${c.toFixed(0)}`,t+i-80,r+12)}clear(){this.history=[]}get currentValue(){return this.history[this.history.length-1]||0}get averageValue(){return this.history.length===0?0:this.history.reduce((t,r)=>t+r,0)/this.history.length}};var Bi=class extends ut{graphCanvas;graphContext;engine;previousScene;renderFpsCounter=new Vi;physicsFpsCounter=new Vi;renderGraph=new $n;cacheHitGraph=new $n;renderFpsGraph=new $n;physicsFpsGraph=new $n;debugLines=[];_enablePhysicsDebugLines=!1;_enableGridLines=!1;_enableHoverHighlight=!1;_enableFlexDebugLines=!1;_enableRenderGraph=!1;hoveredObject;gridSize=new m(32,32);constructor(e){super(),this.graphCanvas=document.createElement("canvas"),this.graphCanvas.style.position="absolute",this.graphCanvas.style.top="50px",this.graphCanvas.style.left="20px",this.graphCanvas.style.display="none",this.graphCanvas.width=260,this.graphCanvas.height=480,this.graphCanvas.style.imageRendering="pixelated",e.appendChild(this.graphCanvas);let t=this.graphCanvas.getContext("2d");if(!t)throw new Error("Failed to get 2D context for graph canvas");this.graphContext=t,this.graphContext.imageSmoothingEnabled=!1,this.on(ht,this.onTick.bind(this)),this.on(mt,this.onPhysicsTick.bind(this)),this.on($t,this.onMouseMove.bind(this))}set enablePhysicsDebugLines(e){this._enablePhysicsDebugLines=e}set enableGridLines(e){this._enableGridLines=e}set enableHoverHighlight(e){this._enableHoverHighlight=e}set enableFlexDebugLines(e){this._enableFlexDebugLines=e}set enableRenderGraph(e){this._enableRenderGraph=e,this.graphCanvas.style.display=e?"block":"none"}attachTo(e){this.engine=e,e.on(xn,t=>{this.attachToScene(t.scene)})}attachToScene(e){this.previousScene&&this.previousScene.removeChild(this),e.addChild(this,99999),this.previousScene=e}onTick(e){if(this._enableRenderGraph&&this.renderFpsCounter.advance(e.currentTime),this._enableRenderGraph&&this.engine){let t=this.engine.renderer.getRenderStats();this.renderGraph.addSample(t.renderCount),this.cacheHitGraph.addSample(t.cacheHitCount),this.renderFpsGraph.addSample(this.renderFpsCounter.fps),this.drawRenderGraphs()}}onPhysicsTick(e){this._enableRenderGraph&&this.physicsFpsCounter.advance(e.currentTime),this._enableRenderGraph&&this.physicsFpsGraph.addSample(this.physicsFpsCounter.fps),this._enablePhysicsDebugLines&&(this.debugLines=e.simulation.getDebugInformation())}onMouseMove(e){if(!this._enableHoverHighlight||!this.previousScene){this.hoveredObject=void 0;return}this.hoveredObject=this.getObjectAt(e.point)}getObjectAt(e){if(!this.previousScene)return;let t=ne.childrenByType(H,this.previousScene);for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.position.left,s=i.position.left+i.width,a=i.position.top,l=i.position.top+i.height;if(o<=e.x&&e.x<=s&&a<=e.y&&e.y<=l)return i}}draw(e){if(this._enableGridLines){let t=this.engine?.viewport.width||0,r=this.engine?.viewport.height||0;for(let i=this.gridSize.width;i<t;i+=this.gridSize.width)e.beginPath(),e.strokeStyle="rgba(0, 0, 0, 0.2",e.moveTo(i,0),e.lineTo(i,r),e.stroke();for(let i=this.gridSize.height;i<r;i+=this.gridSize.height)e.beginPath(),e.strokeStyle="rgba(0, 0, 0, 0.2",e.moveTo(0,i),e.lineTo(t,i),e.stroke();e.beginPath(),e.strokeStyle="#ff0000",e.rect(0,0,t,r),e.stroke()}if(this._enablePhysicsDebugLines)for(let t of this.debugLines)e.beginPath(),e.strokeStyle=t.color,e.moveTo(t.from.x,t.from.y),e.lineTo(t.to.x,t.to.y),e.stroke();if(this._enableHoverHighlight&&this.hoveredObject){let t=this.hoveredObject;e.beginPath(),e.strokeStyle="#00ff00",e.lineWidth=2,e.rect(t.position.left,t.position.top,t.width,t.height),e.stroke(),e.lineWidth=1}this._enableFlexDebugLines&&this.previousScene&&this.drawFlexDebugLines(e)}drawRenderGraphs(){this.graphContext.clearRect(0,0,this.graphCanvas.width,this.graphCanvas.height);let e=240,t=80,r=10,i=25,o=r;this.graphContext.fillStyle="rgba(255, 255, 255, 0.9)",this.graphContext.font="12px monospace",this.graphContext.fillText("Render FPS",r,o+2),o+=12,this.renderFpsGraph.draw(this.graphContext,r,o,e,t),o+=t+i,this.graphContext.fillText("Physics FPS",r,o+2),o+=12,this.physicsFpsGraph.draw(this.graphContext,r,o,e,t),o+=t+i,this.graphContext.fillText("Renders/Frame",r,o+2),o+=12,this.renderGraph.draw(this.graphContext,r,o,e,t),o+=t+i,this.graphContext.fillText("Cache Hits/Frame",r,o+2),o+=12,this.cacheHitGraph.draw(this.graphContext,r,o,e,t)}drawFlexDebugLines(e){if(!this.previousScene)return;let t=ne.childrenByType(he,this.previousScene);for(let r of t){let i=r.position,o=i.x,s=i.y,a=r.width,l=r.height;e.beginPath(),e.strokeStyle="#0088ff",e.lineWidth=2,e.rect(o,s,a,l),e.stroke(),e.fillStyle="#0088ff",e.font="10px monospace";let c=`${r.flexDirection} | ${r.justifyContent} | ${r.alignItems}`;e.fillText(c,o+4,s+12);let d=r.children.filter(u=>u instanceof H);for(let u of d){let f=u.position,p=f.x,h=f.y;e.beginPath(),e.strokeStyle="#ff8800",e.lineWidth=1,e.rect(p,h,u.width,u.height),e.stroke(),e.beginPath(),e.strokeStyle="#ff0000",e.lineWidth=1,e.moveTo(p-3,h),e.lineTo(p+3,h),e.moveTo(p,h-3),e.lineTo(p,h+3),e.stroke()}if(r.gap>0&&d.length>1){let u=r.flexDirection==="row";e.strokeStyle="#ff00ff",e.lineWidth=1,e.setLineDash([2,2]);for(let f=0;f<d.length-1;f++){let p=d[f],h=d[f+1],w=p.position,I=h.position;if(u){let b=w.x+p.width,y=I.x,g=s+l/2;e.beginPath(),e.moveTo(b,g),e.lineTo(y,g),e.stroke()}else{let b=w.y+p.height,y=I.y,g=o+a/2;e.beginPath(),e.moveTo(g,b),e.lineTo(g,y),e.stroke()}}e.setLineDash([])}e.lineWidth=1}}};var Fi=class extends Ke{constructor(t,r){super();this.loadingAssetPath=t;this.charsAssetInfo=r}progressText;contentLayout;run(){return L(this,null,function*(){let t=new Cr;yield t.init({Loading:{path:this.loadingAssetPath}},{Chars:this.charsAssetInfo}),Z.set("chars",t.chars);let r=new Ve(t.assets.Loading.animations["Big Map"]);r.animationSpeed=.5,this.progressText=new we("",2),this.progressText.fillColor="#ffffff",this.progressText.setText("0%"),this.contentLayout=new he(new m(0,0),new m(r.width,r.height+50)),this.contentLayout.flexDirection="column",this.contentLayout.justifyContent="center",this.contentLayout.alignItems="center",this.contentLayout.gap=0,this.contentLayout.addChild(r),this.contentLayout.addChild(this.progressText);let i=new he(new m(0,0),Z.get("viewport"));i.justifyContent="center",i.alignItems="center",i.addChild(this.contentLayout),this.addChild(i)})}loadAssets(t,r){return L(this,null,function*(){let i=new Cr;yield i.init(t,r,o=>{this.updateProgress(o.percentage)}),Z.set("assets",i.assets),Z.set("chars",i.chars)})}updateProgress(t){if(this.progressText){let r=Math.floor(t).toString()+"%";this.progressText.setText(r),this.contentLayout&&this.contentLayout.layout()}}};var Vn=class extends H{board;menuLayout;overlayDiv;constructor(e,t,r){super(e),this.overlayDiv=document.createElement("div"),this.overlayDiv.setAttribute("data-mask","true"),this.overlayDiv.style.position="absolute",this.overlayDiv.style.pointerEvents="none",this.overlayDiv.style.visibility="hidden",this.attachedDOM=this.overlayDiv;let i;if(r){let w=new we;w.setTextFromCodes([53]),i=new $e(new m(0,0),w,"secondary"),i.action=r}let o=[],s=0,a=0,l=8;for(let w of t){let I;if(w.type==="button"){let b=new we(w.label),y=new $e(new m(0,0),b,w.variant);y.action=w.action,I=y}else w.type==="text"?I=new we(w.text,0):I=w.element;o.push(I),s=Math.max(s,I.width),a+=I.height}a+=l*(o.length-1);let c=new we("Markup Mischief",1,"hero"),d=new rt(new m(0,0),{top:20},{});d.setContent(c),this.menuLayout=new he(new m(0,0),new m(s,a)),this.menuLayout.flexDirection="column",this.menuLayout.justifyContent="center",this.menuLayout.alignItems="center",this.menuLayout.gap=l;for(let w of o)this.menuLayout.addChild(w);let u=new rt(new m(0,0),{},{top:0,bottom:20});u.setContent(this.menuLayout);let f=new he(new m(0,0),new m(Math.max(d.width,u.width),d.height+u.height));f.flexDirection="column",f.alignItems="center",f.addChild(d),f.addChild(u);let p=new rt(new m(0,0),{},{top:20,right:20,bottom:20,left:20});p.setContent(f);let h=new m(p.width,p.height);this.board=new Kt(new m(0,0),h,"primary",!0),i&&this.board.addChild(i),this.board.addChild(p),this.addChild(this.board),this.overlayDiv.style.width=`${this.board.width}px`,this.overlayDiv.style.height=`${this.board.height}px`}get width(){return this.board.width}get height(){return this.board.height}};var Pr=class extends Ke{constructor(e,t){super();let r=Z.get("viewport"),i=new Vn(new m(0,0),e,t),o=new he(new m(0,0),r);o.justifyContent="center",o.alignItems="center",o.addChild(i),this.addChild(o)}};var Bn={htmlLevels:[{id:1,name:"Link It Up",html:{tags:["<a>","text","</a>"]}},{id:2,name:"Emphasis Required",html:{tags:["<em>","text","</em>"]}},{id:3,name:"Strong Foundation",html:{tags:["<strong>","text","</strong>"]}},{id:4,name:"Emphatic Links",html:{tags:["<em>","<a>","text","</a>","</em>"]}},{id:5,name:"Bold Connections",html:{tags:["<strong>","<a>","text","</a>","</strong>"]}},{id:6,name:"Strongly Emphasized",html:{tags:["<strong>","<em>","text","</em>","</strong>"]}},{id:7,name:"Double Trouble",html:{tags:["<a>","text","</a>","<em>","text","</em>"]}},{id:8,name:"Bold & Linked",html:{tags:["<strong>","text","</strong>","<a>","text","</a>"]}},{id:9,name:"Nested Navigation",html:{tags:["<em>","text","<a>","text","</a>","</em>"]}},{id:10,name:"Emphasis Sandwich",html:{tags:["<em>","text","<strong>","text","</strong>","</em>"]}},{id:11,name:"Line Break Basics",html:{tags:["text","<br/>","text"]}},{id:12,name:"Triple Line Stack",html:{tags:["text","<br/>","text","<br/>","text"]}},{id:13,name:"Link Break",html:{tags:["<a>","text","</a>","<br/>","text"]}},{id:14,name:"Emphasized Lines",html:{tags:["text","<br/>","<em>","text","</em>"]}},{id:15,name:"Strong Line Break",html:{tags:["<strong>","text","<br/>","text","</strong>"]}},{id:16,name:"Paragraph Intro",html:{tags:["text","<p>","text","</p>"]}},{id:17,name:"Paragraph Sandwich",html:{tags:["text","<p>","text","</p>","text"]}},{id:18,name:"Emphasis and Paragraph",html:{tags:["<em>","text","</em>","<p>","text","text","</p>"]}},{id:19,name:"Paragraph Powerhouse",html:{tags:["text","<p>","<strong>","text","text","text","</strong>","</p>"]}},{id:20,name:"Breaking Paragraphs",html:{tags:["text","<p>","text","<br/>","text","</p>"]}},{id:21,name:"Image Debut",html:{tags:["<img/>","<p>","text","text","</p>"]}},{id:22,name:"Picture Perfect Break",html:{tags:["<img/>","<p>","text","<br/>","text","</p>"]}},{id:23,name:"Linked Image Break",html:{tags:["<a>","text","</a>","<br/>","<img/>"]}},{id:24,name:"Clickable Image Link",html:{tags:["<a>","<img/>","<br/>","text","</a>"]}},{id:25,name:"Double Vision",html:{tags:["<img/>","text","<p>","<img/>","text","</p>"]}},{id:26,name:"Main Heading",html:{tags:["<h1>","text","</h1>","text"]}},{id:27,name:"Heading Hierarchy",html:{tags:["<h1>","text","</h1>","<h2>","text","</h2>"]}},{id:28,name:"Emphasized Heading",html:{tags:["<h1>","<em>","text","</em>","</h1>","<img/>"]}},{id:29,name:"Visual Story",html:{tags:["<h2>","text","</h2>","<img/>","<p>","text","</p>"]}},{id:30,name:"Linked Heading Strong",html:{tags:["<h2>","<a>","text","</a>","</h2>","<strong>","text","</strong>"]}},{id:31,name:"Horizontal Divide",html:{tags:["text","<hr/>","text"]}},{id:32,name:"Rule and Break",html:{tags:["text","<hr/>","text","<br/>","text"]}},{id:33,name:"Boxed Image",html:{tags:["<p>","<img/>","</p>","text","<hr/>","text"]}},{id:34,name:"Rule Sandwich",html:{tags:["<hr/>","<img/>","<hr/>","text","<p>","text","</p>"]}},{id:35,name:"Linked Picture Division",html:{tags:["text","<hr/>","<a>","<img/>","</a>","<br/>","text"]}},{id:36,name:"Button Basics",html:{tags:["<button>","text","</button>","<br/>","<img/>"]}},{id:37,name:"Strong Button",html:{tags:["<button>","<strong>","text","</strong>","</button>"]}},{id:38,name:"Button Duo",html:{tags:["<button>","text","</button>","<button>","text","<p>","text","</p>","</button>"]}},{id:39,name:"Fancy Button",html:{tags:["<button>","<img/>","<br/>","<em>","text","</em>","</button>"]}},{id:40,name:"List Inception",html:{tags:["<ul>","<li>","text","</li>","</ul>"]}},{id:41,name:"Double List Items",html:{tags:["<ul>","<li>","text","</li>","<li>","text","</li>","</ul>"]}},{id:42,name:"Ordered Start",html:{tags:["<ol>","<li>","text","</li>","</ol>"]}},{id:43,name:"Numbered Pair",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","</ol>"]}},{id:44,name:"Linked List Item",html:{tags:["<ol>","<li>","text","</li>","<li>","<a>","text","</a>","</li>","</ol>"]}},{id:45,name:"Strong List Entry",html:{tags:["<ul>","<li>","<strong>","text","</strong>","</li>","<li>","text","</li>","</ul>"]}},{id:46,name:"Triple Ordered",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","</ol>"]}},{id:47,name:"Content Explosion",html:{tags:["<img/>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","<p>","text","</p>","text"]}},{id:48,name:"Emphasized List Section",html:{tags:["<h2>","text","</h2>","<ol>","<em>","<li>","text","</li>","<li>","text","</li>","</em>","</ol>","<hr/>","text"]}},{id:49,name:"Complex Navigation",html:{tags:["<h1>","text","</h1>","<ul>","<li>","<a>","<strong>","text","</strong>","</a>","</li>","<li>","text","<em>","text","<br/>","text","</em>","text","</li>","</ul>"]}},{id:50,name:"Nested List Mastery",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","<li>","<button>","text","</button>","</li>","</ol>"]}}],cssLevels:[{id:1,name:"Green Link Styling",html:{tags:["<a>","text","</a>"]},css:{tags:["a{","color:","green;","}"]}},{id:2,name:"Red Span",html:{tags:["<span>","text","</span>"]},css:{tags:["span{","color:","red;","}"]}},{id:3,name:"Orange Highlight",html:{tags:["text","<span>","text","</span>","text"]},css:{tags:["span{","color:","orange;","}"]}},{id:4,name:"Blue Division",html:{tags:["text","<div>","text","</div>","text"]},css:{tags:["div{","color:","blue;","}"]}},{id:5,name:"Italic Block",html:{tags:["<div>","text","<br/>","text","</div>"]},css:{tags:["div{","font-style:","italic;","}"]}},{id:6,name:"Green Italic Section",html:{tags:["<div>","text","<p>","text","</p>","</div>"]},css:{tags:["div{","font-style:","italic;","color:","green;","}"]}},{id:7,name:"Big Normal Span",html:{tags:["<em>","text","<span>","text","</span>","text","</em>"]},css:{tags:["span{","font-style:","normal;","font-size:","40px;","}"]}},{id:8,name:"Tiny Blue Emphasis",html:{tags:["text","<em>","text","</em>","text"]},css:{tags:["em{","color:","blue;","font-size:","10px;","}"]}},{id:9,name:"Yellow Background",html:{tags:["<div>","text","text","</div>"]},css:{tags:["div{","background:","yellow;","font-size:","40px;","}"]}},{id:10,name:"Red Right Align",html:{tags:["<div>","text","<br/>","text","</div>"]},css:{tags:["div{","background:","red;","text-align:","right;","}"]}},{id:11,name:"Centered Transparent",html:{tags:["<div>","<img/>","<br/>","text","</div>"]},css:{tags:["div{","text-align:","center;","opacity:","0.5;","}"]}},{id:12,name:"Faded Wide Image",html:{tags:["<h2>","text","</h2>","<img/>"]},css:{tags:["img{","opacity:","0.25;","width:","100%;","}"]}},{id:13,name:"Block Image Quarter",html:{tags:["text","<img/>","text"]},css:{tags:["img{","display:","block;","width:","25%;","}"]}},{id:14,name:"Block Span Fade",html:{tags:["text","<span>","text","</span>","text"]},css:{tags:["span{","display:","block;","opacity:","0.25;","}"]}},{id:15,name:"Inline Green Div",html:{tags:["text","<div>","text","</div>","text"]},css:{tags:["div{","background:","green;","display:","inline;","}"]}},{id:16,name:"Hidden Image",html:{tags:["<h1>","text","</h1>","<img/>"]},css:{tags:["h1{","font-style:","italic;","}","img{","display:","none;","}"]}},{id:17,name:"Big Link Only",html:{tags:["<a>","text","</a>","<div>","<img/>","text","</div>"]},css:{tags:["a{","font-size:","40px;","}","div{","display:","none;","}"]}},{id:18,name:"Sized Header Right Para",html:{tags:["<h1>","text","</h1>","<p>","text","</p>"]},css:{tags:["h1{","font-size:","20px;","}","p{","text-align:","right;","}"]}},{id:19,name:"Half Button Faded Para",html:{tags:["<button>","text","</button>","<p>","text","</p>"]},css:{tags:["button{","height:","50%;","}","p{","opacity:","0.25;","}"]}},{id:20,name:"Wide Buttons Green Em",html:{tags:["<button>","text","</button>","<em>","text","</em>","<button>","text","</button>"]},css:{tags:["button{","width:","100%;","}","em{","color:","green;","}"]}},{id:21,name:"Orange Padded Center",html:{tags:["<hr/>","<div>","text","</div>","<hr/>"]},css:{tags:["div{","background:","orange;","text-align:","center;","padding:","10px;","}"]}},{id:22,name:"Black Box White Text",html:{tags:["text","<hr/>","<p>","text","</p>"]},css:{tags:["p{","background:","black;","color:","white;","padding:","20px;","}"]}},{id:23,name:"Block Italic Padded Strong",html:{tags:["<strong>","text","</strong>","<strong>","text","</strong>"]},css:{tags:["strong{","display:","block;","font-style:","italic;","padding:","40px;","}"]}},{id:24,name:"Red Margin Right Divs",html:{tags:["<div>","text","</div>","<div>","text","</div>"]},css:{tags:["div{","background:","red;","margin:","40px;","text-align:","right;","}"]}},{id:25,name:"Faded Margin Images",html:{tags:["text","<hr/>","<img/>","<img/>","<br/>","<img/>"]},css:{tags:["img{","margin:","20px;","opacity:","0.5;","width:","40px;","}"]}},{id:26,name:"Block Span Trio",html:{tags:["<span>","text","</span>","<span>","text","</span>","<span>","text","</span>"]},css:{tags:["span{","display:","block;","font-size:","10px;","margin:","40px;","}"]}},{id:27,name:"Inline Black Boxes",html:{tags:["<h2>","text","</h2>","<div>","</div>","<div>","</div>","<div>","</div>"]},css:{tags:["div{","background:","black;","display:","inline;","margin:","10px;","padding:","10px;","}"]}},{id:28,name:"Big Red Half Button",html:{tags:["<button>","text","<p>","text","</p>","</button>"]},css:{tags:["button{","color:","red;","font-size:","40px;","height:","100%;","width:","50%;","}"]}},{id:29,name:"Faded Tiny Image",html:{tags:["<img/>","<strong>","<a>","text","</a>","</strong>"]},css:{tags:["img{","opacity:","0.25;","height:","20px;","width:","100%;","}"]}},{id:30,name:"Orange Scroll Box",html:{tags:["<div>","<h2>","text","</h2>","<img/>","</div>"]},css:{tags:["div{","background:","orange;","height:","25%;","overflow:","scroll;","}"]}},{id:31,name:"Green Hidden Overflow",html:{tags:["<div>","<img/>","</div>","<button>","text","</button>"]},css:{tags:["div{","background:","green;","height:","40px;","overflow:","hidden;","}","button{","font-size:","10px;","}"]}},{id:32,name:"Black Half Box Small Images",html:{tags:["<div>","<img/>","</div>","<p>","<img/>","</p>"]},css:{tags:["div{","background:","black;","width:","50%;","height:","50%;","}","img{","width:","50%;","}"]}},{id:33,name:"Blue Padded Right Button",html:{tags:["<div>","<button>","text","text","</button>","</div>"]},css:{tags:["div{","background:","blue;","padding:","10px;","text-align:","right;","}","button{","width:","50%;","}"]}},{id:34,name:"Big Red Center Blue Em",html:{tags:["<div>","text","<br/>","text","<br/>","<em>","text","</em>","</div>"]},css:{tags:["div{","color:","red;","font-size:","40px;","text-align:","center;","}","em{","color:","blue;","}"]}},{id:35,name:"Faded Padded Right Left Header",html:{tags:["<div>","text","<h1>","text","</h1>","text","</div>"]},css:{tags:["div{","padding:","20px;","opacity:","0.5;","text-align:","right;","}","h1{","text-align:","left;","}"]}},{id:36,name:"Yellow List Faded Small Image",html:{tags:["<ul>","<li>","text","</li>","<li>","text","</li>","<li>","<img/>","</li>","</ul>"]},css:{tags:["ul{","background:","yellow;","margin:","40px;","}","img{","opacity:","0.5;","width:","25%;","}"]}},{id:37,name:"Orange Padded Red Margin List",html:{tags:["<ol>","<li>","text","</li>","<li>","text","</li>","</ol>"]},css:{tags:["ol{","background:","orange;","padding:","40px;","}","li{","margin:","20px;","background:","red;","}"]}},{id:38,name:"Green List Red Italic Nested",html:{tags:["<ol>","<li>","text","</li>","<ul>","<li>","text","</li>","</ul>","</ol>"]},css:{tags:["ol","{","color:","green;","width:","50%;","}","ul","{","color:","red;","font-style:","italic;","}"]}},{id:39,name:"Yellow Padded Orange List",html:{tags:["<div>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","</div>"]},css:{tags:["div{","background:","yellow;","padding:","20px;","}","ul{","background:","orange;","padding:","40px;","}"]}},{id:40,name:"Half Rule Inline Blue List",html:{tags:["<hr/>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","<hr/>"]},css:{tags:["hr","{","height:","10px;","width:","50%;","}","li","{","color:","blue;","display:","inline;","}"]}},{id:41,name:"Green Half Box Hidden Span",html:{tags:["<div>","<button>","text","</button>","<span>","text","</span>","</div>"]},css:{tags:["div{","background:","green;","height:","50%;","}","button{","height:","50%;","}","span{","display:","none;","}"]}},{id:42,name:"Right Para Black Button No Rule",html:{tags:["<p>","text","</p>","<button>","text","</button>","<p>","text","</p>","<hr/>"]},css:{tags:["p{","text-align:","right;","}","button{","background:","black;","color:","white;","}","hr{","display:","none;","}"]}},{id:43,name:"Center Header Black Bars Margin Image",html:{tags:["<h2>","text","text","</h2>","<div>","</div>","<img/>","<div>","</div>"]},css:{tags:["h2{","text-align:","center;","}","div{","background:","black;","height:","40px;","}","img{","margin:","10px;","}"]}},{id:44,name:"Blue Para Italic Strong Big Faded Spans",html:{tags:["<p>","<strong>","text","<span>","text","</span>","</strong>","text","<span>","text","</span>","text","</p>"]},css:{tags:["p{","color:","blue;","}","strong{","font-style:","italic;","}","span{","font-size:","40px;","opacity:","0.25;","}"]}},{id:45,name:"Red Link Scroll Images",html:{tags:["<a>","text","</a>","<div>","<img/>","<img/>","<img/>","</div>"]},css:{tags:["a{","background:","red;","}","div{","overflow:","scroll;","height:","50px;","}","img{","margin:","20px;","}"]}},{id:46,name:"Hidden Image Center Small Header",html:{tags:["<div>","<img/>","</div>","<h2>","<a>","text","</a>","</h2>"]},css:{tags:["div{","overflow:","hidden;","height:","40px;","}","img{","width:","100%;","}","h2{","font-size:","20px;","text-align:","center;","}"]}},{id:47,name:"Block Padded Links Half Rule Green Em",html:{tags:["<a>","text","</a>","<a>","text","</a>","<hr/>","<em>","text","</em>","text","<em>","text","</em>"]},css:{tags:["a{","display:","block;","padding:","20px;","}","hr{","width:","50%;","}","em{","font-style:","normal;","color:","green;","}"]}},{id:48,name:"Yellow Padded Div Inline Yellow List",html:{tags:["<div>","text","</div>","<ul>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","<li>","text","</li>","</ul>"]},css:{tags:["div{","background:","yellow;","padding:","20px;","}","ul{","width:","50%;","}","li{","background:","yellow;","display:","inline;","}"]}},{id:49,name:"Orange List Padded Button Black Italic Span",html:{tags:["<ul>","<li>","text","</li>","<li>","<button>","text","<img/>","</button>","</li>","<li>","<span>","text","</span>","</li>","</ul>"]},css:{tags:["ul{","color:","orange;","}","button{","text-align:","left;","padding:","10px;","}","span{","color:","black;","font-style:","italic;","}"]}},{id:50,name:"Black Box White List Green Nested",html:{tags:["<div>","<ol>","<li>","text","</li>","<li>","text","</li>","<ul>","<li>","text","</li>","<li>","text","</li>","</ul>","</ol>","</div>"]},css:{tags:["div{","background:","black;","height:","50%;","}","ol{","background:","white;","width:","50%;","}","ul{","background:","green;","}"]}}]};var Iw=32,HA=20,ww={platforms:[{x:5,y:14,width:10},{x:5,y:13,width:10},{x:5,y:12,width:10},{x:5,y:11,width:10},{x:5,y:10,width:10},{x:5,y:9,width:10}],gridConfig:{xMin:0,xMax:9,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}},bw={platforms:[{x:1,y:14,width:10},{x:1,y:13,width:10},{x:1,y:12,width:10},{x:1,y:11,width:10},{x:1,y:10,width:10},{x:1,y:9,width:10}],gridConfig:{xMin:0,xMax:9,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}},xw={platforms:[{x:12,y:14,width:8},{x:12,y:13,width:8},{x:12,y:12,width:10},{x:12,y:11,width:10},{x:12,y:10,width:10},{x:12,y:9,width:10}],gridConfig:{xMin:0,xMax:7,yMin:0,yMax:5,sectionWidth:32,verticalSpacing:32},playerStartGrid:{x:4,y:0}};function Ui(n,e){let{gridConfig:t,platforms:r}=e,i=n.y,o=r[i];if(!o)throw new Error(`No platform found for grid position y=${n.y} (platform index ${i})`);let s=o.x*Iw+n.x*t.sectionWidth,a=o.y*Iw-HA;return new m(s,a)}function Tf(n,e,t=[]){let r=[],i=new Set,{gridConfig:o}=e,s=o.xMax-o.xMin+1,a=o.yMax-o.yMin+1;if(n>s*a)throw new Error(`Cannot place ${n} tags in a ${s}x${a} grid (max ${s*a} positions)`);for(let l=0;l<n;l++){let c=t[l]||"",d=1;c.length>9?d=3:c.length>4&&(d=2);let u=!1,f=0,p=1e3;for(;!u&&f<p;){f++;let h=Math.floor(Math.random()*a)+o.yMin,w=Math.floor(Math.random()*s)+o.xMin,I=!0;for(let b=0;b<d;b++){let y=w+b;if(y>o.xMax){I=!1;break}let g=`${y},${h}`;if(i.has(g)){I=!1;break}}if(I){for(let b=0;b<d;b++)i.add(`${w+b},${h}`);r.push({x:w,y:h}),u=!0}}if(!u)throw new Error(`Could not place tag ${l+1} of ${n} (text: "${c}") after ${p} attempts`)}return r}var Ew={numLayers:6,layers:[[{type:"static",position:{x:0,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:0,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:0,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:0,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:512,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:0},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:32},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:64},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:736,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:704,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:160},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:128},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:96},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:192},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:224},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:512,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:640,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:672,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:608,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:544,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:512,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:512,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:448,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:416,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:384,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:352,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:320,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:288,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:256,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:224,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:192,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:160,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:128,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:96,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:64,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:32,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:32,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:64,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:96,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:128,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:160,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:288,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:256,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:192,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:224,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:352,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:320,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:416,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:384,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:448,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:480},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:480,y:480},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:544,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:576,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:608,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:672,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:512,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:480,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:448,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:416,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:384,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:352,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:320,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:288,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:256,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:224,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:192,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:160,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:128,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:96,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:32,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:64,y:384},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:3}},{type:"static",position:{x:704,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:672,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:640,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:608,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:576,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:544,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:512,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:480,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:416,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:448,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:384,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:320,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:288,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:256,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:224,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:192,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:128,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:160,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:96,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:64,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:32,y:352},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:2}},{type:"static",position:{x:480,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:480,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:448,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:416,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:384,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:352,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:256},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:64,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:96,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:128,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:160,y:288},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:192,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:224,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:256,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:288,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:320,y:320},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:1}},{type:"static",position:{x:576,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:608,y:416},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:576,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}},{type:"static",position:{x:608,y:448},texture:{asset:"Palm Tree Island",tileset:"Sky and Water",tileId:4}}],[{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:52}},{type:"static",position:{x:192,y:320},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:57}},{type:"static",position:{x:288,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:8}},{type:"static",position:{x:320,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:9}},{type:"static",position:{x:352,y:64},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:10}},{type:"animated",position:{x:0,y:448},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Big"},animationSpeed:1},{type:"animated",position:{x:480,y:448},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Big"},animationSpeed:1},{type:"animated",position:{x:0,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Medium"},animationSpeed:1},{type:"animated",position:{x:480,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Small"},animationSpeed:1},{type:"animated",position:{x:224,y:416},animation:{asset:"Palm Tree Island Water Reflect",animationName:"Small"},animationSpeed:1},{type:"static",position:{x:704,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:7}},{type:"static",position:{x:672,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:6}},{type:"static",position:{x:640,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:5}},{type:"static",position:{x:608,y:128},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:4}},{type:"static",position:{x:96,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:14}},{type:"static",position:{x:128,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:15}},{type:"static",position:{x:160,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:16}},{type:"static",position:{x:192,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:17}},{type:"static",position:{x:608,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:1}},{type:"static",position:{x:640,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:2}},{type:"static",position:{x:672,y:96},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:3}},{type:"static",position:{x:672,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:51}},{type:"static",position:{x:224,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:52}},{type:"static",position:{x:256,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:53}},{type:"static",position:{x:288,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:54}},{type:"static",position:{x:320,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:55}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:56}},{type:"static",position:{x:384,y:352},texture:{asset:"Palm Tree Island",tileset:"Clouds",tileId:57}},{type:"animated",position:{x:513,y:416},animation:{asset:"Merchant Ship",animationName:"Ship Idle"},animationSpeed:.2},{type:"animated",position:{x:523,y:395},animation:{asset:"Merchant Ship",animationName:"No Wind"},animationSpeed:.4},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:2}},{type:"animated",position:{x:512,y:32},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:1}],[{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:11}},{type:"animated",position:{x:2,y:201},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:.1},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:10}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Back",tileId:10}},{type:"animated",position:{x:577,y:416},animation:{asset:"Merchant Ship",animationName:"Idle"},animationSpeed:1},{type:"animated",position:{x:672,y:271},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.4},{type:"animated",position:{x:704,y:225},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Left"},animationSpeed:.4},{type:"animated",position:{x:0,y:416},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Back Right"},animationSpeed:.3}],[{type:"static",position:{x:0,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:128},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:96},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:32,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:26}},{type:"static",position:{x:32,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:64,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:96,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:128,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:160,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:6}},{type:"static",position:{x:160,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:24}},{type:"static",position:{x:192,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:26}},{type:"static",position:{x:192,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:5}},{type:"static",position:{x:0,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:0}},{type:"static",position:{x:736,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:736,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:704,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:672,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:672,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:704,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:13}},{type:"static",position:{x:736,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:17}},{type:"static",position:{x:736,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:128},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:96},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:736,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:6}},{type:"static",position:{x:224,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:256,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:288,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:320,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:384,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:416,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:448,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:480,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:544,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:576,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:704,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:672,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:640,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:352,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:704,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:672,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:544,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:512,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:480,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:448,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:416,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:384,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:320,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:256,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:224,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:192,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:160,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:128,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:96,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:64,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:32,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:0,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:16}},{type:"static",position:{x:0,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:0,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:14}},{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:512,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:64,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:384,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:256,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:448,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:1}},{type:"static",position:{x:320,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:128,y:448},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:2}},{type:"static",position:{x:640,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:12}},{type:"static",position:{x:640,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:1}},{type:"static",position:{x:640,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:17}},{type:"static",position:{x:576,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:608,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:288,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}},{type:"static",position:{x:512,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:19}},{type:"static",position:{x:512,y:32},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:512,y:64},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:27}},{type:"static",position:{x:608,y:0},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:25}},{type:"static",position:{x:352,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:2}}],[{type:"static",position:{x:0,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:6}},{type:"static",position:{x:32,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:7}},{type:"static",position:{x:64,y:352},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:8}},{type:"static",position:{x:32,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:9}},{type:"static",position:{x:64,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:10}},{type:"animated",position:{x:32,y:272},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.3},{type:"static",position:{x:736,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:3}},{type:"static",position:{x:704,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:2}},{type:"static",position:{x:672,y:320},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:1}},{type:"static",position:{x:672,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:3}},{type:"static",position:{x:640,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:2}},{type:"static",position:{x:608,y:448},texture:{asset:"Palm Tree Island",tileset:"Palm Trees Front",tileId:1}},{type:"animated",position:{x:608,y:398},animation:{asset:"Palm Tree Island Palm Tree",animationName:"P Front"},animationSpeed:.5}],[{type:"static",position:{x:704,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:7}},{type:"static",position:{x:672,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:6}},{type:"static",position:{x:640,y:288},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"animated",position:{x:624,y:192},animation:{asset:"Palm Tree Island Flag",animationName:"Flag"},animationSpeed:.8},{type:"static",position:{x:640,y:320},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"static",position:{x:640,y:352},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}},{type:"static",position:{x:640,y:384},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:10}}]]};var Cw={numLayers:1,layers:[[{type:"static",position:{x:160,y:320},texture:{asset:"Palm Tree Island",tileset:"Grass",tileId:0}},{type:"static",position:{x:352,y:448},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:480},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:7}},{type:"static",position:{x:352,y:416},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:384},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:352},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:320},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:288},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:256},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:224},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:192},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:15}},{type:"static",position:{x:352,y:160},texture:{asset:"Palm Tree Island",tileset:"Terrain",tileId:4}},{type:"static",position:{x:352,y:128},texture:{asset:"Palm Tree Island",tileset:"Objects",tileId:5}}]]};var Wi=[{type:"PinkStar",name:"Pink Star",createInstance:n=>new At(n,"PinkStar")},{type:"Crabby",name:"Crabby",createInstance:n=>new At(n,"Crabby")},{type:"FierceTooth",name:"Fierce Tooth",createInstance:n=>new At(n,"FierceTooth")}],Yt=class n{static instance;selectedCharacterType="PinkStar";constructor(){let e=localStorage.getItem("selectedCharacter");e&&this.isValidCharacterType(e)&&(this.selectedCharacterType=e)}static getInstance(){return n.instance||(n.instance=new n),n.instance}getSelectedCharacterType(){return this.selectedCharacterType}getSelectedCharacterDefinition(){return Wi.find(e=>e.type===this.selectedCharacterType)}setSelectedCharacterType(e){this.selectedCharacterType=e,localStorage.setItem("selectedCharacter",e)}createSelectedCharacter(e){return this.getSelectedCharacterDefinition().createInstance(e)}isValidCharacterType(e){return Wi.some(t=>t.type===e)}};var Dl=24,_s=16,Ml=class{scene;levelData;mode;htmlPlatformConfig;cssPlatformConfig;constructor(e,t,r){this.scene=e,this.levelData=t,this.mode=r,r==="html"?this.htmlPlatformConfig=ww:(this.htmlPlatformConfig=bw,this.cssPlatformConfig=xw)}build(){return this.buildBackground(),this.buildWalls(),this.buildPlatforms(),this.buildTags(),this.buildPlayers()}buildBackground(){let e=Sr.fromData(Ew);this.scene.addChild(e),this.mode==="css"&&this.scene.addChild(Sr.fromData(Cw))}buildWalls(){this.scene.addChild(qi(new m(0,0),new m(32,32*_s))),this.scene.addChild(qi(new m(32*(Dl-1),0),new m(32,32*_s))),this.scene.addChild(qi(new m(32,0),new m(32*Dl,32))),this.scene.addChild(qi(new m(32,32*(_s-1)),new m(32*Dl,32))),this.scene.addChild(qi(new m(32*(Dl-4),32*(_s-3)),new m(96,64))),this.mode==="css"&&this.scene.addChild(qi(new m(352,0),new m(32,32*(_s-1))))}buildPlatforms(){this.htmlPlatformConfig.platforms.forEach(e=>{this.scene.addChild(Dw(new m(32*e.x,32*e.y),new m(32*e.width,1)))}),this.cssPlatformConfig&&this.cssPlatformConfig.platforms.forEach(e=>{this.scene.addChild(Dw(new m(32*e.x,32*e.y),new m(32*e.width,1)))})}buildPlayers(){let t=Yt.getInstance().createSelectedCharacter(Ui(this.htmlPlatformConfig.playerStartGrid,this.htmlPlatformConfig));if(this.scene.addChild(t,700),this.scene.addChild(t.ghost,900),this.cssPlatformConfig&&this.levelData.css){let r=new Dr(Ui(this.cssPlatformConfig.playerStartGrid,this.cssPlatformConfig));return this.scene.addChild(r,700),this.scene.addChild(r.ghost,900),{player1:t,player2:r}}return{player1:t}}buildTags(){let{tags:e,positions:t}=this.generateNonWinningTagLayout(this.levelData.html.tags,this.htmlPlatformConfig);if(e.forEach((r,i)=>{this.scene.addChild(Mw(Ui(t[i],this.htmlPlatformConfig),r,"html"),800)}),this.cssPlatformConfig&&this.levelData.css){let{tags:r,positions:i}=this.generateNonWinningTagLayout(this.levelData.css.tags,this.cssPlatformConfig);r.forEach((o,s)=>{this.scene.addChild(Mw(Ui(i[s],this.cssPlatformConfig),o,"css"),800)})}}generateNonWinningTagLayout(e,t){let i=0;for(;i<100;){i++;let a=this.shuffleArray([...e]),l=Tf(a.length,t,a),d=this.getSpatialSortOrder(l,t).map(u=>a[u]);if(!this.arraysEqual(d,e))return{tags:a,positions:l}}console.warn("Could not generate non-winning layout after max attempts, using shuffled fallback");let o=this.shuffleArray([...e]),s=Tf(o.length,t,o);return{tags:o,positions:s}}getSpatialSortOrder(e,t){let i=e.map(s=>Ui(s,t));return e.map((s,a)=>a).sort((s,a)=>{let l=i[s],c=i[a];return Math.abs(l.y-c.y)<16?l.x-c.x:l.y-c.y})}shuffleArray(e){let t=[...e],r=0,i=100;do{for(let o=t.length-1;o>0;o--){let s=Math.floor(Math.random()*(o+1));[t[o],t[s]]=[t[s],t[o]]}r++}while(this.arraysEqual(t,e)&&r<i);return t}arraysEqual(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}};function qi(n,e){let t=new Pn(n);return t.addChild(new Si(n,e)),t}function Dw(n,e){let t=new Hi(n,e);return t.filterCollisionFn=({collider:r,velocity:i})=>!(r instanceof Qe&&r.isDropping||r instanceof Qe&&i.y<=0),t}function Mw(n,e,t){let r=new it(n,e,t);return r.filterCollisionFn=({collider:i,velocity:o})=>!(i instanceof Qe&&i.isDropping||i instanceof Qe&&o.y<=0),r}var Al=class{scene;levelData;rowTolerance=16;isCssMode;constructor(e,t,r){this.scene=e,this.levelData=t,this.isCssMode=r==="css"}getCurrentHtml(){let t=ne.childrenByType(it,this.scene).filter(i=>i.tagType==="html");return this.sortTags(t).map(i=>i.text).join(" ")}getCurrentCss(){let t=ne.childrenByType(it,this.scene).filter(i=>i.tagType==="css");return this.sortTags(t).map(i=>i.text).join(" ")}isCorrect(){let e=this.getCurrentHtml(),t=this.getHtmlSolution(),r=e===t;if(!this.isCssMode)return r;let i=this.getCurrentCss(),o=this.getCssSolution(),s=this.levelData.css?i===o:!0;return r&&s}sortTags(e){return[...e].sort((t,r)=>Math.abs(t.position.y-r.position.y)<this.rowTolerance?t.position.x-r.position.x:t.position.y-r.position.y)}getHtmlSolution(){return this.levelData.html.tags.join(" ")}getCssSolution(){return this.levelData.css?.tags.join(" ")||""}};var kl=class{scene;player;grabbedTag;highlightedTag;constructor(e,t){this.scene=e,this.player=t}setPlayer(e){this.releaseTag(),this.player=e}handleGrab(){if(this.grabbedTag)this.releaseTag();else{let e=this.findClosestIntersectingTag();e&&(this.grabbedTag=e)}ne.childrenByType(it,this.scene).forEach(e=>e.wakeUp())}findClosestIntersectingTag(){let e=this.player.checkAllFutureIntersections(new m(0,1),o=>o instanceof it);if(e.length===0)return;if(e.length===1)return e[0];let t=this.player.position.add(this.player.colliderOffset).add(new m(this.player.collider.dimensions.width/2,this.player.collider.dimensions.height/2)),r=e[0],i=this.getTagCenterDistance(e[0],t);for(let o=1;o<e.length;o++){let s=e[o],a=this.getTagCenterDistance(s,t);a<i&&(i=a,r=s)}return r}getTagCenterDistance(e,t){return e.position.add(new m(e.width/2,e.height/2)).sub(t).length()}update(e){this.grabbedTag&&!e&&(this.grabbedTag.position=this.player.position.add(this.player.colliderOffset).add(new m(this.player.collider.dimensions.width/2,0)).sub(new m(this.grabbedTag.width/2,0)).add(new m(this.player.pointing===0?-6:6,4))),this.player.updateGhostPosition(),this.updateGhostVisibility(),this.updateHighlight()}updateHighlight(){if(this.highlightedTag&&(this.highlightedTag.setHighlight(!1),this.highlightedTag=void 0),this.grabbedTag)return;let e=this.findClosestIntersectingTag();e&&(this.highlightedTag=e,this.highlightedTag.setHighlight(!0))}updateGhostVisibility(){let e=this.player.checkAllCurrentIntersections(t=>t instanceof it);e.length>0?(this.player.ghostGraphics.clipRegion=e.map(t=>{let r=t.collider;return{item:t,position:new m(r.position.x,r.position.y)}}),this.player.ghostGraphics.isVisible=!0):(this.player.ghostGraphics.clipRegion=void 0,this.player.ghostGraphics.isVisible=!1)}getGrabbedTag(){return this.grabbedTag}releaseTag(){this.grabbedTag=void 0}};var Ts=class extends H{characterButtons=[];layout;selectionManager;onChange;constructor(e){super(),this.onChange=e,this.selectionManager=Yt.getInstance();let t=this.selectionManager.getSelectedCharacterType();for(let s of Wi){let a=new we(s.name),l=s.type===t,c=new $e(new m(0,0),a,l?"primary":"secondary");c.action=()=>{this.selectCharacter(s.type)},this.characterButtons.push(c)}let r=this.characterButtons.reduce((s,a)=>s+a.width,0),i=8,o=r+i*(this.characterButtons.length-1);this.layout=new he(new m(0,0),new m(o,this.characterButtons[0].height)),this.layout.flexDirection="row",this.layout.justifyContent="center",this.layout.alignItems="center",this.layout.gap=i;for(let s of this.characterButtons)this.layout.addChild(s);this.addChild(this.layout)}selectCharacter(e){this.selectionManager.setSelectedCharacterType(e);let t=this.selectionManager.getSelectedCharacterType();for(let r=0;r<Wi.length;r++){let i=Wi[r],o=this.characterButtons[r],s=new we(i.name),a=i.type===t,l=new $e(new m(0,0),s,a?"primary":"secondary");l.action=()=>{this.selectCharacter(i.type)},this.layout.removeChild(o),this.layout.addChild(l),this.characterButtons[r]=l}this.onChange&&this.onChange()}get width(){return this.layout.width}get height(){return this.layout.height}};var Ds=class extends H{board;constructor(e,t){super(e);let r=new m(10,10);this.board=new Kt(new m(0,0),t.size.add(r.mul(2)),"secondary",!1,"white"),t.position=r,(this.board.paper||this.board).addChild(t),this.addChild(this.board)}get width(){return this.board.width}get height(){return this.board.height}};var Nl=class{scene;levelData;viewport;uiLayout;menuButton;levelNameText;htmlPreview;targetLayout;solutionToggleButton;solutionToggleButtonText;pauseMenu;winMenu;isPaused=!1;showSolutionToggle=!1;isCtrlPressed=!1;onExit;onWin;onCharacterChange;hasNextLevel;constructor(e,t,r,i,o=!1,s){this.scene=e,this.levelData=t,this.onExit=r,this.onWin=i,this.hasNextLevel=o,this.onCharacterChange=s,this.viewport=Z.get("viewport")}initialize(){this.createBottomRightUI(),this.createTopRightUI()}createBottomRightUI(){this.levelNameText=new we(`Level ${this.levelData.id}`,0,"hero");let e=new we("Menu");this.menuButton=new $e(new m(0,0),e),this.menuButton.action=()=>{this.showPauseMenu()},this.uiLayout=new he(new m(0,this.viewport.height-60),new m(this.viewport.width,60)),this.uiLayout.flexDirection="column",this.uiLayout.justifyContent="flex-end",this.uiLayout.alignItems="flex-end",this.uiLayout.padding={top:8,right:0,bottom:8,left:0},this.uiLayout.gap=6,this.uiLayout.addChild(this.menuButton),this.uiLayout.addChild(this.levelNameText),this.scene.addChild(this.uiLayout)}createTopRightUI(){this.htmlPreview=new ji(new m(0,0),new m(200,160),"");let e=new Ds(new m(0,0),this.htmlPreview);this.solutionToggleButtonText=new we("Show Solution"),this.solutionToggleButton=new $e(new m(0,0),this.solutionToggleButtonText,"secondary"),this.solutionToggleButton.translation=new m(-4,-24),this.solutionToggleButton.action=()=>{this.showSolutionToggle=!this.showSolutionToggle,this.solutionToggleButtonText&&this.solutionToggleButtonText.setText(this.showSolutionToggle?"Hide Solution":"Show Solution")},this.targetLayout=new he(new m(0,0),this.viewport),this.targetLayout.flexDirection="column",this.targetLayout.justifyContent="flex-start",this.targetLayout.alignItems="flex-end",this.targetLayout.padding={top:20,right:20,bottom:20,left:20},this.targetLayout.gap=4,this.targetLayout.addChild(e),this.targetLayout.addChild(this.solutionToggleButton),this.scene.addChild(this.targetLayout)}updateHtmlPreview(e,t,r,i){if(!this.htmlPreview)return;let o,s="";this.isCtrlPressed||this.showSolutionToggle?(o=t,s=i||""):(o=e,s=r||""),this.htmlPreview.setHtml(o,s)}setCtrlPressed(e){this.isCtrlPressed=e,this.solutionToggleButtonText&&(this.isCtrlPressed?this.solutionToggleButtonText.setText("Hide Solution"):this.solutionToggleButtonText.setText(this.showSolutionToggle?"Hide Solution":"Show Solution"))}showPauseMenu(){if(this.isPaused)return;this.isPaused=!0,this.menuButton&&(this.menuButton.isVisible=!1);let e=new Vn(new m(0,0),[{type:"button",label:"Continue",action:()=>{this.hidePauseMenu()}},{type:"button",label:"Exit",action:()=>{this.hidePauseMenu(),this.onExit&&this.onExit()}},{type:"custom",element:new Ts(()=>{this.onCharacterChange&&this.onCharacterChange()})}]),t=new he(new m(0,0),new m(e.width,e.height));t.flexDirection="column",t.alignItems="center",t.addChild(e);let r=new he(new m(0,0),this.viewport);r.justifyContent="center",r.alignItems="center",r.addChild(t),this.pauseMenu=r,this.scene.addChild(this.pauseMenu,1e3)}hidePauseMenu(){!this.isPaused||!this.pauseMenu||(this.isPaused=!1,this.scene.removeChild(this.pauseMenu),this.pauseMenu=void 0,this.menuButton&&(this.menuButton.isVisible=!0))}showWinMenu(){if(this.winMenu)return;this.menuButton&&(this.menuButton.isVisible=!1);let e=[];this.hasNextLevel&&this.onWin?e.push({type:"button",label:"Next level",action:()=>{this.onWin&&this.onWin()}}):this.hasNextLevel||e.push({type:"text",text:"All Levels Complete!"}),e.push({type:"button",label:"Exit",action:()=>{this.onExit&&this.onExit()},variant:this.hasNextLevel?"secondary":"primary"});let t=new Vn(new m(0,0),e),r=new he(new m(0,0),this.viewport);r.justifyContent="center",r.alignItems="center",r.addChild(t),this.winMenu=r,this.scene.addChild(this.winMenu,1e3)}isPauseMenuShown(){return this.isPaused}togglePauseMenu(){this.isPaused?this.hidePauseMenu():this.showPauseMenu()}};function Df(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(u){s(u)}}function l(d){try{c(r.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function BA(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}var Se=(()=>{class n{constructor(t,r,i){this.method=t,this.attribute=r,i!==void 0&&(Array.isArray(i)?this.values=i:this.values=[i])}toString(){return JSON.stringify({method:this.method,attribute:this.attribute,values:this.values})}}return n.equal=(e,t)=>new n("equal",e,t).toString(),n.notEqual=(e,t)=>new n("notEqual",e,t).toString(),n.lessThan=(e,t)=>new n("lessThan",e,t).toString(),n.lessThanEqual=(e,t)=>new n("lessThanEqual",e,t).toString(),n.greaterThan=(e,t)=>new n("greaterThan",e,t).toString(),n.greaterThanEqual=(e,t)=>new n("greaterThanEqual",e,t).toString(),n.isNull=e=>new n("isNull",e).toString(),n.isNotNull=e=>new n("isNotNull",e).toString(),n.between=(e,t,r)=>new n("between",e,[t,r]).toString(),n.startsWith=(e,t)=>new n("startsWith",e,t).toString(),n.endsWith=(e,t)=>new n("endsWith",e,t).toString(),n.select=e=>new n("select",void 0,e).toString(),n.search=(e,t)=>new n("search",e,t).toString(),n.orderDesc=e=>new n("orderDesc",e).toString(),n.orderAsc=e=>new n("orderAsc",e).toString(),n.orderRandom=()=>new n("orderRandom").toString(),n.cursorAfter=e=>new n("cursorAfter",void 0,e).toString(),n.cursorBefore=e=>new n("cursorBefore",void 0,e).toString(),n.limit=e=>new n("limit",void 0,e).toString(),n.offset=e=>new n("offset",void 0,e).toString(),n.contains=(e,t)=>new n("contains",e,t).toString(),n.notContains=(e,t)=>new n("notContains",e,t).toString(),n.notSearch=(e,t)=>new n("notSearch",e,t).toString(),n.notBetween=(e,t,r)=>new n("notBetween",e,[t,r]).toString(),n.notStartsWith=(e,t)=>new n("notStartsWith",e,t).toString(),n.notEndsWith=(e,t)=>new n("notEndsWith",e,t).toString(),n.createdBefore=e=>n.lessThan("$createdAt",e),n.createdAfter=e=>n.greaterThan("$createdAt",e),n.createdBetween=(e,t)=>n.between("$createdAt",e,t),n.updatedBefore=e=>n.lessThan("$updatedAt",e),n.updatedAfter=e=>n.greaterThan("$updatedAt",e),n.updatedBetween=(e,t)=>n.between("$updatedAt",e,t),n.or=e=>new n("or",void 0,e.map(t=>JSON.parse(t))).toString(),n.and=e=>new n("and",void 0,e.map(t=>JSON.parse(t))).toString(),n.distanceEqual=(e,t,r,i=!0)=>new n("distanceEqual",e,[[t,r,i]]).toString(),n.distanceNotEqual=(e,t,r,i=!0)=>new n("distanceNotEqual",e,[[t,r,i]]).toString(),n.distanceGreaterThan=(e,t,r,i=!0)=>new n("distanceGreaterThan",e,[[t,r,i]]).toString(),n.distanceLessThan=(e,t,r,i=!0)=>new n("distanceLessThan",e,[[t,r,i]]).toString(),n.intersects=(e,t)=>new n("intersects",e,[t]).toString(),n.notIntersects=(e,t)=>new n("notIntersects",e,[t]).toString(),n.crosses=(e,t)=>new n("crosses",e,[t]).toString(),n.notCrosses=(e,t)=>new n("notCrosses",e,[t]).toString(),n.overlaps=(e,t)=>new n("overlaps",e,[t]).toString(),n.notOverlaps=(e,t)=>new n("notOverlaps",e,[t]).toString(),n.touches=(e,t)=>new n("touches",e,[t]).toString(),n.notTouches=(e,t)=>new n("notTouches",e,[t]).toString(),n})(),k=class extends Error{constructor(e,t=0,r="",i=""){super(e),this.name="AppwriteException",this.message=e,this.code=t,this.type=r,this.response=i}},Nw=(()=>{class n{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:"",devkey:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"21.5.0","X-Appwrite-Response-Format":"1.8.0"},this.realtime={socket:void 0,timeout:void 0,heartbeat:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window?.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createHeartbeat:()=>{this.realtime.heartbeat&&clearTimeout(this.realtime.heartbeat),this.realtime.heartbeat=window?.setInterval(()=>{var t;(t=this.realtime.socket)===null||t===void 0||t.send(JSON.stringify({type:"ping"}))},2e4)},createSocket:()=>{var t,r,i;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(t=this.realtime.socket)===null||t===void 0||t.close();return}let o=new URLSearchParams;this.config.project&&o.set("project",this.config.project),this.realtime.channels.forEach(a=>{o.append("channels[]",a)});let s=this.config.endpointRealtime+"/realtime?"+o.toString();(s!==this.realtime.url||!this.realtime.socket||((r=this.realtime.socket)===null||r===void 0?void 0:r.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((i=this.realtime.socket)===null||i===void 0?void 0:i.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=s,this.realtime.socket=new WebSocket(s),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",a=>{this.realtime.reconnectAttempts=0,this.realtime.createHeartbeat()}),this.realtime.socket.addEventListener("close",a=>{var l,c,d;if(!this.realtime.reconnect||((c=(l=this.realtime)===null||l===void 0?void 0:l.lastMessage)===null||c===void 0?void 0:c.type)==="error"&&((d=this.realtime)===null||d===void 0?void 0:d.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}let u=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${u/1e3} seconds.`,a.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},u)}))},onMessage:t=>{var r,i;try{let o=JSON.parse(t.data);switch(this.realtime.lastMessage=o,o.type){case"connected":let s=this.config.session;if(!s){let c=JSON.parse((r=window.localStorage.getItem("cookieFallback"))!==null&&r!==void 0?r:"{}");s=c?.[`a_session_${this.config.project}`]}let a=o.data;s&&!a.user&&((i=this.realtime.socket)===null||i===void 0||i.send(JSON.stringify({type:"authentication",data:{session:s}})));break;case"event":let l=o.data;if(l?.channels){if(!l.channels.some(d=>this.realtime.channels.has(d)))return;this.realtime.subscriptions.forEach(d=>{l.channels.some(u=>d.channels.includes(u))&&setTimeout(()=>d.callback(l))})}break;case"pong":break;case"error":throw o.data;default:break}}catch(o){console.error(o)}},cleanUp:t=>{this.realtime.channels.forEach(r=>{t.includes(r)&&(Array.from(this.realtime.subscriptions).some(([o,s])=>s.channels.includes(r))||this.realtime.channels.delete(r))})}}}setEndpoint(t){if(!t.startsWith("http://")&&!t.startsWith("https://"))throw new k("Invalid endpoint URL: "+t);return this.config.endpoint=t,this.config.endpointRealtime=t.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(t){if(!t.startsWith("ws://")&&!t.startsWith("wss://"))throw new k("Invalid realtime endpoint URL: "+t);return this.config.endpointRealtime=t,this}setProject(t){return this.headers["X-Appwrite-Project"]=t,this.config.project=t,this}setJWT(t){return this.headers["X-Appwrite-JWT"]=t,this.config.jwt=t,this}setLocale(t){return this.headers["X-Appwrite-Locale"]=t,this.config.locale=t,this}setSession(t){return this.headers["X-Appwrite-Session"]=t,this.config.session=t,this}setDevKey(t){return this.headers["X-Appwrite-Dev-Key"]=t,this.config.devkey=t,this}subscribe(t,r){let i=typeof t=="string"?[t]:t;i.forEach(s=>this.realtime.channels.add(s));let o=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(o,{channels:i,callback:r}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(o),this.realtime.cleanUp(i),this.realtime.connect()}}prepareRequest(t,r,i={},o={}){if(t=t.toUpperCase(),i=Object.assign({},this.headers,i),typeof window<"u"&&window.localStorage){let a=window.localStorage.getItem("cookieFallback");a&&(i["X-Fallback-Cookies"]=a)}let s={method:t,headers:i};if(i["X-Appwrite-Dev-Key"]===void 0&&(s.credentials="include"),t==="GET")for(let[a,l]of Object.entries(n.flatten(o)))r.searchParams.append(a,l);else switch(i["content-type"]){case"application/json":s.body=JSON.stringify(o);break;case"multipart/form-data":let a=new FormData;for(let[l,c]of Object.entries(o))if(c instanceof File)a.append(l,c,c.name);else if(Array.isArray(c))for(let d of c)a.append(`${l}[]`,d);else a.append(l,c);s.body=a,delete i["content-type"];break}return{uri:r.toString(),options:s}}chunkedUpload(t,r,i={},o={},s){var a;return Df(this,void 0,void 0,function*(){let[l,c]=(a=Object.entries(o).find(([f,p])=>p instanceof File))!==null&&a!==void 0?a:[];if(!c||!l)throw new Error("File not found in payload");if(c.size<=n.CHUNK_SIZE)return yield this.call(t,r,i,o);let d=0,u=null;for(;d<c.size;){let f=d+n.CHUNK_SIZE;f>=c.size&&(f=c.size),i["content-range"]=`bytes ${d}-${f-1}/${c.size}`;let p=c.slice(d,f),h=Object.assign({},o);h[l]=new File([p],c.name),u=yield this.call(t,r,i,h),s&&typeof s=="function"&&s({$id:u.$id,progress:Math.round(f/c.size*100),sizeUploaded:f,chunksTotal:Math.ceil(c.size/n.CHUNK_SIZE),chunksUploaded:Math.ceil(f/n.CHUNK_SIZE)}),u&&u.$id&&(i["x-appwrite-id"]=u.$id),d=f}return u})}ping(){return Df(this,void 0,void 0,function*(){return this.call("GET",new URL(this.config.endpoint+"/ping"))})}call(t,r,i={},o={},s="json"){var a,l;return Df(this,void 0,void 0,function*(){let{uri:c,options:d}=this.prepareRequest(t,r,i,o),u=null,f=yield fetch(c,d);if(f.type==="opaque")throw new k(`Invalid Origin. Register your new client (${window.location.host}) as a new Web platform on your project console dashboard`,403,"forbidden","");let p=f.headers.get("x-appwrite-warning");if(p&&p.split(";").forEach(w=>console.warn("Warning: "+w)),!((a=f.headers.get("content-type"))===null||a===void 0)&&a.includes("application/json")?u=yield f.json():s==="arrayBuffer"?u=yield f.arrayBuffer():u={message:yield f.text()},400<=f.status){let w="";throw!((l=f.headers.get("content-type"))===null||l===void 0)&&l.includes("application/json")||s==="arrayBuffer"?w=JSON.stringify(u):w=u?.message,new k(u?.message,f.status,u?.type,w)}let h=f.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&h&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",h)),u})}static flatten(t,r=""){let i={};for(let[o,s]of Object.entries(t)){let a=r?r+"["+o+"]":o;Array.isArray(s)?i=Object.assign(Object.assign({},i),n.flatten(s,a)):i[a]=s}return i}}return n.CHUNK_SIZE=1024*1024*5,n})(),kw=(()=>{class n{constructor(t){this.client=t}static flatten(t,r=""){let i={};for(let[o,s]of Object.entries(t)){let a=r?r+"["+o+"]":o;Array.isArray(s)?i=Object.assign(Object.assign({},i),n.flatten(s,a)):i[a]=s}return i}}return n.CHUNK_SIZE=5*1024*1024,n})(),Pl=class{constructor(e){this.client=e}get(){let e="/account",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}create(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],password:t[1],name:t[2]};let i=r.userId,o=r.email,s=r.password,a=r.name;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "email"');if(typeof s>"u")throw new k('Missing required parameter: "password"');let l="/account",c={};typeof i<"u"&&(c.userId=i),typeof o<"u"&&(c.email=o),typeof s<"u"&&(c.password=s),typeof a<"u"&&(c.name=a);let d=new URL(this.client.config.endpoint+l),u={"content-type":"application/json"};return this.client.call("post",d,u,c)}updateEmail(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,password:t[0]};let i=r.email,o=r.password;if(typeof i>"u")throw new k('Missing required parameter: "email"');if(typeof o>"u")throw new k('Missing required parameter: "password"');let s="/account/email",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.password=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("patch",l,c,a)}listIdentities(e,...t){let r;!e||e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={queries:e,total:t[0]};let i=r.queries,o=r.total,s="/account/identities",a={};typeof i<"u"&&(a.queries=i),typeof o<"u"&&(a.total=o);let l=new URL(this.client.config.endpoint+s),c={};return this.client.call("get",l,c,a)}deleteIdentity(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={identityId:e};let r=t.identityId;if(typeof r>"u")throw new k('Missing required parameter: "identityId"');let i="/account/identities/{identityId}".replace("{identityId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createJWT(){let e="/account/jwts",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}listLogs(e,...t){let r;!e||e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={queries:e,total:t[0]};let i=r.queries,o=r.total,s="/account/logs",a={};typeof i<"u"&&(a.queries=i),typeof o<"u"&&(a.total=o);let l=new URL(this.client.config.endpoint+s),c={};return this.client.call("get",l,c,a)}updateMFA(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={mfa:e};let r=t.mfa;if(typeof r>"u")throw new k('Missing required parameter: "mfa"');let i="/account/mfa",o={};typeof r<"u"&&(o.mfa=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}createMfaAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new k('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createMFAAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new k('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateMfaAuthenticator(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?r=e||{}:r={type:e,otp:t[0]};let i=r.type,o=r.otp;if(typeof i>"u")throw new k('Missing required parameter: "type"');if(typeof o>"u")throw new k('Missing required parameter: "otp"');let s="/account/mfa/authenticators/{type}".replace("{type}",i),a={};typeof o<"u"&&(a.otp=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}updateMFAAuthenticator(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?r=e||{}:r={type:e,otp:t[0]};let i=r.type,o=r.otp;if(typeof i>"u")throw new k('Missing required parameter: "type"');if(typeof o>"u")throw new k('Missing required parameter: "otp"');let s="/account/mfa/authenticators/{type}".replace("{type}",i),a={};typeof o<"u"&&(a.otp=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}deleteMfaAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new k('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}deleteMFAAuthenticator(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?t=e||{}:t={type:e};let r=t.type;if(typeof r>"u")throw new k('Missing required parameter: "type"');let i="/account/mfa/authenticators/{type}".replace("{type}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createMfaChallenge(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?t=e||{}:t={factor:e};let r=t.factor;if(typeof r>"u")throw new k('Missing required parameter: "factor"');let i="/account/mfa/challenges",o={};typeof r<"u"&&(o.factor=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createMFAChallenge(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?t=e||{}:t={factor:e};let r=t.factor;if(typeof r>"u")throw new k('Missing required parameter: "factor"');let i="/account/mfa/challenges",o={};typeof r<"u"&&(o.factor=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateMfaChallenge(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={challengeId:e,otp:t[0]};let i=r.challengeId,o=r.otp;if(typeof i>"u")throw new k('Missing required parameter: "challengeId"');if(typeof o>"u")throw new k('Missing required parameter: "otp"');let s="/account/mfa/challenges",a={};typeof i<"u"&&(a.challengeId=i),typeof o<"u"&&(a.otp=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}updateMFAChallenge(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={challengeId:e,otp:t[0]};let i=r.challengeId,o=r.otp;if(typeof i>"u")throw new k('Missing required parameter: "challengeId"');if(typeof o>"u")throw new k('Missing required parameter: "otp"');let s="/account/mfa/challenges",a={};typeof i<"u"&&(a.challengeId=i),typeof o<"u"&&(a.otp=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}listMfaFactors(){let e="/account/mfa/factors",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}listMFAFactors(){let e="/account/mfa/factors",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}getMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}getMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}createMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}createMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updateMfaRecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}updateMFARecoveryCodes(){let e="/account/mfa/recovery-codes",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}updateName(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={name:e};let r=t.name;if(typeof r>"u")throw new k('Missing required parameter: "name"');let i="/account/name",o={};typeof r<"u"&&(o.name=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}updatePassword(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={password:e,oldPassword:t[0]};let i=r.password,o=r.oldPassword;if(typeof i>"u")throw new k('Missing required parameter: "password"');let s="/account/password",a={};typeof i<"u"&&(a.password=i),typeof o<"u"&&(a.oldPassword=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("patch",l,c,a)}updatePhone(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={phone:e,password:t[0]};let i=r.phone,o=r.password;if(typeof i>"u")throw new k('Missing required parameter: "phone"');if(typeof o>"u")throw new k('Missing required parameter: "password"');let s="/account/phone",a={};typeof i<"u"&&(a.phone=i),typeof o<"u"&&(a.password=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("patch",l,c,a)}getPrefs(){let e="/account/prefs",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}updatePrefs(e){let t;e&&typeof e=="object"&&!Array.isArray(e)&&"prefs"in e?t=e||{}:t={prefs:e};let r=t.prefs;if(typeof r>"u")throw new k('Missing required parameter: "prefs"');let i="/account/prefs",o={};typeof r<"u"&&(o.prefs=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}createRecovery(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,url:t[0]};let i=r.email,o=r.url;if(typeof i>"u")throw new k('Missing required parameter: "email"');if(typeof o>"u")throw new k('Missing required parameter: "url"');let s="/account/recovery",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.url=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("post",l,c,a)}updateRecovery(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0],password:t[1]};let i=r.userId,o=r.secret,s=r.password;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');if(typeof s>"u")throw new k('Missing required parameter: "password"');let a="/account/recovery",l={};typeof i<"u"&&(l.userId=i),typeof o<"u"&&(l.secret=o),typeof s<"u"&&(l.password=s);let c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,l)}listSessions(){let e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={};return this.client.call("get",r,i,t)}deleteSessions(){let e="/account/sessions",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("delete",r,i,t)}createAnonymousSession(){let e="/account/sessions/anonymous",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}createEmailPasswordSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={email:e,password:t[0]};let i=r.email,o=r.password;if(typeof i>"u")throw new k('Missing required parameter: "email"');if(typeof o>"u")throw new k('Missing required parameter: "password"');let s="/account/sessions/email",a={};typeof i<"u"&&(a.email=i),typeof o<"u"&&(a.password=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("post",l,c,a)}updateMagicURLSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/sessions/magic-url",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}createOAuth2Session(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?r=e||{}:r={provider:e,success:t[0],failure:t[1],scopes:t[2]};let i=r.provider,o=r.success,s=r.failure,a=r.scopes;if(typeof i>"u")throw new k('Missing required parameter: "provider"');let l="/account/sessions/oauth2/{provider}".replace("{provider}",i),c={};typeof o<"u"&&(c.success=o),typeof s<"u"&&(c.failure=s),typeof a<"u"&&(c.scopes=a);let d=new URL(this.client.config.endpoint+l);c.project=this.client.config.project;for(let[u,f]of Object.entries(kw.flatten(c)))d.searchParams.append(u,f);if(typeof window<"u"&&window?.location){window.location.href=d.toString();return}else return d.toString()}updatePhoneSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/sessions/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}createSession(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/sessions/token",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("post",l,c,a)}getSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new k('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}updateSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new k('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("patch",s,a,o)}deleteSession(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={sessionId:e};let r=t.sessionId;if(typeof r>"u")throw new k('Missing required parameter: "sessionId"');let i="/account/sessions/{sessionId}".replace("{sessionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}updateStatus(){let e="/account/status",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("patch",r,i,t)}createPushTarget(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={targetId:e,identifier:t[0],providerId:t[1]};let i=r.targetId,o=r.identifier,s=r.providerId;if(typeof i>"u")throw new k('Missing required parameter: "targetId"');if(typeof o>"u")throw new k('Missing required parameter: "identifier"');let a="/account/targets/push",l={};typeof i<"u"&&(l.targetId=i),typeof o<"u"&&(l.identifier=o),typeof s<"u"&&(l.providerId=s);let c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,l)}updatePushTarget(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={targetId:e,identifier:t[0]};let i=r.targetId,o=r.identifier;if(typeof i>"u")throw new k('Missing required parameter: "targetId"');if(typeof o>"u")throw new k('Missing required parameter: "identifier"');let s="/account/targets/{targetId}/push".replace("{targetId}",i),a={};typeof o<"u"&&(a.identifier=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}deletePushTarget(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={targetId:e};let r=t.targetId;if(typeof r>"u")throw new k('Missing required parameter: "targetId"');let i="/account/targets/{targetId}/push".replace("{targetId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createEmailToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],phrase:t[1]};let i=r.userId,o=r.email,s=r.phrase;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "email"');let a="/account/tokens/email",l={};typeof i<"u"&&(l.userId=i),typeof o<"u"&&(l.email=o),typeof s<"u"&&(l.phrase=s);let c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,l)}createMagicURLToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,email:t[0],url:t[1],phrase:t[2]};let i=r.userId,o=r.email,s=r.url,a=r.phrase;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "email"');let l="/account/tokens/magic-url",c={};typeof i<"u"&&(c.userId=i),typeof o<"u"&&(c.email=o),typeof s<"u"&&(c.url=s),typeof a<"u"&&(c.phrase=a);let d=new URL(this.client.config.endpoint+l),u={"content-type":"application/json"};return this.client.call("post",d,u,c)}createOAuth2Token(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?r=e||{}:r={provider:e,success:t[0],failure:t[1],scopes:t[2]};let i=r.provider,o=r.success,s=r.failure,a=r.scopes;if(typeof i>"u")throw new k('Missing required parameter: "provider"');let l="/account/tokens/oauth2/{provider}".replace("{provider}",i),c={};typeof o<"u"&&(c.success=o),typeof s<"u"&&(c.failure=s),typeof a<"u"&&(c.scopes=a);let d=new URL(this.client.config.endpoint+l);c.project=this.client.config.project;for(let[u,f]of Object.entries(kw.flatten(c)))d.searchParams.append(u,f);if(typeof window<"u"&&window?.location){window.location.href=d.toString();return}else return d.toString()}createPhoneToken(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,phone:t[0]};let i=r.userId,o=r.phone;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "phone"');let s="/account/tokens/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.phone=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("post",l,c,a)}createEmailVerification(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={url:e};let r=t.url;if(typeof r>"u")throw new k('Missing required parameter: "url"');let i="/account/verifications/email",o={};typeof r<"u"&&(o.url=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}createVerification(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={url:e};let r=t.url;if(typeof r>"u")throw new k('Missing required parameter: "url"');let i="/account/verifications/email",o={};typeof r<"u"&&(o.url=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}updateEmailVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/verifications/email",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}updateVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/verifications/email",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}createPhoneVerification(){let e="/account/verifications/phone",t={},r=new URL(this.client.config.endpoint+e),i={"content-type":"application/json"};return this.client.call("post",r,i,t)}updatePhoneVerification(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={userId:e,secret:t[0]};let i=r.userId,o=r.secret;if(typeof i>"u")throw new k('Missing required parameter: "userId"');if(typeof o>"u")throw new k('Missing required parameter: "secret"');let s="/account/verifications/phone",a={};typeof i<"u"&&(a.userId=i),typeof o<"u"&&(a.secret=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("put",l,c,a)}};var Rl=class{constructor(e){this.client=e}listTransactions(e){let t;!e||e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={queries:e};let r=t.queries,i="/databases/transactions",o={};typeof r<"u"&&(o.queries=r);let s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}createTransaction(e){let t;!e||e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={ttl:e};let r=t.ttl,i="/databases/transactions",o={};typeof r<"u"&&(o.ttl=r);let s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("post",s,a,o)}getTransaction(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={transactionId:e};let r=t.transactionId;if(typeof r>"u")throw new k('Missing required parameter: "transactionId"');let i="/databases/transactions/{transactionId}".replace("{transactionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={};return this.client.call("get",s,a,o)}updateTransaction(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={transactionId:e,commit:t[0],rollback:t[1]};let i=r.transactionId,o=r.commit,s=r.rollback;if(typeof i>"u")throw new k('Missing required parameter: "transactionId"');let a="/databases/transactions/{transactionId}".replace("{transactionId}",i),l={};typeof o<"u"&&(l.commit=o),typeof s<"u"&&(l.rollback=s);let c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("patch",c,d,l)}deleteTransaction(e){let t;e&&typeof e=="object"&&!Array.isArray(e)?t=e||{}:t={transactionId:e};let r=t.transactionId;if(typeof r>"u")throw new k('Missing required parameter: "transactionId"');let i="/databases/transactions/{transactionId}".replace("{transactionId}",r),o={},s=new URL(this.client.config.endpoint+i),a={"content-type":"application/json"};return this.client.call("delete",s,a,o)}createOperations(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={transactionId:e,operations:t[0]};let i=r.transactionId,o=r.operations;if(typeof i>"u")throw new k('Missing required parameter: "transactionId"');let s="/databases/transactions/{transactionId}/operations".replace("{transactionId}",i),a={};typeof o<"u"&&(a.operations=o);let l=new URL(this.client.config.endpoint+s),c={"content-type":"application/json"};return this.client.call("post",l,c,a)}listDocuments(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],queries:t[1],transactionId:t[2],total:t[3]};let i=r.databaseId,o=r.collectionId,s=r.queries,a=r.transactionId,l=r.total;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');let c="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",i).replace("{collectionId}",o),d={};typeof s<"u"&&(d.queries=s),typeof a<"u"&&(d.transactionId=a),typeof l<"u"&&(d.total=l);let u=new URL(this.client.config.endpoint+c),f={};return this.client.call("get",u,f,d)}createDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,l=r.permissions,c=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');if(typeof a>"u")throw new k('Missing required parameter: "data"');let d="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",i).replace("{collectionId}",o),u={};typeof s<"u"&&(u.documentId=s),typeof a<"u"&&(u.data=a),typeof l<"u"&&(u.permissions=l),typeof c<"u"&&(u.transactionId=c);let f=new URL(this.client.config.endpoint+d),p={"content-type":"application/json"};return this.client.call("post",f,p,u)}getDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],queries:t[2],transactionId:t[3]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.queries,l=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');let c="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),d={};typeof a<"u"&&(d.queries=a),typeof l<"u"&&(d.transactionId=l);let u=new URL(this.client.config.endpoint+c),f={};return this.client.call("get",u,f,d)}upsertDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,l=r.permissions,c=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');if(typeof a>"u")throw new k('Missing required parameter: "data"');let d="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),u={};typeof a<"u"&&(u.data=a),typeof l<"u"&&(u.permissions=l),typeof c<"u"&&(u.transactionId=c);let f=new URL(this.client.config.endpoint+d),p={"content-type":"application/json"};return this.client.call("put",f,p,u)}updateDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],data:t[2],permissions:t[3],transactionId:t[4]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.data,l=r.permissions,c=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');let d="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),u={};typeof a<"u"&&(u.data=a),typeof l<"u"&&(u.permissions=l),typeof c<"u"&&(u.transactionId=c);let f=new URL(this.client.config.endpoint+d),p={"content-type":"application/json"};return this.client.call("patch",f,p,u)}deleteDocument(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],transactionId:t[2]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');let l="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s),c={};typeof a<"u"&&(c.transactionId=a);let d=new URL(this.client.config.endpoint+l),u={"content-type":"application/json"};return this.client.call("delete",d,u,c)}decrementDocumentAttribute(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],attribute:t[2],value:t[3],min:t[4],transactionId:t[5]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.attribute,l=r.value,c=r.min,d=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');if(typeof a>"u")throw new k('Missing required parameter: "attribute"');let u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/decrement".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s).replace("{attribute}",a),f={};typeof l<"u"&&(f.value=l),typeof c<"u"&&(f.min=c),typeof d<"u"&&(f.transactionId=d);let p=new URL(this.client.config.endpoint+u),h={"content-type":"application/json"};return this.client.call("patch",p,h,f)}incrementDocumentAttribute(e,...t){let r;e&&typeof e=="object"&&!Array.isArray(e)?r=e||{}:r={databaseId:e,collectionId:t[0],documentId:t[1],attribute:t[2],value:t[3],max:t[4],transactionId:t[5]};let i=r.databaseId,o=r.collectionId,s=r.documentId,a=r.attribute,l=r.value,c=r.max,d=r.transactionId;if(typeof i>"u")throw new k('Missing required parameter: "databaseId"');if(typeof o>"u")throw new k('Missing required parameter: "collectionId"');if(typeof s>"u")throw new k('Missing required parameter: "documentId"');if(typeof a>"u")throw new k('Missing required parameter: "attribute"');let u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/increment".replace("{databaseId}",i).replace("{collectionId}",o).replace("{documentId}",s).replace("{attribute}",a),f={};typeof l<"u"&&(f.value=l),typeof c<"u"&&(f.max=c),typeof d<"u"&&(f.transactionId=d);let p=new URL(this.client.config.endpoint+u),h={"content-type":"application/json"};return this.client.call("patch",p,h,f)}};var Pw,Rw,Rr=class n{static custom(e){return e}static unique(e=7){let t=BA(n,Pw,"m",Rw).call(n),r="";for(let i=0;i<e;i++){let o=Math.floor(Math.random()*16).toString(16);r+=o}return t+r}};Pw=Rr,Rw=function(){let e=new Date,t=Math.floor(e.getTime()/1e3),r=e.getMilliseconds();return t.toString(16)+r.toString(16).padStart(5,"0")};var Fn={endpoint:"https://fra.cloud.appwrite.io/v1",projectId:"695e1e98002f12cc47e7",databaseId:"695e1f3c003a73300d66",collections:{levelProgression:"level_progression",settings:"settings"}},Ll=class n{static instance;client;accountService;databasesService;constructor(){this.client=new Nw,this.client.setEndpoint(Fn.endpoint).setProject(Fn.projectId),this.accountService=new Pl(this.client),this.databasesService=new Rl(this.client)}static getInstance(){return n.instance||(n.instance=new n),n.instance}get account(){return this.accountService}get databases(){return this.databasesService}get rawClient(){return this.client}};var Lw=()=>Ll.getInstance().account,Ol=()=>Ll.getInstance().databases;var Mf=class n{static instance;account=Lw();constructor(){}static getInstance(){return n.instance||(n.instance=new n),n.instance}register(e,t,r){return L(this,null,function*(){try{yield this.account.create({userId:Rr.unique(),email:e,password:t,name:r});let i=yield this.login(e,t);return{success:!0,user:i.user,session:i.session}}catch(i){return console.error("Registration error:",i),{success:!1,error:this.parseError(i)}}})}login(e,t){return L(this,null,function*(){try{let r=yield this.account.createEmailPasswordSession({email:e,password:t});return{success:!0,user:yield this.account.get(),session:r}}catch(r){return console.error("Login error:",r),{success:!1,error:this.parseError(r)}}})}logout(){return L(this,null,function*(){try{return yield this.account.deleteSession({sessionId:"current"}),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:this.parseError(e)}}})}checkSession(){return L(this,null,function*(){try{let e=yield this.account.get(),t=yield this.account.getSession({sessionId:"current"});return{isAuthenticated:!0,user:e,session:t}}catch(e){return console.error(e),{isAuthenticated:!1}}})}getCurrentUser(){return L(this,null,function*(){try{return yield this.account.get()}catch(e){return console.error(e),null}})}parseError(e){if(e instanceof k)switch(e.code){case 400:case 401:return"Invalid email or password";case 409:return"An account with this email already exists";case 429:return"Too many requests. Please try again later";default:return e.message||"An error occurred during authentication"}return e instanceof Error?e.message:"An unexpected error occurred"}},Ms=Mf.getInstance();var Af=class extends oe{constructor(t,r){super();this.isAuthenticated=t;this.user=r}},kf=class n extends Ne{static instance;_isAuthenticated=!1;_currentUser=null;_isInitialized=!1;constructor(){super()}static getInstance(){return n.instance||(n.instance=new n),n.instance}initialize(){return L(this,null,function*(){if(this._isInitialized)return;let e=yield Ms.checkSession();this.updateAuthState(e.isAuthenticated,e.user||null),this._isInitialized=!0})}login(e,t){return L(this,null,function*(){let r=yield Ms.login(e,t);return r.success&&r.user?(this.updateAuthState(!0,r.user),{success:!0}):{success:!1,error:r.error}})}register(e,t,r){return L(this,null,function*(){let i=yield Ms.register(e,t,r);return i.success&&i.user?(this.updateAuthState(!0,i.user),{success:!0}):{success:!1,error:i.error}})}logout(){return L(this,null,function*(){yield Ms.logout(),this.updateAuthState(!1,null)})}get isAuthenticated(){return this._isAuthenticated}get currentUser(){return this._currentUser}get userEmail(){return this._currentUser?.email||null}get isInitialized(){return this._isInitialized}updateAuthState(e,t){let r=this._isAuthenticated!==e||this._currentUser?.$id!==t?.$id;this._isAuthenticated=e,this._currentUser=t,r&&this.handleEvent(new Af(e,t))}},ye=kf.getInstance();var Nf=class n{static instance;databases=Ol();databaseId=Fn.databaseId;collectionId=Fn.collections.levelProgression;constructor(){}static getInstance(){return n.instance||(n.instance=new n),n.instance}createLevelRecord(e){return L(this,null,function*(){try{return yield this.databases.createDocument({databaseId:this.databaseId,collectionId:this.collectionId,documentId:Rr.unique(),data:e})}catch(t){throw console.error("Failed to create level record:",t),t}})}getHighestLevelForMode(e,t){return L(this,null,function*(){try{let r=yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.equal("userEmail",e),Se.equal("mode",t),Se.equal("isLatestRun",!0),Se.orderDesc("level"),Se.limit(1)]});return r.documents.length>0?r.documents[0].level:0}catch(r){return console.error("Failed to get highest level:",r),0}})}getLevelRecordsForMode(e,t){return L(this,null,function*(){try{return(yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.equal("userEmail",e),Se.equal("mode",t),Se.equal("isLatestRun",!0),Se.orderAsc("level")]})).documents}catch(r){return console.error("Failed to get level records:",r),[]}})}hasCompletedLevel(e,t,r){return L(this,null,function*(){try{return(yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.equal("userEmail",e),Se.equal("mode",t),Se.equal("level",r),Se.equal("isLatestRun",!0),Se.limit(1)]})).documents.length>0}catch(i){return console.error("Failed to check level completion:",i),!1}})}markAllRecordsAsOld(e,t){return L(this,null,function*(){try{let i=(yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.equal("userEmail",e),Se.equal("mode",t),Se.equal("isLatestRun",!0)]})).documents.map(o=>this.databases.updateDocument({databaseId:this.databaseId,collectionId:this.collectionId,documentId:o.$id,data:{isLatestRun:!1}}));yield Promise.all(i)}catch(r){throw console.error("Failed to mark records as old:",r),r}})}},Lr=Nf.getInstance();var FA={REGISTRATION_ENABLED:"registrationEnabled"},Pf=class n{static instance;databases=Ol();databaseId=Fn.databaseId;collectionId=Fn.collections.settings;cache=new Map;isInitialized=!1;constructor(){}static getInstance(){return n.instance||(n.instance=new n),n.instance}initialize(){return L(this,null,function*(){if(!this.isInitialized)try{let e=yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.limit(100)]});e.documents.forEach(t=>{this.cache.set(t.name,t.value)}),this.isInitialized=!0,console.log(`Settings loaded: ${e.documents.length} settings cached`)}catch(e){console.error("Failed to initialize settings:",e)}})}getSetting(e){return L(this,null,function*(){return this.isInitialized||(yield this.initialize()),this.cache.has(e)&&this.cache.get(e)||null})}getBooleanSetting(e,t=!1){return L(this,null,function*(){let r=yield this.getSetting(e);if(r===null)return t;let i=r.toLowerCase().trim();return i==="true"||i==="1"||i==="yes"})}isRegistrationEnabled(){return L(this,null,function*(){return this.getBooleanSetting(FA.REGISTRATION_ENABLED,!1)})}refreshSetting(e){return L(this,null,function*(){try{let t=yield this.databases.listDocuments({databaseId:this.databaseId,collectionId:this.collectionId,queries:[Se.equal("name",e),Se.limit(1)]});t.documents.length>0?this.cache.set(e,t.documents[0].value):this.cache.delete(e)}catch(t){console.error(`Failed to refresh setting ${e}:`,t)}})}refreshAll(){return L(this,null,function*(){this.cache.clear(),this.isInitialized=!1,yield this.initialize()})}clearCache(){this.cache.clear(),this.isInitialized=!1}},jl=Pf.getInstance();var Un=class n{static instance;data;currentMode="html";currentLevelStartTime=null;constructor(){this.data={html:{currentLevel:1},css:{currentLevel:1}}}static getInstance(){return n.instance||(n.instance=new n),n.instance}initialize(){return L(this,null,function*(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot initialize progression: user not authenticated");return}try{let e=yield Lr.getHighestLevelForMode(ye.userEmail,"html"),t=yield Lr.getHighestLevelForMode(ye.userEmail,"css");this.data={html:{currentLevel:e+1},css:{currentLevel:t+1}}}catch(e){console.error("Failed to initialize progression data:",e)}})}setMode(e){this.currentMode=e}getMode(){return this.currentMode}getCurrentLevel(){return this.data[this.currentMode].currentLevel}getCurrentLevelForMode(e){return this.data[e].currentLevel}hasSavedProgress(){return this.data[this.currentMode].currentLevel>1}hasSavedProgressForMode(e){return this.data[e].currentLevel>1}startLevel(){this.currentLevelStartTime=new Date}advanceToNextLevel(){return L(this,null,function*(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot advance level: user not authenticated");return}let e=this.data[this.currentMode].currentLevel,t=new Date,r=this.currentLevelStartTime||t;try{yield Lr.createLevelRecord({mode:this.currentMode,level:e,startTime:r.toISOString(),finishTime:t.toISOString(),userEmail:ye.userEmail,isLatestRun:!0}),this.data[this.currentMode].currentLevel++,this.currentLevelStartTime=null}catch(i){console.error("Failed to advance level:",i)}})}resetProgress(){return L(this,null,function*(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot reset progress: user not authenticated");return}try{yield Lr.markAllRecordsAsOld(ye.userEmail,this.currentMode),this.data[this.currentMode]={currentLevel:1},this.currentLevelStartTime=null}catch(e){console.error("Failed to reset progress:",e)}})}resetProgressForMode(e){return L(this,null,function*(){if(!ye.isAuthenticated||!ye.userEmail){console.warn("Cannot reset progress: user not authenticated");return}try{yield Lr.markAllRecordsAsOld(ye.userEmail,e),this.data[e]={currentLevel:1},e===this.currentMode&&(this.currentLevelStartTime=null)}catch(t){console.error("Failed to reset progress:",t)}})}setCurrentLevel(e){if(e<1)throw new Error("Level must be at least 1");this.data[this.currentMode].currentLevel=e}};var Gi=class extends Ke{currentLevel;mode;onExit;onWin;hasNextLevel;hasWon=!1;player1;player2;activePlayer;uiManager;winChecker;tagInteraction;constructor(e,t=1,r,i,o=!1){super(),this.mode=e;let s=Bn,l=(e==="html"?s.htmlLevels:s.cssLevels).find(c=>c.id===t);if(!l)throw new Error(`Level with id ${t} not found`);this.currentLevel=l,this.onExit=r,this.onWin=i,this.hasNextLevel=o,this.run()}run(){return L(this,null,function*(){let t=new Ml(this,this.currentLevel,this.mode).build();this.player1=t.player1,this.player2=t.player2,this.activePlayer=this.player1,this.player2&&(this.player2.enabled=!1),this.uiManager=new Nl(this,this.currentLevel,this.onExit,this.onWin,this.hasNextLevel,()=>this.changePlayer1Character()),this.uiManager.initialize(),this.tagInteraction=new kl(this,this.activePlayer),this.winChecker=new Al(this,this.currentLevel,this.mode),this.setupEventHandlers(),Un.getInstance().startLevel()})}setupEventHandlers(){this.on(ge,this.handleKeyboardInput.bind(this)),this.on(Tr,()=>{this.tagInteraction?.handleGrab()}),this.on(ht,()=>{if(this.winChecker&&(this.tagInteraction?.update(this.hasWon),!this.hasWon)){let e=this.winChecker.getCurrentHtml(),t=this.winChecker.getCurrentCss();this.uiManager?.updateHtmlPreview(e,this.winChecker.getHtmlSolution(),t,this.winChecker.getCssSolution()),!(this.tagInteraction?.getGrabbedTag()!==void 0)&&this.winChecker.isCorrect()&&(this.hasWon=!0,Un.getInstance().advanceToNextLevel().catch(o=>{console.error("Failed to advance level:",o)}),this.uiManager?.showWinMenu())}})}handleKeyboardInput(e){e instanceof ge&&(e.key==="Control"&&this.uiManager?.setCtrlPressed(e.action===0),e.action===0&&e.key==="Escape"&&this.uiManager?.togglePauseMenu(),e.action===0&&e.key==="Shift"&&this.player2&&this.switchActivePlayer())}switchActivePlayer(){!this.player1||!this.player2||(this.activePlayer===this.player1?(this.player1.enabled=!1,this.player2.enabled=!0,this.activePlayer=this.player2):(this.player2.enabled=!1,this.player1.enabled=!0,this.activePlayer=this.player1),this.activePlayer.showExclamation(),this.tagInteraction&&this.tagInteraction.setPlayer(this.activePlayer))}changePlayer1Character(){if(!this.player1||!(this.player1 instanceof At))return;let t=Yt.getInstance().getSelectedCharacterType();this.player1.setCharacterType(t)}};var zi=class extends Ke{formLayout;isLoading=!1;constructor(e){super();let t=Z.get("viewport");this.formLayout=new Hn(new m(0,0),{title:"Login",inputs:[{key:"email",placeholder:"Email",type:"email",width:200,name:"email",autocomplete:"username"},{key:"password",placeholder:"Password",type:"password",width:200,name:"password",autocomplete:"current-password"}],mainAction:{label:"Login",onAction:i=>this.handleLogin(i,e.onLoginSuccess)},secondaryActions:[{label:"Register",onAction:e.onRegisterRequest}],backAction:e.onBack});let r=new he(new m(0,0),t);r.justifyContent="center",r.alignItems="center",r.addChild(this.formLayout),this.addChild(r),this.setupKeyboardShortcuts()}setupKeyboardShortcuts(){}handleLogin(e,t){return L(this,null,function*(){if(this.isLoading)return;let r=e.email.trim(),i=e.password;if(!r||!i){this.showError("Enter email and password");return}if(!this.isValidEmail(r)){this.showError("Invalid email address");return}this.isLoading=!0,this.hideError(),this.setButtonsEnabled(!1);try{let o=yield ye.login(r,i);o.success?(this.formLayout.clearInputs(),t()):this.formLayout.showError(o.error||"Login failed")}catch(o){console.error("Login error:",o),this.formLayout.showError("Unexpected error occurred")}finally{this.isLoading=!1,this.formLayout.setButtonsEnabled(!0)}})}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}showError(e){this.formLayout.showError(e)}hideError(){this.formLayout.hideError()}setButtonsEnabled(e){this.formLayout.setButtonsEnabled(e)}};var Zi=class extends Ke{formLayout;isLoading=!1;constructor(e){super();let t=Z.get("viewport");this.formLayout=new Hn(new m(0,0),{title:"Register",inputs:[{key:"email",placeholder:"Email",type:"email",width:200,name:"email",autocomplete:"username"},{key:"password",placeholder:"Password",type:"password",width:200,name:"password",autocomplete:"new-password"},{key:"confirmPassword",placeholder:"Confirm Password",type:"password",width:200,name:"confirmPassword",autocomplete:"new-password"}],mainAction:{label:"Register",onAction:i=>this.handleRegister(i,e.onRegisterSuccess)},secondaryActions:[{label:"Login",onAction:e.onLoginRequest}],backAction:e.onBack});let r=new he(new m(0,0),t);r.justifyContent="center",r.alignItems="center",r.addChild(this.formLayout),this.addChild(r),this.setupKeyboardShortcuts()}setupKeyboardShortcuts(){}handleRegister(e,t){return L(this,null,function*(){if(this.isLoading)return;let r=e.email.trim(),i=e.password,o=e.confirmPassword;if(!r||!i||!o){this.showError("All fields are required");return}if(!this.isValidEmail(r)){this.showError("Invalid email address");return}if(i.length<8){this.showError("Password must be at least 8 characters");return}if(i!==o){this.showError("Passwords do not match");return}this.isLoading=!0,this.hideError(),this.setButtonsEnabled(!1);try{let s=yield ye.register(r,i);s.success?(this.formLayout.clearInputs(),t()):this.formLayout.showError(s.error||"Registration failed")}catch(s){console.error("Registration error:",s),this.formLayout.showError("Unexpected error occurred")}finally{this.isLoading=!1,this.formLayout.setButtonsEnabled(!0)}})}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}showError(e){this.formLayout.showError(e)}hideError(){this.formLayout.hideError()}setButtonsEnabled(e){this.formLayout.setButtonsEnabled(e)}};var As={dynamic:{"Captain Clown Nose":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Captain Clown Nose.aseprite"},"Captain Clown Nose Dialogue":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Dialogue.aseprite"},"Captain Clown Nose Dust Particles":{path:"./sprites/Treasure Hunters/Captain Clown Nose/Aseprite/Dust Particles.aseprite"},"Merchant Ship":{path:"./sprites/Treasure Hunters/Merchant Ship/Aseprite/Merchant Ship.aseprite"},"Palm Tree Island":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Palm Tree Island (ArtBoard).aseprite"},"Palm Tree Island Chest":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Chest.aseprite"},"Palm Tree Island Flag":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Flag.aseprite"},"Palm Tree Island Palm Tree":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Palm Tree.aseprite"},"Palm Tree Island Ship Helm":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Ship Helm.aseprite"},"Palm Tree Island Water Reflect":{path:"./sprites/Treasure Hunters/Palm Tree Island/Aseprite/Water Reflect.aseprite"},"Pirate Ship":{path:"./sprites/Treasure Hunters/Pirate Ship/Aseprite/TileSets.aseprite"},"Pirate Ship Decorations":{path:"./sprites/Treasure Hunters/Pirate Ship/Aseprite/Decorations.aseprite"},"Pirate Treasure":{path:"./sprites/Treasure Hunters/Pirate Treasure/Aseprite/Pirate Treasure.aseprite"},"Shooter Traps":{path:"./sprites/Treasure Hunters/Shooter Traps/Aseprite/Shooter Traps.aseprite"},"The Crusty Crew Crabby":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Crabby.aseprite"},"The Crusty Crew Dialogue":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Dialogue.aseprite"},"The Crusty Crew Dust Particles":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Dust Particles.aseprite"},"The Crusty Crew Fierce Tooth":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Fierce Tooth.aseprite"},"The Crusty Crew Pink Star":{path:"./sprites/Treasure Hunters/The Crusty Crew/Aseprite/Pink Star.aseprite"},"Wood and Paper UI":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper.aseprite"},"Wood and Paper UI - Boards":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Boards.aseprite"},"Wood and Paper UI - Buttons Large":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Buttons Large.aseprite"},"Wood and Paper UI - Buttons":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Wood and Paper Buttons.aseprite"},"Wood and Paper UI Button Cooldown":{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Button Cooldown.aseprite"},Paper:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Paper.aseprite"},Chars:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Chars.aseprite"},CharsHero:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/CharsHero.aseprite"}},chars:{Chars:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/Chars.aseprite",map:{__unknown__:81," ":0,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26,"1":27,"2":28,"3":29,"4":30,"5":31,"6":32,"7":33,"8":34,"9":35,"0":36,"-":37,"!":46,":":50,"%":78,"/":40,"<":85,">":86,";":87,"{":88,"}":89}},CharsHero:{path:"./sprites/Treasure Hunters/Wood and Paper UI/Aseprite/CharsHero.aseprite",map:{__unknown__:0," ":0,a:1,b:2,c:3,d:4,e:5,f:6,g:7,h:8,i:9,j:10,k:11,l:12,m:13,n:14,o:15,p:16,q:17,r:18,s:19,t:20,u:21,v:22,w:23,x:24,y:25,z:26,"1":27,"2":28,"3":29,"4":30,"5":31,"6":32,"7":33,"8":34,"9":35,"0":36,"-":37}}},loading:"./sprites/Treasure Hunters/Loading.aseprite"};var WA=["game"],qA=["canvas"],Hl=class n{gameElement;canvasElement;renderer;viewport=new m(768,512);resizeListener;constructor(){Z.set("viewport",this.viewport)}ngAfterViewInit(){return L(this,null,function*(){let e=this.gameElement?.nativeElement,t=this.canvasElement?.nativeElement;if(!e)throw new Error("Game element not found!");if(!t)throw new Error("Game canvas not found!");this.resizeListener=()=>this.onResize(e),window.addEventListener("resize",this.resizeListener);let r=this.calculateZoom(e);this.renderer=new bi(t,e,r);let i=new oi(this.viewport,this.renderer,new xi,[new si(document.documentElement),new Sn(t,this.renderer.globalToLocalPoint.bind(this.renderer))]);new Bi(e).attachTo(i),i.start(120,120);let s=new Fi(As.loading,As.chars.Chars);i.loadScene(s),yield s.run(),yield s.loadAssets(As.dynamic,As.chars);let a=Un.getInstance(),l=h=>{a.setMode(h);let w=[],I=a.getCurrentLevel(),y=(h==="html"?Bn.htmlLevels:Bn.cssLevels).length;return I>y?w.push({type:"text",text:"All Levels Complete!"}):a.hasSavedProgress()&&w.push({type:"button",label:`Continue - Level ${I}`,action:()=>{c(I,h)}}),w.push({type:"button",label:a.hasSavedProgress()?"New Game":"Start Game",action:()=>L(this,null,function*(){yield a.resetProgress(),c(1,h)})}),new Pr(w,()=>L(this,null,function*(){i.loadScene(yield f())}))},c=(h,w)=>{let I=w==="html"?Bn.htmlLevels:Bn.cssLevels,b=I.findIndex(g=>g.id===h),y=b<I.length-1;i.loadScene(new Gi(w,h,()=>L(this,null,function*(){i.loadScene(yield f())}),()=>{if(y){let g=I[b+1];c(g.id,w)}else i.loadScene(l(w))},y))},d=new Zi({onRegisterSuccess:()=>L(this,null,function*(){console.log("Registration successful!"),yield a.initialize(),i.loadScene(yield f())}),onLoginRequest:()=>{console.log("Login requested from register"),i.loadScene(u)},onBack:()=>L(this,null,function*(){console.log("Back from register"),i.loadScene(yield f())})}),u=new zi({onLoginSuccess:()=>L(this,null,function*(){console.log("Login successful!"),yield a.initialize(),i.loadScene(yield f())}),onRegisterRequest:()=>{console.log("Register requested from login"),i.loadScene(d)},onBack:()=>L(this,null,function*(){console.log("Back from login"),i.loadScene(yield f())})}),f=()=>L(this,null,function*(){let h=[{type:"button",label:"HTML Mode",action:()=>{i.loadScene(l("html"))}},{type:"button",label:"CSS Mode",action:()=>{i.loadScene(l("css"))}}];return ye.isAuthenticated?h.push({type:"button",label:"Logout",variant:"secondary",action:()=>L(this,null,function*(){yield ye.logout(),console.log("User logged out"),i.loadScene(yield f())})}):(h.push({type:"button",label:"Login",variant:"secondary",action:()=>{i.loadScene(u)}}),(yield jl.isRegistrationEnabled())&&h.push({type:"button",label:"Register",variant:"secondary",action:()=>{i.loadScene(d)}})),new Pr(h,void 0)});yield jl.initialize(),yield ye.initialize(),ye.isAuthenticated?(yield a.initialize(),console.log("User already logged in:",ye.currentUser?.email)):console.log("No active session");let p=yield f();i.loadScene(p)})}ngOnDestroy(){this.resizeListener&&window.removeEventListener("resize",this.resizeListener)}calculateZoom(e){let t=e.clientWidth,r=e.clientHeight,i=t/this.viewport.width,o=r/this.viewport.height;return Math.min(i,o)}onResize(e){if(!this.renderer)return;let t=this.calculateZoom(e);this.renderer.setZoom(t),this.renderer.setViewport(this.viewport)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Od({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(t&1&&Da(WA,5)(qA,5),t&2){let i;Ma(i=Aa())&&(r.gameElement=i.first),Ma(i=Aa())&&(r.canvasElement=i.first)}},decls:7,vars:0,consts:[["game",""],["canvas",""],["rel","preconnect","href",To`https://fonts.googleapis.com`],["rel","preconnect","href",To`https://fonts.gstatic.com`,"crossorigin",""],["href",To`https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@700&display=swap`,"rel","stylesheet"],[1,"main"]],template:function(t,r){t&1&&(No(0,"link",2)(1,"link",3)(2,"link",4),Ao(3,"div",5,0),No(5,"canvas",null,1),ko())},styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}"]})};Xd(Hl,{providers:[qm()]}).catch(n=>console.error(n));
